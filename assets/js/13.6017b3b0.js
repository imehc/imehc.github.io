"use strict";(self.webpackChunkanch=self.webpackChunkanch||[]).push([["13"],{88828(e,t,i){i.d(t,{initViewer:()=>T});var l=i(38279),s=i(30571),a=i(7487),n=i(53526),o=i(40459),r=i(22661),c=i(97168),m=i(87253),d=i(74511),p=i(17506);let u=class{viewer;stopTime=null;constructor(e){this.viewer=e.viewer,this.analysis(e)}analysis(e){let t=this.viewer;if(e.play){t.scene.globe.enableLighting=!0,t.shadows=!0;let i=new Date(e.day||new Date().toISOString().split("T")[0]),l=e.startTime??8,s=e.stopTime??18,a=new Date(i);a.setHours(l,0,0,0);let n=new Date(i);n.setHours(s,0,0,0),t.clock.startTime=m.A.fromDate(a),t.clock.stopTime=m.A.fromDate(n),t.clock.clockRange=e.clockRange??d.A.LOOP_STOP,t.clock.clockStep=e.clockStep??p.A.SYSTEM_CLOCK_MULTIPLIER,t.clock.multiplier=e.multiplier??500,this.stopTime?t.clock.currentTime=this.stopTime.clone():t.clock.currentTime=m.A.fromDate(a),t.clock.shouldAnimate=!0}else this.stopTime=t.clock.currentTime.clone(),t.clock.shouldAnimate=!1}play(e,t,i,l){this.analysis({viewer:this.viewer,play:!0,day:e,startTime:t,stopTime:i,multiplier:l,clockRange:d.A.LOOP_STOP,clockStep:p.A.SYSTEM_CLOCK_MULTIPLIER})}pause(){this.analysis({viewer:this.viewer,play:!1})}reset(){this.stopTime=null,this.viewer.scene.globe.enableLighting=!1,this.viewer.shadows=!1,this.viewer.clock.shouldAnimate=!1}clear(){this.reset()}};function T(e){let t=new l.A(e,{baseLayerPicker:!1,timeline:!0,fullscreenButton:!1,geocoder:!1,homeButton:!1,infoBox:!1,sceneModePicker:!1,selectionIndicator:!1,navigationHelpButton:!1});t.scene.debugShowFramesPerSecond=!0,t.imageryLayers.remove(t.imageryLayers.get(0)),t.scene.terrainProvider=new s.A({}),t.scene.globe.depthTestAgainstTerrain=!0;let i=new a.A({url:"//data.mars3d.cn/tile/img/{z}/{x}/{y}.jpg"});t.imageryLayers.addImageryProvider(i),t.cesiumWidget.screenSpaceEventHandler.removeInputAction(n.A.LEFT_CLICK),t.cesiumWidget.screenSpaceEventHandler.removeInputAction(n.A.LEFT_DOUBLE_CLICK),new r.A(t,{enableCompass:!0,enableZoomControls:!0}),o.A.fromUrl("/cesium/02/data/tileset.json").then(e=>{t.scene.primitives.add(e),t.zoomTo(e)}).catch(e=>{console.error("\u52A0\u8F7D3D Tiles\u5931\u8D25:",e)});let m=new c.GUI;m.domElement.style.position="fixed",m.domElement.style.top="50%",m.domElement.style.transform="translateY(-50%)",m.domElement.style.left="0";let d=null,p={date:new Date().toISOString().split("T")[0],startTime:8,stopTime:18,multiplier:500,isPlaying:!1,\u64AD\u653E:()=>{p.isPlaying?console.warn("\u65E5\u7167\u5206\u6790\u5DF2\u5728\u64AD\u653E\u4E2D"):(d?d.play(p.date,p.startTime,p.stopTime,p.multiplier):d=new u({viewer:t,play:!0,day:p.date,startTime:p.startTime,stopTime:p.stopTime,multiplier:p.multiplier}),p.isPlaying=!0)},\u6682\u505C:()=>{d&&(d.pause(),p.isPlaying=!1)},\u6E05\u9664:()=>{d&&(d.clear(),d=null),p.isPlaying=!1}},T=m.addFolder("\u53C2\u6570\u8BBE\u7F6E");T.add(p,"date").name("\u65E5\u671F (YYYY-MM-DD)").listen(),T.add(p,"startTime",0,23,1).name("\u5F00\u59CB\u65F6\u95F4 (\u5C0F\u65F6)").listen(),T.add(p,"stopTime",0,23,1).name("\u7ED3\u675F\u65F6\u95F4 (\u5C0F\u65F6)").listen(),T.add(p,"multiplier",1,2e3,10).name("\u65F6\u95F4\u6D41\u901D\u901F\u7387").listen(),T.open();let h=m.addFolder("\u72B6\u6001\u663E\u793A");h.add(p,"isPlaying").name("\u64AD\u653E\u72B6\u6001").listen(),h.open();let g=m.addFolder("\u64CD\u4F5C");return g.add(p,"\u64AD\u653E"),g.add(p,"\u6682\u505C"),g.add(p,"\u6E05\u9664"),g.open(),{viewer:t,gui:m,cleanup:()=>{d&&d.clear()}}}}}]);