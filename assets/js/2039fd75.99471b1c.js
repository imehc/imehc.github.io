"use strict";(self.webpackChunkanch=self.webpackChunkanch||[]).push([["888"],{31504(e,n,i){i.r(n),i.d(n,{metadata:()=>s,default:()=>j,frontMatter:()=>c,contentTitle:()=>h,toc:()=>x,assets:()=>o});var s=JSON.parse('{"id":"web/cesium/basic/10","title":"\u81EA\u5B9A\u4E49 Shader \u6750\u8D28\u7279\u6548","description":"\u672C\u793A\u4F8B\u5C55\u793A\u5982\u4F55\u5728 Cesium \u4E2D\u4F7F\u7528 CustomShader \u4E3A 3D Tiles \u6A21\u578B\u6DFB\u52A0\u81EA\u5B9A\u4E49\u7740\u8272\u6548\u679C\u3002\u901A\u8FC7\u7F16\u5199 GLSL \u7740\u8272\u5668\u4EE3\u7801\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u6E10\u53D8\u8272\u3001\u52A8\u6001\u5149\u5708\u3001\u7EB9\u7406\u8D34\u56FE\u7B49\u4E30\u5BCC\u7684\u89C6\u89C9\u6548\u679C\u3002","source":"@site/docs/web/cesium/basic/10.mdx","sourceDirName":"web/cesium/basic","slug":"/web/cesium/basic/10","permalink":"/web/cesium/basic/10","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"Javascript","permalink":"/tags/javascript"}],"version":"current","lastUpdatedBy":"imehc","lastUpdatedAt":1768360202000,"sidebarPosition":10,"frontMatter":{"sidebar_position":10,"title":"\u81EA\u5B9A\u4E49 Shader \u6750\u8D28\u7279\u6548","tags":["Javascript"]},"sidebar":"webSidebar","previous":{"title":"3D \u6A21\u578B\u52A0\u8F7D\u4E0E\u5730\u5F62\u8D34\u5408","permalink":"/web/cesium/basic/09"},"next":{"title":"\u70B9\u51FB\u83B7\u53D6 3D Tiles \u5C5E\u6027","permalink":"/web/cesium/basic/11"}}'),r=i(35656),l=i(75395),t=i(57140),d=i(82044);function a(){let e=(0,t.useRef)(null);return(0,t.useEffect)(()=>{let n,s,r=e.current;if(r)return Promise.all([i.e("4014"),i.e("4803"),i.e("8897"),i.e("8375"),i.e("2708"),i.e("5766"),i.e("2905"),i.e("3799")]).then(i.bind(i,18650)).then(async({initViewer:e})=>{let i=await e(r);n=i.viewer,s=i.gui}),()=>{n&&!n.isDestroyed()&&n.destroy(),s&&s.destroy()}},[]),(0,r.jsx)(d.A,{children:(0,r.jsx)("div",{className:"tw:size-full",ref:e})})}let c={sidebar_position:10,title:"\u81EA\u5B9A\u4E49 Shader \u6750\u8D28\u7279\u6548",tags:["Javascript"]},h="\u81EA\u5B9A\u4E49 Shader \u6750\u8D28\u7279\u6548",o={},x=[{value:"\u6838\u5FC3\u529F\u80FD",id:"\u6838\u5FC3\u529F\u80FD",level:2},{value:"CustomShader \u7B80\u4ECB",id:"customshader-\u7B80\u4ECB",level:3},{value:"\u7740\u8272\u5668\u53D8\u91CF\u7CFB\u7EDF",id:"\u7740\u8272\u5668\u53D8\u91CF\u7CFB\u7EDF",level:3},{value:"\u5185\u7F6E\u53D8\u91CF\u548C\u51FD\u6570",id:"\u5185\u7F6E\u53D8\u91CF\u548C\u51FD\u6570",level:3},{value:"\u5173\u952E\u4EE3\u7801",id:"\u5173\u952E\u4EE3\u7801",level:2},{value:"\u521D\u59CB\u5316 Viewer \u5E76\u52A0\u8F7D 3D Tiles",id:"\u521D\u59CB\u5316-viewer-\u5E76\u52A0\u8F7D-3d-tiles",level:3},{value:"\u7EAF\u6E10\u53D8\u8272\u6548\u679C",id:"\u7EAF\u6E10\u53D8\u8272\u6548\u679C",level:3},{value:"\u52A8\u6001\u5149\u5708\u6548\u679C",id:"\u52A8\u6001\u5149\u5708\u6548\u679C",level:3},{value:"\u7EB9\u7406\u8D34\u56FE\u6548\u679C",id:"\u7EB9\u7406\u8D34\u56FE\u6548\u679C",level:3},{value:"\u5E94\u7528\u573A\u666F",id:"\u5E94\u7528\u573A\u666F",level:2},{value:"\u667A\u6167\u57CE\u5E02\u53EF\u89C6\u5316",id:"\u667A\u6167\u57CE\u5E02\u53EF\u89C6\u5316",level:3},{value:"\u6570\u5B57\u5B6A\u751F",id:"\u6570\u5B57\u5B6A\u751F",level:3},{value:"\u5EFA\u7B51\u89C4\u5212\u4E0E\u8BBE\u8BA1",id:"\u5EFA\u7B51\u89C4\u5212\u4E0E\u8BBE\u8BA1",level:3},{value:"\u6587\u65C5\u5C55\u793A",id:"\u6587\u65C5\u5C55\u793A",level:3},{value:"\u6027\u80FD\u4F18\u5316\u6280\u5DE7",id:"\u6027\u80FD\u4F18\u5316\u6280\u5DE7",level:2},{value:"\u7740\u8272\u5668\u4EE3\u7801\u4F18\u5316",id:"\u7740\u8272\u5668\u4EE3\u7801\u4F18\u5316",level:3},{value:"\u7EB9\u7406\u4F18\u5316",id:"\u7EB9\u7406\u4F18\u5316",level:3},{value:"\u52A8\u753B\u6027\u80FD",id:"\u52A8\u753B\u6027\u80FD",level:3},{value:"\u5E38\u89C1\u95EE\u9898",id:"\u5E38\u89C1\u95EE\u9898",level:2},{value:"\u7740\u8272\u5668\u4E0D\u751F\u6548",id:"\u7740\u8272\u5668\u4E0D\u751F\u6548",level:3},{value:"\u7EB9\u7406\u663E\u793A\u5F02\u5E38",id:"\u7EB9\u7406\u663E\u793A\u5F02\u5E38",level:3},{value:"\u52A8\u753B\u5361\u987F",id:"\u52A8\u753B\u5361\u987F",level:3},{value:"\u6A21\u578B\u989C\u8272\u8FC7\u4EAE\u6216\u8FC7\u6697",id:"\u6A21\u578B\u989C\u8272\u8FC7\u4EAE\u6216\u8FC7\u6697",level:3},{value:"Varying \u53D8\u91CF\u672A\u5B9A\u4E49",id:"varying-\u53D8\u91CF\u672A\u5B9A\u4E49",level:3},{value:"\u6CD5\u5411\u91CF\u5224\u65AD\u4E0D\u51C6\u786E",id:"\u6CD5\u5411\u91CF\u5224\u65AD\u4E0D\u51C6\u786E",level:3},{value:"\u6CE8\u610F\u4E8B\u9879",id:"\u6CE8\u610F\u4E8B\u9879",level:2},{value:"\u53C2\u8003\u8D44\u6599",id:"\u53C2\u8003\u8D44\u6599",level:2}];function u(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"\u81EA\u5B9A\u4E49-shader-\u6750\u8D28\u7279\u6548",children:"\u81EA\u5B9A\u4E49 Shader \u6750\u8D28\u7279\u6548"})}),"\n",(0,r.jsx)(n.p,{children:"\u672C\u793A\u4F8B\u5C55\u793A\u5982\u4F55\u5728 Cesium \u4E2D\u4F7F\u7528 CustomShader \u4E3A 3D Tiles \u6A21\u578B\u6DFB\u52A0\u81EA\u5B9A\u4E49\u7740\u8272\u6548\u679C\u3002\u901A\u8FC7\u7F16\u5199 GLSL \u7740\u8272\u5668\u4EE3\u7801\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u6E10\u53D8\u8272\u3001\u52A8\u6001\u5149\u5708\u3001\u7EB9\u7406\u8D34\u56FE\u7B49\u4E30\u5BCC\u7684\u89C6\u89C9\u6548\u679C\u3002"}),"\n",(0,r.jsx)(a,{}),"\n",(0,r.jsx)(n.h2,{id:"\u6838\u5FC3\u529F\u80FD",children:"\u6838\u5FC3\u529F\u80FD"}),"\n",(0,r.jsx)(n.h3,{id:"customshader-\u7B80\u4ECB",children:"CustomShader \u7B80\u4ECB"}),"\n",(0,r.jsx)(n.p,{children:"CustomShader \u662F Cesium \u63D0\u4F9B\u7684\u81EA\u5B9A\u4E49\u7740\u8272\u5668 API\uFF0C\u5141\u8BB8\u5F00\u53D1\u8005\u5BF9 3D Tiles \u6A21\u578B\u8FDB\u884C\u81EA\u5B9A\u4E49\u6E32\u67D3\uFF1A"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"GLSL \u7F16\u7A0B"}),"\uFF1A\u4F7F\u7528\u6807\u51C6\u7684 GLSL\uFF08OpenGL Shading Language\uFF09\u7F16\u5199\u7740\u8272\u5668\u4EE3\u7801"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u9876\u70B9\u7740\u8272\u5668"}),"\uFF1A\u5904\u7406\u6A21\u578B\u9876\u70B9\u6570\u636E\uFF0C\u63A7\u5236\u51E0\u4F55\u5F62\u72B6\u548C\u4F4D\u7F6E"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u7247\u5143\u7740\u8272\u5668"}),"\uFF1A\u5904\u7406\u50CF\u7D20\u7740\u8272\uFF0C\u5B9E\u73B0\u5404\u79CD\u6750\u8D28\u548C\u5149\u7167\u6548\u679C"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u7075\u6D3B\u63A7\u5236"}),"\uFF1A\u53EF\u4EE5\u8BBF\u95EE\u6A21\u578B\u5750\u6807\u3001\u6CD5\u5411\u91CF\u3001\u7EB9\u7406\u5750\u6807\u7B49\u5C5E\u6027"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u5B9E\u65F6\u6E32\u67D3"}),"\uFF1A\u7740\u8272\u5668\u5728 GPU \u4E0A\u5B9E\u65F6\u6267\u884C\uFF0C\u6027\u80FD\u4F18\u5F02"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u7740\u8272\u5668\u53D8\u91CF\u7CFB\u7EDF",children:"\u7740\u8272\u5668\u53D8\u91CF\u7CFB\u7EDF"}),"\n",(0,r.jsx)(n.p,{children:"CustomShader \u652F\u6301\u4E09\u79CD\u53D8\u91CF\u7C7B\u578B\uFF1A"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Varyings"}),"\uFF1A\u4ECE\u9876\u70B9\u7740\u8272\u5668\u4F20\u9012\u5230\u7247\u5143\u7740\u8272\u5668\u7684\u63D2\u503C\u53D8\u91CF"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Uniforms"}),"\uFF1A\u5916\u90E8\u4F20\u5165\u7684\u5E38\u91CF\u6570\u636E\uFF08\u5982\u7EB9\u7406\u3001\u65F6\u95F4\u3001\u53C2\u6570\u7B49\uFF09"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Attributes"}),"\uFF1A\u6A21\u578B\u7684\u9876\u70B9\u5C5E\u6027\uFF08\u4F4D\u7F6E\u3001\u6CD5\u5411\u91CF\u7B49\uFF09"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u5185\u7F6E\u53D8\u91CF\u548C\u51FD\u6570",children:"\u5185\u7F6E\u53D8\u91CF\u548C\u51FD\u6570"}),"\n",(0,r.jsx)(n.p,{children:"Cesium \u63D0\u4F9B\u4E86\u4E30\u5BCC\u7684\u5185\u7F6E\u53D8\u91CF\u548C\u51FD\u6570\uFF1A"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"fsInput.attributes.positionMC"}),"\uFF1A\u6A21\u578B\u5750\u6807\u7CFB\u4E2D\u7684\u9876\u70B9\u4F4D\u7F6E"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"czm_frameNumber"}),"\uFF1A\u5F53\u524D\u5E27\u6570\uFF0C\u7528\u4E8E\u521B\u5EFA\u52A8\u753B\u6548\u679C"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"czm_modelMaterial"}),"\uFF1A\u6750\u8D28\u5C5E\u6027\uFF08diffuse\u3001specular \u7B49\uFF09"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"texture()"}),"\uFF1AGLSL \u7EB9\u7406\u91C7\u6837\u51FD\u6570"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u5173\u952E\u4EE3\u7801",children:"\u5173\u952E\u4EE3\u7801"}),"\n",(0,r.jsx)(n.h3,{id:"\u521D\u59CB\u5316-viewer-\u5E76\u52A0\u8F7D-3d-tiles",children:"\u521D\u59CB\u5316 Viewer \u5E76\u52A0\u8F7D 3D Tiles"}),"\n",(0,r.jsx)(n.p,{children:"\u521B\u5EFA Cesium Viewer \u5E76\u52A0\u8F7D 3D Tiles \u6570\u636E\u96C6\uFF08viewer.ts\uFF09\uFF1A"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'export async function initViewer(el: HTMLElement) {\n  const viewer = new Viewer(el, {\n    baseLayerPicker: false,      // \u9690\u85CF\u5E95\u56FE\u9009\u62E9\u5668\n    animation: false,            // \u9690\u85CF\u52A8\u753B\u63A7\u4EF6\n    timeline: false,             // \u9690\u85CF\u65F6\u95F4\u8F74\n    fullscreenButton: false,     // \u9690\u85CF\u5168\u5C4F\u6309\u94AE\n    geocoder: false,             // \u9690\u85CF\u5730\u7406\u7F16\u7801\u641C\u7D22\u6846\n    homeButton: false,           // \u9690\u85CF\u4E3B\u9875\u6309\u94AE\n    infoBox: false,              // \u9690\u85CF\u4FE1\u606F\u6846\n    sceneModePicker: false,      // \u9690\u85CF\u573A\u666F\u6A21\u5F0F\u9009\u62E9\u5668\n    selectionIndicator: false,   // \u9690\u85CF\u9009\u62E9\u6307\u793A\u5668\n    navigationHelpButton: false, // \u9690\u85CF\u5BFC\u822A\u5E2E\u52A9\u6309\u94AE\n  });\n\n  viewer.scene.debugShowFramesPerSecond = true; // \u663E\u793A\u5E27\u7387\n\n  // \u914D\u7F6E\u81EA\u5B9A\u4E49\u5E95\u56FE\n  viewer.imageryLayers.remove(viewer.imageryLayers.get(0));\n  const xyz = new UrlTemplateImageryProvider({\n    url: "//data.mars3d.cn/tile/img/{z}/{x}/{y}.jpg",\n  });\n  viewer.imageryLayers.addImageryProvider(xyz);\n\n  // \u79FB\u9664\u9ED8\u8BA4\u5730\u5F62\n  viewer.scene.terrainProvider = new EllipsoidTerrainProvider({});\n\n  // \u52A0\u8F7D 3D Tiles \u6570\u636E\u96C6\n  const tileset = await Cesium3DTileset.fromUrl("/cesium/02/data/tileset.json");\n  tileset.debugShowBoundingVolume = true;  // \u663E\u793A\u5305\u56F4\u76D2\uFF08\u8C03\u8BD5\u7528\uFF09\n  viewer.scene.primitives.add(tileset);\n  viewer.zoomTo(tileset);\n\n  return { viewer, gui };\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u7EAF\u6E10\u53D8\u8272\u6548\u679C",children:"\u7EAF\u6E10\u53D8\u8272\u6548\u679C"}),"\n",(0,r.jsx)(n.p,{children:"\u4F7F\u7528\u7247\u5143\u7740\u8272\u5668\u521B\u5EFA\u5782\u76F4\u6E10\u53D8\u8272\u6548\u679C\uFF1A"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"function pureGradientColor(viewer: Viewer, tileset: Cesium3DTileset) {\n  const customShader = new CustomShader({\n    // \u7247\u5143\u7740\u8272\u5668\n    fragmentShaderText: `\n      void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material) {\n        vec3 positionMC = fsInput.attributes.positionMC;\n        // \u6839\u636E\u6A21\u578B Y \u5750\u6807\uFF08\u9AD8\u5EA6\uFF09\u8BA1\u7B97\u6E10\u53D8\u8272\n        material.diffuse = vec3(\n          0.0,                        // \u7EA2\u8272\u5206\u91CF\u4E3A 0\n          1.0 - positionMC.y * 0.005, // \u7EFF\u8272\u968F\u9AD8\u5EA6\u9012\u51CF\n          1.0 - positionMC.y * 0.0015 // \u84DD\u8272\u968F\u9AD8\u5EA6\u7F13\u6162\u9012\u51CF\n        );\n      }\n    `,\n  });\n  tileset.customShader = customShader;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u52A8\u6001\u5149\u5708\u6548\u679C",children:"\u52A8\u6001\u5149\u5708\u6548\u679C"}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u6E10\u53D8\u8272\u57FA\u7840\u4E0A\u6DFB\u52A0\u52A8\u6001\u626B\u63CF\u5149\u5708\uFF1A"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"function pureGradientColorWithDynamicLight(viewer: Viewer, tileset: Cesium3DTileset) {\n  const customShader = new CustomShader({\n    fragmentShaderText: `\n      void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material) {\n        vec3 positionMC = fsInput.attributes.positionMC;\n\n        // \u57FA\u7840\u6E10\u53D8\u8272\n        material.diffuse = vec3(\n          0.0,\n          1.0 - positionMC.y * 0.005,\n          1.0 - positionMC.y * 0.0015\n        );\n\n        // \u52A8\u6001\u5149\u5708\u53C2\u6570\n        float _baseHeight = 18.0;   // \u5EFA\u7B51\u57FA\u7840\u9AD8\u5EA6\n        float _heightRange = 60.0;  // \u9AD8\u4EAE\u8303\u56F4\n        float _glowRange = 120.0;   // \u5149\u5708\u79FB\u52A8\u8303\u56F4\n\n        // \u8BA1\u7B97\u76F8\u5BF9\u9AD8\u5EA6\n        float vtxf_height = positionMC.y - _baseHeight;\n\n        // \u521B\u5EFA\u547C\u5438\u6548\u679C\uFF08\u57FA\u4E8E\u5E27\u6570\u7684\u6B63\u5F26\u6CE2\u52A8\uFF09\n        float vtxf_a11 = fract(czm_frameNumber / 360.0) * 3.14159265 * 2.0;\n        float vtxf_a12 = vtxf_height / _heightRange + sin(vtxf_a11) * 0.1;\n        material.diffuse *= vec3(vtxf_a12, vtxf_a12, vtxf_a12);\n\n        // \u521B\u5EFA\u4E0A\u4E0B\u79FB\u52A8\u7684\u5149\u5708\n        float vtxf_a13 = fract(czm_frameNumber / 360.0); // 360 \u63A7\u5236\u901F\u5EA6\n        float vtxf_h = clamp(vtxf_height / _glowRange, 0.0, 1.0);\n        vtxf_a13 = abs(vtxf_a13 - 0.5) * 2.0;\n        float vtxf_diff = step(0.01, abs(vtxf_h - vtxf_a13)); // 0.01 \u63A7\u5236\u5149\u5708\u7C97\u7EC6\n        material.diffuse += material.diffuse * (1.0 - vtxf_diff);\n      }\n    `,\n  });\n  tileset.customShader = customShader;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u7EB9\u7406\u8D34\u56FE\u6548\u679C",children:"\u7EB9\u7406\u8D34\u56FE\u6548\u679C"}),"\n",(0,r.jsx)(n.p,{children:"\u4F7F\u7528\u81EA\u5B9A\u4E49\u7EB9\u7406\u4E3A\u5EFA\u7B51\u7269\u5899\u9762\u8D34\u56FE\uFF1A"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'function texture1(viewer: Viewer, tileset: Cesium3DTileset) {\n  const customShader = new CustomShader({\n    // \u5B9A\u4E49 varying \u53D8\u91CF\uFF0C\u7528\u4E8E\u5728\u9876\u70B9\u7740\u8272\u5668\u548C\u7247\u5143\u7740\u8272\u5668\u95F4\u4F20\u9012\u6570\u636E\n    varyings: {\n      v_normalMC: VaryingType.VEC3,  // \u6CD5\u5411\u91CF\n      v_st: VaryingType.VEC3,        // \u7EB9\u7406\u5750\u6807\n    },\n\n    // \u5B9A\u4E49 uniform \u53D8\u91CF\uFF0C\u4F20\u5165\u7EB9\u7406\u8D44\u6E90\n    uniforms: {\n      u_texture: {\n        value: new TextureUniform({\n          url: "/cesium/10/wall.jpg",\n        }),\n        type: UniformType.SAMPLER_2D,\n      },\n      u_texture1: {\n        value: new TextureUniform({\n          url: "/cesium/10/wall1.jpg",\n        }),\n        type: UniformType.SAMPLER_2D,\n      },\n    },\n\n    // \u9876\u70B9\u7740\u8272\u5668\uFF1A\u4F20\u9012\u6CD5\u5411\u91CF\u7ED9\u7247\u5143\u7740\u8272\u5668\n    vertexShaderText: `\n      void vertexMain(VertexInput vsInput, inout czm_modelVertexOutput vsOutput) {\n        v_normalMC = vsInput.attributes.normalMC;\n        v_st = vsInput.attributes.positionMC;\n      }\n    `,\n\n    // \u7247\u5143\u7740\u8272\u5668\uFF1A\u6839\u636E\u6CD5\u5411\u91CF\u548C\u4F4D\u7F6E\u8FDB\u884C\u7EB9\u7406\u6620\u5C04\n    fragmentShaderText: `\n      void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material) {\n        vec3 positionMC = fsInput.attributes.positionMC;\n\n        // \u7EB9\u7406\u5E73\u94FA\u5C3A\u5BF8\n        float width = 30.0;\n        float height = 70.0;\n        vec3 rgb;\n\n        // \u5224\u65AD\u662F\u5426\u4E3A\u5C4B\u9876\uFF08\u6CD5\u5411\u91CF\u63A5\u8FD1\u5411\u4E0A\uFF09\n        if (dot(vec3(0.0, 1.0, 0.0), v_normalMC) > 0.95) {\n          // \u5C4B\u9876\u4F7F\u7528\u7EAF\u8272\n          material.diffuse = vec3(0.65, 0.65, 0.65);\n        } else {\n          // \u5899\u9762\u8D34\u56FE\n          float textureX = 0.0;\n          float dotYAxis = dot(vec3(0.0, 0.0, 1.0), v_normalMC);\n\n          // \u6839\u636E\u6CD5\u5411\u91CF\u5224\u65AD\u662F\u524D\u540E\u9762\u8FD8\u662F\u5DE6\u53F3\u9762\n          if (dotYAxis > 0.71 || dotYAxis < -0.71) {\n            textureX = mod(positionMC.x, width) / width;  // \u524D\u540E\u9762\u7528 X \u5750\u6807\n          } else {\n            textureX = mod(positionMC.z, width) / width;  // \u5DE6\u53F3\u9762\u7528 Z \u5750\u6807\n          }\n\n          float textureY = mod(positionMC.y, height) / height;\n\n          // \u6839\u636E\u5EFA\u7B51\u9AD8\u5EA6\u4F7F\u7528\u4E0D\u540C\u7EB9\u7406\n          if (positionMC.y > 40.0) {\n            rgb = texture(u_texture, vec2(textureX, textureY)).rgb;\n          } else {\n            rgb = texture(u_texture1, vec2(textureX, textureY)).rgb;\n          }\n\n          material.diffuse = rgb;\n        }\n      }\n    `,\n  });\n  tileset.customShader = customShader;\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u5E94\u7528\u573A\u666F",children:"\u5E94\u7528\u573A\u666F"}),"\n",(0,r.jsx)(n.h3,{id:"\u667A\u6167\u57CE\u5E02\u53EF\u89C6\u5316",children:"\u667A\u6167\u57CE\u5E02\u53EF\u89C6\u5316"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u5EFA\u7B51\u5206\u7C7B\u5C55\u793A"}),"\uFF1A\u6839\u636E\u5EFA\u7B51\u7528\u9014\u3001\u9AD8\u5EA6\u3001\u5E74\u4EE3\u7B49\u5C5E\u6027\u8BBE\u7F6E\u4E0D\u540C\u989C\u8272"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u6570\u636E\u53EF\u89C6\u5316"}),"\uFF1A\u5C06\u4E1A\u52A1\u6570\u636E\uFF08\u4EBA\u53E3\u5BC6\u5EA6\u3001\u623F\u4EF7\u3001\u80FD\u8017\u7B49\uFF09\u6620\u5C04\u4E3A\u989C\u8272"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u591C\u666F\u6A21\u62DF"}),"\uFF1A\u4F7F\u7528\u81EA\u5B9A\u4E49\u7740\u8272\u5668\u6A21\u62DF\u57CE\u5E02\u591C\u666F\u3001\u706F\u5149\u6548\u679C"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u70ED\u529B\u56FE\u53E0\u52A0"}),"\uFF1A\u5728\u5EFA\u7B51\u8868\u9762\u663E\u793A\u70ED\u529B\u5206\u5E03"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u6570\u5B57\u5B6A\u751F",children:"\u6570\u5B57\u5B6A\u751F"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u72B6\u6001\u76D1\u63A7"}),"\uFF1A\u6839\u636E\u8BBE\u5907\u8FD0\u884C\u72B6\u6001\u52A8\u6001\u6539\u53D8\u6A21\u578B\u989C\u8272"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u5F02\u5E38\u544A\u8B66"}),"\uFF1A\u7528\u95EA\u70C1\u3001\u9AD8\u4EAE\u7B49\u6548\u679C\u6807\u8BC6\u5F02\u5E38\u533A\u57DF"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u6D41\u7A0B\u6F14\u793A"}),"\uFF1A\u4F7F\u7528\u52A8\u6001\u5149\u5708\u6A21\u62DF\u6D41\u7A0B\u6D41\u8F6C\u3001\u80FD\u91CF\u4F20\u9012"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u5386\u53F2\u56DE\u6EAF"}),"\uFF1A\u6839\u636E\u65F6\u95F4\u8F74\u6570\u636E\u52A8\u6001\u6539\u53D8\u6A21\u578B\u5916\u89C2"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u5EFA\u7B51\u89C4\u5212\u4E0E\u8BBE\u8BA1",children:"\u5EFA\u7B51\u89C4\u5212\u4E0E\u8BBE\u8BA1"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u65E5\u7167\u5206\u6790"}),"\uFF1A\u53EF\u89C6\u5316\u5EFA\u7B51\u7684\u65E5\u7167\u65F6\u957F\u548C\u5F3A\u5EA6"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u6750\u8D28\u9884\u89C8"}),"\uFF1A\u5B9E\u65F6\u9884\u89C8\u4E0D\u540C\u6750\u8D28\u3001\u7EB9\u7406\u7684\u6548\u679C"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u98CE\u683C\u5BF9\u6BD4"}),"\uFF1A\u5FEB\u901F\u5207\u6362\u4E0D\u540C\u914D\u8272\u65B9\u6848\u548C\u88C5\u9970\u98CE\u683C"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u5F71\u54CD\u8BC4\u4F30"}),"\uFF1A\u5C55\u793A\u65B0\u5EFA\u5EFA\u7B51\u5BF9\u5468\u8FB9\u73AF\u5883\u7684\u89C6\u89C9\u5F71\u54CD"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u6587\u65C5\u5C55\u793A",children:"\u6587\u65C5\u5C55\u793A"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u5386\u53F2\u590D\u539F"}),"\uFF1A\u4F7F\u7528\u81EA\u5B9A\u4E49\u6750\u8D28\u8FD8\u539F\u53E4\u5EFA\u7B51\u7684\u539F\u59CB\u5916\u89C2"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u666F\u533A\u5BFC\u89C8"}),"\uFF1A\u7528\u989C\u8272\u548C\u5149\u6548\u533A\u5206\u4E0D\u540C\u529F\u80FD\u533A\u57DF"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u591C\u6E38\u6A21\u62DF"}),"\uFF1A\u6A21\u62DF\u666F\u533A\u591C\u95F4\u706F\u5149\u79C0\u6548\u679C"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u56DB\u5B63\u53D8\u6362"}),"\uFF1A\u52A8\u6001\u5C55\u793A\u5EFA\u7B51\u5728\u4E0D\u540C\u5B63\u8282\u7684\u5916\u89C2"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u6027\u80FD\u4F18\u5316\u6280\u5DE7",children:"\u6027\u80FD\u4F18\u5316\u6280\u5DE7"}),"\n",(0,r.jsx)(n.h3,{id:"\u7740\u8272\u5668\u4EE3\u7801\u4F18\u5316",children:"\u7740\u8272\u5668\u4EE3\u7801\u4F18\u5316"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"\u51CF\u5C11\u6761\u4EF6\u5206\u652F"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// \u274C \u907F\u514D\uFF1A\u8FC7\u591A\u7684 if-else \u5206\u652F\nif (height < 10.0) {\n  color = vec3(1.0, 0.0, 0.0);\n} else if (height < 20.0) {\n  color = vec3(0.0, 1.0, 0.0);\n} else if (height < 30.0) {\n  color = vec3(0.0, 0.0, 1.0);\n}\n\n// \u2705 \u63A8\u8350\uFF1A\u4F7F\u7528\u6570\u5B66\u51FD\u6570\u66FF\u4EE3\u5206\u652F\ncolor = mix(\n  vec3(1.0, 0.0, 0.0),\n  vec3(0.0, 1.0, 0.0),\n  smoothstep(10.0, 20.0, height)\n);\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"\u9884\u8BA1\u7B97\u5E38\u91CF"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// \u274C \u907F\u514D\uFF1A\u5728\u7740\u8272\u5668\u4E2D\u91CD\u590D\u8BA1\u7B97\nfloat pi = 3.14159265;\nfloat angle = pi * 2.0;\n\n// \u2705 \u63A8\u8350\uFF1A\u4F7F\u7528 uniform \u4F20\u5165\u9884\u8BA1\u7B97\u503C\nuniforms: {\n  u_twoPi: {\n    value: Math.PI * 2,\n    type: UniformType.FLOAT,\n  }\n}\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"\u51CF\u5C11\u7EB9\u7406\u91C7\u6837"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// \u274C \u907F\u514D\uFF1A\u591A\u6B21\u91C7\u6837\u540C\u4E00\u7EB9\u7406\nvec3 color1 = texture(u_texture, uv).rgb;\nvec3 color2 = texture(u_texture, uv).rgb;\n\n// \u2705 \u63A8\u8350\uFF1A\u91C7\u6837\u4E00\u6B21\uFF0C\u590D\u7528\u7ED3\u679C\nvec3 color = texture(u_texture, uv).rgb;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u7EB9\u7406\u4F18\u5316",children:"\u7EB9\u7406\u4F18\u5316"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"\u538B\u7F29\u7EB9\u7406\u683C\u5F0F"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// \u2705 \u4F7F\u7528\u538B\u7F29\u683C\u5F0F\uFF08JPEG\uFF09\u800C\u975E PNG\uFF08\u5982\u679C\u4E0D\u9700\u8981\u900F\u660E\u5EA6\uFF09\n// \u2705 \u63A7\u5236\u7EB9\u7406\u5206\u8FA8\u7387\uFF081024x1024 \u6216 2048x2048\uFF09\n// \u2705 \u4F7F\u7528 mipmaps \u63D0\u9AD8\u8FDC\u8DDD\u79BB\u6E32\u67D3\u6027\u80FD\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"\u7EB9\u7406\u590D\u7528"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// \u2705 \u5BF9\u76F8\u540C\u6750\u8D28\u7684\u5EFA\u7B51\u4F7F\u7528\u540C\u4E00\u5F20\u7EB9\u7406\n// \u2705 \u4F7F\u7528\u7EB9\u7406\u56FE\u96C6\u51CF\u5C11\u7EB9\u7406\u6570\u91CF\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u52A8\u753B\u6027\u80FD",children:"\u52A8\u753B\u6027\u80FD"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"\u63A7\u5236\u66F4\u65B0\u9891\u7387"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// \u4F7F\u7528 czm_frameNumber \u7684\u9664\u6570\u63A7\u5236\u52A8\u753B\u901F\u5EA6\n// \u6570\u503C\u8D8A\u5927\uFF0C\u901F\u5EA6\u8D8A\u6162\uFF0C\u6027\u80FD\u6D88\u8017\u8D8A\u5C0F\nfloat vtxf_a13 = fract(czm_frameNumber / 360.0); // 360 = \u6162\u901F\nfloat vtxf_a13 = fract(czm_frameNumber / 60.0);  // 60 = \u5FEB\u901F\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"\u907F\u514D\u590D\u6742\u8BA1\u7B97"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// \u274C \u907F\u514D\uFF1A\u5728\u7247\u5143\u7740\u8272\u5668\u4E2D\u8FDB\u884C\u590D\u6742\u6570\u5B66\u8FD0\u7B97\nfloat complexValue = pow(sin(positionMC.y * 0.1), 2.0) * cos(time);\n\n// \u2705 \u63A8\u8350\uFF1A\u7B80\u5316\u8BA1\u7B97\u6216\u79FB\u5230\u9876\u70B9\u7740\u8272\u5668\nfloat simpleValue = sin(positionMC.y * 0.1);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u5E38\u89C1\u95EE\u9898",children:"\u5E38\u89C1\u95EE\u9898"}),"\n",(0,r.jsx)(n.h3,{id:"\u7740\u8272\u5668\u4E0D\u751F\u6548",children:"\u7740\u8272\u5668\u4E0D\u751F\u6548"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u539F\u56E0"}),"\uFF1A\u7740\u8272\u5668\u4EE3\u7801\u6709\u8BED\u6CD5\u9519\u8BEF\u6216\u903B\u8F91\u9519\u8BEF\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89E3\u51B3\u65B9\u6848"}),"\uFF1A"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u6253\u5F00\u6D4F\u89C8\u5668\u63A7\u5236\u53F0\u67E5\u770B\u9519\u8BEF\u4FE1\u606F"}),"\n",(0,r.jsx)(n.li,{children:"\u786E\u4FDD GLSL \u8BED\u6CD5\u6B63\u786E\uFF08vec3\u3001float\u3001\u5206\u53F7\u7B49\uFF09"}),"\n",(0,r.jsx)(n.li,{children:"\u68C0\u67E5\u53D8\u91CF\u540D\u662F\u5426\u6B63\u786E"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// \u274C \u9519\u8BEF\uFF1A\u7F3A\u5C11\u5206\u53F7\nmaterial.diffuse = vec3(1.0, 0.0, 0.0)\n\n// \u2705 \u6B63\u786E\nmaterial.diffuse = vec3(1.0, 0.0, 0.0);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u7EB9\u7406\u663E\u793A\u5F02\u5E38",children:"\u7EB9\u7406\u663E\u793A\u5F02\u5E38"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u539F\u56E0"}),"\uFF1A\u7EB9\u7406\u8DEF\u5F84\u9519\u8BEF\u3001UV \u5750\u6807\u8BA1\u7B97\u4E0D\u6B63\u786E\u3001\u7EB9\u7406\u5C3A\u5BF8\u53C2\u6570\u4E0D\u5339\u914D\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89E3\u51B3\u65B9\u6848"}),"\uFF1A"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'// 1. \u786E\u4FDD\u7EB9\u7406\u8DEF\u5F84\u6B63\u786E\nuniforms: {\n  u_texture: {\n    value: new TextureUniform({\n      url: "/cesium/10/wall.jpg",  // \u68C0\u67E5\u8DEF\u5F84\u662F\u5426\u53EF\u8BBF\u95EE\n    }),\n    type: UniformType.SAMPLER_2D,\n  },\n}\n\n// 2. \u8C03\u6574\u7EB9\u7406\u5E73\u94FA\u53C2\u6570\nfloat width = 30.0;   // \u8C03\u6574\u4EE5\u5339\u914D\u5B9E\u9645\u5EFA\u7B51\u5C3A\u5BF8\nfloat height = 70.0;\n\n// 3. \u68C0\u67E5 UV \u5750\u6807\u8BA1\u7B97\nfloat textureX = mod(positionMC.x, width) / width;\nfloat textureY = mod(positionMC.y, height) / height;\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u52A8\u753B\u5361\u987F",children:"\u52A8\u753B\u5361\u987F"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u539F\u56E0"}),"\uFF1A\u7740\u8272\u5668\u8BA1\u7B97\u91CF\u8FC7\u5927\u3001\u5E27\u7387\u8FC7\u4F4E\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89E3\u51B3\u65B9\u6848"}),"\uFF1A"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// 1. \u7B80\u5316\u7740\u8272\u5668\u4EE3\u7801\uFF0C\u51CF\u5C11\u8BA1\u7B97\u91CF\n// 2. \u964D\u4F4E\u52A8\u753B\u66F4\u65B0\u9891\u7387\nfloat vtxf_a13 = fract(czm_frameNumber / 600.0); // \u589E\u5927\u5206\u6BCD\n\n// 3. \u68C0\u67E5\u662F\u5426\u6709\u5176\u4ED6\u6027\u80FD\u95EE\u9898\nviewer.scene.debugShowFramesPerSecond = true; // \u663E\u793A\u5E27\u7387\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u6A21\u578B\u989C\u8272\u8FC7\u4EAE\u6216\u8FC7\u6697",children:"\u6A21\u578B\u989C\u8272\u8FC7\u4EAE\u6216\u8FC7\u6697"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u539F\u56E0"}),"\uFF1A\u989C\u8272\u503C\u8D85\u51FA [0, 1] \u8303\u56F4\uFF0C\u6216\u5149\u7167\u8BA1\u7B97\u95EE\u9898\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89E3\u51B3\u65B9\u6848"}),"\uFF1A"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// 1. \u4F7F\u7528 clamp \u9650\u5236\u989C\u8272\u8303\u56F4\nmaterial.diffuse = clamp(material.diffuse, 0.0, 1.0);\n\n// 2. \u8C03\u6574\u5149\u7167\u6A21\u578B\nconst customShader = new CustomShader({\n  lightingModel: LightingModel.UNLIT,  // \u65E0\u5149\u7167\n  // \u6216\n  lightingModel: LightingModel.PBR,    // \u57FA\u4E8E\u7269\u7406\u7684\u6E32\u67D3\n});\n"})}),"\n",(0,r.jsx)(n.h3,{id:"varying-\u53D8\u91CF\u672A\u5B9A\u4E49",children:"Varying \u53D8\u91CF\u672A\u5B9A\u4E49"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u539F\u56E0"}),"\uFF1A\u5728\u7247\u5143\u7740\u8272\u5668\u4E2D\u4F7F\u7528\u4E86\u672A\u5728 varyings \u4E2D\u58F0\u660E\u7684\u53D8\u91CF\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89E3\u51B3\u65B9\u6848"}),"\uFF1A"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// \u5FC5\u987B\u5148\u5728 varyings \u4E2D\u58F0\u660E\nvaryings: {\n  v_normalMC: VaryingType.VEC3,\n  v_st: VaryingType.VEC3,\n},\n\n// \u7136\u540E\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8D4B\u503C\nvertexShaderText: `\n  void vertexMain(VertexInput vsInput, inout czm_modelVertexOutput vsOutput) {\n    v_normalMC = vsInput.attributes.normalMC;\n    v_st = vsInput.attributes.positionMC;\n  }\n`,\n\n// \u6700\u540E\u5728\u7247\u5143\u7740\u8272\u5668\u4E2D\u4F7F\u7528\nfragmentShaderText: `\n  void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material) {\n    // \u73B0\u5728\u53EF\u4EE5\u4F7F\u7528 v_normalMC \u548C v_st\n  }\n`,\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u6CD5\u5411\u91CF\u5224\u65AD\u4E0D\u51C6\u786E",children:"\u6CD5\u5411\u91CF\u5224\u65AD\u4E0D\u51C6\u786E"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u539F\u56E0"}),"\uFF1A\u6CD5\u5411\u91CF\u9608\u503C\u8BBE\u7F6E\u4E0D\u5408\u7406\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89E3\u51B3\u65B9\u6848"}),"\uFF1A"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// \u8C03\u6574\u70B9\u4E58\u9608\u503C\u4EE5\u9002\u5E94\u4E0D\u540C\u7684\u5EFA\u7B51\u7ED3\u6784\n// dot() \u8FD4\u56DE\u503C\u8303\u56F4 [-1, 1]\uFF0C\u503C\u8D8A\u63A5\u8FD1 1 \u8868\u793A\u8D8A\u5E73\u884C\n\n// \u5C4B\u9876\u5224\u65AD\uFF08\u63A5\u8FD1\u5782\u76F4\u5411\u4E0A\uFF09\nif (dot(vec3(0.0, 1.0, 0.0), v_normalMC) > 0.95) {\n  // \u5C4B\u9876\n}\n\n// \u5899\u9762\u65B9\u5411\u5224\u65AD\uFF08cos(45\xb0) \u2248 0.71\uFF09\nif (dotYAxis > 0.71 || dotYAxis < -0.71) {\n  // \u524D\u540E\u9762\n} else {\n  // \u5DE6\u53F3\u9762\n}\n\n// \u53EF\u4EE5\u6839\u636E\u5B9E\u9645\u60C5\u51B5\u8C03\u6574\u9608\u503C 0.95\u30010.71\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u6CE8\u610F\u4E8B\u9879",children:"\u6CE8\u610F\u4E8B\u9879"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"GLSL \u7248\u672C\u517C\u5BB9\u6027"}),"\uFF1ACesium \u4F7F\u7528 GLSL ES\uFF0C\u786E\u4FDD\u7740\u8272\u5668\u4EE3\u7801\u7B26\u5408\u89C4\u8303"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u5750\u6807\u7CFB\u7EDF"}),"\uFF1ApositionMC \u662F\u6A21\u578B\u5750\u6807\u7CFB\uFF0C\u6839\u636E\u6A21\u578B\u539F\u70B9\u4E0D\u540C\u53EF\u80FD\u9700\u8981\u8C03\u6574\u8BA1\u7B97"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u6027\u80FD\u5F71\u54CD"}),"\uFF1A\u590D\u6742\u7684\u7740\u8272\u5668\u4F1A\u964D\u4F4E\u6E32\u67D3\u6027\u80FD\uFF0C\u7279\u522B\u662F\u5728\u79FB\u52A8\u8BBE\u5907\u4E0A"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u6D4F\u89C8\u5668\u517C\u5BB9\u6027"}),"\uFF1A\u67D0\u4E9B\u9AD8\u7EA7 GLSL \u7279\u6027\u53EF\u80FD\u5728\u65E7\u6D4F\u89C8\u5668\u4E0A\u4E0D\u652F\u6301"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u8C03\u8BD5\u5DE5\u5177"}),"\uFF1A\u4F7F\u7528\u6D4F\u89C8\u5668\u7684 WebGL Inspector \u6216 Spector.js \u8C03\u8BD5\u7740\u8272\u5668"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u6570\u636E\u8303\u56F4"}),"\uFF1A\u786E\u4FDD\u989C\u8272\u503C\u5728 [0, 1] \u8303\u56F4\u5185\uFF0C\u5426\u5219\u4F1A\u51FA\u73B0\u5F02\u5E38\u663E\u793A"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u6CD5\u5411\u91CF\u4F7F\u7528"}),"\uFF1A\u6CD5\u5411\u91CF\u5FC5\u987B\u5F52\u4E00\u5316\uFF0C\u5426\u5219\u70B9\u4E58\u8BA1\u7B97\u4F1A\u4E0D\u51C6\u786E"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u7EB9\u7406\u5750\u6807"}),"\uFF1AUV \u5750\u6807\u5E94\u5728 [0, 1] \u8303\u56F4\u5185\uFF0C\u4F7F\u7528 mod() \u51FD\u6570\u5B9E\u73B0\u5E73\u94FA"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u52A8\u753B\u540C\u6B65"}),"\uFF1A\u4F7F\u7528 czm_frameNumber \u786E\u4FDD\u52A8\u753B\u5728\u6240\u6709\u8BBE\u5907\u4E0A\u4FDD\u6301\u4E00\u81F4"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u5185\u5B58\u7BA1\u7406"}),"\uFF1A\u5207\u6362\u7740\u8272\u5668\u65F6\uFF0C\u65E7\u7684\u7EB9\u7406\u8D44\u6E90\u4F1A\u81EA\u52A8\u91CA\u653E"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u53C2\u8003\u8D44\u6599",children:"\u53C2\u8003\u8D44\u6599"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://cesium.com/learn/cesiumjs/ref-doc/CustomShader.html",children:"Cesium CustomShader API"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/CesiumGS/cesium/wiki/Fabric",children:"Cesium Fabric \u6750\u8D28\u7CFB\u7EDF"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.khronos.org/opengl/wiki/OpenGL_Shading_Language",children:"GLSL \u7740\u8272\u5668\u8BED\u8A00\u89C4\u8303"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://webglfundamentals.org/",children:"WebGL \u57FA\u7840\u6559\u7A0B"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/jiawanlong/Cesium-Examples",children:"Cesium Examples"})}),"\n"]})]})}function j(e={}){let{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}}}]);