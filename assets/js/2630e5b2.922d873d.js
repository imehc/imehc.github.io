(self.webpackChunkanch=self.webpackChunkanch||[]).push([["5053"],{146(e,t,n){"use strict";n.r(t),n.d(t,{metadata:()=>r,default:()=>b,frontMatter:()=>m,contentTitle:()=>x,toc:()=>j,assets:()=>v});var r=JSON.parse('{"id":"web/three/basic/auto-move","title":"\u81EA\u52A8\u79FB\u52A8Hook","description":"\u6838\u5FC3\u6982\u5FF5","source":"@site/docs/web/three/basic/23-auto-move.mdx","sourceDirName":"web/three/basic","slug":"/web/three/basic/auto-move","permalink":"/chiyu/web/three/basic/auto-move","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"Javascript","permalink":"/chiyu/tags/javascript"}],"version":"current","lastUpdatedBy":"imehc","lastUpdatedAt":1768181947000,"sidebarPosition":23,"frontMatter":{"sidebar_position":23,"title":"\u81EA\u52A8\u79FB\u52A8Hook","tags":["Javascript"]},"sidebar":"webSidebar","previous":{"title":"\u4F7F\u7528\u63D2\u503C(Lerp)","permalink":"/chiyu/web/three/basic/lerp"},"next":{"title":"\u623F\u5B50","permalink":"/chiyu/web/three/advanced/house"}}'),i=n(35656),l=n(75395),o=n(99005),s=n(6124),a=n(60140),c=n(82044),d=n(45225),u=n(57140);let h=({selected:e=!1,keyMap:t,...n})=>{let r=(0,u.useRef)(null),[l,o]=(0,u.useState)(e);return(0,d.D)((e,n)=>{r.current&&(t.KeyA&&l&&(r.current.position.x-=n),t.KeyD&&l&&(r.current.position.x+=+n),t.KeyW&&l&&(r.current.position.z-=n),t.KeyS&&l&&(r.current.position.z+=+n))}),(0,i.jsxs)("mesh",{ref:r,...n,onPointerDown:e=>{e.stopPropagation(),o(!l)},children:[(0,i.jsx)("boxGeometry",{}),(0,i.jsx)("meshBasicMaterial",{color:65280,wireframe:!l})]})},p=()=>(0,i.jsxs)("div",{className:"absolute left-2 top-2",children:["Select one or more cubes,",(0,i.jsx)("br",{}),"then W,A,S,D to move."]}),f=()=>{let e,t=(e=(0,u.useRef)({}),(0,u.useEffect)(()=>{let t=t=>{console.log("code: ",t.code),e.current[t.code]="keydown"===t.type};return document.addEventListener("keydown",t),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",t),document.removeEventListener("keyup",t)}}),e.current);return(0,i.jsxs)(c.A,{children:[(0,i.jsxs)(a.Hl,{camera:{position:[1,2,3]},children:[(0,i.jsx)(h,{position:[-1.5,.5,0],keyMap:t}),(0,i.jsx)(h,{position:[0,.5,0],keyMap:t,selected:!0}),(0,i.jsx)(h,{position:[1.5,.5,0],keyMap:t}),(0,i.jsx)(o.N,{}),(0,i.jsx)("axesHelper",{args:[5]}),(0,i.jsx)("gridHelper",{}),(0,i.jsx)(s.U,{})]}),(0,i.jsx)(p,{})]})},m={sidebar_position:23,title:"\u81EA\u52A8\u79FB\u52A8Hook",tags:["Javascript"]},x="\u81EA\u52A8\u79FB\u52A8Hook",v={},j=[{value:"\u6838\u5FC3\u6982\u5FF5",id:"\u6838\u5FC3\u6982\u5FF5",level:2}];function y(e){let t={h1:"h1",h2:"h2",header:"header",li:"li",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"\u81EA\u52A8\u79FB\u52A8hook",children:"\u81EA\u52A8\u79FB\u52A8Hook"})}),"\n",(0,i.jsx)(f,{}),"\n",(0,i.jsx)(t.h2,{id:"\u6838\u5FC3\u6982\u5FF5",children:"\u6838\u5FC3\u6982\u5FF5"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"useKeyboard Hook"}),": \u81EA\u5B9A\u4E49 Hook\uFF0C\u5168\u5C40\u76D1\u542C\u952E\u76D8\u4E8B\u4EF6\u5E76\u7EF4\u62A4\u72B6\u6001\u5B57\u5178"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"useRef vs useState"}),": useRef \u7528\u4E8E\u4E0D\u9700\u8981\u89E6\u53D1\u91CD\u65B0\u6E32\u67D3\u7684\u6570\u636E\uFF0C\u6027\u80FD\u66F4\u4F18"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"\u4E8B\u4EF6\u76D1\u542C\u6E05\u7406"}),": useEffect \u8FD4\u56DE\u6E05\u7406\u51FD\u6570\u79FB\u9664\u4E8B\u4EF6\u76D1\u542C\uFF0C\u9632\u6B62\u5185\u5B58\u6CC4\u6F0F"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"\u5E27\u65E0\u5173\u79FB\u52A8"}),": \u4F7F\u7528 delta \u65F6\u95F4\u53C2\u6570\u8BA1\u7B97\u8DDD\u79BB\uFF0C\u786E\u4FDD\u79FB\u52A8\u901F\u5EA6\u4E0E\u5E27\u7387\u65E0\u5173"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"\u9009\u4E2D\u72B6\u6001\u7BA1\u7406"}),": \u901A\u8FC7 onClick \u5207\u6362\u9009\u4E2D\u72B6\u6001\uFF0C\u9009\u4E2D\u65F6\u624D\u54CD\u5E94\u952E\u76D8\u8F93\u5165"]}),"\n"]})]})}function b(e={}){let{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(y,{...e})}):y(e)}},6124(e,t,n){"use strict";n.d(t,{U:()=>a});var r=n(57140),i=n(45225),l=n(15697),o=n.n(l);function s(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}function a({showPanel:e=0,className:t,parent:n}){let l=function(e,t=[],n){let[i,l]=r.useState();return r.useLayoutEffect(()=>{let t=e();return l(t),s(void 0,t),()=>s(void 0,null)},t),i}(()=>new(o()),[]);return r.useEffect(()=>{if(l){let r=n&&n.current||document.body;l.showPanel(e),null==r||r.appendChild(l.dom);let o=(null!=t?t:"").split(" ").filter(e=>e);o.length&&l.dom.classList.add(...o);let s=(0,i.j)(()=>l.begin()),a=(0,i.k)(()=>l.end());return()=>{o.length&&l.dom.classList.remove(...o),null==r||r.removeChild(l.dom),s(),a()}}},[n,l,t,e]),null}},15697(e){var t;(t=function(){function e(e){return i.appendChild(e.dom),e}function n(e){for(var t=0;t<i.children.length;t++)i.children[t].style.display=t===e?"block":"none";r=e}var r=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",function(e){e.preventDefault(),n(++r%i.children.length)},!1);var l=(performance||Date).now(),o=l,s=0,a=e(new t.Panel("FPS","#0ff","#002")),c=e(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var d=e(new t.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:i,addPanel:e,showPanel:n,begin:function(){l=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(c.update(e-l,200),e>o+1e3&&(a.update(1e3*s/(e-o),100),o=e,s=0,d)){var t=performance.memory;d.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){l=this.end()},domElement:i,setMode:n}}).Panel=function(e,t,n){var r=1/0,i=0,l=Math.round,o=l(window.devicePixelRatio||1),s=80*o,a=48*o,c=3*o,d=2*o,u=3*o,h=15*o,p=74*o,f=30*o,m=document.createElement("canvas");m.width=s,m.height=a,m.style.cssText="width:80px;height:48px";var x=m.getContext("2d");return x.font="bold "+9*o+"px Helvetica,Arial,sans-serif",x.textBaseline="top",x.fillStyle=n,x.fillRect(0,0,s,a),x.fillStyle=t,x.fillText(e,c,d),x.fillRect(u,h,p,f),x.fillStyle=n,x.globalAlpha=.9,x.fillRect(u,h,p,f),{dom:m,update:function(a,v){r=Math.min(r,a),i=Math.max(i,a),x.fillStyle=n,x.globalAlpha=1,x.fillRect(0,0,s,h),x.fillStyle=t,x.fillText(l(a)+" "+e+" ("+l(r)+"-"+l(i)+")",c,d),x.drawImage(m,u+o,h,p-o,f,u,h,p-o,f),x.fillRect(u+p-o,h,o,f),x.fillStyle=n,x.globalAlpha=.9,x.fillRect(u+p-o,h,o,l((1-a/v)*f))}}},e.exports=t}}]);