(self.webpackChunkanch=self.webpackChunkanch||[]).push([["2928"],{76359(e,t,n){"use strict";n.d(t,{Z:()=>g});var i=n(44320),s=n(46975),r=n(57140),o=n(67199),l=n(65730),a=Object.defineProperty,h=(e,t,n)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?a(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n,n};let c=new o.O9p(0,0,0,"YXZ"),u=new o.Pq0,d={type:"change"},m={type:"lock"},p={type:"unlock"},x=Math.PI/2;class f extends l.Q{constructor(e,t){super(),h(this,"camera"),h(this,"domElement"),h(this,"isLocked"),h(this,"minPolarAngle"),h(this,"maxPolarAngle"),h(this,"pointerSpeed"),h(this,"onMouseMove",e=>{this.domElement&&!1!==this.isLocked&&(c.setFromQuaternion(this.camera.quaternion),c.y-=.002*e.movementX*this.pointerSpeed,c.x-=.002*e.movementY*this.pointerSpeed,c.x=Math.max(x-this.maxPolarAngle,Math.min(x-this.minPolarAngle,c.x)),this.camera.quaternion.setFromEuler(c),this.dispatchEvent(d))}),h(this,"onPointerlockChange",()=>{this.domElement&&(this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(m),this.isLocked=!0):(this.dispatchEvent(p),this.isLocked=!1))}),h(this,"onPointerlockError",()=>{console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}),h(this,"connect",e=>{this.domElement=e||this.domElement,this.domElement&&(this.domElement.ownerDocument.addEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError))}),h(this,"disconnect",()=>{this.domElement&&(this.domElement.ownerDocument.removeEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError))}),h(this,"dispose",()=>{this.disconnect()}),h(this,"getObject",()=>this.camera),h(this,"direction",new o.Pq0(0,0,-1)),h(this,"getDirection",e=>e.copy(this.direction).applyQuaternion(this.camera.quaternion)),h(this,"moveForward",e=>{u.setFromMatrixColumn(this.camera.matrix,0),u.crossVectors(this.camera.up,u),this.camera.position.addScaledVector(u,e)}),h(this,"moveRight",e=>{u.setFromMatrixColumn(this.camera.matrix,0),this.camera.position.addScaledVector(u,e)}),h(this,"lock",()=>{this.domElement&&this.domElement.requestPointerLock()}),h(this,"unlock",()=>{this.domElement&&this.domElement.ownerDocument.exitPointerLock()}),this.camera=e,this.domElement=t,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,t&&this.connect(t)}}let g=r.forwardRef(({domElement:e,selector:t,onChange:n,onLock:o,onUnlock:l,enabled:a=!0,makeDefault:h,...c},u)=>{let{camera:d,...m}=c,p=(0,s.C)(e=>e.setEvents),x=(0,s.C)(e=>e.gl),g=(0,s.C)(e=>e.camera),y=(0,s.C)(e=>e.invalidate),b=(0,s.C)(e=>e.events),v=(0,s.C)(e=>e.get),z=(0,s.C)(e=>e.set),w=d||g,E=e||b.connected||x.domElement,P=r.useMemo(()=>new f(w),[w]);return r.useEffect(()=>{if(a){P.connect(E);let e=v().events.compute;return p({compute(e,t){let n=t.size.width/2,i=t.size.height/2;t.pointer.set(n/t.size.width*2-1,-(2*(i/t.size.height))+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),()=>{P.disconnect(),p({compute:e})}}},[a,P]),r.useEffect(()=>{let e=e=>{y(),n&&n(e)};P.addEventListener("change",e),o&&P.addEventListener("lock",o),l&&P.addEventListener("unlock",l);let i=()=>P.lock(),s=t?Array.from(document.querySelectorAll(t)):[document];return s.forEach(e=>e&&e.addEventListener("click",i)),()=>{P.removeEventListener("change",e),o&&P.removeEventListener("lock",o),l&&P.removeEventListener("unlock",l),s.forEach(e=>e?e.removeEventListener("click",i):void 0)}},[n,o,l,t,P,y]),r.useEffect(()=>{if(h){let e=v().controls;return z({controls:P}),()=>z({controls:e})}},[h,P]),r.createElement("primitive",(0,i.A)({ref:u,object:P},m))})},82310(e,t,n){"use strict";n.d(t,{U:()=>a});var i=n(57140),s=n(46975),r=n(15697),o=n.n(r);function l(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}function a({showPanel:e=0,className:t,parent:n}){let r=function(e,t=[],n){let[s,r]=i.useState();return i.useLayoutEffect(()=>{let t=e();return r(t),l(void 0,t),()=>l(void 0,null)},t),s}(()=>new(o()),[]);return i.useEffect(()=>{if(r){let i=n&&n.current||document.body;r.showPanel(e),null==i||i.appendChild(r.dom);let o=(null!=t?t:"").split(" ").filter(e=>e);o.length&&r.dom.classList.add(...o);let l=(0,s.j)(()=>r.begin()),a=(0,s.k)(()=>r.end());return()=>{o.length&&r.dom.classList.remove(...o),null==i||i.removeChild(r.dom),l(),a()}}},[n,r,t,e]),null}},15697(e){var t;(t=function(){function e(e){return s.appendChild(e.dom),e}function n(e){for(var t=0;t<s.children.length;t++)s.children[t].style.display=t===e?"block":"none";i=e}var i=0,s=document.createElement("div");s.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",s.addEventListener("click",function(e){e.preventDefault(),n(++i%s.children.length)},!1);var r=(performance||Date).now(),o=r,l=0,a=e(new t.Panel("FPS","#0ff","#002")),h=e(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=e(new t.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:s,addPanel:e,showPanel:n,begin:function(){r=(performance||Date).now()},end:function(){l++;var e=(performance||Date).now();if(h.update(e-r,200),e>o+1e3&&(a.update(1e3*l/(e-o),100),o=e,l=0,c)){var t=performance.memory;c.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){r=this.end()},domElement:s,setMode:n}}).Panel=function(e,t,n){var i=1/0,s=0,r=Math.round,o=r(window.devicePixelRatio||1),l=80*o,a=48*o,h=3*o,c=2*o,u=3*o,d=15*o,m=74*o,p=30*o,x=document.createElement("canvas");x.width=l,x.height=a,x.style.cssText="width:80px;height:48px";var f=x.getContext("2d");return f.font="bold "+9*o+"px Helvetica,Arial,sans-serif",f.textBaseline="top",f.fillStyle=n,f.fillRect(0,0,l,a),f.fillStyle=t,f.fillText(e,h,c),f.fillRect(u,d,m,p),f.fillStyle=n,f.globalAlpha=.9,f.fillRect(u,d,m,p),{dom:x,update:function(a,g){i=Math.min(i,a),s=Math.max(s,a),f.fillStyle=n,f.globalAlpha=1,f.fillRect(0,0,l,d),f.fillStyle=t,f.fillText(r(a)+" "+e+" ("+r(i)+"-"+r(s)+")",h,c),f.drawImage(x,u+o,d,m-o,p,u,d,m-o,p),f.fillRect(u+m-o,d,o,p),f.fillStyle=n,f.globalAlpha=.9,f.fillRect(u+m-o,d,o,r((1-a/g)*p))}}},e.exports=t},44320(e,t,n){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(null,arguments)}n.d(t,{A:()=>i})},65730(e,t,n){"use strict";n.d(t,{Q:()=>s});var i=Object.defineProperty;class s{constructor(){var e,t;let n;(n="symbol"!=typeof(e="_listeners")?e+"":e)in this?i(this,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):this[n]=t}addEventListener(e,t){void 0===this._listeners&&(this._listeners={});let n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;let n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;let n=this._listeners[e];if(void 0!==n){let e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;let t=this._listeners[e.type];if(void 0!==t){e.target=this;let n=t.slice(0);for(let t=0,i=n.length;t<i;t++)n[t].call(this,e);e.target=null}}}},8684(e,t,n){"use strict";n.d(t,{J:()=>s});var i=n(67199);class s extends i.DXC{constructor(e,t=0xffff00){super(new i.LoY,new i.mrM({color:t,toneMapped:!1})),this.octree=e,this.color=t,this.type="OctreeHelper",this.update()}update(){let e=[];!function t(n){for(let i=0;i<n.length;i++){let s=n[i].box.min,r=n[i].box.max;e.push(r.x,r.y,r.z),e.push(s.x,r.y,r.z),e.push(s.x,r.y,r.z),e.push(s.x,s.y,r.z),e.push(s.x,s.y,r.z),e.push(r.x,s.y,r.z),e.push(r.x,s.y,r.z),e.push(r.x,r.y,r.z),e.push(r.x,r.y,s.z),e.push(s.x,r.y,s.z),e.push(s.x,r.y,s.z),e.push(s.x,s.y,s.z),e.push(s.x,s.y,s.z),e.push(r.x,s.y,s.z),e.push(r.x,s.y,s.z),e.push(r.x,r.y,s.z),e.push(r.x,r.y,r.z),e.push(r.x,r.y,s.z),e.push(s.x,r.y,r.z),e.push(s.x,r.y,s.z),e.push(s.x,s.y,r.z),e.push(s.x,s.y,s.z),e.push(r.x,s.y,r.z),e.push(r.x,s.y,s.z),t(n[i].subTrees)}}(this.octree.subTrees),this.geometry.dispose(),this.geometry=new i.LoY,this.geometry.setAttribute("position",new i.qtW(e,3))}dispose(){this.geometry.dispose(),this.material.dispose()}}},67374(e,t,n){"use strict";n.d(t,{w:()=>s});var i=n(67199);class s{constructor(e=new i.Pq0(0,0,0),t=new i.Pq0(0,1,0),n=1){this.start=e,this.end=t,this.radius=n}clone(){return new this.constructor().copy(this)}set(e,t,n){return this.start.copy(e),this.end.copy(t),this.radius=n,this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this.radius=e.radius,this}getCenter(e){return e.copy(this.end).add(this.start).multiplyScalar(.5)}translate(e){return this.start.add(e),this.end.add(e),this}intersectsBox(e){return r(this.start.x,this.start.y,this.end.x,this.end.y,e.min.x,e.max.x,e.min.y,e.max.y,this.radius)&&r(this.start.x,this.start.z,this.end.x,this.end.z,e.min.x,e.max.x,e.min.z,e.max.z,this.radius)&&r(this.start.y,this.start.z,this.end.y,this.end.z,e.min.y,e.max.y,e.min.z,e.max.z,this.radius)}}function r(e,t,n,i,s,r,o,l,a){return(s-e<a||s-n<a)&&(e-r<a||n-r<a)&&(o-t<a||o-i<a)&&(t-l<a||i-l<a)}},29299(e,t,n){"use strict";n.d(t,{x:()=>b});var i=n(67199),s=n(67374);let r=new i.Pq0,o=new i.Pq0,l=new i.Pq0,a=new i.Pq0,h=new i.Zcv,c=new i.cZY,u=new i.cZY,d=new i.NRn,m=new i.iyt,p=new s.w,x=new i.Pq0,f=new i.Pq0,g=new i.Pq0,y=new i.Pq0;class b{constructor(e){this.box=e,this.bounds=new i.NRn,this.layers=new i.zgK,this.trianglesPerLeaf=8,this.maxLevel=16,this.subTrees=[],this.triangles=[]}addTriangle(e){return this.bounds.min.x=Math.min(this.bounds.min.x,e.a.x,e.b.x,e.c.x),this.bounds.min.y=Math.min(this.bounds.min.y,e.a.y,e.b.y,e.c.y),this.bounds.min.z=Math.min(this.bounds.min.z,e.a.z,e.b.z,e.c.z),this.bounds.max.x=Math.max(this.bounds.max.x,e.a.x,e.b.x,e.c.x),this.bounds.max.y=Math.max(this.bounds.max.y,e.a.y,e.b.y,e.c.y),this.bounds.max.z=Math.max(this.bounds.max.z,e.a.z,e.b.z,e.c.z),this.triangles.push(e),this}calcBox(){return this.box=this.bounds.clone(),this.box.min.x-=.01,this.box.min.y-=.01,this.box.min.z-=.01,this}split(e){let t;if(!this.box)return;let n=[],s=o.copy(this.box.max).sub(this.box.min).multiplyScalar(.5);for(let e=0;e<2;e++)for(let t=0;t<2;t++)for(let o=0;o<2;o++){let l=new i.NRn,a=r.set(e,t,o);l.min.copy(this.box.min).add(a.multiply(s)),l.max.copy(l.min).add(s),n.push(new b(l))}for(;t=this.triangles.pop();)for(let e=0;e<n.length;e++)n[e].box.intersectsTriangle(t)&&n[e].triangles.push(t);for(let t=0;t<n.length;t++){let i=n[t].triangles.length;i>this.trianglesPerLeaf&&e<this.maxLevel&&n[t].split(e+1),0!==i&&this.subTrees.push(n[t])}return this}build(){return this.calcBox(),this.split(0),this}getRayTriangles(e,t){for(let n=0;n<this.subTrees.length;n++){let i=this.subTrees[n];if(e.intersectsBox(i.box))if(i.triangles.length>0)for(let e=0;e<i.triangles.length;e++)-1===t.indexOf(i.triangles[e])&&t.push(i.triangles[e]);else i.getRayTriangles(e,t)}}triangleCapsuleIntersect(e,t){t.getPlane(h);let n=h.distanceToPoint(e.start)-e.radius,i=h.distanceToPoint(e.end)-e.radius;if(n>0&&i>0||n<-e.radius&&i<-e.radius)return!1;let s=Math.abs(n/(Math.abs(n)+Math.abs(i))),o=r.copy(e.start).lerp(e.end,s);if(t.containsPoint(o))return{normal:h.normal.clone(),point:o.clone(),depth:Math.abs(Math.min(n,i))};let d=e.radius*e.radius,m=c.set(e.start,e.end),p=[[t.a,t.b],[t.b,t.c],[t.c,t.a]];for(let t=0;t<p.length;t++)if(!function(e,t,n=null,i=null){let s,r,o=f.copy(e.end).sub(e.start),l=g.copy(t.end).sub(t.start),a=y.copy(t.start).sub(e.start),h=o.dot(l),c=o.dot(o),u=l.dot(l),d=l.dot(a),m=o.dot(a),p=c*u-h*h;if(1e-10>Math.abs(p)){let e=-d/u,t=(h-d)/u;Math.abs(e-.5)<Math.abs(t-.5)?(s=0,r=e):(s=1,r=t)}else r=((s=(d*h+m*u)/p)*h-d)/u;r=Math.max(0,Math.min(1,r)),s=Math.max(0,Math.min(1,s)),n&&n.copy(o).multiplyScalar(s).add(e.start),i&&i.copy(l).multiplyScalar(r).add(t.start)}(m,u.set(p[t][0],p[t][1]),l,a),l.distanceToSquared(a)<d)return{normal:l.clone().sub(a).normalize(),point:a.clone(),depth:e.radius-l.distanceTo(a)};return!1}triangleBoxIntersect(e,t){if(Math.max(t.a.x,t.b.x,t.c.x)<e.min.x||Math.min(t.a.x,t.b.x,t.c.x)>e.max.x||Math.max(t.a.y,t.b.y,t.c.y)<e.min.y||Math.min(t.a.y,t.b.y,t.c.y)>e.max.y||Math.max(t.a.z,t.b.z,t.c.z)<e.min.z||Math.min(t.a.z,t.b.z,t.c.z)>e.max.z||!e.intersectsTriangle(t))return!1;t.getPlane(h),r.x=h.normal.x>0?e.min.x:e.max.x,r.y=h.normal.y>0?e.min.y:e.max.y,r.z=h.normal.z>0?e.min.z:e.max.z;let n=h.distanceToPoint(r),i={depth:-n,normal:h.normal.clone(),point:r.clone()};return i.point.addScaledVector(i.normal,n),i}triangleSphereIntersect(e,t){if(t.getPlane(h),!e.intersectsPlane(h))return!1;let n=Math.abs(h.distanceToSphere(e)),i=e.radius*e.radius-n*n,s=h.projectPoint(e.center,r);if(t.containsPoint(e.center))return{normal:h.normal.clone(),point:s.clone(),depth:Math.abs(h.distanceToSphere(e))};let l=[[t.a,t.b],[t.b,t.c],[t.c,t.a]];for(let t=0;t<l.length;t++){c.set(l[t][0],l[t][1]),c.closestPointToPoint(s,!0,o);let n=o.distanceToSquared(e.center);if(n<i)return{normal:e.center.clone().sub(o).normalize(),point:o.clone(),depth:e.radius-Math.sqrt(n)}}return!1}getSphereTriangles(e,t){for(let n=0;n<this.subTrees.length;n++){let i=this.subTrees[n];if(e.intersectsBox(i.box))if(i.triangles.length>0)for(let e=0;e<i.triangles.length;e++)-1===t.indexOf(i.triangles[e])&&t.push(i.triangles[e]);else i.getSphereTriangles(e,t)}}getBoxTriangles(e,t){for(let n=0;n<this.subTrees.length;n++){let i=this.subTrees[n];if(e.intersectsBox(i.box))if(i.triangles.length>0)for(let e=0;e<i.triangles.length;e++)-1===t.indexOf(i.triangles[e])&&t.push(i.triangles[e]);else i.getBoxTriangles(e,t)}}getCapsuleTriangles(e,t){for(let n=0;n<this.subTrees.length;n++){let i=this.subTrees[n];if(e.intersectsBox(i.box))if(i.triangles.length>0)for(let e=0;e<i.triangles.length;e++)-1===t.indexOf(i.triangles[e])&&t.push(i.triangles[e]);else i.getCapsuleTriangles(e,t)}}boxIntersect(e){d.copy(e);let t=[],n,i=!1;this.getBoxTriangles(e,t);for(let e=0;e<t.length;e++)(n=this.triangleBoxIntersect(d,t[e]))&&(i=!0,d.translate(n.normal.multiplyScalar(n.depth)));if(i){let t=d.getCenter(x).sub(e.getCenter(r)),n=t.length();return{normal:t.normalize(),depth:n}}return!1}sphereIntersect(e){m.copy(e);let t=[],n,i=!1;this.getSphereTriangles(e,t);for(let e=0;e<t.length;e++)(n=this.triangleSphereIntersect(m,t[e]))&&(i=!0,m.center.add(n.normal.multiplyScalar(n.depth)));if(i){let t=m.center.clone().sub(e.center),n=t.length();return{normal:t.normalize(),depth:n}}return!1}capsuleIntersect(e){p.copy(e);let t=[],n,i=!1;this.getCapsuleTriangles(p,t);for(let e=0;e<t.length;e++)(n=this.triangleCapsuleIntersect(p,t[e]))&&(i=!0,p.translate(n.normal.multiplyScalar(n.depth)));if(i){let t=p.getCenter(x).sub(e.getCenter(r)),n=t.length();return{normal:t.normalize(),depth:n}}return!1}rayIntersect(e){let t=[],n,i,s=1e100;this.getRayTriangles(e,t);for(let o=0;o<t.length;o++){let l=e.intersectTriangle(t[o].a,t[o].b,t[o].c,!0,r);if(l){let r=l.sub(e.origin).length();s>r&&(i=l.clone().add(e.origin),s=r,n=t[o])}}return s<1e100&&{distance:s,triangle:n,position:i}}fromGraphNode(e){return e.updateWorldMatrix(!0,!0),e.traverse(e=>{if(!0===e.isMesh&&this.layers.test(e.layers)){let t,n=!1;null!==e.geometry.index?(n=!0,t=e.geometry.toNonIndexed()):t=e.geometry;let s=t.getAttribute("position");for(let t=0;t<s.count;t+=3){let n=new i.Pq0().fromBufferAttribute(s,t),r=new i.Pq0().fromBufferAttribute(s,t+1),o=new i.Pq0().fromBufferAttribute(s,t+2);n.applyMatrix4(e.matrixWorld),r.applyMatrix4(e.matrixWorld),o.applyMatrix4(e.matrixWorld),this.addTriangle(new i.lMl(n,r,o))}n&&t.dispose()}}),this.build(),this}clear(){return this.box=null,this.bounds.makeEmpty(),this.subTrees.length=0,this.triangles.length=0,this}}}}]);