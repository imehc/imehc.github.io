"use strict";(self.webpackChunkanch=self.webpackChunkanch||[]).push([["4209"],{97064(e,t,s){s.d(t,{initViewer:()=>d});var i=s(77359),r=s(88708),a=s(61910),o=s(74497),n=s(68654),l=s(65731),c=s(126),h=s(15264),g=s(22661),m=s(62456),u=s(97168);function d(e){let t=new i.A(e,{baseLayerPicker:!1,animation:!1,timeline:!1,fullscreenButton:!1,geocoder:!1,homeButton:!1,infoBox:!1,sceneModePicker:!1,selectionIndicator:!1,navigationHelpButton:!1});t.scene.debugShowFramesPerSecond=!0,t.imageryLayers.remove(t.imageryLayers.get(0)),t.scene.terrainProvider=new r.A({});let s=new u.GUI;s.domElement.style.position="fixed",s.domElement.style.bottom="50%",s.domElement.style.transform="translateY(-50%)",s.domElement.style.left="0";let d={map1:"/cesium/01/word.jpg",map2:"/cesium/01/world_b.jpg",amap:"",xyz:"//data.mars3d.cn/tile/img/{z}/{x}/{y}.jpg",mapbox:"https://api.mapbox.com/v4/mapbox.satellite/{z}/{x}/{y}.webp?sku=1016Ab1dNMw2X&access_token=pk.eyJ1IjoidHJhbXBqd2wiLCJhIjoiY2xhYXIxbHExMDN3dzN3cGliOHdrMThxMiJ9.6er2aYb1EBjSsK1-t9d2-w",wms:"https://mesonet.agron.iastate.edu/cgi-bin/wms/nexrad/n0r.cgi?",\u5929\u5730\u56FE:"http://t{s}.tianditu.gov.cn/",\u5F71\u50CF:"/cesium/01/word.jpg"};function y(e){return new a.A(new o.A({url:e,tileWidth:256,tileHeight:256}))}return t.imageryLayers.add(y(d.map1)),s.add({\u5E95\u56FE\u7C7B\u578B:"map1"},"\u5E95\u56FE\u7C7B\u578B",Object.keys(d)).name("\u5E95\u56FE\u7C7B\u578B").onChange(e=>{let s,i;switch(t.imageryLayers.removeAll(),e){case"map2":s=y(d.map2);break;case"amap":s=new a.A(new m.pn({style:"img",crs:"WGS84"}));break;case"xyz":i=new n.A({url:d.xyz});break;case"mapbox":i=new n.A({credit:"mapbox",url:d.mapbox});break;case"wms":i=new l.A({url:d.wms,layers:"nexrad-n0r",credit:"demo",parameters:{transparent:"true",format:"image/png"}});break;case"\u5929\u5730\u56FE":{let e=Array(18);for(let t=0;t<=18;t++)e[t]=(t+1).toString();let t=d.\u5929\u5730\u56FE+"vec_c/wmts?service=WMTS&version=1.0.0&request=GetTile&tilematrix={TileMatrix}&layer=vec&style={style}&tilerow={TileRow}&tilecol={TileCol}&tilematrixset={TileMatrixSet}&format=tiles&tk=bcc62222fc634ec736589c483de933e6";i=new c.A({url:t,layer:"vec",credit:"opts.credit",style:"default",format:"tiles",tileMatrixSetID:"c",subdomains:["0","1","2","3","4","5","6","7"],tileMatrixLabels:e,tilingScheme:new h.A,maximumLevel:18})}break;case"\u5F71\u50CF":{let e=new o.A({url:d.\u5F71\u50CF,tileWidth:256,tileHeight:256}),s=t.imageryLayers.addImageryProvider(e);s.alpha=.5,s.brightness=2,s.contrast=2,s.hue=2,s.saturation=2,t.scene.imageryLayers.lower(s),t.scene.imageryLayers.lowerToBottom(s),t.scene.imageryLayers.raise(s),t.scene.imageryLayers.raiseToTop(s),t.scene.imageryLayers.get(0),t.scene.imageryLayers.indexOf(s),t.scene.imageryLayers.contains(s)}break;default:s=y(d.map1)}s&&t.imageryLayers.add(s),i&&t.imageryLayers.addImageryProvider(i)}),new g.A(t,{enableCompass:!0,enableZoomControls:!0}),{viewer:t,gui:s}}},62456(e,t,s){s.d(t,{TS:()=>I,pn:()=>p});var i=s(61376),r=s(98477),a=s(11989),o=s(89926),n=s(23751),l=s(68654),c=s(19313),h=s(89466),g=s(49010),m=s(15264),u=class{static BD09ToGCJ02(e,t){let s=e-.0065,i=t-.006,r=Math.sqrt(s*s+i*i)-2e-5*Math.sin(52.35987755982988*i),a=Math.atan2(i,s)-3e-6*Math.cos(52.35987755982988*s);return[r*Math.cos(a),r*Math.sin(a)]}static GCJ02ToBD09(e,t){t*=1;let s=Math.sqrt((e*=1)*e+t*t)+2e-5*Math.sin(52.35987755982988*t),i=Math.atan2(t,e)+3e-6*Math.cos(52.35987755982988*e);return[s*Math.cos(i)+.0065,s*Math.sin(i)+.006]}static WGS84ToGCJ02(e,t){if(t*=1,e*=1,this.out_of_china(e,t))return[e,t];{let s=this.delta(e,t);return[e+s[0],t+s[1]]}}static GCJ02ToWGS84(e,t){if(t*=1,e*=1,this.out_of_china(e,t))return[e,t];{let s=this.delta(e,t),i=e+s[0],r=t+s[1];return[2*e-i,2*t-r]}}static delta(e,t){let s=this.transformLng(e-105,t-35),i=this.transformLat(e-105,t-35),r=t/180*3.141592653589793,a=Math.sin(r),o=Math.sqrt(a=1-.006693421622965943*a*a);return[s=180*s/(6378245/o*Math.cos(r)*3.141592653589793),i=180*i/(6378245*.9933065783770341/(a*o)*3.141592653589793)]}static transformLng(e,t){t*=1;let s=300+(e*=1)+2*t+.1*e*e+.1*e*t+.1*Math.sqrt(Math.abs(e));return s+=(20*Math.sin(6*e*3.141592653589793)+20*Math.sin(2*e*3.141592653589793))*2/3,s+=(20*Math.sin(3.141592653589793*e)+40*Math.sin(e/3*3.141592653589793))*2/3,s+=(150*Math.sin(e/12*3.141592653589793)+300*Math.sin(e/30*3.141592653589793))*2/3}static transformLat(e,t){t*=1;let s=-100+2*(e*=1)+3*t+.2*t*t+.1*e*t+.2*Math.sqrt(Math.abs(e));return s+=(20*Math.sin(6*e*3.141592653589793)+20*Math.sin(2*e*3.141592653589793))*2/3,s+=(20*Math.sin(3.141592653589793*t)+40*Math.sin(t/3*3.141592653589793))*2/3,s+=(160*Math.sin(t/12*3.141592653589793)+320*Math.sin(3.141592653589793*t/30))*2/3}static out_of_china(e,t){return t*=1,!((e*=1)>73.66&&e<135.05&&t>3.86&&t<53.55)}},d=class extends i.A{constructor(e){super(e);let t=new r.A;this._projection.project=function(e,s){return s=u.WGS84ToGCJ02(a.A.toDegrees(e.longitude),a.A.toDegrees(e.latitude)),s=t.project(new o.A(a.A.toRadians(s[0]),a.A.toRadians(s[1]))),new n.A(s.x,s.y)},this._projection.unproject=function(e,s){let i=t.unproject(e);return s=u.GCJ02ToWGS84(a.A.toDegrees(i.longitude),a.A.toDegrees(i.latitude)),new o.A(a.A.toRadians(s[0]),a.A.toRadians(s[1]))}}},y={img:"//webst{s}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}",elec:"//webrd{s}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}",cva:"//webst{s}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}"},p=class extends l.A{constructor(e={}){e.url=e.url||[e.protocol||"",y[e.style]||y.elec].join(""),e.subdomains&&e.subdomains.length||(e.subdomains=["01","02","03","04"]),"WGS84"===e.crs&&(e.tilingScheme=new d),super(e)}},f=[12890594.86,8362377.87,5591021,3481989.83,1678043.12,0],x=[75,60,45,30,15,0],w=[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,17337981.2],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,10260144.86],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,6856817.37],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,4482777.06],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-23663490511e-14,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,2555164.4],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,10322952773e-14,-323890364e-14,826088.5]],M=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[8277824516172526e-19,111320.7020463578,647795574.6671607,-4082003173.641316,10774905663.51142,-15171875531.51559,12053065338.62167,-5124939663.577472,913311935.9512032,67.5],[.00337398766765,111320.7020202162,4481351.045890365,-23393751.19931662,79682215.47186455,-115964993.2797253,97236711.15602145,-43661946.33752821,8477230.501135234,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837.749470245,992013.7397791013,-1221952.21711287,1340652.697009075,-620943.6990984312,144416.9293806241,37.5],[-3441963504368392e-19,111320.7020576856,278.2353980772752,2485758.690035394,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-3218135878613132e-19,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],A=class{constructor(){this.isWgs84=!1}getDistanceByMC(e,t){if(!e||!t||!(e=this.convertMC2LL(e)))return 0;let s=this.toRadians(e.lng),i=this.toRadians(e.lat);if(!(t=this.convertMC2LL(t)))return 0;let r=this.toRadians(t.lng),a=this.toRadians(t.lat);return this.getDistance(s,r,i,a)}getDistanceByLL(e,t){if(!e||!t)return 0;e.lng=this.getLoop(e.lng,-180,180),e.lat=this.getRange(e.lat,-74,74),t.lng=this.getLoop(t.lng,-180,180),t.lat=this.getRange(t.lat,-74,74);let s=this.toRadians(e.lng),i=this.toRadians(e.lat),r=this.toRadians(t.lng),a=this.toRadians(t.lat);return this.getDistance(s,r,i,a)}convertMC2LL(e){if(!e)return{lng:0,lat:0};let t={};if(this.isWgs84){t.lng=e.lng/20037508.34*180;let s=e.lat/20037508.34*180;return t.lat=180/Math.PI*(2*Math.atan(Math.exp(s*Math.PI/180))-Math.PI/2),{lng:t.lng.toFixed(6),lat:t.lat.toFixed(6)}}let s={lng:Math.abs(e.lng),lat:Math.abs(e.lat)},i;for(let e=0;e<f.length;e++)if(s.lat>=f[e]){i=w[e];break}return{lng:(t=this.convertor(e,i)).lng.toFixed(6),lat:t.lat.toFixed(6)}}convertLL2MC(e){if(!e)return{lng:0,lat:0};if(e.lng>180||e.lng<-180||e.lat>90||e.lat<-90)return e;if(this.isWgs84){let t={};t.lng=e.lng*Math.PI/180*6378137;let s=e.lat*Math.PI/180;return t.lat=3189068.5*Math.log((1+Math.sin(s))/(1-Math.sin(s))),{lng:parseFloat(t.lng.toFixed(2)),lat:parseFloat(t.lat.toFixed(2))}}e.lng=this.getLoop(e.lng,-180,180),e.lat=this.getRange(e.lat,-74,74);let t={lng:e.lng,lat:e.lat},s;for(let e=0;e<x.length;e++)if(t.lat>=x[e]){s=M[e];break}if(!s){for(let e=0;e<x.length;e++)if(t.lat<=-x[e]){s=M[e];break}}let i=this.convertor(e,s);return{lng:parseFloat(i.lng.toFixed(2)),lat:parseFloat(i.lat.toFixed(2))}}convertor(e,t){if(!e||!t)return{lng:0,lat:0};let s=t[0]+t[1]*Math.abs(e.lng),i=Math.abs(e.lat)/t[9],r=t[2]+t[3]*i+t[4]*i*i+t[5]*i*i*i+t[6]*i*i*i*i+t[7]*i*i*i*i*i+t[8]*i*i*i*i*i*i;return{lng:s*=e.lng<0?-1:1,lat:r*=e.lat<0?-1:1}}getDistance(e,t,s,i){return 6370996.81*Math.acos(Math.sin(s)*Math.sin(i)+Math.cos(s)*Math.cos(i)*Math.cos(t-e))}toRadians(e){return Math.PI*e/180}toDegrees(e){return 180*e/Math.PI}getRange(e,t,s){return null!=t&&(e=Math.max(e,t)),null!=s&&(e=Math.min(e,s)),e}getLoop(e,t,s){for(;e>s;)e-=s-t;for(;e<t;)e+=s-t;return e}lngLatToMercator(e){return this.convertLL2MC(e)}lngLatToPoint(e){let t=this.convertLL2MC(e);return{x:t.lng,y:t.lat}}mercatorToLngLat(e){return this.convertMC2LL(e)}pointToLngLat(e){let t={lng:e.x,lat:e.y};return this.convertMC2LL(t)}pointToPixel(e,t,s,i){if(!e)return;e=this.lngLatToMercator(e);let r=this.getZoomUnits(t);return{x:Math.round((e.lng-s.lng)/r+i.width/2),y:Math.round((s.lat-e.lat)/r+i.height/2)}}pixelToPoint(e,t,s,i){if(!e)return;let r=this.getZoomUnits(t),a=s.lng+r*(e.x-i.width/2),o=s.lat-r*(e.y-i.height/2);return this.mercatorToLngLat({lng:a,lat:o})}getZoomUnits(e){return Math.pow(2,18-e)}},_=class extends i.A{constructor(e){super(e);let t=new A;this._projection.project=function(e,s){return s=s||{},s=u.WGS84ToGCJ02(a.A.toDegrees(e.longitude),a.A.toDegrees(e.latitude)),(s=u.GCJ02ToBD09(s[0],s[1]))[0]=Math.min(s[0],180),s[0]=Math.max(s[0],-180),s[1]=Math.min(s[1],74.000022),s[1]=Math.max(s[1],-71.988531),s=t.lngLatToPoint({lng:s[0],lat:s[1]}),new n.A(s.x,s.y)},this._projection.unproject=function(e,s){return s=s||{},s=t.mercatorToLngLat({lng:e.x,lat:e.y}),s=u.BD09ToGCJ02(s.lng,s.lat),s=u.GCJ02ToWGS84(s[0],s[1]),new o.A(a.A.toRadians(s[0]),a.A.toRadians(s[1]))},this.resolutions=e.resolutions||[]}tileXYToNativeRectangle(e,t,s,i){let r=this.resolutions[s],a=e*r,o=(e+1)*r,n=((t=-t)+1)*r,l=t*r;return(0,h.A)(i)?(i.west=a,i.south=l,i.east=o,i.north=n,i):new g.A(a,l,o,n)}positionToTileXY(e,t,s){let i=this._rectangle;if(!g.A.contains(i,e))return;let r=this._projection.project(e);if(!(0,h.A)(r))return;let a=this.resolutions[t],o=Math.floor(r.x/a),l=-Math.floor(r.y/a);return(0,h.A)(s)?(s.x=o,s.y=l,s):new n.A(o,l)}},v={img:"//shangetu{s}.map.bdimg.com/it/u=x={x};y={y};z={z};v=009;type=sate&fm=46",vec:"//online{s}.map.bdimg.com/tile/?qt=tile&x={x}&y={y}&z={z}&styles=sl&v=020",custom:"//api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid={style}",traffic:"//its.map.baidu.com:8002/traffic/TrafficTileService?time={time}&label={labelStyle}&v=016&level={z}&x={x}&y={y}&scaler=2"},b=class extends l.A{constructor(e={}){if(e.url=e.url||[e.protocol||"",v[e.style]||v.custom].join(""),"WGS84"===e.crs){let t=[];for(let e=0;e<19;e++)t[e]=256*Math.pow(2,18-e);e.tilingScheme=new _({resolutions:t,rectangleSouthwestInMeters:new n.A(-20037726.37,-12474104.17),rectangleNortheastInMeters:new n.A(20037726.37,12474104.17)})}else e.tilingScheme=new i.A({rectangleSouthwestInMeters:new n.A(-0x1fffe86,-0x202ef88),rectangleNortheastInMeters:new n.A(0x1fffe86,0x202ef88)});e.maximumLevel=18,super(e),this._rectangle=this._tilingScheme.rectangle,this._url=e.url,this._crs=e.crs||"BD09",this._style=e.style||"normal"}requestImage(e,t,s){let i=this._tilingScheme.getNumberOfXTilesAtLevel(s),r=this._tilingScheme.getNumberOfYTilesAtLevel(s),a=this._url.replace("{z}",s).replace("{s}",String(1)).replace("{style}",this._style);return a="WGS84"===this._crs?a.replace("{x}",String(e)).replace("{y}",String(-t)):a.replace("{x}",String(e-i/2)).replace("{y}",String(r/2-t-1)),c.A.loadImage(this,a)}},z=class extends l.A{constructor(e={}){e.url=e.url||[e.protocol||"","//tiles{s}.geovisearth.com/base/v1/{style}/{z}/{x}/{y}?format={format}&tmsIds=w&token={key}".replace(/\{style\}/g,e.style||"vec").replace(/\{format\}/g,e.format||"png").replace(/\{key\}/g,e.key||"")].join(""),e.subdomains=e.subdomains||["1","2","3"],super(e)}},L={img:"https://gac-geo.googlecnapps.cn/maps/vt?lyrs=s&x={x}&y={y}&z={z}",elec:"https://gac-geo.googlecnapps.cn/maps/vt?lyrs=m&x={x}&y={y}&z={z}",cva:"https://gac-geo.googlecnapps.cn/maps/vt?lyrs=h&x={x}&y={y}&z={z}",ter:"https://gac-geo.googlecnapps.cn/maps/vt?lyrs=t@131,r&x={x}&y={y}&z={z}",img_cva:"https://gac-geo.googlecnapps.cn/maps/vt?lyrs=y&x={x}&y={y}&z={z}"},T=class extends l.A{constructor(e={}){e.url=e.url||[e.protocol||"",L[e.style]||L.elec].join(""),"WGS84"===e.crs&&(e.tilingScheme=new d),super(e)}},S=class extends l.A{constructor(e={}){super({url:[e.protocol||"","//t{s}.tianditu.gov.cn/DataServer?T={style}_w&x={x}&y={y}&l={z}&tk={key}".replace(/\{style\}/g,e.style||"vec").replace(/\{key\}/g,e.key||"")].join(""),subdomains:["0","1","2","3","4","5","6","7"],maximumLevel:18})}},C={img:"//p{s}.map.gtimg.com/sateTiles/{z}/{sx}/{sy}/{x}_{reverseY}.jpg?version=400",elec:"//rt{s}.map.gtimg.com/tile?z={z}&x={x}&y={reverseY}&styleid={style}&scene=0&version=347"},I=class extends l.A{constructor(e={}){let t=e.url||[e.protocol||"",C[e.style]||C.elec].join("");e.url=t.replace("{style}",e.style||"1"),e.subdomains&&e.subdomains.length||(e.subdomains=["0","1","2"]),"img"===e.style&&(e.customTags={sx:(e,t,s,i)=>t>>4,sy:(e,t,s,i)=>(1<<i)-1-s>>4}),"WGS84"===e.crs&&(e.tilingScheme=new d),super(e)}},G=class extends m.A{constructor(e={}){super(e),this._origin=e.origin||[-180,90],this._zoomOffset=e.zoomOffset||0,this._tileSize=e.tileSize||256,this._resolutions=e.resolutions||[]}get zoomOffset(){return this._zoomOffset}tileXYToRectangle(e,t,s,i){if(!this._resolutions||!this._resolutions[s+this._zoomOffset])return g.A.MAX_VALUE;let r=this._resolutions[s+this._zoomOffset]*this._tileSize,o=a.A.toRadians(this._origin[0]+e*r),n=a.A.toRadians(this._origin[1]-(t+1)*r),l=a.A.toRadians(this._origin[0]+(e+1)*r),c=a.A.toRadians(this._origin[1]-t*r);return(0,h.A)(i)?(i.west=o,i.south=n,i.east=l,i.north=c,i):new g.A(o,n,l,c)}positionToTileXY(e,t,s){if(!this._resolutions||!this._resolutions[t+this._zoomOffset])return new n.A;let i=this._resolutions[t+this._zoomOffset]*this._tileSize,r=a.A.toDegrees(e.longitude),o=a.A.toDegrees(e.latitude),l=Math.floor((r-this._origin[0])/i),c=Math.floor((this._origin[1]-o)/i);return(0,h.A)(s)?(s.x=l,s.y=c,s):new n.A(Math.max(0,l),Math.max(0,c))}},j=class extends i.A{constructor(e={}){super(e),this._origin=e.origin||[-20037508.3427892,20037508.3427892],this._zoomOffset=e.zoomOffset||0,this._tileSize=e.tileSize||256,this._resolutions=e.resolutions||[]}get zoomOffset(){return this._zoomOffset}tileXYToNativeRectangle(e,t,s,i){if(!this._resolutions||!this._resolutions[s+this._zoomOffset]||e<0||t<0)return g.A.MAX_VALUE;let r=this._resolutions[s+this._zoomOffset]*this._tileSize,a=this._origin[0]+e*r,o=this._origin[1]-(t+1)*r,n=this._origin[0]+(e+1)*r,l=this._origin[1]-t*r;return(0,h.A)(i)?(i.west=a,i.south=o,i.east=n,i.north=l,i):new g.A(a,o,n,l)}positionToTileXY(e,t,s){let i=this._rectangle;if(!g.A.contains(i,e))return;if(!this._resolutions||!this._resolutions[t+this._zoomOffset])return new n.A;let r=this._resolutions[t+this._zoomOffset]*this._tileSize,a=this._projection.project(e),o=Math.floor((a.x-this._origin[0])/r),l=Math.floor((this._origin[1]-a.y)/r);return(0,h.A)(s)?(s.x=o,s.y=l,s):new n.A(Math.max(0,o),Math.max(0,l))}};window&&window.Cesium&&(Object.isFrozen(window.Cesium)?(window.AMapImageryProvider=p,window.BaiduImageryProvider=b,window.GeoVisImageryProvider=z,window.GoogleImageryProvider=T,window.TdtImageryProvider=S,window.TencentImageryProvider=I,window.CustomGeographicTilingScheme=G,window.CustomMercatorTilingScheme=j):(window.Cesium.AMapImageryProvider=p,window.Cesium.BaiduImageryProvider=b,window.Cesium.GeoVisImageryProvider=z,window.Cesium.GoogleImageryProvider=T,window.Cesium.TdtImageryProvider=S,window.Cesium.TencentImageryProvider=I,window.Cesium.CustomGeographicTilingScheme=G,window.Cesium.CustomMercatorTilingScheme=j))}}]);