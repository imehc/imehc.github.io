"use strict";(self.webpackChunkanch=self.webpackChunkanch||[]).push([["4802"],{40073(t,e,i){i.d(e,{initViewer:()=>C});var o=i(7889);function n(){return Math.random()-.5}function r(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}var s=i(38279),a=i(30571),l=i(7487),d=i(53526),h=i(71443),c=i(77350),p=i(22831),w=i(77329),m=i(26631),u=i(61677),g=i(10045),f=i(65779),y=i(16264),b=i(22661),A=i(97168),$=i(9686),v=i(72639),x=i(50525);class E{option;id=0;ctnMap={};eventListener=null;constructor(t){this.option=t}add({position:t,content:e,isClose:i=!1}){let o=`popup_${((1+Math.random())*65536|0).toString(16)}${this.id++}`,n=document.createElement("div");if(n.className=`tw:absolute tw:z-[1000] tw:pointer-events-auto${this.option.className?` ${this.option.className}`:""}`,n.id=o,n.style.transform="translate(-50%, -100%)",this.option.viewer.container.appendChild(n),n.innerHTML=this.createHtml(e.header,e.content,i),this.ctnMap[o]=[t,n],this.render(),this.eventListener||(this.eventListener=()=>{this.render()},this.option.viewer.clock.onTick.addEventListener(this.eventListener)),i){let t=n.getElementsByClassName("bx-popup-close")?.[0];t&&(t.onclick=()=>{this.close(n)})}return o}render(){for(let t in this.ctnMap){if(!Object.hasOwn(this.ctnMap,t))continue;let e=this.ctnMap[t],i=$.A.worldToWindowCoordinates(this.option.viewer.scene,e[0]);i.x&&i.y&&(Math.abs(i.x)>2*window.innerWidth||Math.abs(i.y)>2*window.innerHeight?this.ctnMap[t][1].style.display="none":(this.ctnMap[t][1].style.display="block",this.ctnMap[t][1].style.left=`${i.x}px`,this.ctnMap[t][1].style.top=`${i.y-20}px`))}}createHtml(t,e,i){return this.option.html?this.option.html:`
			${i?'<div class="tw:absolute tw:top-2 tw:right-2 tw:cursor-pointer tw:text-gray-400 hover:tw:text-gray-600 tw:text-xl tw:leading-none bx-popup-close">\xd7</div>':""}
			<div class="tw:bg-white tw:rounded-lg tw:shadow-xl tw:p-2 tw:min-w-50 tw:max-w-75">
				<div class="tw:font-bold tw:text-base tw:mb-2 tw:text-gray-800 tw:border-b tw:border-gray-200 tw:pb-1">
					${t}
				</div>
				<div class="tw:text-sm tw:text-gray-600 tw:space-y-1">
					${e}
				</div>
			</div>
			<div class="tw:absolute tw:left-1/2 tw:-bottom-2 tw:-ml-2 tw:w-0 tw:h-0 tw:border-l-8 tw:border-r-8 tw:border-t-8 tw:border-l-transparent tw:border-r-transparent tw:border-t-white" style="filter: drop-shadow(0 2px 2px rgba(0,0,0,0.1));"></div>
		`}close(t){t.remove(),delete this.ctnMap[t.id],0===Object.keys(this.ctnMap).length&&(this.option.viewer.clock.onTick.removeEventListener(this.eventListener),this.eventListener=null)}removeById(t){let e=this.ctnMap[t];e&&this.close(e[1])}has(t){return t in this.ctnMap}closeAll(){for(let t in this.ctnMap)Object.hasOwn(this.ctnMap,t)&&this.ctnMap[t][1].remove();this.ctnMap={},this.option.viewer.clock.onTick.removeEventListener(this.eventListener),this.eventListener=null}}class L{options;tooltipEntitylist={};viewer;dataSource;constructor(t){this.options={color:"rgb(59, 130, 246)",stroke:"rgb(96, 165, 250)",opacity:.9,textcolor:"white",strokewidth:2,lineheight:24,fontSize:"14px",x:20,y:52,defaultHeight:200,width:220},this.options=Object.assign(this.options,t),this.viewer=t.viewer,this.dataSource=new v.A("tooltipname"),this.viewer.dataSources.add(this.dataSource)}add(t){let{header:e,content:i}=t,o=i.split("<br/>"),n=t.width||this.options.width,r=window.devicePixelRatio||2,s=18*r,a=8*r,l=10*r,d=e?38*r:0,h=22*r,c=14*r,p=d+(o.length*h+c+0*r),w=p+12*r+s,m=n*r+s,u="",y=d+c+.72*h;for(let t=0;t<o.length;t++)u+=`<tspan x="${s/2+8*r}" y="${y}">${o[t]}</tspan>`,y+=h;let b=`M${s/2+a} ${s/2}
			L${m-s/2-a} ${s/2}
			Q${m-s/2} ${s/2} ${m-s/2} ${s/2+a}
			L${m-s/2} ${p+s/2-a}
			Q${m-s/2} ${p+s/2} ${m-s/2-a} ${p+s/2}
			L${m/2+l/2} ${p+s/2}
			L${m/2} ${w-s/2}
			L${m/2-l/2} ${p+s/2}
			L${s/2+a} ${p+s/2}
			Q${s/2} ${p+s/2} ${s/2} ${p+s/2-a}
			L${s/2} ${s/2+a}
			Q${s/2} ${s/2} ${s/2+a} ${s/2} Z`,A=e?`M${s/2+a} ${s/2}
				L${m-s/2-a} ${s/2}
				Q${m-s/2} ${s/2} ${m-s/2} ${s/2+a}
				L${m-s/2} ${d+s/2}
				L${s/2} ${d+s/2}
				L${s/2} ${s/2+a}
				Q${s/2} ${s/2} ${s/2+a} ${s/2} Z`:"",$=(0,x.A)(),v=`<svg width="${m}" height="${w}" xmlns="http://www.w3.org/2000/svg"><defs><filter id="shadow-${$}" x="-20%" y="-20%" width="140%" height="140%"><feDropShadow dx="0" dy="${2*r}" stdDeviation="${3*r}" flood-opacity="0.25"/></filter></defs><path d="${b}" fill="${this.options.color}" stroke="${this.options.stroke}" stroke-width="${this.options.strokewidth*r}" opacity="${this.options.opacity}" filter="url(#shadow-${$})"/>${e?`<path d="${A}" fill="rgba(0,0,0,0.15)"/>`:""}${e?`<text x="${s/2+8*r}" y="${s/2+26*r}" fill="${this.options.textcolor}" font-size="${15*r}px" font-weight="600">${e}</text>`:""}<text fill="${this.options.textcolor}" font-size="${13*r}px">${u}</text></svg>`,E=`data:image/svg+xml,${encodeURIComponent(v)}`,L=this.dataSource.entities.add({position:t.position,billboard:{image:E,scale:1/r,horizontalOrigin:g.A.CENTER,verticalOrigin:f.A.BOTTOM,disableDepthTestDistance:1/0}}),C=t.id||(0,x.A)(),M={id:C,entity:L,clear:()=>{this.cleartooltip(C)}};return this.tooltipEntitylist[C]=M,M}cleartooltip(t){t?(this.dataSource.entities.remove(this.tooltipEntitylist[t].entity),delete this.tooltipEntitylist[t]):(this.dataSource.entities.removeAll(),this.tooltipEntitylist={})}has(t){return t in this.tooltipEntitylist}}function C(t){let e=new s.A(t,{baseLayerPicker:!1,animation:!1,timeline:!1,fullscreenButton:!1,geocoder:!1,homeButton:!1,infoBox:!1,sceneModePicker:!1,selectionIndicator:!1,navigationHelpButton:!1});e.scene.debugShowFramesPerSecond=!0,e.imageryLayers.remove(e.imageryLayers.get(0)),e.scene.terrainProvider=new a.A({});let i=new l.A({url:"//data.mars3d.cn/tile/img/{z}/{x}/{y}.jpg"});e.imageryLayers.addImageryProvider(i),e.cesiumWidget.screenSpaceEventHandler.removeInputAction(d.A.LEFT_CLICK),e.cesiumWidget.screenSpaceEventHandler.removeInputAction(d.A.LEFT_DOUBLE_CLICK),new b.A(e,{enableCompass:!0,enableZoomControls:!0});let o=new A.GUI;o.domElement.style.position="fixed",o.domElement.style.bottom="50%",o.domElement.style.transform="translateY(-50%)",o.domElement.style.left="0";let n={\u793A\u4F8B\u7C7B\u578B:"\u70B9",\u56FE\u6807\u6570\u91CF:1e3};function r(t){t.flyTo(t.entities,{offset:new h.A(0,-Math.PI/2,5e4)})}let c={\u70B9:()=>{T(e),r(e)},\u7EBF:()=>{var t;M(t=e),t.entities.add({name:"\u7EBF",polyline:{positions:p.A.fromDegreesArray([-77,35,-80,35,-90,45]),width:3,material:w.A.BLUE,clampToGround:!1}}),e.flyTo(e.entities)},\u9762:()=>{var t;M(t=e),t.entities.add({name:"\u6700\u7B80\u5355\u7684\u8D34\u5730\u9762",polygon:{hierarchy:p.A.fromDegreesArray([-115,37,-115,32,-107,33,-102,31,-102,35]),material:w.A.RED.withAlpha(.5)},polyline:{positions:p.A.fromDegreesArray([-115,37,-115,32,-107,33,-102,31,-102,35,-115,37]),width:3,material:w.A.BLUE,clampToGround:!0}}),t.entities.add({name:"\u8D34\u5730\u56F4\u5899",polygon:{hierarchy:p.A.fromDegreesArray([-108,42,-100,42,-104,40]),extrudedHeight:5e4,material:w.A.GREEN,closeTop:!1,closeBottom:!1}}),t.entities.add({name:"\u7ACB\u9762\u62C9\u4F38\u586B\u5145\u9762",polygon:{hierarchy:p.A.fromDegreesArrayHeights([-108,25,1e5,-100,25,1e5,-100,30,1e5,-108,30,3e5]),extrudedHeight:0,perPositionHeight:!0,material:w.A.ORANGE.withAlpha(.5),outline:!0,outlineColor:w.A.BLACK}}),t.entities.add({name:"\u7ACB\u4F53\u60AC\u6D6E\u9762",polygon:{hierarchy:p.A.fromDegreesArrayHeights([-90,41,0,-85,41,5e3,-80,36,95550]),perPositionHeight:!0,material:w.A.CYAN.withAlpha(.5),outline:!0,outlineColor:w.A.BLACK}}),e.flyTo(e.entities)},\u56FE\u6807:()=>{var t;M(t=e),t.entities.add({position:p.A.fromDegrees(-115.59777,40.03883),billboard:{image:"/cesium/06/icon.png",heightReference:m.Ay.CLAMP_TO_GROUND,scaleByDistance:new u.A(2e6,1.5,8e6,.5),scale:1,show:!0,horizontalOrigin:g.A.CENTER,verticalOrigin:f.A.BOTTOM,width:32,height:32}}),r(e)},\u8BB8\u591A\u56FE\u6807:()=>{D(e,n.\u56FE\u6807\u6570\u91CF),e.camera.flyHome(1)},\u5F39\u7A97:()=>{var t;let i,o,n,r;M(t=e),i=t.entities.add({name:"\u6570\u636E\u70B9",position:p.A.fromDegrees(-75.166493,39.9060534),point:{pixelSize:12,color:w.A.fromCssColorString("#3B82F6"),outlineColor:w.A.WHITE,outlineWidth:3,heightReference:m.Ay.CLAMP_TO_GROUND,disableDepthTestDistance:1/0}}),o=new E({viewer:t}),n=null,r={position:p.A.fromDegrees(-75.166493,39.9060534),content:{header:"\u6570\u636E\u70B9",content:`<div class="tw:flex tw:justify-between tw:mb-1"><span class="tw:text-gray-500">\u{76D1}\u{63A7}\u{540D}\u{79F0}\u{FF1A}</span><span class="tw:font-medium">\u{76D1}\u{63A7}\u{540D}\u{79F0}</span></div>
					  <div class="tw:flex tw:justify-between tw:mb-1"><span class="tw:text-gray-500">\u{76D1}\u{63A7}\u{7F16}\u{53F7}\u{FF1A}</span><span class="tw:font-medium">${parseInt(`${100*Math.random()}`,10)}</span></div>
					  <div class="tw:flex tw:justify-between tw:mb-1"><span class="tw:text-gray-500">\u{76D1}\u{63A7}\u{7C7B}\u{578B}\u{FF1A}</span><span class="tw:font-medium">\u{76D1}\u{63A7}\u{7C7B}\u{578B}</span></div>
					  <div class="tw:flex tw:justify-between"><span class="tw:text-gray-500">\u{76D1}\u{63A7}\u{72B6}\u{6001}\u{FF1A}</span><span class="tw:text-green-500 tw:font-medium">\u{5728}\u{7EBF}</span></div>
					`},isClose:!0},new y.A(t.scene.canvas).setInputAction(e=>{let s=t.scene.pick(e.position);!s||s.id!==i||n&&o.has(n)||(n=o.add(r))},d.A.LEFT_CLICK),t.flyTo(i,{offset:new h.A(0,-Math.PI/4,5e4)}).then(()=>{n=o.add(r)})},\u5DE5\u5177\u63D0\u793A:()=>{var t;let i;M(t=e),i=new L({viewer:t}),[{lng:-95,lat:40,header:"\u76D1\u63A7\u70B9 A",content:"\u8BBE\u5907\u72B6\u6001: \u6B63\u5E38<br/>\u4FE1\u53F7\u5F3A\u5EA6: 85%<br/>\u5728\u7EBF\u65F6\u957F: 24\u5C0F\u65F6"},{lng:-100,lat:42,header:"\u76D1\u63A7\u70B9 B",content:"\u8BBE\u5907\u72B6\u6001: \u7EF4\u62A4\u4E2D<br/>\u4FE1\u53F7\u5F3A\u5EA6: 60%<br/>\u6700\u540E\u66F4\u65B0: 2\u5206\u949F\u524D"},{lng:-90,lat:38,header:"\u76D1\u63A7\u70B9 C",content:"\u8BBE\u5907\u72B6\u6001: \u6B63\u5E38<br/>\u6E29\u5EA6: 25\xb0C<br/>\u6E7F\u5EA6: 45%<br/>\u7535\u91CF: 92%"},{lng:-105,lat:35,header:"\u6570\u636E\u4E2D\u5FC3",content:"CPU\u4F7F\u7528\u7387: 45%<br/>\u5185\u5B58: 8.2GB/16GB<br/>\u7F51\u7EDC\u6D41\u91CF: 125Mbps<br/>\u8FDE\u63A5\u6570: 1,245"}].forEach(e=>{t.entities.add({name:e.header,position:p.A.fromDegrees(e.lng,e.lat),point:{pixelSize:10,color:w.A.fromCssColorString("#10B981"),outlineColor:w.A.WHITE,outlineWidth:2,heightReference:m.Ay.CLAMP_TO_GROUND,disableDepthTestDistance:1/0}}),i.add({position:p.A.fromDegrees(e.lng,e.lat),header:e.header,content:e.content,width:220})}),e.flyTo(e.entities)}};return o.add(n,"\u793A\u4F8B\u7C7B\u578B",Object.keys(c)).name("\u793A\u4F8B\u7C7B\u578B").onChange(t=>{c[t]()}),o.add(n,"\u56FE\u6807\u6570\u91CF",1e3,1e5,1e3).name("\u56FE\u6807\u6570\u91CF").onChange(()=>{"\u8BB8\u591A\u56FE\u6807"===n.\u793A\u4F8B\u7C7B\u578B&&D(e,n.\u56FE\u6807\u6570\u91CF)}),T(e),r(e),{viewer:e,gui:o}}function M(t){t.entities.removeAll();let e=t.scene.primitives;for(let t=e.length-1;t>=0;t--){let i=e.get(t);i instanceof c.A&&e.remove(i)}let i=t.dataSources;for(let t=i.length-1;t>=0;t--)i.remove(i.get(t));t.container.querySelectorAll('[id^="popup_"]').forEach(t=>{t.remove()})}function T(t){M(t),t.entities.add({name:"\u70B9",position:p.A.fromDegrees(-95.166493,39.9060534,2e3),point:{pixelSize:5,color:w.A.RED,outlineColor:w.A.WHITE,outlineWidth:2},label:{text:"\u70B9",font:"14pt monospace",outlineWidth:2}})}function D(t,e=5e4){M(t);let i=function(t,e={}){var i,s;null==(i=e.bbox)||(Array.isArray(i)?(0,o.O6)(i):null!=i.bbox&&(0,o.O6)(i.bbox)),null==t&&(t=1);let a=[];for(let i=0;i<t;i++)a.push((0,o.zx)(Array.isArray(s=e.bbox)?r(s):s&&s.bbox?r(s.bbox):[360*n(),180*n()]));return(0,o.Lr)(a)}(e,{bbox:[-180,-90,180,90]}),s=t.scene.primitives.add(new c.A);i.features.forEach(t=>{let e=t.geometry.coordinates;s.add({scaleByDistance:new u.A(2e6,1,8e6,.1),position:p.A.fromDegrees(e[0],e[1]),image:"/cesium/06/icon.png",width:32,height:32})})}},7889(t,e,i){function o(t,e,i={}){let n={type:"Feature"};return(0===i.id||i.id)&&(n.id=i.id),i.bbox&&(n.bbox=i.bbox),n.properties=e||{},n.geometry=t,n}function n(t,e,i={}){if(!t)throw Error("coordinates is required");if(!Array.isArray(t))throw Error("coordinates must be an Array");if(t.length<2)throw Error("coordinates must be at least 2 numbers long");if(!l(t[0])||!l(t[1]))throw Error("coordinates must contain numbers");return o({type:"Point",coordinates:t},e,i)}function r(t,e,i={}){for(let e of t){if(e.length<4)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(e[e.length-1].length!==e[0].length)throw Error("First and last Position are not equivalent.");for(let t=0;t<e[e.length-1].length;t++)if(e[e.length-1][t]!==e[0][t])throw Error("First and last Position are not equivalent.")}return o({type:"Polygon",coordinates:t},e,i)}function s(t,e={}){let i={type:"FeatureCollection"};return e.id&&(i.id=e.id),e.bbox&&(i.bbox=e.bbox),i.features=t,i}function a(t,e,i={}){return o({type:"MultiPolygon",coordinates:t},e,i)}function l(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function d(t){if(!t)throw Error("bbox is required");if(!Array.isArray(t))throw Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw Error("bbox must be an Array of 4 or 6 numbers");t.forEach(t=>{if(!l(t))throw Error("bbox must only contain numbers")})}i.d(e,{Lr:()=>s,O6:()=>d,g5:()=>a,n1:()=>r,zx:()=>n})}}]);