"use strict";(self.webpackChunkanch=self.webpackChunkanch||[]).push([["5706"],{8528(e,t,r){r.d(t,{A:()=>s});var o=r(35656);r(57140);var a=r(80517);function s({children:e,fallback:t}){return(0,a.A)()?(0,o.jsx)(o.Fragment,{children:e?.()}):t??null}},77513(e,t,r){r.d(t,{Z:()=>s});var o=r(67199);let a=new WeakMap;class s extends o.aHM{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,a){let s=new o.Y9S(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,e=>{this.parse(e,t,a)},r,a)}parse(e,t,r=()=>{}){this.decodeDracoFile(e,t,null,null,o.er$,r).catch(r)}decodeDracoFile(e,t,r,a,s=o.Zr2,i=()=>{}){let n={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:a||this.defaultAttributeTypes,useUniqueIDs:!!r,vertexColorSpace:s};return this.decodeGeometry(e,n).then(t).catch(i)}decodeGeometry(e,t){let r,o=JSON.stringify(t);if(a.has(e)){let t=a.get(e);if(t.key===o)return t.promise;if(0===e.byteLength)throw Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s=this.workerNextTaskID++,i=e.byteLength,n=this._getWorker(s,i).then(o=>(r=o,new Promise((o,a)=>{r._callbacks[s]={resolve:o,reject:a},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(e=>this._createGeometry(e.geometry));return n.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),a.set(e,{key:o,promise:n}),n}_createGeometry(e){let t=new o.LoY;e.index&&t.setIndex(new o.THS(e.index.array,1));for(let r=0;r<e.attributes.length;r++){let a,{name:s,array:i,itemSize:n,stride:l,vertexColorSpace:d}=e.attributes[r];if(n===l)a=new o.THS(i,n);else{let e=new o.eB$(i,l);a=new o.eHs(e,n,0)}"color"===s&&(this._assignVertexColorSpace(a,d),a.normalized=i instanceof Float32Array==!1),t.setAttribute(s,a)}return t}_assignVertexColorSpace(e,t){if(t!==o.er$)return;let r=new o.Q1f;for(let t=0,a=e.count;t<a;t++)r.fromBufferAttribute(e,t),o.ppV.colorSpaceToWorking(r,o.er$),e.setXYZ(t,r.r,r.g,r.b)}_loadLibrary(e,t){let r=new o.Y9S(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((t,o)=>{r.load(e,t,void 0,o)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(t=>{let r=t[0];e||(this.decoderConfig.wasmBinary=t[1]);let o=i.toString(),a=["/* draco decoder */",r,"\n/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){let r=t.data;switch(r.type){case"decode":e._callbacks[r.id].resolve(r);break;case"error":e._callbacks[r.id].reject(r);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+r.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort(function(e,t){return e._taskLoad>t._taskLoad?-1:1});let r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}}function i(){let e,t;onmessage=function(r){let o=r.data;switch(o.type){case"init":e=o.decoderConfig,t=new Promise(function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)});break;case"decode":let a=o.buffer,s=o.taskConfig;t.then(e=>{let t=e.draco,r=new t.Decoder;try{let e=function(e,t,r,o){var a,s,i;let n,l,d,c,h,u,f=o.attributeIDs,p=o.attributeTypes,y=t.GetEncodedGeometryType(r);if(y===e.TRIANGULAR_MESH)h=new e.Mesh,u=t.DecodeArrayToMesh(r,r.byteLength,h);else if(y===e.POINT_CLOUD)h=new e.PointCloud,u=t.DecodeArrayToPointCloud(r,r.byteLength,h);else throw Error("THREE.DRACOLoader: Unexpected geometry type.");if(!u.ok()||0===h.ptr)throw Error("THREE.DRACOLoader: Decoding failed: "+u.error_msg());let g={index:null,attributes:[]};for(let r in f){let a,s,i=self[p[r]];if(o.useUniqueIDs)s=f[r],a=t.GetAttributeByUniqueId(h,s);else{if(-1===(s=t.GetAttributeId(h,e[f[r]])))continue;a=t.GetAttribute(h,s)}let n=function(e,t,r,o,a,s){let i,n=r.num_points(),l=s.num_components(),d=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,a),c=l*a.BYTES_PER_ELEMENT,h=4*Math.ceil(c/4),u=h/a.BYTES_PER_ELEMENT,f=n*c,p=e._malloc(f);t.GetAttributeDataArrayForAllPoints(r,s,d,f,p);let y=new a(e.HEAPF32.buffer,p,f/a.BYTES_PER_ELEMENT);if(c===h)i=y.slice();else{i=new a(n*h/a.BYTES_PER_ELEMENT);let e=0;for(let t=0,r=y.length;t<r;t++){for(let r=0;r<l;r++)i[e+r]=y[t*l+r];e+=u}}return e._free(p),{name:o,count:n,itemSize:l,array:i,stride:u}}(e,t,h,r,i,a);"color"===r&&(n.vertexColorSpace=o.vertexColorSpace),g.attributes.push(n)}return y===e.TRIANGULAR_MESH&&(a=e,s=t,i=h,n=3*i.num_faces(),l=4*n,d=a._malloc(l),s.GetTrianglesUInt32Array(i,l,d),c=new Uint32Array(a.HEAPF32.buffer,d,n).slice(),a._free(d),g.index={array:c,itemSize:1}),e.destroy(h),g}(t,r,new Int8Array(a),s),i=e.attributes.map(e=>e.array.buffer);e.index&&i.push(e.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:e},i)}catch(e){console.error(e),self.postMessage({type:"error",id:o.id,error:e.message})}finally{t.destroy(r)}})}}}},62152(e,t,r){r.d(t,{Y:()=>a});var o=r(67199);class a extends o.BRH{constructor(e){super(e),this.type=o.ix0}parse(e){let t,r,a,s=function(e,t){switch(e){case 1:throw Error("THREE.HDRLoader: Read Error: "+(t||""));case 2:throw Error("THREE.HDRLoader: Write Error: "+(t||""));case 3:throw Error("THREE.HDRLoader: Bad File Format: "+(t||""));default:throw Error("THREE.HDRLoader: Memory Error: "+(t||""))}},i=function(e,t,r){t=t||1024;let o=e.pos,a=-1,s=0,i="",n=String.fromCharCode.apply(null,new Uint16Array(e.subarray(o,o+128)));for(;0>(a=n.indexOf("\n"))&&s<t&&o<e.byteLength;)i+=n,s+=n.length,o+=128,n+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(o,o+128)));return -1<a&&(!1!==r&&(e.pos+=s+a+1),i+n.slice(0,a))},n=new Uint8Array(e);n.pos=0;let l=function(e){let t,r,o=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,a=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,n=/^\s*FORMAT=(\S+)\s*$/,l=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,d={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};for(!(e.pos>=e.byteLength)&&(t=i(e))||s(1,"no header found"),(r=t.match(/^#\?(\S+)/))||s(3,"bad initial token"),d.valid|=1,d.programtype=r[1],d.string+=t+"\n";!1!==(t=i(e));){if(d.string+=t+"\n","#"===t.charAt(0)){d.comments+=t+"\n";continue}if((r=t.match(o))&&(d.gamma=parseFloat(r[1])),(r=t.match(a))&&(d.exposure=parseFloat(r[1])),(r=t.match(n))&&(d.valid|=2,d.format=r[1]),(r=t.match(l))&&(d.valid|=4,d.height=parseInt(r[1],10),d.width=parseInt(r[2],10)),2&d.valid&&4&d.valid)break}return 2&d.valid||s(3,"missing format specifier"),4&d.valid||s(3,"missing image size specifier"),d}(n),d=l.width,c=l.height,h=function(e,t,r){if(t<8||t>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);t!==(e[2]<<8|e[3])&&s(3,"wrong scanline width");let o=new Uint8Array(4*t*r);o.length||s(4,"unable to allocate buffer space");let a=0,i=0,n=4*t,l=new Uint8Array(4),d=new Uint8Array(n),c=r;for(;c>0&&i<e.byteLength;){i+4>e.byteLength&&s(1),l[0]=e[i++],l[1]=e[i++],l[2]=e[i++],l[3]=e[i++],(2!=l[0]||2!=l[1]||(l[2]<<8|l[3])!=t)&&s(3,"bad rgbe scanline format");let r=0,h;for(;r<n&&i<e.byteLength;){let t=(h=e[i++])>128;if(t&&(h-=128),(0===h||r+h>n)&&s(3,"bad scanline data"),t){let t=e[i++];for(let e=0;e<h;e++)d[r++]=t}else d.set(e.subarray(i,i+h),r),r+=h,i+=h}for(let e=0;e<t;e++){let r=0;o[a]=d[e+r],r+=t,o[a+1]=d[e+r],r+=t,o[a+2]=d[e+r],r+=t,o[a+3]=d[e+r],a+=4}c--}return o}(n.subarray(n.pos),d,c);switch(this.type){case o.RQf:let u=new Float32Array(4*(a=h.length/4));for(let e=0;e<a;e++)!function(e,t,r,o){let a=Math.pow(2,e[t+3]-128)/255;r[o+0]=e[t+0]*a,r[o+1]=e[t+1]*a,r[o+2]=e[t+2]*a,r[o+3]=1}(h,4*e,u,4*e);t=u,r=o.RQf;break;case o.ix0:let f=new Uint16Array(4*(a=h.length/4));for(let e=0;e<a;e++)!function(e,t,r,a){let s=Math.pow(2,e[t+3]-128)/255;r[a+0]=o.GxU.toHalfFloat(Math.min(e[t+0]*s,65504)),r[a+1]=o.GxU.toHalfFloat(Math.min(e[t+1]*s,65504)),r[a+2]=o.GxU.toHalfFloat(Math.min(e[t+2]*s,65504)),r[a+3]=o.GxU.toHalfFloat(1)}(h,4*e,f,4*e);t=f,r=o.ix0;break;default:throw Error("THREE.HDRLoader: Unsupported type: "+this.type)}return{width:d,height:c,data:t,header:l.string,gamma:l.gamma,exposure:l.exposure,type:r}}setDataType(e){return this.type=e,this}load(e,t,r,a){return super.load(e,function(e,r){switch(e.type){case o.RQf:case o.ix0:e.colorSpace=o.Zr2,e.minFilter=o.k6q,e.magFilter=o.k6q,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,r)},r,a)}}}}]);