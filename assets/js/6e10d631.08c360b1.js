"use strict";(self.webpackChunkanch=self.webpackChunkanch||[]).push([["9430"],{99849(e,t,r){r.r(t),r.d(t,{metadata:()=>s,default:()=>x,frontMatter:()=>c,contentTitle:()=>u,toc:()=>p,assets:()=>f});var s=JSON.parse('{"id":"web/canvas/particle-stars","title":"\u661F\u7A7A\u7C92\u5B50","description":"\u6838\u5FC3\u6982\u5FF5","source":"@site/docs/web/canvas/02-particle-stars.mdx","sourceDirName":"web/canvas","slug":"/web/canvas/particle-stars","permalink":"/web/canvas/particle-stars","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"imehc","lastUpdatedAt":1768208466000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"\u661F\u7A7A\u7C92\u5B50"},"sidebar":"webSidebar","previous":{"title":"\u56FE\u50CF\u9A6C\u8D5B\u514B","permalink":"/web/canvas/image-mosaic"},"next":{"title":"\u5E95\u56FE","permalink":"/web/cesium/basic/01"}}'),i=r(35656),n=r(75395),a=r(57140),l=r(82044);function d(e,t){let r=Math.max(e,t);return Math.round(Math.sqrt(r*r+r*r))/2}function o(e=0,t=0){if(0===t&&(t=e,e=0),e>t){let r=t;t=e,e=r}return Math.floor(Math.random()*(t-e+1))+e}function h(){let e=(0,a.useRef)(null),t=(0,a.useRef)(null),r=(0,a.useRef)([]),s=(0,a.useRef)(217),n=(0,a.useRef)(null),h=(0,a.useEffectEvent)(e=>{let t=document.createElement("canvas"),r=t.getContext("2d");if(!r)return t;t.width=100,t.height=100;let s=t.width/2,i=r.createRadialGradient(s,s,0,s,s,s);return i.addColorStop(.025,"#fff"),i.addColorStop(.1,`hsl(${e}, 61%, 33%)`),i.addColorStop(.25,`hsl(${e}, 64%, 6%)`),i.addColorStop(1,"transparent"),r.fillStyle=i,r.beginPath(),r.arc(s,s,s,0,2*Math.PI),r.fill(),t}),c=(0,a.useEffectEvent)((e,t,r)=>({orbitRadius:Math.sqrt(Math.random())*d(e,t),radius:o(60,o(d(e,t)))/12,orbitX:e/2,orbitY:t/2,timePassed:o(0,r),speed:o(o(d(e,t)))/5e4,alpha:o(2,10)/10,draw:function(e,t){let r=Math.sin(this.timePassed)*this.orbitRadius+this.orbitX,s=Math.cos(this.timePassed)*this.orbitRadius+this.orbitY,i=o(10);1===i&&this.alpha>0?this.alpha-=.05:2===i&&this.alpha<1&&(this.alpha+=.05),e.globalAlpha=this.alpha,e.drawImage(t,r-this.radius/2,s-this.radius/2,this.radius,this.radius),this.timePassed+=this.speed}})),u=(0,a.useEffectEvent)(()=>{let i=e.current,a=t.current;if(!i||!a)return;let{clientWidth:l,clientHeight:d}=i;a.width=l,a.height=d,r.current=[];for(let e=0;e<1e3;e++)r.current.push(c(l,d,1e3));n.current=h(s.current)}),f=(0,a.useEffectEvent)(()=>{let e=t.current;if(!e)return;let i=e.getContext("2d");if(!i||!n.current)return;let{width:a,height:l}=e,d=s.current,o=r.current;i.globalCompositeOperation="source-over",i.globalAlpha=.8,i.fillStyle=`hsla(${d}, 64%, 6%, 1)`,i.fillRect(0,0,a,l),i.globalCompositeOperation="lighter";for(let e=0;e<o.length;e++)o[e].draw(i,n.current);requestAnimationFrame(f)});return(0,a.useEffect)(()=>{u(),f();let e=()=>{u()};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,i.jsx)(l.A,{ref:e,children:(0,i.jsx)("canvas",{ref:t,className:"tw:block"})})}let c={sidebar_position:2,title:"\u661F\u7A7A\u7C92\u5B50"},u="\u661F\u7A7A\u7C92\u5B50",f={},p=[{value:"\u6838\u5FC3\u6982\u5FF5",id:"\u6838\u5FC3\u6982\u5FF5",level:2}];function m(e){let t={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"\u661F\u7A7A\u7C92\u5B50",children:"\u661F\u7A7A\u7C92\u5B50"})}),"\n",(0,i.jsx)(h,{}),"\n",(0,i.jsx)(t.h2,{id:"\u6838\u5FC3\u6982\u5FF5",children:"\u6838\u5FC3\u6982\u5FF5"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"\u7C92\u5B50\u7CFB\u7EDF"}),": \u7BA1\u7406\u5927\u91CF\u72EC\u7ACB\u7684\u7C92\u5B50\u5BF9\u8C61\uFF0C\u6BCF\u5E27\u66F4\u65B0\u4F4D\u7F6E\u548C\u72B6\u6001"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"\u5706\u5468\u8FD0\u52A8"}),": \u4F7F\u7528\u6B63\u5F26\u548C\u4F59\u5F26\u51FD\u6570\u8BA1\u7B97\u7C92\u5B50\u5728\u5706\u5F62\u8F68\u9053\u4E0A\u7684\u4F4D\u7F6E"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"requestAnimationFrame"}),": \u6D4F\u89C8\u5668\u63D0\u4F9B\u7684\u9AD8\u6548\u52A8\u753B\u5FAA\u73AF\u65B9\u6CD5\uFF0C\u540C\u6B65\u6D4F\u89C8\u5668\u5237\u65B0\u7387"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Canvas\u590D\u5408\u64CD\u4F5C"}),": ",(0,i.jsx)(t.code,{children:"globalCompositeOperation"})," \u63A7\u5236\u56FE\u5C42\u6DF7\u5408\u65B9\u5F0F","\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"source-over"}),": \u6B63\u5E38\u7ED8\u5236\uFF08\u65B0\u56FE\u5C42\u8986\u76D6\u65E7\u56FE\u5C42\uFF09"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"lighter"}),": \u76F8\u52A0\u6DF7\u5408\uFF08\u91CD\u53E0\u90E8\u5206\u53D8\u4EAE\uFF09"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"\u95EA\u70C1\u6548\u679C"}),": \u901A\u8FC7\u968F\u673A\u6539\u53D8\u900F\u660E\u5EA6\u5B9E\u73B0\u52A8\u6001\u6548\u679C"]}),"\n"]})]})}function x(e={}){let{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(m,{...e})}):m(e)}}}]);