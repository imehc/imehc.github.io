"use strict";(self.webpackChunkanch=self.webpackChunkanch||[]).push([["4835"],{91798(e,t,r){r.r(t),r.d(t,{metadata:()=>s,default:()=>k,frontMatter:()=>b,contentTitle:()=>f,toc:()=>v,assets:()=>P});var s=JSON.parse('{"id":"web/three/showcases/card-3d","title":"3D\u5361\u7247","description":"\u6838\u5FC3\u6982\u5FF5","source":"@site/docs/web/three/showcases/02-card-3d.mdx","sourceDirName":"web/three/showcases","slug":"/web/three/showcases/card-3d","permalink":"/web/three/showcases/card-3d","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"Javascript","permalink":"/tags/javascript"}],"version":"current","lastUpdatedBy":"semantic-release-bot","lastUpdatedAt":1768387969000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"3D\u5361\u7247","tags":["Javascript"]},"sidebar":"webSidebar","previous":{"title":"\u6C7D\u8F66\u6362\u80A4","permalink":"/web/three/showcases/car-customization"},"next":{"title":"\u9E1F","permalink":"/web/three/showcases/bird"}}'),n=r(35656),i=r(56610),a=r(85604),o=r(44070),l=r(86911),c=r(18500),d=r(46975),h=r(89181),p=r(43474),u=r(55642),x=r(12354),m=r(57140),g=r(67199),j=r(82044);(0,d.e)({MeshLineGeometry:x.mx,MeshLineMaterial:x.Xu}),a.p.preload("/card/tag.glb"),o.zo.preload("/card/band.jpeg");let y=()=>{let e=(0,m.useRef)(null),t=(0,m.useRef)(null),r=(0,m.useRef)(null),s=(0,m.useRef)(null),i=(0,m.useRef)(null),l=(0,m.useRef)(null),{vec:c,ang:h,rot:u,dir:x}=(0,m.useMemo)(()=>({vec:new g.Pq0,ang:new g.Pq0,rot:new g.Pq0,dir:new g.Pq0}),[]),j={type:"dynamic",canSleep:!0,colliders:!1,angularDamping:2,linearDamping:2},{nodes:y,materials:w}=(0,a.p)("/card/tag.glb"),b=(0,o.zo)("/card/band.jpeg"),{width:f,height:P}=(0,d.C)(e=>e.size),v=(0,m.useMemo)(()=>new g.B6O([new g.Pq0,new g.Pq0,new g.Pq0,new g.Pq0]),[]),[M,k]=(0,m.useState)(!1),[R,D]=(0,m.useState)(!1);return(0,p.Y7)(t,r,[[0,0,0],[0,0,0],1]),(0,p.Y7)(r,s,[[0,0,0],[0,0,0],1]),(0,p.Y7)(s,i,[[0,0,0],[0,0,0],1]),(0,p.hE)(i,l,[[0,0,0],[0,1.45,0]]),(0,m.useEffect)(()=>{if(R)return document.body.style.cursor=M?"grabbing":"grab",()=>void(document.body.style.cursor="auto")},[R,M]),(0,d.D)((n,a)=>{M&&(c.set(n.pointer.x,n.pointer.y,.5).unproject(n.camera),x.copy(c).sub(n.camera.position).normalize(),c.add(x.multiplyScalar(n.camera.position.length())),[l,r,s,i,t].forEach(e=>e.current?.wakeUp()),l.current?.setNextKinematicTranslation({x:c.x-M.x,y:c.y-M.y,z:c.z-M.z})),t.current&&(v.points[0].copy(i.current.translation()),v.points[1].copy(s.current.translation()),v.points[2].copy(r.current.translation()),v.points[3].copy(t.current.translation()),e.current.geometry.setPoints(v.getPoints(32)),h.copy(l.current.angvel()),u.copy(l.current.rotation()),l.current.setAngvel({x:h.x,y:h.y-.25*u.y,z:h.z},!1))}),v.curveType="chordal",b.wrapS=b.wrapT=g.GJx,(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("group",{position:[0,4,0],children:[(0,n.jsx)(p.Ux,{ref:t,...j}),(0,n.jsx)(p.Ux,{position:[.5,0,0],ref:r,...j,children:(0,n.jsx)(p.wV,{args:[.1]})}),(0,n.jsx)(p.Ux,{position:[1,0,0],ref:s,...j,children:(0,n.jsx)(p.wV,{args:[.1]})}),(0,n.jsx)(p.Ux,{position:[1.5,0,0],ref:i,...j,children:(0,n.jsx)(p.wV,{args:[.1]})}),(0,n.jsxs)(p.Ux,{position:[2,0,0],ref:l,...j,type:M?"kinematicPosition":"dynamic",children:[(0,n.jsx)(p.Xc,{args:[.8,1.125,.01]}),(0,n.jsxs)("group",{scale:2.25,position:[0,-1.2,-.05],onPointerOver:()=>D(!0),onPointerOut:()=>D(!1),onPointerUp:e=>(e.target?.releasePointerCapture(e.pointerId),k(!1)),onPointerDown:e=>(e.target?.setPointerCapture(e.pointerId),k(new g.Pq0().copy(e.point).sub(c.copy(l.current.translation())))),children:[(0,n.jsx)("mesh",{geometry:y.card.geometry,children:(0,n.jsx)("meshPhysicalMaterial",{map:w.base.map,"map-anisotropy":16,clearcoat:1,clearcoatRoughness:.15,roughness:.3,metalness:.5})}),(0,n.jsx)("mesh",{geometry:y.clip.geometry,material:w.metal,"material-roughness":.3}),(0,n.jsx)("mesh",{geometry:y.clamp.geometry,material:w.metal})]})]})]}),(0,n.jsxs)("mesh",{ref:e,children:[(0,n.jsx)("meshLineGeometry",{}),(0,n.jsx)("meshLineMaterial",{color:"white",depthTest:!1,resolution:[f,P],useMap:!0,map:b,repeat:[-3,1],lineWidth:1})]})]})},w=()=>{let{debug:e}=(0,u._5)({debug:!1});return(0,n.jsx)(j.A,{children:(0,n.jsxs)(h.Hl,{camera:{position:[0,0,13],fov:25},children:[(0,n.jsx)("ambientLight",{intensity:Math.PI}),(0,n.jsx)(p.AQ,{debug:e,interpolate:!0,gravity:[0,-40,0],timeStep:1/60,children:(0,n.jsx)(y,{})}),(0,n.jsxs)(l.OH,{background:!0,blur:.75,children:[(0,n.jsx)("color",{attach:"background",args:["black"]}),(0,n.jsx)(c.O,{intensity:2,color:"white",position:[0,-1,5],rotation:[0,0,Math.PI/3],scale:[100,.1,1]}),(0,n.jsx)(c.O,{intensity:3,color:"white",position:[-1,-1,1],rotation:[0,0,Math.PI/3],scale:[100,.1,1]}),(0,n.jsx)(c.O,{intensity:3,color:"white",position:[1,1,1],rotation:[0,0,Math.PI/3],scale:[100,.1,1]}),(0,n.jsx)(c.O,{intensity:10,color:"white",position:[-10,0,14],rotation:[0,Math.PI/2,Math.PI/3],scale:[100,10,1]})]})]})})},b={sidebar_position:2,title:"3D\u5361\u7247",tags:["Javascript"]},f="3D\u5361\u7247",P={},v=[{value:"\u6838\u5FC3\u6982\u5FF5",id:"\u6838\u5FC3\u6982\u5FF5",level:2}];function M(e){let t={h1:"h1",h2:"h2",header:"header",li:"li",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"3d\u5361\u7247",children:"3D\u5361\u7247"})}),"\n",(0,n.jsx)(w,{}),"\n",(0,n.jsx)(t.h2,{id:"\u6838\u5FC3\u6982\u5FF5",children:"\u6838\u5FC3\u6982\u5FF5"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Physics\u4E16\u754C"}),": \u4F7F\u7528Rapier\u7269\u7406\u5F15\u64CE\u6A21\u62DF\u771F\u5B9E\u7269\u7406\u6548\u679C"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"RigidBody"}),": \u53C2\u4E0E\u7269\u7406\u6A21\u62DF\u7684\u521A\u4F53\uFF0C\u6709\u52A8\u6001\u548C\u9759\u6001\u4E24\u79CD"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"\u7EA6\u675F\u7CFB\u7EDF"}),": RopeJoint\u548CSphericalJoint\u7528\u4E8E\u8FDE\u63A5\u521A\u4F53\uFF0C\u521B\u5EFA\u7EF3\u7D22\u6548\u679C"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"MeshLine"}),": \u4F7F\u7528\u8D1D\u585E\u5C14\u66F2\u7EBF\u6E32\u67D3\u5149\u6ED1\u7684\u7EBF\u6761"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"\u4EA4\u4E92\u7CFB\u7EDF"}),": \u6307\u9488\u4E8B\u4EF6\u548C\u9F20\u6807\u62D6\u62FD\u5B9E\u73B03D\u4EA4\u4E92"]}),"\n"]})]})}function k(e={}){let{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(M,{...e})}):M(e)}}}]);