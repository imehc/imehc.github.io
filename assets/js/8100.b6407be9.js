(self.webpackChunkanch=self.webpackChunkanch||[]).push([["8100"],{86921(e){function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=86921,e.exports=t},6482(){},87119(e,t,r){"use strict";let n,i,o,a,s,l,u,c,f,h,p,d,m,y,_,E,O,g,T,A,b,w,R,S,x,N,I,C;r.d(t,{initViewer:()=>uc});var v=r(77359),M=r(88708),P=r(68654),L=r(99600),F=r(11989),D=r(6963),B=r(22661),z=r(97168),U=r(9005),j=r(23751);class q{viewer;option;cloud;constructor(e,t){this.viewer=e,this.option=t||{fogX:25,fogY:12,fogBrightness:1},this.init()}init(){let e=this.viewer.scene.primitives.add(new U.A({noiseDetail:16}));this.cloud=e.add({position:L.A.fromDegrees(114.39264,30.52252,200),scale:new j.A(this.option.fogX,this.option.fogY),slice:.36,brightness:this.option.fogBrightness})}update(e,t,r){this.cloud.scale=new j.A(e,t),this.cloud.brightness=r}destroy(){this.viewer.scene.primitives.remove(this.cloud)}}var G=r(96433);class V{stage=null;collection;constructor(e){this.collection=e.scene.postProcessStages}getShader(){return`
            #version 300 es
            precision highp float;

            uniform sampler2D colorTexture;
            uniform float fall_interval;
            uniform float mix_factor;
            in vec2 v_textureCoordinates;
            out vec4 fragColor;

            float hash(float x)
            {
                return fract(21654.6512 * sin(385.51 * x));
            }

            float hash(vec2 p)
            {
                return fract(1654.65157 * sin(15.5134763 * p.x + 45.5173247 * p.y + 5.21789));
            }

            vec2 hash2(vec2 p)
            {
                return vec2(hash(p * 0.754), hash(1.5743 * p + 4.5476351));
            }

            vec2 add = vec2(1.0, 0.0);

            vec2 noise2(vec2 x)
            {
                vec2 p = floor(x);
                vec2 f = fract(x);
                f = f * f * (3.0 - 2.0 * f);
                vec2 res = mix(mix(hash2(p), hash2(p + add.xy), f.x),
                               mix(hash2(p + add.yx), hash2(p + add.xx), f.x), f.y);
                return res;
            }

            vec2 fbm2(vec2 x)
            {
                vec2 r = vec2(0.0);
                float a = 1.0;
                for (int i = 0; i < 8; i++)
                {
                    r += noise2(x) * a;
                    x *= 2.0;
                    a *= 0.5;
                }
                return r;
            }

            float dseg(vec2 ba, vec2 pa)
            {
                float h = clamp(dot(pa, ba) / dot(ba, ba), -0.2, 1.0);
                return length(pa - ba * h);
            }

            void main(void) {
                vec2 uv = gl_FragCoord.xy;
                float iTime = float(czm_frameNumber) * fall_interval * clamp(fall_interval * 0.1, 0.01, 0.1);
                vec2 p = uv / czm_viewport.zw;
                vec2 d;
                vec2 tgt = vec2(1.0, -1.0);
                float c = 0.0;

                if (p.y >= 0.0)
                    c = (1.0 - (fbm2((p + 0.2) * p.y + 0.1 * iTime)).x) * p.y;
                else
                    c = (1.0 - (fbm2(p + 0.2 + 0.1 * iTime)).x) * p.y * p.y;

                vec3 col = vec3(0.0);
                vec3 col1 = c * vec3(0.3, 0.5, 1.0);
                float mdist = 100000.0;
                float t = hash(floor(5.0 * iTime));
                tgt += 4.0 * hash2(tgt + t) - 1.5;

                if (hash(t + 2.3) > 0.6) {
                    for (int i = 0; i < 100; i++) {
                        vec2 dtgt = tgt - p;
                        d = 0.05 * (vec2(-0.5, -1.0) + hash2(vec2(float(i), t)));
                        float dist = dseg(d, dtgt);
                        mdist = min(mdist, dist);
                        tgt -= d;
                        c = exp(-1.2 * dist) + exp(-55.0 * mdist);
                        col = c * vec3(0.7, 0.8, 1.0);
                    }
                }

                col += col1;
                fragColor = mix(texture(colorTexture, v_textureCoordinates), vec4(col, 0.0), mix_factor);
            }
            `}create(e={}){let{mix_factor:t=.35,fall_interval:r=.8}=e;return this.stage=new G.A({name:"czm_lightning",fragmentShader:this.getShader(),uniforms:{mix_factor:t,fall_interval:r}}),this.stage}add(e={}){this.stage||this.create(e),this.stage&&!this.collection.contains(this.stage)&&this.collection.add(this.stage)}remove(){this.stage&&this.collection.contains(this.stage)&&this.collection.remove(this.stage)}destroy(){this.remove(),this.stage&&(this.stage=null)}update(e){this.stage&&(void 0!==e.mix_factor&&(this.stage.uniforms.mix_factor=e.mix_factor),void 0!==e.fall_interval&&(this.stage.uniforms.fall_interval=e.fall_interval))}getStage(){return this.stage}}var k=r(30384);let H=function(e){return null!=e};function Y(e){let t;this.name="DeveloperError",this.message=e;try{throw Error()}catch(e){t=e.stack}this.stack=t}H(Object.create)&&(Y.prototype=Object.create(Error.prototype),Y.prototype.constructor=Y),Y.prototype.toString=function(){let e=`${this.name}: ${this.message}`;return H(this.stack)&&(e+=`
${this.stack.toString()}`),e},Y.throwInstantiationError=()=>{throw new Y("This function defines an interface and should not be called directly.")};let W={};function X(e,t,r){return`Expected ${r} to be typeof ${t}, actual typeof was ${e}`}W.typeOf={},W.defined=(e,t)=>{if(!H(t))throw new Y(`${e} is required, actual value was undefined`)},W.typeOf.func=(e,t)=>{if("function"!=typeof t)throw new Y(X(typeof t,"function",e))},W.typeOf.string=(e,t)=>{if("string"!=typeof t)throw new Y(X(typeof t,"string",e))},W.typeOf.number=(e,t)=>{if("number"!=typeof t)throw new Y(X(typeof t,"number",e))},W.typeOf.number.lessThan=(e,t,r)=>{if(W.typeOf.number(e,t),t>=r)throw new Y(`Expected ${e} to be less than ${r}, actual value was ${t}`)},W.typeOf.number.lessThanOrEquals=(e,t,r)=>{if(W.typeOf.number(e,t),t>r)throw new Y(`Expected ${e} to be less than or equal to ${r}, actual value was ${t}`)},W.typeOf.number.greaterThan=(e,t,r)=>{if(W.typeOf.number(e,t),t<=r)throw new Y(`Expected ${e} to be greater than ${r}, actual value was ${t}`)},W.typeOf.number.greaterThanOrEquals=(e,t,r)=>{if(W.typeOf.number(e,t),t<r)throw new Y(`Expected ${e} to be greater than or equal to ${r}, actual value was ${t}`)},W.typeOf.object=(e,t)=>{if("object"!=typeof t)throw new Y(X(typeof t,"object",e))},W.typeOf.bool=(e,t)=>{if("boolean"!=typeof t)throw new Y(X(typeof t,"boolean",e))},W.typeOf.bigint=(e,t)=>{if("bigint"!=typeof t)throw new Y(X(typeof t,"bigint",e))},W.typeOf.number.equals=(e,t,r,n)=>{if(W.typeOf.number(e,r),W.typeOf.number(t,n),r!==n)throw new Y(`${e} must be equal to ${t}, the actual values are ${r} and ${n}`)};var $=r(19488),Z=r.n($);let K={};K.EPSILON1=.1,K.EPSILON2=.01,K.EPSILON3=.001,K.EPSILON4=1e-4,K.EPSILON5=1e-5,K.EPSILON6=1e-6,K.EPSILON7=1e-7,K.EPSILON8=1e-8,K.EPSILON9=1e-9,K.EPSILON10=1e-10,K.EPSILON11=1e-11,K.EPSILON12=1e-12,K.EPSILON13=1e-13,K.EPSILON14=1e-14,K.EPSILON15=1e-15,K.EPSILON16=1e-16,K.EPSILON17=1e-17,K.EPSILON18=1e-18,K.EPSILON19=1e-19,K.EPSILON20=1e-20,K.EPSILON21=1e-21,K.GRAVITATIONALPARAMETER=3986004418e5,K.SOLAR_RADIUS=6955e5,K.LUNAR_RADIUS=1737400,K.SIXTY_FOUR_KILOBYTES=65536,K.FOUR_GIGABYTES=0x100000000,K.sign=Math.sign??function(e){return 0==(e*=1)||e!=e?e:e>0?1:-1},K.signNotZero=e=>e<0?-1:1,K.toSNorm=(e,t)=>(t=t??255,Math.round((.5*K.clamp(e,-1,1)+.5)*t)),K.fromSNorm=(e,t)=>(t=t??255,K.clamp(e,0,t)/t*2-1),K.normalize=(e,t,r)=>0===(r=Math.max(r-t,0))?0:K.clamp((e-t)/r,0,1),K.sinh=Math.sinh??function(e){return(Math.exp(e)-Math.exp(-e))/2},K.cosh=Math.cosh??function(e){return(Math.exp(e)+Math.exp(-e))/2},K.lerp=(e,t,r)=>(1-r)*e+r*t,K.PI=Math.PI,K.ONE_OVER_PI=1/Math.PI,K.PI_OVER_TWO=Math.PI/2,K.PI_OVER_THREE=Math.PI/3,K.PI_OVER_FOUR=Math.PI/4,K.PI_OVER_SIX=Math.PI/6,K.THREE_PI_OVER_TWO=3*Math.PI/2,K.TWO_PI=2*Math.PI,K.ONE_OVER_TWO_PI=1/(2*Math.PI),K.RADIANS_PER_DEGREE=Math.PI/180,K.DEGREES_PER_RADIAN=180/Math.PI,K.RADIANS_PER_ARCSECOND=K.RADIANS_PER_DEGREE/3600,K.toRadians=e=>{if(!H(e))throw new Y("degrees is required.");return e*K.RADIANS_PER_DEGREE},K.toDegrees=e=>{if(!H(e))throw new Y("radians is required.");return e*K.DEGREES_PER_RADIAN},K.convertLongitudeRange=e=>{if(!H(e))throw new Y("angle is required.");let t=K.TWO_PI,r=e-Math.floor(e/t)*t;return r<-Math.PI?r+t:r>=Math.PI?r-t:r},K.clampToLatitudeRange=e=>{if(!H(e))throw new Y("angle is required.");return K.clamp(e,-1*K.PI_OVER_TWO,K.PI_OVER_TWO)},K.negativePiToPi=e=>{if(!H(e))throw new Y("angle is required.");return e>=-K.PI&&e<=K.PI?e:K.zeroToTwoPi(e+K.PI)-K.PI},K.zeroToTwoPi=e=>{if(!H(e))throw new Y("angle is required.");if(e>=0&&e<=K.TWO_PI)return e;let t=K.mod(e,K.TWO_PI);return Math.abs(t)<K.EPSILON14&&Math.abs(e)>K.EPSILON14?K.TWO_PI:t},K.mod=(e,t)=>{if(!H(e))throw new Y("m is required.");if(!H(t))throw new Y("n is required.");if(0===t)throw new Y("divisor cannot be 0.");return K.sign(e)===K.sign(t)&&Math.abs(e)<Math.abs(t)?e:(e%t+t)%t},K.equalsEpsilon=(e,t,r,n)=>{if(!H(e))throw new Y("left is required.");if(!H(t))throw new Y("right is required.");r=r??0;let i=Math.abs(e-t);return i<=(n=n??r)||i<=r*Math.max(Math.abs(e),Math.abs(t))},K.lessThan=(e,t,r)=>{if(!H(e))throw new Y("first is required.");if(!H(t))throw new Y("second is required.");if(!H(r))throw new Y("absoluteEpsilon is required.");return e-t<-r},K.lessThanOrEquals=(e,t,r)=>{if(!H(e))throw new Y("first is required.");if(!H(t))throw new Y("second is required.");if(!H(r))throw new Y("absoluteEpsilon is required.");return e-t<r},K.greaterThan=(e,t,r)=>{if(!H(e))throw new Y("first is required.");if(!H(t))throw new Y("second is required.");if(!H(r))throw new Y("absoluteEpsilon is required.");return e-t>r},K.greaterThanOrEquals=(e,t,r)=>{if(!H(e))throw new Y("first is required.");if(!H(t))throw new Y("second is required.");if(!H(r))throw new Y("absoluteEpsilon is required.");return e-t>-r};let J=[1];K.factorial=e=>{if("number"!=typeof e||e<0)throw new Y("A number greater than or equal to 0 is required.");let t=J.length;if(e>=t){let r=J[t-1];for(let n=t;n<=e;n++){let e=r*n;J.push(e),r=e}}return J[e]},K.incrementWrap=(e,t,r)=>{if(r=r??0,!H(e))throw new Y("n is required.");if(t<=r)throw new Y("maximumValue must be greater than minimumValue.");return++e>t&&(e=r),e},K.isPowerOfTwo=e=>{if("number"!=typeof e||e<0||e>0xffffffff)throw new Y("A number between 0 and (2^32)-1 is required.");return 0!==e&&(e&e-1)==0},K.nextPowerOfTwo=e=>{if("number"!=typeof e||e<0||e>0x80000000)throw new Y("A number between 0 and 2^31 is required.");return--e,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e},K.previousPowerOfTwo=e=>{if("number"!=typeof e||e<0||e>0xffffffff)throw new Y("A number between 0 and (2^32)-1 is required.");return e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e|=e>>32,e=(e>>>0)-(e>>>1)},K.clamp=(e,t,r)=>(W.typeOf.number("value",e),W.typeOf.number("min",t),W.typeOf.number("max",r),e<t?t:e>r?r:e);let Q=new(Z());function ee(e,t,r){this.x=e??0,this.y=t??0,this.z=r??0}K.setRandomNumberSeed=e=>{if(!H(e))throw new Y("seed is required.");Q=new(Z())(e)},K.nextRandomNumber=()=>Q.random(),K.randomBetween=(e,t)=>K.nextRandomNumber()*(t-e)+e,K.acosClamped=e=>{if(!H(e))throw new Y("value is required.");return Math.acos(K.clamp(e,-1,1))},K.asinClamped=e=>{if(!H(e))throw new Y("value is required.");return Math.asin(K.clamp(e,-1,1))},K.chordLength=(e,t)=>{if(!H(e))throw new Y("angle is required.");if(!H(t))throw new Y("radius is required.");return 2*t*Math.sin(.5*e)},K.logBase=(e,t)=>{if(!H(e))throw new Y("number is required.");if(!H(t))throw new Y("base is required.");return Math.log(e)/Math.log(t)},K.cbrt=Math.cbrt??function(e){let t=Math.abs(e)**(1/3);return e<0?-t:t},K.log2=Math.log2??function(e){return Math.log(e)*Math.LOG2E},K.fog=(e,t)=>{let r=e*t;return 1-Math.exp(-(r*r))},K.fastApproximateAtan=e=>(W.typeOf.number("x",e),e*(-.1784*Math.abs(e)-.0663*e*e+1.0301)),K.fastApproximateAtan2=(e,t)=>{let r;W.typeOf.number("x",e),W.typeOf.number("y",t);let n=Math.abs(e),i=Math.max(n,r=Math.abs(t)),o=(r=Math.min(n,r))/i;if(isNaN(o))throw new Y("either x or y must be nonzero");return n=K.fastApproximateAtan(o),n=Math.abs(t)>Math.abs(e)?K.PI_OVER_TWO-n:n,n=e<0?K.PI-n:n,n=t<0?-n:n},ee.fromSpherical=(e,t)=>{W.typeOf.object("spherical",e),H(t)||(t=new ee);let r=e.clock,n=e.cone,i=e.magnitude??1,o=i*Math.sin(n);return t.x=o*Math.cos(r),t.y=o*Math.sin(r),t.z=i*Math.cos(n),t},ee.fromElements=(e,t,r,n)=>H(n)?(n.x=e,n.y=t,n.z=r,n):new ee(e,t,r),ee.clone=(e,t)=>{if(H(e))return H(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t):new ee(e.x,e.y,e.z)},ee.fromCartesian4=ee.clone,ee.packedLength=3,ee.pack=(e,t,r)=>(W.typeOf.object("value",e),W.defined("array",t),r=r??0,t[r++]=e.x,t[r++]=e.y,t[r]=e.z,t),ee.unpack=(e,t,r)=>(W.defined("array",e),t=t??0,H(r)||(r=new ee),r.x=e[t++],r.y=e[t++],r.z=e[t],r),ee.packArray=(e,t)=>{W.defined("array",e);let r=e.length,n=3*r;if(H(t))if(Array.isArray(t)||t.length===n)t.length!==n&&(t.length=n);else throw new Y("If result is a typed array, it must have exactly array.length * 3 elements");else t=Array(n);for(let n=0;n<r;++n)ee.pack(e[n],t,3*n);return t},ee.unpackArray=(e,t)=>{if(W.defined("array",e),W.typeOf.number.greaterThanOrEquals("array.length",e.length,3),e.length%3!=0)throw new Y("array length must be a multiple of 3.");let r=e.length;H(t)?t.length=r/3:t=Array(r/3);for(let n=0;n<r;n+=3){let r=n/3;t[r]=ee.unpack(e,n,t[r])}return t},ee.fromArray=ee.unpack,ee.maximumComponent=e=>(W.typeOf.object("cartesian",e),Math.max(e.x,e.y,e.z)),ee.minimumComponent=e=>(W.typeOf.object("cartesian",e),Math.min(e.x,e.y,e.z)),ee.minimumByComponent=(e,t,r)=>(W.typeOf.object("first",e),W.typeOf.object("second",t),W.typeOf.object("result",r),r.x=Math.min(e.x,t.x),r.y=Math.min(e.y,t.y),r.z=Math.min(e.z,t.z),r),ee.maximumByComponent=(e,t,r)=>(W.typeOf.object("first",e),W.typeOf.object("second",t),W.typeOf.object("result",r),r.x=Math.max(e.x,t.x),r.y=Math.max(e.y,t.y),r.z=Math.max(e.z,t.z),r),ee.clamp=(e,t,r,n)=>{W.typeOf.object("value",e),W.typeOf.object("min",t),W.typeOf.object("max",r),W.typeOf.object("result",n);let i=K.clamp(e.x,t.x,r.x),o=K.clamp(e.y,t.y,r.y),a=K.clamp(e.z,t.z,r.z);return n.x=i,n.y=o,n.z=a,n},ee.magnitudeSquared=e=>(W.typeOf.object("cartesian",e),e.x*e.x+e.y*e.y+e.z*e.z),ee.magnitude=e=>Math.sqrt(ee.magnitudeSquared(e));let et=new ee;ee.distance=(e,t)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),ee.subtract(e,t,et),ee.magnitude(et)),ee.distanceSquared=(e,t)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),ee.subtract(e,t,et),ee.magnitudeSquared(et)),ee.normalize=(e,t)=>{W.typeOf.object("cartesian",e),W.typeOf.object("result",t);let r=ee.magnitude(e);if(t.x=e.x/r,t.y=e.y/r,t.z=e.z/r,isNaN(t.x)||isNaN(t.y)||isNaN(t.z))throw new Y("normalized result is not a number");return t},ee.dot=(e,t)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z),ee.multiplyComponents=(e,t,r)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r),r.x=e.x*t.x,r.y=e.y*t.y,r.z=e.z*t.z,r),ee.divideComponents=(e,t,r)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r),r.x=e.x/t.x,r.y=e.y/t.y,r.z=e.z/t.z,r),ee.add=(e,t,r)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r),r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r),ee.subtract=(e,t,r)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r),r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r),ee.multiplyByScalar=(e,t,r)=>(W.typeOf.object("cartesian",e),W.typeOf.number("scalar",t),W.typeOf.object("result",r),r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r),ee.divideByScalar=(e,t,r)=>(W.typeOf.object("cartesian",e),W.typeOf.number("scalar",t),W.typeOf.object("result",r),r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r),ee.negate=(e,t)=>(W.typeOf.object("cartesian",e),W.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t),ee.abs=(e,t)=>(W.typeOf.object("cartesian",e),W.typeOf.object("result",t),t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t);let er=new ee;ee.lerp=(e,t,r,n)=>(W.typeOf.object("start",e),W.typeOf.object("end",t),W.typeOf.number("t",r),W.typeOf.object("result",n),ee.multiplyByScalar(t,r,er),n=ee.multiplyByScalar(e,1-r,n),ee.add(er,n,n));let en=new ee,ei=new ee;ee.angleBetween=(e,t)=>{W.typeOf.object("left",e),W.typeOf.object("right",t),ee.normalize(e,en),ee.normalize(t,ei);let r=ee.dot(en,ei);return Math.atan2(ee.magnitude(ee.cross(en,ei,en)),r)};let eo=new ee;ee.mostOrthogonalAxis=(e,t)=>{W.typeOf.object("cartesian",e),W.typeOf.object("result",t);let r=ee.normalize(e,eo);return ee.abs(r,r),t=r.x<=r.y?r.x<=r.z?ee.clone(ee.UNIT_X,t):ee.clone(ee.UNIT_Z,t):r.y<=r.z?ee.clone(ee.UNIT_Y,t):ee.clone(ee.UNIT_Z,t)},ee.projectVector=(e,t,r)=>{W.defined("a",e),W.defined("b",t),W.defined("result",r);let n=ee.dot(e,t)/ee.dot(t,t);return ee.multiplyByScalar(t,n,r)},ee.equals=(e,t)=>e===t||H(e)&&H(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z,ee.equalsArray=(e,t,r)=>e.x===t[r]&&e.y===t[r+1]&&e.z===t[r+2],ee.equalsEpsilon=(e,t,r,n)=>e===t||H(e)&&H(t)&&K.equalsEpsilon(e.x,t.x,r,n)&&K.equalsEpsilon(e.y,t.y,r,n)&&K.equalsEpsilon(e.z,t.z,r,n),ee.cross=(e,t,r)=>{W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r);let n=e.x,i=e.y,o=e.z,a=t.x,s=t.y,l=t.z;return r.x=i*l-o*s,r.y=o*a-n*l,r.z=n*s-i*a,r},ee.midpoint=(e,t,r)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r),r.x=(e.x+t.x)*.5,r.y=(e.y+t.y)*.5,r.z=(e.z+t.z)*.5,r),ee.fromDegrees=(e,t,r,n,i)=>(W.typeOf.number("longitude",e),W.typeOf.number("latitude",t),e=K.toRadians(e),t=K.toRadians(t),ee.fromRadians(e,t,r,n,i));let ea=new ee,es=new ee;ee._ellipsoidRadiiSquared=new ee(0x24ffb2985f71,0x24ffb2985f71,40408299984661.445),ee.fromRadians=(e,t,r,n,i)=>{W.typeOf.number("longitude",e),W.typeOf.number("latitude",t),r=r??0;let o=H(n)?n.radiiSquared:ee._ellipsoidRadiiSquared,a=Math.cos(t);ea.x=a*Math.cos(e),ea.y=a*Math.sin(e),ea.z=Math.sin(t),ea=ee.normalize(ea,ea),ee.multiplyComponents(o,ea,es);let s=Math.sqrt(ee.dot(ea,es));return es=ee.divideByScalar(es,s,es),ea=ee.multiplyByScalar(ea,r,ea),H(i)||(i=new ee),ee.add(es,ea,i)},ee.fromDegreesArray=(e,t,r)=>{if(W.defined("coordinates",e),e.length<2||e.length%2!=0)throw new Y("the number of coordinates must be a multiple of 2 and at least 2");let n=e.length;H(r)?r.length=n/2:r=Array(n/2);for(let i=0;i<n;i+=2){let n=e[i],o=e[i+1],a=i/2;r[a]=ee.fromDegrees(n,o,0,t,r[a])}return r},ee.fromRadiansArray=(e,t,r)=>{if(W.defined("coordinates",e),e.length<2||e.length%2!=0)throw new Y("the number of coordinates must be a multiple of 2 and at least 2");let n=e.length;H(r)?r.length=n/2:r=Array(n/2);for(let i=0;i<n;i+=2){let n=e[i],o=e[i+1],a=i/2;r[a]=ee.fromRadians(n,o,0,t,r[a])}return r},ee.fromDegreesArrayHeights=(e,t,r)=>{if(W.defined("coordinates",e),e.length<3||e.length%3!=0)throw new Y("the number of coordinates must be a multiple of 3 and at least 3");let n=e.length;H(r)?r.length=n/3:r=Array(n/3);for(let i=0;i<n;i+=3){let n=e[i],o=e[i+1],a=e[i+2],s=i/3;r[s]=ee.fromDegrees(n,o,a,t,r[s])}return r},ee.fromRadiansArrayHeights=(e,t,r)=>{if(W.defined("coordinates",e),e.length<3||e.length%3!=0)throw new Y("the number of coordinates must be a multiple of 3 and at least 3");let n=e.length;H(r)?r.length=n/3:r=Array(n/3);for(let i=0;i<n;i+=3){let n=e[i],o=e[i+1],a=e[i+2],s=i/3;r[s]=ee.fromRadians(n,o,a,t,r[s])}return r},ee.ZERO=Object.freeze(new ee(0,0,0)),ee.ONE=Object.freeze(new ee(1,1,1)),ee.UNIT_X=Object.freeze(new ee(1,0,0)),ee.UNIT_Y=Object.freeze(new ee(0,1,0)),ee.UNIT_Z=Object.freeze(new ee(0,0,1)),ee.prototype.clone=function(e){return ee.clone(this,e)},ee.prototype.equals=function(e){return ee.equals(this,e)},ee.prototype.equalsEpsilon=function(e,t,r){return ee.equalsEpsilon(this,e,t,r)},ee.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z})`};let el=new ee,eu=new ee,ec=function(e,t,r,n,i){let o,a,s,l,u,c,f,h,p,d;if(!H(e))throw new Y("cartesian is required.");if(!H(t))throw new Y("oneOverRadii is required.");if(!H(r))throw new Y("oneOverRadiiSquared is required.");if(!H(n))throw new Y("centerToleranceSquared is required.");let m=e.x,y=e.y,_=e.z,E=t.x,O=t.y,g=t.z,T=m*m*E*E,A=y*y*O*O,b=_*_*g*g,w=T+A+b,R=Math.sqrt(1/w),S=ee.multiplyByScalar(e,R,el);if(w<n)return isFinite(R)?ee.clone(S,i):void 0;let x=r.x,N=r.y,I=r.z;eu.x=S.x*x*2,eu.y=S.y*N*2,eu.z=S.z*I*2;let C=(1-R)*ee.magnitude(e)/(.5*ee.magnitude(eu)),v=0;do C-=v,a=1/(1+C*x),s=1/(1+C*N),l=1/(1+C*I),u=a*a,c=s*s,f=l*l,h=u*a,p=c*s,d=f*l,v=(o=T*u+A*c+b*f-1)/(-2*(T*h*x+A*p*N+b*d*I));while(Math.abs(o)>K.EPSILON12)return H(i)?(i.x=m*a,i.y=y*s,i.z=_*l,i):new ee(m*a,y*s,_*l)};function ef(e,t,r){this.longitude=e??0,this.latitude=t??0,this.height=r??0}ef.fromRadians=(e,t,r,n)=>(W.typeOf.number("longitude",e),W.typeOf.number("latitude",t),r=r??0,H(n))?(n.longitude=e,n.latitude=t,n.height=r,n):new ef(e,t,r),ef.fromDegrees=(e,t,r,n)=>(W.typeOf.number("longitude",e),W.typeOf.number("latitude",t),e=K.toRadians(e),t=K.toRadians(t),ef.fromRadians(e,t,r,n));let eh=new ee,ep=new ee,ed=new ee;function em(e,t){this.x=e??0,this.y=t??0}ef._ellipsoidOneOverRadii=new ee(1/6378137,1/6378137,1/6356752.314245179),ef._ellipsoidOneOverRadiiSquared=new ee(1/0x24ffb2985f71,1/0x24ffb2985f71,24747391015697002e-30),ef._ellipsoidCenterToleranceSquared=K.EPSILON1,ef.fromCartesian=(e,t,r)=>{let n=H(t)?t.oneOverRadii:ef._ellipsoidOneOverRadii,i=H(t)?t.oneOverRadiiSquared:ef._ellipsoidOneOverRadiiSquared,o=ec(e,n,i,H(t)?t._centerToleranceSquared:ef._ellipsoidCenterToleranceSquared,ep);if(!H(o))return;let a=ee.multiplyComponents(o,i,eh);a=ee.normalize(a,a);let s=ee.subtract(e,o,ed),l=Math.atan2(a.y,a.x),u=Math.asin(a.z),c=K.sign(ee.dot(s,e))*ee.magnitude(s);return H(r)?(r.longitude=l,r.latitude=u,r.height=c,r):new ef(l,u,c)},ef.toCartesian=(e,t,r)=>(W.defined("cartographic",e),ee.fromRadians(e.longitude,e.latitude,e.height,t,r)),ef.clone=(e,t)=>{if(H(e))return H(t)?(t.longitude=e.longitude,t.latitude=e.latitude,t.height=e.height,t):new ef(e.longitude,e.latitude,e.height)},ef.equals=(e,t)=>e===t||H(e)&&H(t)&&e.longitude===t.longitude&&e.latitude===t.latitude&&e.height===t.height,ef.equalsEpsilon=(e,t,r)=>(r=r??0,e===t||H(e)&&H(t)&&Math.abs(e.longitude-t.longitude)<=r&&Math.abs(e.latitude-t.latitude)<=r&&Math.abs(e.height-t.height)<=r),ef.ZERO=Object.freeze(new ef(0,0,0)),ef.prototype.clone=function(e){return ef.clone(this,e)},ef.prototype.equals=function(e){return ef.equals(this,e)},ef.prototype.equalsEpsilon=function(e,t){return ef.equalsEpsilon(this,e,t)},ef.prototype.toString=function(){return`(${this.longitude}, ${this.latitude}, ${this.height})`},em.fromElements=(e,t,r)=>H(r)?(r.x=e,r.y=t,r):new em(e,t),em.clone=(e,t)=>{if(H(e))return H(t)?(t.x=e.x,t.y=e.y,t):new em(e.x,e.y)},em.fromCartesian3=em.clone,em.fromCartesian4=em.clone,em.packedLength=2,em.pack=(e,t,r)=>(W.typeOf.object("value",e),W.defined("array",t),r=r??0,t[r++]=e.x,t[r]=e.y,t),em.unpack=(e,t,r)=>(W.defined("array",e),t=t??0,H(r)||(r=new em),r.x=e[t++],r.y=e[t],r),em.packArray=(e,t)=>{W.defined("array",e);let r=e.length,n=2*r;if(H(t))if(Array.isArray(t)||t.length===n)t.length!==n&&(t.length=n);else throw new Y("If result is a typed array, it must have exactly array.length * 2 elements");else t=Array(n);for(let n=0;n<r;++n)em.pack(e[n],t,2*n);return t},em.unpackArray=(e,t)=>{if(W.defined("array",e),W.typeOf.number.greaterThanOrEquals("array.length",e.length,2),e.length%2!=0)throw new Y("array length must be a multiple of 2.");let r=e.length;H(t)?t.length=r/2:t=Array(r/2);for(let n=0;n<r;n+=2){let r=n/2;t[r]=em.unpack(e,n,t[r])}return t},em.fromArray=em.unpack,em.maximumComponent=e=>(W.typeOf.object("cartesian",e),Math.max(e.x,e.y)),em.minimumComponent=e=>(W.typeOf.object("cartesian",e),Math.min(e.x,e.y)),em.minimumByComponent=(e,t,r)=>(W.typeOf.object("first",e),W.typeOf.object("second",t),W.typeOf.object("result",r),r.x=Math.min(e.x,t.x),r.y=Math.min(e.y,t.y),r),em.maximumByComponent=(e,t,r)=>(W.typeOf.object("first",e),W.typeOf.object("second",t),W.typeOf.object("result",r),r.x=Math.max(e.x,t.x),r.y=Math.max(e.y,t.y),r),em.clamp=(e,t,r,n)=>{W.typeOf.object("value",e),W.typeOf.object("min",t),W.typeOf.object("max",r),W.typeOf.object("result",n);let i=K.clamp(e.x,t.x,r.x),o=K.clamp(e.y,t.y,r.y);return n.x=i,n.y=o,n},em.magnitudeSquared=e=>(W.typeOf.object("cartesian",e),e.x*e.x+e.y*e.y),em.magnitude=e=>Math.sqrt(em.magnitudeSquared(e));let ey=new em;em.distance=(e,t)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),em.subtract(e,t,ey),em.magnitude(ey)),em.distanceSquared=(e,t)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),em.subtract(e,t,ey),em.magnitudeSquared(ey)),em.normalize=(e,t)=>{W.typeOf.object("cartesian",e),W.typeOf.object("result",t);let r=em.magnitude(e);if(t.x=e.x/r,t.y=e.y/r,isNaN(t.x)||isNaN(t.y))throw new Y("normalized result is not a number");return t},em.dot=(e,t)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),e.x*t.x+e.y*t.y),em.cross=(e,t)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),e.x*t.y-e.y*t.x),em.multiplyComponents=(e,t,r)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r),r.x=e.x*t.x,r.y=e.y*t.y,r),em.divideComponents=(e,t,r)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r),r.x=e.x/t.x,r.y=e.y/t.y,r),em.add=(e,t,r)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r),r.x=e.x+t.x,r.y=e.y+t.y,r),em.subtract=(e,t,r)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r),r.x=e.x-t.x,r.y=e.y-t.y,r),em.multiplyByScalar=(e,t,r)=>(W.typeOf.object("cartesian",e),W.typeOf.number("scalar",t),W.typeOf.object("result",r),r.x=e.x*t,r.y=e.y*t,r),em.divideByScalar=(e,t,r)=>(W.typeOf.object("cartesian",e),W.typeOf.number("scalar",t),W.typeOf.object("result",r),r.x=e.x/t,r.y=e.y/t,r),em.negate=(e,t)=>(W.typeOf.object("cartesian",e),W.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t),em.abs=(e,t)=>(W.typeOf.object("cartesian",e),W.typeOf.object("result",t),t.x=Math.abs(e.x),t.y=Math.abs(e.y),t);let e_=new em;em.lerp=(e,t,r,n)=>(W.typeOf.object("start",e),W.typeOf.object("end",t),W.typeOf.number("t",r),W.typeOf.object("result",n),em.multiplyByScalar(t,r,e_),n=em.multiplyByScalar(e,1-r,n),em.add(e_,n,n));let eE=new em,eO=new em;em.angleBetween=(e,t)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),em.normalize(e,eE),em.normalize(t,eO),K.acosClamped(em.dot(eE,eO)));let eg=new em;function eT(e,t,r,n){t=t??0,r=r??0,n=n??0,W.typeOf.number.greaterThanOrEquals("x",t,0),W.typeOf.number.greaterThanOrEquals("y",r,0),W.typeOf.number.greaterThanOrEquals("z",n,0),e._radii=new ee(t,r,n),e._radiiSquared=new ee(t*t,r*r,n*n),e._radiiToTheFourth=new ee(t*t*t*t,r*r*r*r,n*n*n*n),e._oneOverRadii=new ee(0===t?0:1/t,0===r?0:1/r,0===n?0:1/n),e._oneOverRadiiSquared=new ee(0===t?0:1/(t*t),0===r?0:1/(r*r),0===n?0:1/(n*n)),e._minimumRadius=Math.min(t,r,n),e._maximumRadius=Math.max(t,r,n),e._centerToleranceSquared=K.EPSILON1,0!==e._radiiSquared.z&&(e._squaredXOverSquaredZ=e._radiiSquared.x/e._radiiSquared.z)}function eA(e,t,r){this._radii=void 0,this._radiiSquared=void 0,this._radiiToTheFourth=void 0,this._oneOverRadii=void 0,this._oneOverRadiiSquared=void 0,this._minimumRadius=void 0,this._maximumRadius=void 0,this._centerToleranceSquared=void 0,this._squaredXOverSquaredZ=void 0,eT(this,e,t,r)}em.mostOrthogonalAxis=(e,t)=>{W.typeOf.object("cartesian",e),W.typeOf.object("result",t);let r=em.normalize(e,eg);return em.abs(r,r),t=r.x<=r.y?em.clone(em.UNIT_X,t):em.clone(em.UNIT_Y,t)},em.equals=(e,t)=>e===t||H(e)&&H(t)&&e.x===t.x&&e.y===t.y,em.equalsArray=(e,t,r)=>e.x===t[r]&&e.y===t[r+1],em.equalsEpsilon=(e,t,r,n)=>e===t||H(e)&&H(t)&&K.equalsEpsilon(e.x,t.x,r,n)&&K.equalsEpsilon(e.y,t.y,r,n),em.ZERO=Object.freeze(new em(0,0)),em.ONE=Object.freeze(new em(1,1)),em.UNIT_X=Object.freeze(new em(1,0)),em.UNIT_Y=Object.freeze(new em(0,1)),em.prototype.clone=function(e){return em.clone(this,e)},em.prototype.equals=function(e){return em.equals(this,e)},em.prototype.equalsEpsilon=function(e,t,r){return em.equalsEpsilon(this,e,t,r)},em.prototype.toString=function(){return`(${this.x}, ${this.y})`},Object.defineProperties(eA.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}}),eA.clone=(e,t)=>{if(!H(e))return;let r=e._radii;return H(t)?(ee.clone(r,t._radii),ee.clone(e._radiiSquared,t._radiiSquared),ee.clone(e._radiiToTheFourth,t._radiiToTheFourth),ee.clone(e._oneOverRadii,t._oneOverRadii),ee.clone(e._oneOverRadiiSquared,t._oneOverRadiiSquared),t._minimumRadius=e._minimumRadius,t._maximumRadius=e._maximumRadius,t._centerToleranceSquared=e._centerToleranceSquared,t):new eA(r.x,r.y,r.z)},eA.fromCartesian3=(e,t)=>(H(t)||(t=new eA),H(e)&&eT(t,e.x,e.y,e.z),t),eA.WGS84=Object.freeze(new eA(6378137,6378137,6356752.314245179)),eA.UNIT_SPHERE=Object.freeze(new eA(1,1,1)),eA.MOON=Object.freeze(new eA(K.LUNAR_RADIUS,K.LUNAR_RADIUS,K.LUNAR_RADIUS)),eA.MARS=Object.freeze(new eA(3396190,3396190,3376200)),eA._default=eA.WGS84,Object.defineProperties(eA,{default:{get:()=>eA._default,set:e=>{W.typeOf.object("value",e),eA._default=e,ee._ellipsoidRadiiSquared=e.radiiSquared,ef._ellipsoidOneOverRadii=e.oneOverRadii,ef._ellipsoidOneOverRadiiSquared=e.oneOverRadiiSquared,ef._ellipsoidCenterToleranceSquared=e._centerToleranceSquared}}}),eA.prototype.clone=function(e){return eA.clone(this,e)},eA.packedLength=ee.packedLength,eA.pack=(e,t,r)=>(W.typeOf.object("value",e),W.defined("array",t),r=r??0,ee.pack(e._radii,t,r),t),eA.unpack=(e,t,r)=>{W.defined("array",e),t=t??0;let n=ee.unpack(e,t);return eA.fromCartesian3(n,r)},eA.prototype.geocentricSurfaceNormal=ee.normalize,eA.prototype.geodeticSurfaceNormalCartographic=(e,t)=>{W.typeOf.object("cartographic",e);let r=e.longitude,n=e.latitude,i=Math.cos(n),o=i*Math.cos(r),a=i*Math.sin(r),s=Math.sin(n);return H(t)||(t=new ee),t.x=o,t.y=a,t.z=s,ee.normalize(t,t)},eA.prototype.geodeticSurfaceNormal=function(e,t){if(W.typeOf.object("cartesian",e),isNaN(e.x)||isNaN(e.y)||isNaN(e.z))throw new Y("cartesian has a NaN component");if(!ee.equalsEpsilon(e,ee.ZERO,K.EPSILON14))return H(t)||(t=new ee),t=ee.multiplyComponents(e,this._oneOverRadiiSquared,t),ee.normalize(t,t)};let eb=new ee,ew=new ee;eA.prototype.cartographicToCartesian=function(e,t){this.geodeticSurfaceNormalCartographic(e,eb),ee.multiplyComponents(this._radiiSquared,eb,ew);let r=Math.sqrt(ee.dot(eb,ew));return ee.divideByScalar(ew,r,ew),ee.multiplyByScalar(eb,e.height,eb),H(t)||(t=new ee),ee.add(ew,eb,t)},eA.prototype.cartographicArrayToCartesianArray=function(e,t){W.defined("cartographics",e);let r=e.length;H(t)?t.length=r:t=Array(r);for(let n=0;n<r;n++)t[n]=this.cartographicToCartesian(e[n],t[n]);return t};let eR=new ee,eS=new ee,ex=new ee;eA.prototype.cartesianToCartographic=function(e,t){let r=this.scaleToGeodeticSurface(e,eS);if(!H(r))return;let n=this.geodeticSurfaceNormal(r,eR),i=ee.subtract(e,r,ex),o=Math.atan2(n.y,n.x),a=Math.asin(n.z),s=K.sign(ee.dot(i,e))*ee.magnitude(i);return H(t)?(t.longitude=o,t.latitude=a,t.height=s,t):new ef(o,a,s)},eA.prototype.cartesianArrayToCartographicArray=function(e,t){W.defined("cartesians",e);let r=e.length;H(t)?t.length=r:t=Array(r);for(let n=0;n<r;++n)t[n]=this.cartesianToCartographic(e[n],t[n]);return t},eA.prototype.scaleToGeodeticSurface=function(e,t){return ec(e,this._oneOverRadii,this._oneOverRadiiSquared,this._centerToleranceSquared,t)},eA.prototype.scaleToGeocentricSurface=function(e,t){W.typeOf.object("cartesian",e),H(t)||(t=new ee);let r=e.x,n=e.y,i=e.z,o=this._oneOverRadiiSquared,a=1/Math.sqrt(r*r*o.x+n*n*o.y+i*i*o.z);return ee.multiplyByScalar(e,a,t)},eA.prototype.transformPositionToScaledSpace=function(e,t){return H(t)||(t=new ee),ee.multiplyComponents(e,this._oneOverRadii,t)},eA.prototype.transformPositionFromScaledSpace=function(e,t){return H(t)||(t=new ee),ee.multiplyComponents(e,this._radii,t)},eA.prototype.equals=function(e){return this===e||H(e)&&ee.equals(this._radii,e._radii)},eA.prototype.toString=function(){return this._radii.toString()},eA.prototype.getSurfaceNormalIntersectionWithZAxis=function(e,t,r){if(W.typeOf.object("position",e),!K.equalsEpsilon(this._radii.x,this._radii.y,K.EPSILON15))throw new Y("Ellipsoid must be an ellipsoid of revolution (radii.x == radii.y)");W.typeOf.number.greaterThan("Ellipsoid.radii.z",this._radii.z,0),t=t??0;let n=this._squaredXOverSquaredZ;if(H(r)||(r=new ee),r.x=0,r.y=0,r.z=e.z*(1-n),!(Math.abs(r.z)>=this._radii.z-t))return r};let eN=new ee;eA.prototype.getLocalCurvature=function(e,t){W.typeOf.object("surfacePosition",e),H(t)||(t=new em);let r=this.getSurfaceNormalIntersectionWithZAxis(e,0,eN),n=ee.distance(e,r),i=this.minimumRadius*n/this.maximumRadius**2;return em.fromElements(1/n,1/(n*i**2),t)};let eI=[.14887433898163,.43339539412925,.67940956829902,.86506336668898,.97390652851717,0],eC=[.29552422471475,.26926671930999,.21908636251598,.14945134915058,.066671344308684,0];function ev(e,t,r){W.typeOf.number("a",e),W.typeOf.number("b",t),W.typeOf.func("func",r);let n=.5*(t+e),i=.5*(t-e),o=0;for(let e=0;e<5;e++){let t=i*eI[e];o+=eC[e]*(r(n+t)+r(n-t))}return o*i}function eM(e){this._ellipsoid=e??eA.default,this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}eA.prototype.surfaceArea=function(e){W.typeOf.object("rectangle",e);let t=e.west,r=e.east,n=e.south,i=e.north;for(;r<t;)r+=K.TWO_PI;let o=this._radiiSquared,a=o.x,s=o.y,l=o.z,u=a*s;return ev(n,i,e=>{let n=Math.cos(e),i=Math.sin(e);return Math.cos(e)*ev(t,r,e=>{let t=Math.cos(e),r=Math.sin(e);return Math.sqrt(u*i*i+l*(s*t*t+a*r*r)*n*n)})})},Object.defineProperties(eM.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),eM.prototype.project=function(e,t){let r=this._semimajorAxis,n=e.longitude*r,i=e.latitude*r,o=e.height;return H(t)?(t.x=n,t.y=i,t.z=o,t):new ee(n,i,o)},eM.prototype.unproject=function(e,t){if(!H(e))throw new Y("cartesian is required");let r=this._oneOverSemimajorAxis,n=e.x*r,i=e.y*r,o=e.z;return H(t)?(t.longitude=n,t.latitude=i,t.height=o,t):new ef(n,i,o)};let eP=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),eL=function(e,t){this.start=e??0,this.stop=t??0};function eF(e,t,r,n,i,o,a,s,l){this[0]=e??0,this[1]=n??0,this[2]=a??0,this[3]=t??0,this[4]=i??0,this[5]=s??0,this[6]=r??0,this[7]=o??0,this[8]=l??0}eF.packedLength=9,eF.pack=(e,t,r)=>(W.typeOf.object("value",e),W.defined("array",t),r=r??0,t[r++]=e[0],t[r++]=e[1],t[r++]=e[2],t[r++]=e[3],t[r++]=e[4],t[r++]=e[5],t[r++]=e[6],t[r++]=e[7],t[r++]=e[8],t),eF.unpack=(e,t,r)=>(W.defined("array",e),t=t??0,H(r)||(r=new eF),r[0]=e[t++],r[1]=e[t++],r[2]=e[t++],r[3]=e[t++],r[4]=e[t++],r[5]=e[t++],r[6]=e[t++],r[7]=e[t++],r[8]=e[t++],r),eF.packArray=(e,t)=>{W.defined("array",e);let r=e.length,n=9*r;if(H(t))if(Array.isArray(t)||t.length===n)t.length!==n&&(t.length=n);else throw new Y("If result is a typed array, it must have exactly array.length * 9 elements");else t=Array(n);for(let n=0;n<r;++n)eF.pack(e[n],t,9*n);return t},eF.unpackArray=(e,t)=>{if(W.defined("array",e),W.typeOf.number.greaterThanOrEquals("array.length",e.length,9),e.length%9!=0)throw new Y("array length must be a multiple of 9.");let r=e.length;H(t)?t.length=r/9:t=Array(r/9);for(let n=0;n<r;n+=9){let r=n/9;t[r]=eF.unpack(e,n,t[r])}return t},eF.clone=(e,t)=>{if(H(e))return H(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):new eF(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])},eF.fromArray=eF.unpack,eF.fromColumnMajorArray=(e,t)=>(W.defined("values",e),eF.clone(e,t)),eF.fromRowMajorArray=(e,t)=>(W.defined("values",e),H(t))?(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t):new eF(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]),eF.fromQuaternion=(e,t)=>{W.typeOf.object("quaternion",e);let r=e.x*e.x,n=e.x*e.y,i=e.x*e.z,o=e.x*e.w,a=e.y*e.y,s=e.y*e.z,l=e.y*e.w,u=e.z*e.z,c=e.z*e.w,f=e.w*e.w,h=r-a-u+f,p=2*(n-c),d=2*(i+l),m=2*(n+c),y=-r+a-u+f,_=2*(s-o),E=2*(i-l),O=2*(s+o),g=-r-a+u+f;return H(t)?(t[0]=h,t[1]=m,t[2]=E,t[3]=p,t[4]=y,t[5]=O,t[6]=d,t[7]=_,t[8]=g,t):new eF(h,p,d,m,y,_,E,O,g)},eF.fromHeadingPitchRoll=(e,t)=>{W.typeOf.object("headingPitchRoll",e);let r=Math.cos(-e.pitch),n=Math.cos(-e.heading),i=Math.cos(e.roll),o=Math.sin(-e.pitch),a=Math.sin(-e.heading),s=Math.sin(e.roll),l=r*n,u=-i*a+s*o*n,c=s*a+i*o*n,f=r*a,h=i*n+s*o*a,p=-s*n+i*o*a,d=-o,m=s*r,y=i*r;return H(t)?(t[0]=l,t[1]=f,t[2]=d,t[3]=u,t[4]=h,t[5]=m,t[6]=c,t[7]=p,t[8]=y,t):new eF(l,u,c,f,h,p,d,m,y)},eF.fromScale=(e,t)=>(W.typeOf.object("scale",e),H(t))?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=e.y,t[5]=0,t[6]=0,t[7]=0,t[8]=e.z,t):new eF(e.x,0,0,0,e.y,0,0,0,e.z),eF.fromUniformScale=(e,t)=>(W.typeOf.number("scale",e),H(t))?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=e,t):new eF(e,0,0,0,e,0,0,0,e),eF.fromCrossProduct=(e,t)=>(W.typeOf.object("vector",e),H(t))?(t[0]=0,t[1]=e.z,t[2]=-e.y,t[3]=-e.z,t[4]=0,t[5]=e.x,t[6]=e.y,t[7]=-e.x,t[8]=0,t):new eF(0,-e.z,e.y,e.z,0,-e.x,-e.y,e.x,0),eF.fromRotationX=(e,t)=>{W.typeOf.number("angle",e);let r=Math.cos(e),n=Math.sin(e);return H(t)?(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=r,t[5]=n,t[6]=0,t[7]=-n,t[8]=r,t):new eF(1,0,0,0,r,-n,0,n,r)},eF.fromRotationY=(e,t)=>{W.typeOf.number("angle",e);let r=Math.cos(e),n=Math.sin(e);return H(t)?(t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=1,t[5]=0,t[6]=n,t[7]=0,t[8]=r,t):new eF(r,0,n,0,1,0,-n,0,r)},eF.fromRotationZ=(e,t)=>{W.typeOf.number("angle",e);let r=Math.cos(e),n=Math.sin(e);return H(t)?(t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new eF(r,-n,0,n,r,0,0,0,1)},eF.toArray=(e,t)=>(W.typeOf.object("matrix",e),H(t))?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]],eF.getElementIndex=(e,t)=>(W.typeOf.number.greaterThanOrEquals("row",t,0),W.typeOf.number.lessThanOrEquals("row",t,2),W.typeOf.number.greaterThanOrEquals("column",e,0),W.typeOf.number.lessThanOrEquals("column",e,2),3*e+t),eF.getColumn=(e,t,r)=>{W.typeOf.object("matrix",e),W.typeOf.number.greaterThanOrEquals("index",t,0),W.typeOf.number.lessThanOrEquals("index",t,2),W.typeOf.object("result",r);let n=3*t,i=e[n],o=e[n+1],a=e[n+2];return r.x=i,r.y=o,r.z=a,r},eF.setColumn=(e,t,r,n)=>{W.typeOf.object("matrix",e),W.typeOf.number.greaterThanOrEquals("index",t,0),W.typeOf.number.lessThanOrEquals("index",t,2),W.typeOf.object("cartesian",r),W.typeOf.object("result",n),n=eF.clone(e,n);let i=3*t;return n[i]=r.x,n[i+1]=r.y,n[i+2]=r.z,n},eF.getRow=(e,t,r)=>{W.typeOf.object("matrix",e),W.typeOf.number.greaterThanOrEquals("index",t,0),W.typeOf.number.lessThanOrEquals("index",t,2),W.typeOf.object("result",r);let n=e[t],i=e[t+3],o=e[t+6];return r.x=n,r.y=i,r.z=o,r},eF.setRow=(e,t,r,n)=>(W.typeOf.object("matrix",e),W.typeOf.number.greaterThanOrEquals("index",t,0),W.typeOf.number.lessThanOrEquals("index",t,2),W.typeOf.object("cartesian",r),W.typeOf.object("result",n),(n=eF.clone(e,n))[t]=r.x,n[t+3]=r.y,n[t+6]=r.z,n);let eD=new ee;eF.setScale=(e,t,r)=>{W.typeOf.object("matrix",e),W.typeOf.object("scale",t),W.typeOf.object("result",r);let n=eF.getScale(e,eD),i=t.x/n.x,o=t.y/n.y,a=t.z/n.z;return r[0]=e[0]*i,r[1]=e[1]*i,r[2]=e[2]*i,r[3]=e[3]*o,r[4]=e[4]*o,r[5]=e[5]*o,r[6]=e[6]*a,r[7]=e[7]*a,r[8]=e[8]*a,r};let eB=new ee;eF.setUniformScale=(e,t,r)=>{W.typeOf.object("matrix",e),W.typeOf.number("scale",t),W.typeOf.object("result",r);let n=eF.getScale(e,eB),i=t/n.x,o=t/n.y,a=t/n.z;return r[0]=e[0]*i,r[1]=e[1]*i,r[2]=e[2]*i,r[3]=e[3]*o,r[4]=e[4]*o,r[5]=e[5]*o,r[6]=e[6]*a,r[7]=e[7]*a,r[8]=e[8]*a,r};let ez=new ee;eF.getScale=(e,t)=>(W.typeOf.object("matrix",e),W.typeOf.object("result",t),t.x=ee.magnitude(ee.fromElements(e[0],e[1],e[2],ez)),t.y=ee.magnitude(ee.fromElements(e[3],e[4],e[5],ez)),t.z=ee.magnitude(ee.fromElements(e[6],e[7],e[8],ez)),t);let eU=new ee;eF.getMaximumScale=e=>(eF.getScale(e,eU),ee.maximumComponent(eU));let ej=new ee;eF.setRotation=(e,t,r)=>{W.typeOf.object("matrix",e),W.typeOf.object("result",r);let n=eF.getScale(e,ej);return r[0]=t[0]*n.x,r[1]=t[1]*n.x,r[2]=t[2]*n.x,r[3]=t[3]*n.y,r[4]=t[4]*n.y,r[5]=t[5]*n.y,r[6]=t[6]*n.z,r[7]=t[7]*n.z,r[8]=t[8]*n.z,r};let eq=new ee;eF.getRotation=(e,t)=>{W.typeOf.object("matrix",e),W.typeOf.object("result",t);let r=eF.getScale(e,eq);return t[0]=e[0]/r.x,t[1]=e[1]/r.x,t[2]=e[2]/r.x,t[3]=e[3]/r.y,t[4]=e[4]/r.y,t[5]=e[5]/r.y,t[6]=e[6]/r.z,t[7]=e[7]/r.z,t[8]=e[8]/r.z,t},eF.multiply=(e,t,r)=>{W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r);let n=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],i=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],o=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],a=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],s=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],l=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],u=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],c=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],f=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];return r[0]=n,r[1]=i,r[2]=o,r[3]=a,r[4]=s,r[5]=l,r[6]=u,r[7]=c,r[8]=f,r},eF.add=(e,t,r)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r),r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r),eF.subtract=(e,t,r)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r),r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r),eF.multiplyByVector=(e,t,r)=>{W.typeOf.object("matrix",e),W.typeOf.object("cartesian",t),W.typeOf.object("result",r);let n=t.x,i=t.y,o=t.z,a=e[0]*n+e[3]*i+e[6]*o,s=e[1]*n+e[4]*i+e[7]*o,l=e[2]*n+e[5]*i+e[8]*o;return r.x=a,r.y=s,r.z=l,r},eF.multiplyByScalar=(e,t,r)=>(W.typeOf.object("matrix",e),W.typeOf.number("scalar",t),W.typeOf.object("result",r),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r),eF.multiplyByScale=(e,t,r)=>(W.typeOf.object("matrix",e),W.typeOf.object("scale",t),W.typeOf.object("result",r),r[0]=e[0]*t.x,r[1]=e[1]*t.x,r[2]=e[2]*t.x,r[3]=e[3]*t.y,r[4]=e[4]*t.y,r[5]=e[5]*t.y,r[6]=e[6]*t.z,r[7]=e[7]*t.z,r[8]=e[8]*t.z,r),eF.multiplyByUniformScale=(e,t,r)=>(W.typeOf.object("matrix",e),W.typeOf.number("scale",t),W.typeOf.object("result",r),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r),eF.negate=(e,t)=>(W.typeOf.object("matrix",e),W.typeOf.object("result",t),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t),eF.transpose=(e,t)=>{W.typeOf.object("matrix",e),W.typeOf.object("result",t);let r=e[0],n=e[3],i=e[6],o=e[1],a=e[4],s=e[7],l=e[2],u=e[5],c=e[8];return t[0]=r,t[1]=n,t[2]=i,t[3]=o,t[4]=a,t[5]=s,t[6]=l,t[7]=u,t[8]=c,t};let eG=[1,0,0],eV=[2,2,1],ek=new eF,eH=new eF;eF.computeEigenDecomposition=(e,t)=>{W.typeOf.object("matrix",e);let r=K.EPSILON20,n=0,i=0;H(t)||(t={});let o=t.unitary=eF.clone(eF.IDENTITY,t.unitary),a=t.diagonal=eF.clone(e,t.diagonal),s=r*function(e){let t=0;for(let r=0;r<9;++r){let n=e[r];t+=n*n}return Math.sqrt(t)}(a);for(;i<10&&function(e){let t=0;for(let r=0;r<3;++r){let n=e[eF.getElementIndex(eV[r],eG[r])];t+=2*n*n}return Math.sqrt(t)}(a)>s;)!function(e,t){let r=K.EPSILON15,n=0,i=1;for(let t=0;t<3;++t){let r=Math.abs(e[eF.getElementIndex(eV[t],eG[t])]);r>n&&(i=t,n=r)}let o=1,a=0,s=eG[i],l=eV[i];if(Math.abs(e[eF.getElementIndex(l,s)])>r){let t,r=(e[eF.getElementIndex(l,l)]-e[eF.getElementIndex(s,s)])/2/e[eF.getElementIndex(l,s)];o=1/Math.sqrt(1+(t=r<0?-1/(-r+Math.sqrt(1+r*r)):1/(r+Math.sqrt(1+r*r)))*t),a=t*o}(t=eF.clone(eF.IDENTITY,t))[eF.getElementIndex(s,s)]=t[eF.getElementIndex(l,l)]=o,t[eF.getElementIndex(l,s)]=a,t[eF.getElementIndex(s,l)]=-a}(a,ek),eF.transpose(ek,eH),eF.multiply(a,ek,a),eF.multiply(eH,a,a),eF.multiply(o,ek,o),++n>2&&(++i,n=0);return t},eF.abs=(e,t)=>(W.typeOf.object("matrix",e),W.typeOf.object("result",t),t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t),eF.determinant=e=>{W.typeOf.object("matrix",e);let t=e[0],r=e[3],n=e[6],i=e[1],o=e[4],a=e[7],s=e[2],l=e[5],u=e[8];return t*(o*u-l*a)+i*(l*n-r*u)+s*(r*a-o*n)},eF.inverse=(e,t)=>{W.typeOf.object("matrix",e),W.typeOf.object("result",t);let r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=eF.determinant(e);if(Math.abs(f)<=K.EPSILON15)throw new Y("matrix is not invertible");return t[0]=a*c-u*s,t[1]=u*i-n*c,t[2]=n*s-a*i,t[3]=l*s-o*c,t[4]=r*c-l*i,t[5]=o*i-r*s,t[6]=o*u-l*a,t[7]=l*n-r*u,t[8]=r*a-o*n,eF.multiplyByScalar(t,1/f,t)};let eY=new eF;function eW(e,t,r,n){this.x=e??0,this.y=t??0,this.z=r??0,this.w=n??0}eF.inverseTranspose=(e,t)=>(W.typeOf.object("matrix",e),W.typeOf.object("result",t),eF.inverse(eF.transpose(e,eY),t)),eF.equals=(e,t)=>e===t||H(e)&&H(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8],eF.equalsEpsilon=(e,t,r)=>(r=r??0,e===t||H(e)&&H(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r&&Math.abs(e[4]-t[4])<=r&&Math.abs(e[5]-t[5])<=r&&Math.abs(e[6]-t[6])<=r&&Math.abs(e[7]-t[7])<=r&&Math.abs(e[8]-t[8])<=r),eF.IDENTITY=Object.freeze(new eF(1,0,0,0,1,0,0,0,1)),eF.ZERO=Object.freeze(new eF(0,0,0,0,0,0,0,0,0)),eF.COLUMN0ROW0=0,eF.COLUMN0ROW1=1,eF.COLUMN0ROW2=2,eF.COLUMN1ROW0=3,eF.COLUMN1ROW1=4,eF.COLUMN1ROW2=5,eF.COLUMN2ROW0=6,eF.COLUMN2ROW1=7,eF.COLUMN2ROW2=8,Object.defineProperties(eF.prototype,{length:{get:()=>eF.packedLength}}),eF.prototype.clone=function(e){return eF.clone(this,e)},eF.prototype.equals=function(e){return eF.equals(this,e)},eF.equalsArray=(e,t,r)=>e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]&&e[4]===t[r+4]&&e[5]===t[r+5]&&e[6]===t[r+6]&&e[7]===t[r+7]&&e[8]===t[r+8],eF.prototype.equalsEpsilon=function(e,t){return eF.equalsEpsilon(this,e,t)},eF.prototype.toString=function(){return`(${this[0]}, ${this[3]}, ${this[6]})
(${this[1]}, ${this[4]}, ${this[7]})
(${this[2]}, ${this[5]}, ${this[8]})`},eW.fromElements=(e,t,r,n,i)=>H(i)?(i.x=e,i.y=t,i.z=r,i.w=n,i):new eW(e,t,r,n),eW.fromColor=(e,t)=>(W.typeOf.object("color",e),H(t))?(t.x=e.red,t.y=e.green,t.z=e.blue,t.w=e.alpha,t):new eW(e.red,e.green,e.blue,e.alpha),eW.clone=(e,t)=>{if(H(e))return H(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new eW(e.x,e.y,e.z,e.w)},eW.packedLength=4,eW.pack=(e,t,r)=>(W.typeOf.object("value",e),W.defined("array",t),r=r??0,t[r++]=e.x,t[r++]=e.y,t[r++]=e.z,t[r]=e.w,t),eW.unpack=(e,t,r)=>(W.defined("array",e),t=t??0,H(r)||(r=new eW),r.x=e[t++],r.y=e[t++],r.z=e[t++],r.w=e[t],r),eW.packArray=(e,t)=>{W.defined("array",e);let r=e.length,n=4*r;if(H(t))if(Array.isArray(t)||t.length===n)t.length!==n&&(t.length=n);else throw new Y("If result is a typed array, it must have exactly array.length * 4 elements");else t=Array(n);for(let n=0;n<r;++n)eW.pack(e[n],t,4*n);return t},eW.unpackArray=(e,t)=>{if(W.defined("array",e),W.typeOf.number.greaterThanOrEquals("array.length",e.length,4),e.length%4!=0)throw new Y("array length must be a multiple of 4.");let r=e.length;H(t)?t.length=r/4:t=Array(r/4);for(let n=0;n<r;n+=4){let r=n/4;t[r]=eW.unpack(e,n,t[r])}return t},eW.fromArray=eW.unpack,eW.maximumComponent=e=>(W.typeOf.object("cartesian",e),Math.max(e.x,e.y,e.z,e.w)),eW.minimumComponent=e=>(W.typeOf.object("cartesian",e),Math.min(e.x,e.y,e.z,e.w)),eW.minimumByComponent=(e,t,r)=>(W.typeOf.object("first",e),W.typeOf.object("second",t),W.typeOf.object("result",r),r.x=Math.min(e.x,t.x),r.y=Math.min(e.y,t.y),r.z=Math.min(e.z,t.z),r.w=Math.min(e.w,t.w),r),eW.maximumByComponent=(e,t,r)=>(W.typeOf.object("first",e),W.typeOf.object("second",t),W.typeOf.object("result",r),r.x=Math.max(e.x,t.x),r.y=Math.max(e.y,t.y),r.z=Math.max(e.z,t.z),r.w=Math.max(e.w,t.w),r),eW.clamp=(e,t,r,n)=>{W.typeOf.object("value",e),W.typeOf.object("min",t),W.typeOf.object("max",r),W.typeOf.object("result",n);let i=K.clamp(e.x,t.x,r.x),o=K.clamp(e.y,t.y,r.y),a=K.clamp(e.z,t.z,r.z),s=K.clamp(e.w,t.w,r.w);return n.x=i,n.y=o,n.z=a,n.w=s,n},eW.magnitudeSquared=e=>(W.typeOf.object("cartesian",e),e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w),eW.magnitude=e=>Math.sqrt(eW.magnitudeSquared(e));let eX=new eW;eW.distance=(e,t)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),eW.subtract(e,t,eX),eW.magnitude(eX)),eW.distanceSquared=(e,t)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),eW.subtract(e,t,eX),eW.magnitudeSquared(eX)),eW.normalize=(e,t)=>{W.typeOf.object("cartesian",e),W.typeOf.object("result",t);let r=eW.magnitude(e);if(t.x=e.x/r,t.y=e.y/r,t.z=e.z/r,t.w=e.w/r,isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||isNaN(t.w))throw new Y("normalized result is not a number");return t},eW.dot=(e,t)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w),eW.multiplyComponents=(e,t,r)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r),r.x=e.x*t.x,r.y=e.y*t.y,r.z=e.z*t.z,r.w=e.w*t.w,r),eW.divideComponents=(e,t,r)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r),r.x=e.x/t.x,r.y=e.y/t.y,r.z=e.z/t.z,r.w=e.w/t.w,r),eW.add=(e,t,r)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r),r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r.w=e.w+t.w,r),eW.subtract=(e,t,r)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r),r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r.w=e.w-t.w,r),eW.multiplyByScalar=(e,t,r)=>(W.typeOf.object("cartesian",e),W.typeOf.number("scalar",t),W.typeOf.object("result",r),r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r.w=e.w*t,r),eW.divideByScalar=(e,t,r)=>(W.typeOf.object("cartesian",e),W.typeOf.number("scalar",t),W.typeOf.object("result",r),r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r.w=e.w/t,r),eW.negate=(e,t)=>(W.typeOf.object("cartesian",e),W.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t),eW.abs=(e,t)=>(W.typeOf.object("cartesian",e),W.typeOf.object("result",t),t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t.w=Math.abs(e.w),t);let e$=new eW;eW.lerp=(e,t,r,n)=>(W.typeOf.object("start",e),W.typeOf.object("end",t),W.typeOf.number("t",r),W.typeOf.object("result",n),eW.multiplyByScalar(t,r,e$),n=eW.multiplyByScalar(e,1-r,n),eW.add(e$,n,n));let eZ=new eW;eW.mostOrthogonalAxis=(e,t)=>{W.typeOf.object("cartesian",e),W.typeOf.object("result",t);let r=eW.normalize(e,eZ);return eW.abs(r,r),t=r.x<=r.y?r.x<=r.z?r.x<=r.w?eW.clone(eW.UNIT_X,t):eW.clone(eW.UNIT_W,t):r.z<=r.w?eW.clone(eW.UNIT_Z,t):eW.clone(eW.UNIT_W,t):r.y<=r.z?r.y<=r.w?eW.clone(eW.UNIT_Y,t):eW.clone(eW.UNIT_W,t):r.z<=r.w?eW.clone(eW.UNIT_Z,t):eW.clone(eW.UNIT_W,t)},eW.equals=(e,t)=>e===t||H(e)&&H(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w,eW.equalsArray=(e,t,r)=>e.x===t[r]&&e.y===t[r+1]&&e.z===t[r+2]&&e.w===t[r+3],eW.equalsEpsilon=(e,t,r,n)=>e===t||H(e)&&H(t)&&K.equalsEpsilon(e.x,t.x,r,n)&&K.equalsEpsilon(e.y,t.y,r,n)&&K.equalsEpsilon(e.z,t.z,r,n)&&K.equalsEpsilon(e.w,t.w,r,n),eW.ZERO=Object.freeze(new eW(0,0,0,0)),eW.ONE=Object.freeze(new eW(1,1,1,1)),eW.UNIT_X=Object.freeze(new eW(1,0,0,0)),eW.UNIT_Y=Object.freeze(new eW(0,1,0,0)),eW.UNIT_Z=Object.freeze(new eW(0,0,1,0)),eW.UNIT_W=Object.freeze(new eW(0,0,0,1)),eW.prototype.clone=function(e){return eW.clone(this,e)},eW.prototype.equals=function(e){return eW.equals(this,e)},eW.prototype.equalsEpsilon=function(e,t,r){return eW.equalsEpsilon(this,e,t,r)},eW.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`};let eK=new Float32Array(1),eJ=new Uint8Array(eK.buffer),eQ=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0];eW.packFloat=(e,t)=>(W.typeOf.number("value",e),H(t)||(t=new eW),eK[0]=e,eQ?(t.x=eJ[0],t.y=eJ[1],t.z=eJ[2],t.w=eJ[3]):(t.x=eJ[3],t.y=eJ[2],t.z=eJ[1],t.w=eJ[0]),t),eW.unpackFloat=e=>(W.typeOf.object("packedFloat",e),eQ?(eJ[0]=e.x,eJ[1]=e.y,eJ[2]=e.z,eJ[3]=e.w):(eJ[0]=e.w,eJ[1]=e.z,eJ[2]=e.y,eJ[3]=e.x),eK[0]);let e0={};function e1(e){let t;this.name="RuntimeError",this.message=e;try{throw Error()}catch(e){t=e.stack}this.stack=t}function e3(e,t,r,n,i,o,a,s,l,u,c,f,h,p,d,m){this[0]=e??0,this[1]=i??0,this[2]=l??0,this[3]=h??0,this[4]=t??0,this[5]=o??0,this[6]=u??0,this[7]=p??0,this[8]=r??0,this[9]=a??0,this[10]=c??0,this[11]=d??0,this[12]=n??0,this[13]=s??0,this[14]=f??0,this[15]=m??0}e0.EMPTY_OBJECT=Object.freeze({}),e0.EMPTY_ARRAY=Object.freeze([]),H(Object.create)&&(e1.prototype=Object.create(Error.prototype),e1.prototype.constructor=e1),e1.prototype.toString=function(){let e=`${this.name}: ${this.message}`;return H(this.stack)&&(e+=`
${this.stack.toString()}`),e},e3.packedLength=16,e3.pack=(e,t,r)=>(W.typeOf.object("value",e),W.defined("array",t),r=r??0,t[r++]=e[0],t[r++]=e[1],t[r++]=e[2],t[r++]=e[3],t[r++]=e[4],t[r++]=e[5],t[r++]=e[6],t[r++]=e[7],t[r++]=e[8],t[r++]=e[9],t[r++]=e[10],t[r++]=e[11],t[r++]=e[12],t[r++]=e[13],t[r++]=e[14],t[r]=e[15],t),e3.unpack=(e,t,r)=>(W.defined("array",e),t=t??0,H(r)||(r=new e3),r[0]=e[t++],r[1]=e[t++],r[2]=e[t++],r[3]=e[t++],r[4]=e[t++],r[5]=e[t++],r[6]=e[t++],r[7]=e[t++],r[8]=e[t++],r[9]=e[t++],r[10]=e[t++],r[11]=e[t++],r[12]=e[t++],r[13]=e[t++],r[14]=e[t++],r[15]=e[t],r),e3.packArray=(e,t)=>{W.defined("array",e);let r=e.length,n=16*r;if(H(t))if(Array.isArray(t)||t.length===n)t.length!==n&&(t.length=n);else throw new Y("If result is a typed array, it must have exactly array.length * 16 elements");else t=Array(n);for(let n=0;n<r;++n)e3.pack(e[n],t,16*n);return t},e3.unpackArray=(e,t)=>{if(W.defined("array",e),W.typeOf.number.greaterThanOrEquals("array.length",e.length,16),e.length%16!=0)throw new Y("array length must be a multiple of 16.");let r=e.length;H(t)?t.length=r/16:t=Array(r/16);for(let n=0;n<r;n+=16){let r=n/16;t[r]=e3.unpack(e,n,t[r])}return t},e3.clone=(e,t)=>{if(H(e))return H(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):new e3(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},e3.fromArray=e3.unpack,e3.fromColumnMajorArray=(e,t)=>(W.defined("values",e),e3.clone(e,t)),e3.fromRowMajorArray=(e,t)=>(W.defined("values",e),H(t))?(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t):new e3(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]),e3.fromRotationTranslation=(e,t,r)=>(W.typeOf.object("rotation",e),t=t??ee.ZERO,H(r))?(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=0,r[4]=e[3],r[5]=e[4],r[6]=e[5],r[7]=0,r[8]=e[6],r[9]=e[7],r[10]=e[8],r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,r):new e3(e[0],e[3],e[6],t.x,e[1],e[4],e[7],t.y,e[2],e[5],e[8],t.z,0,0,0,1),e3.fromTranslationQuaternionRotationScale=(e,t,r,n)=>{W.typeOf.object("translation",e),W.typeOf.object("rotation",t),W.typeOf.object("scale",r),H(n)||(n=new e3);let i=r.x,o=r.y,a=r.z,s=t.x*t.x,l=t.x*t.y,u=t.x*t.z,c=t.x*t.w,f=t.y*t.y,h=t.y*t.z,p=t.y*t.w,d=t.z*t.z,m=t.z*t.w,y=t.w*t.w;return n[0]=(s-f-d+y)*i,n[1]=2*(l+m)*i,n[2]=2*(u-p)*i,n[3]=0,n[4]=2*(l-m)*o,n[5]=(-s+f-d+y)*o,n[6]=2*(h+c)*o,n[7]=0,n[8]=2*(u+p)*a,n[9]=2*(h-c)*a,n[10]=(-s-f+d+y)*a,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,n},e3.fromTranslationRotationScale=(e,t)=>(W.typeOf.object("translationRotationScale",e),e3.fromTranslationQuaternionRotationScale(e.translation,e.rotation,e.scale,t)),e3.fromTranslation=(e,t)=>(W.typeOf.object("translation",e),e3.fromRotationTranslation(eF.IDENTITY,e,t)),e3.fromScale=(e,t)=>(W.typeOf.object("scale",e),H(t))?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e.y,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e.z,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new e3(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1),e3.fromUniformScale=(e,t)=>(W.typeOf.number("scale",e),H(t))?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new e3(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1),e3.fromRotation=(e,t)=>(W.typeOf.object("rotation",e),H(t)||(t=new e3),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=0,t[4]=e[3],t[5]=e[4],t[6]=e[5],t[7]=0,t[8]=e[6],t[9]=e[7],t[10]=e[8],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t);let e2=new ee,e4=new ee,e5=new ee;e3.fromCamera=(e,t)=>{W.typeOf.object("camera",e);let r=e.position,n=e.direction,i=e.up;W.typeOf.object("camera.position",r),W.typeOf.object("camera.direction",n),W.typeOf.object("camera.up",i),ee.normalize(n,e2),ee.normalize(ee.cross(e2,i,e4),e4),ee.normalize(ee.cross(e4,e2,e5),e5);let o=e4.x,a=e4.y,s=e4.z,l=e2.x,u=e2.y,c=e2.z,f=e5.x,h=e5.y,p=e5.z,d=r.x,m=r.y,y=r.z,_=-(o*d)+-(a*m)+-(s*y),E=-(f*d)+-(h*m)+-(p*y),O=l*d+u*m+c*y;return H(t)?(t[0]=o,t[1]=f,t[2]=-l,t[3]=0,t[4]=a,t[5]=h,t[6]=-u,t[7]=0,t[8]=s,t[9]=p,t[10]=-c,t[11]=0,t[12]=_,t[13]=E,t[14]=O,t[15]=1,t):new e3(o,a,s,_,f,h,p,E,-l,-u,-c,O,0,0,0,1)},e3.computePerspectiveFieldOfView=(e,t,r,n,i)=>{W.typeOf.number.greaterThan("fovY",e,0),W.typeOf.number.lessThan("fovY",e,Math.PI),W.typeOf.number.greaterThan("near",r,0),W.typeOf.number.greaterThan("far",n,0),W.typeOf.object("result",i);let o=1/Math.tan(.5*e);return i[0]=o/t,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=o,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=(n+r)/(r-n),i[11]=-1,i[12]=0,i[13]=0,i[14]=2*n*r/(r-n),i[15]=0,i},e3.computeOrthographicOffCenter=(e,t,r,n,i,o,a)=>{W.typeOf.number("left",e),W.typeOf.number("right",t),W.typeOf.number("bottom",r),W.typeOf.number("top",n),W.typeOf.number("near",i),W.typeOf.number("far",o),W.typeOf.object("result",a);let s=1/(t-e),l=1/(n-r),u=1/(o-i),c=-(t+e)*s,f=-(n+r)*l,h=-(o+i)*u;return s*=2,l*=2,u*=-2,a[0]=s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=l,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=u,a[11]=0,a[12]=c,a[13]=f,a[14]=h,a[15]=1,a},e3.computePerspectiveOffCenter=(e,t,r,n,i,o,a)=>(W.typeOf.number("left",e),W.typeOf.number("right",t),W.typeOf.number("bottom",r),W.typeOf.number("top",n),W.typeOf.number("near",i),W.typeOf.number("far",o),W.typeOf.object("result",a),a[0]=2*i/(t-e),a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*i/(n-r),a[6]=0,a[7]=0,a[8]=(t+e)/(t-e),a[9]=(n+r)/(n-r),a[10]=-(o+i)/(o-i),a[11]=-1,a[12]=0,a[13]=0,a[14]=-2*o*i/(o-i),a[15]=0,a),e3.computeInfinitePerspectiveOffCenter=(e,t,r,n,i,o)=>(W.typeOf.number("left",e),W.typeOf.number("right",t),W.typeOf.number("bottom",r),W.typeOf.number("top",n),W.typeOf.number("near",i),W.typeOf.object("result",o),o[0]=2*i/(t-e),o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2*i/(n-r),o[6]=0,o[7]=0,o[8]=(t+e)/(t-e),o[9]=(n+r)/(n-r),o[10]=-1,o[11]=-1,o[12]=0,o[13]=0,o[14]=-2*i,o[15]=0,o),e3.computeViewportTransformation=(e,t,r,n)=>{H(n)||(n=new e3);let i=(e=e??e0.EMPTY_OBJECT).x??0,o=e.y??0,a=e.width??0,s=e.height??0,l=.5*a,u=.5*s,c=((r=r??1)-(t=t??0))*.5,f=i+l,h=o+u,p=t+c;return n[0]=l,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=u,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=c,n[11]=0,n[12]=f,n[13]=h,n[14]=p,n[15]=1,n},e3.computeView=(e,t,r,n,i)=>(W.typeOf.object("position",e),W.typeOf.object("direction",t),W.typeOf.object("up",r),W.typeOf.object("right",n),W.typeOf.object("result",i),i[0]=n.x,i[1]=r.x,i[2]=-t.x,i[3]=0,i[4]=n.y,i[5]=r.y,i[6]=-t.y,i[7]=0,i[8]=n.z,i[9]=r.z,i[10]=-t.z,i[11]=0,i[12]=-ee.dot(n,e),i[13]=-ee.dot(r,e),i[14]=ee.dot(t,e),i[15]=1,i),e3.toArray=(e,t)=>(W.typeOf.object("matrix",e),H(t))?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]],e3.getElementIndex=(e,t)=>(W.typeOf.number.greaterThanOrEquals("row",t,0),W.typeOf.number.lessThanOrEquals("row",t,3),W.typeOf.number.greaterThanOrEquals("column",e,0),W.typeOf.number.lessThanOrEquals("column",e,3),4*e+t),e3.getColumn=(e,t,r)=>{W.typeOf.object("matrix",e),W.typeOf.number.greaterThanOrEquals("index",t,0),W.typeOf.number.lessThanOrEquals("index",t,3),W.typeOf.object("result",r);let n=4*t,i=e[n],o=e[n+1],a=e[n+2],s=e[n+3];return r.x=i,r.y=o,r.z=a,r.w=s,r},e3.setColumn=(e,t,r,n)=>{W.typeOf.object("matrix",e),W.typeOf.number.greaterThanOrEquals("index",t,0),W.typeOf.number.lessThanOrEquals("index",t,3),W.typeOf.object("cartesian",r),W.typeOf.object("result",n),n=e3.clone(e,n);let i=4*t;return n[i]=r.x,n[i+1]=r.y,n[i+2]=r.z,n[i+3]=r.w,n},e3.getRow=(e,t,r)=>{W.typeOf.object("matrix",e),W.typeOf.number.greaterThanOrEquals("index",t,0),W.typeOf.number.lessThanOrEquals("index",t,3),W.typeOf.object("result",r);let n=e[t],i=e[t+4],o=e[t+8],a=e[t+12];return r.x=n,r.y=i,r.z=o,r.w=a,r},e3.setRow=(e,t,r,n)=>(W.typeOf.object("matrix",e),W.typeOf.number.greaterThanOrEquals("index",t,0),W.typeOf.number.lessThanOrEquals("index",t,3),W.typeOf.object("cartesian",r),W.typeOf.object("result",n),(n=e3.clone(e,n))[t]=r.x,n[t+4]=r.y,n[t+8]=r.z,n[t+12]=r.w,n),e3.setTranslation=(e,t,r)=>(W.typeOf.object("matrix",e),W.typeOf.object("translation",t),W.typeOf.object("result",r),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=e[15],r);let e6=new ee;e3.setScale=(e,t,r)=>{W.typeOf.object("matrix",e),W.typeOf.object("scale",t),W.typeOf.object("result",r);let n=e3.getScale(e,e6),i=t.x/n.x,o=t.y/n.y,a=t.z/n.z;return r[0]=e[0]*i,r[1]=e[1]*i,r[2]=e[2]*i,r[3]=e[3],r[4]=e[4]*o,r[5]=e[5]*o,r[6]=e[6]*o,r[7]=e[7],r[8]=e[8]*a,r[9]=e[9]*a,r[10]=e[10]*a,r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r};let e8=new ee;e3.setUniformScale=(e,t,r)=>{W.typeOf.object("matrix",e),W.typeOf.number("scale",t),W.typeOf.object("result",r);let n=e3.getScale(e,e8),i=t/n.x,o=t/n.y,a=t/n.z;return r[0]=e[0]*i,r[1]=e[1]*i,r[2]=e[2]*i,r[3]=e[3],r[4]=e[4]*o,r[5]=e[5]*o,r[6]=e[6]*o,r[7]=e[7],r[8]=e[8]*a,r[9]=e[9]*a,r[10]=e[10]*a,r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r};let e7=new ee;e3.getScale=(e,t)=>(W.typeOf.object("matrix",e),W.typeOf.object("result",t),t.x=ee.magnitude(ee.fromElements(e[0],e[1],e[2],e7)),t.y=ee.magnitude(ee.fromElements(e[4],e[5],e[6],e7)),t.z=ee.magnitude(ee.fromElements(e[8],e[9],e[10],e7)),t);let e9=new ee;e3.getMaximumScale=e=>(e3.getScale(e,e9),ee.maximumComponent(e9));let te=new ee;e3.setRotation=(e,t,r)=>{W.typeOf.object("matrix",e),W.typeOf.object("result",r);let n=e3.getScale(e,te);return r[0]=t[0]*n.x,r[1]=t[1]*n.x,r[2]=t[2]*n.x,r[3]=e[3],r[4]=t[3]*n.y,r[5]=t[4]*n.y,r[6]=t[5]*n.y,r[7]=e[7],r[8]=t[6]*n.z,r[9]=t[7]*n.z,r[10]=t[8]*n.z,r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r};let tt=new ee;e3.getRotation=(e,t)=>{W.typeOf.object("matrix",e),W.typeOf.object("result",t);let r=e3.getScale(e,tt);return t[0]=e[0]/r.x,t[1]=e[1]/r.x,t[2]=e[2]/r.x,t[3]=e[4]/r.y,t[4]=e[5]/r.y,t[5]=e[6]/r.y,t[6]=e[8]/r.z,t[7]=e[9]/r.z,t[8]=e[10]/r.z,t},e3.multiply=(e,t,r)=>{W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r);let n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],h=e[9],p=e[10],d=e[11],m=e[12],y=e[13],_=e[14],E=e[15],O=t[0],g=t[1],T=t[2],A=t[3],b=t[4],w=t[5],R=t[6],S=t[7],x=t[8],N=t[9],I=t[10],C=t[11],v=t[12],M=t[13],P=t[14],L=t[15];return r[0]=n*O+s*g+f*T+m*A,r[1]=i*O+l*g+h*T+y*A,r[2]=o*O+u*g+p*T+_*A,r[3]=a*O+c*g+d*T+E*A,r[4]=n*b+s*w+f*R+m*S,r[5]=i*b+l*w+h*R+y*S,r[6]=o*b+u*w+p*R+_*S,r[7]=a*b+c*w+d*R+E*S,r[8]=n*x+s*N+f*I+m*C,r[9]=i*x+l*N+h*I+y*C,r[10]=o*x+u*N+p*I+_*C,r[11]=a*x+c*N+d*I+E*C,r[12]=n*v+s*M+f*P+m*L,r[13]=i*v+l*M+h*P+y*L,r[14]=o*v+u*M+p*P+_*L,r[15]=a*v+c*M+d*P+E*L,r},e3.add=(e,t,r)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r),r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r[9]=e[9]+t[9],r[10]=e[10]+t[10],r[11]=e[11]+t[11],r[12]=e[12]+t[12],r[13]=e[13]+t[13],r[14]=e[14]+t[14],r[15]=e[15]+t[15],r),e3.subtract=(e,t,r)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r),r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r[9]=e[9]-t[9],r[10]=e[10]-t[10],r[11]=e[11]-t[11],r[12]=e[12]-t[12],r[13]=e[13]-t[13],r[14]=e[14]-t[14],r[15]=e[15]-t[15],r),e3.multiplyTransformation=(e,t,r)=>{W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r);let n=e[0],i=e[1],o=e[2],a=e[4],s=e[5],l=e[6],u=e[8],c=e[9],f=e[10],h=e[12],p=e[13],d=e[14],m=t[0],y=t[1],_=t[2],E=t[4],O=t[5],g=t[6],T=t[8],A=t[9],b=t[10],w=t[12],R=t[13],S=t[14];return r[0]=n*m+a*y+u*_,r[1]=i*m+s*y+c*_,r[2]=o*m+l*y+f*_,r[3]=0,r[4]=n*E+a*O+u*g,r[5]=i*E+s*O+c*g,r[6]=o*E+l*O+f*g,r[7]=0,r[8]=n*T+a*A+u*b,r[9]=i*T+s*A+c*b,r[10]=o*T+l*A+f*b,r[11]=0,r[12]=n*w+a*R+u*S+h,r[13]=i*w+s*R+c*S+p,r[14]=o*w+l*R+f*S+d,r[15]=1,r},e3.multiplyByMatrix3=(e,t,r)=>{W.typeOf.object("matrix",e),W.typeOf.object("rotation",t),W.typeOf.object("result",r);let n=e[0],i=e[1],o=e[2],a=e[4],s=e[5],l=e[6],u=e[8],c=e[9],f=e[10],h=t[0],p=t[1],d=t[2],m=t[3],y=t[4],_=t[5],E=t[6],O=t[7],g=t[8];return r[0]=n*h+a*p+u*d,r[1]=i*h+s*p+c*d,r[2]=o*h+l*p+f*d,r[3]=0,r[4]=n*m+a*y+u*_,r[5]=i*m+s*y+c*_,r[6]=o*m+l*y+f*_,r[7]=0,r[8]=n*E+a*O+u*g,r[9]=i*E+s*O+c*g,r[10]=o*E+l*O+f*g,r[11]=0,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},e3.multiplyByTranslation=(e,t,r)=>{W.typeOf.object("matrix",e),W.typeOf.object("translation",t),W.typeOf.object("result",r);let n=t.x,i=t.y,o=t.z,a=n*e[0]+i*e[4]+o*e[8]+e[12],s=n*e[1]+i*e[5]+o*e[9]+e[13],l=n*e[2]+i*e[6]+o*e[10]+e[14];return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=a,r[13]=s,r[14]=l,r[15]=e[15],r},e3.multiplyByScale=(e,t,r)=>{W.typeOf.object("matrix",e),W.typeOf.object("scale",t),W.typeOf.object("result",r);let n=t.x,i=t.y,o=t.z;return 1===n&&1===i&&1===o?e3.clone(e,r):(r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=e[3],r[4]=i*e[4],r[5]=i*e[5],r[6]=i*e[6],r[7]=e[7],r[8]=o*e[8],r[9]=o*e[9],r[10]=o*e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r)},e3.multiplyByUniformScale=(e,t,r)=>(W.typeOf.object("matrix",e),W.typeOf.number("scale",t),W.typeOf.object("result",r),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3],r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7],r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r),e3.multiplyByVector=(e,t,r)=>{W.typeOf.object("matrix",e),W.typeOf.object("cartesian",t),W.typeOf.object("result",r);let n=t.x,i=t.y,o=t.z,a=t.w,s=e[0]*n+e[4]*i+e[8]*o+e[12]*a,l=e[1]*n+e[5]*i+e[9]*o+e[13]*a,u=e[2]*n+e[6]*i+e[10]*o+e[14]*a,c=e[3]*n+e[7]*i+e[11]*o+e[15]*a;return r.x=s,r.y=l,r.z=u,r.w=c,r},e3.multiplyByPointAsVector=(e,t,r)=>{W.typeOf.object("matrix",e),W.typeOf.object("cartesian",t),W.typeOf.object("result",r);let n=t.x,i=t.y,o=t.z,a=e[0]*n+e[4]*i+e[8]*o,s=e[1]*n+e[5]*i+e[9]*o,l=e[2]*n+e[6]*i+e[10]*o;return r.x=a,r.y=s,r.z=l,r},e3.multiplyByPoint=(e,t,r)=>{W.typeOf.object("matrix",e),W.typeOf.object("cartesian",t),W.typeOf.object("result",r);let n=t.x,i=t.y,o=t.z,a=e[0]*n+e[4]*i+e[8]*o+e[12],s=e[1]*n+e[5]*i+e[9]*o+e[13],l=e[2]*n+e[6]*i+e[10]*o+e[14];return r.x=a,r.y=s,r.z=l,r},e3.multiplyByScalar=(e,t,r)=>(W.typeOf.object("matrix",e),W.typeOf.number("scalar",t),W.typeOf.object("result",r),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11]*t,r[12]=e[12]*t,r[13]=e[13]*t,r[14]=e[14]*t,r[15]=e[15]*t,r),e3.negate=(e,t)=>(W.typeOf.object("matrix",e),W.typeOf.object("result",t),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t),e3.transpose=(e,t)=>{W.typeOf.object("matrix",e),W.typeOf.object("result",t);let r=e[1],n=e[2],i=e[3],o=e[6],a=e[7],s=e[11];return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[10]=e[10],t[11]=e[14],t[12]=i,t[13]=a,t[14]=s,t[15]=e[15],t},e3.abs=(e,t)=>(W.typeOf.object("matrix",e),W.typeOf.object("result",t),t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t[9]=Math.abs(e[9]),t[10]=Math.abs(e[10]),t[11]=Math.abs(e[11]),t[12]=Math.abs(e[12]),t[13]=Math.abs(e[13]),t[14]=Math.abs(e[14]),t[15]=Math.abs(e[15]),t),e3.equals=(e,t)=>e===t||H(e)&&H(t)&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[3]===t[3]&&e[7]===t[7]&&e[11]===t[11]&&e[15]===t[15],e3.equalsEpsilon=(e,t,r)=>(r=r??0,e===t||H(e)&&H(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r&&Math.abs(e[4]-t[4])<=r&&Math.abs(e[5]-t[5])<=r&&Math.abs(e[6]-t[6])<=r&&Math.abs(e[7]-t[7])<=r&&Math.abs(e[8]-t[8])<=r&&Math.abs(e[9]-t[9])<=r&&Math.abs(e[10]-t[10])<=r&&Math.abs(e[11]-t[11])<=r&&Math.abs(e[12]-t[12])<=r&&Math.abs(e[13]-t[13])<=r&&Math.abs(e[14]-t[14])<=r&&Math.abs(e[15]-t[15])<=r),e3.getTranslation=(e,t)=>(W.typeOf.object("matrix",e),W.typeOf.object("result",t),t.x=e[12],t.y=e[13],t.z=e[14],t),e3.getMatrix3=(e,t)=>(W.typeOf.object("matrix",e),W.typeOf.object("result",t),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t);let tr=new eF,tn=new eF,ti=new eW,to=new eW(0,0,0,1);e3.inverse=(e,t)=>{W.typeOf.object("matrix",e),W.typeOf.object("result",t);let r=e[0],n=e[4],i=e[8],o=e[12],a=e[1],s=e[5],l=e[9],u=e[13],c=e[2],f=e[6],h=e[10],p=e[14],d=e[3],m=e[7],y=e[11],_=e[15],E=h*_,O=p*y,g=f*_,T=p*m,A=f*y,b=h*m,w=c*_,R=p*d,S=c*y,x=h*d,N=c*m,I=f*d,C=E*s+T*l+A*u-(O*s+g*l+b*u),v=O*a+w*l+x*u-(E*a+R*l+S*u),M=g*a+R*s+N*u-(T*a+w*s+I*u),P=b*a+S*s+I*l-(A*a+x*s+N*l),L=O*n+g*i+b*o-(E*n+T*i+A*o),F=E*r+R*i+S*o-(O*r+w*i+x*o),D=T*r+w*n+I*o-(g*r+R*n+N*o),B=A*r+x*n+N*i-(b*r+S*n+I*i);E=i*u,O=o*l,g=n*u,T=o*s,A=n*l,b=i*s,w=r*u,R=o*a,S=r*l;let z=E*m+T*y+A*_-(O*m+g*y+b*_),U=O*d+w*y+(x=i*a)*_-(E*d+R*y+S*_),j=g*d+R*m+(N=r*s)*_-(T*d+w*m+(I=n*a)*_),q=b*d+S*m+I*y-(A*d+x*m+N*y),G=g*h+b*p+O*f-(A*p+E*f+T*h),V=S*p+E*c+R*h-(w*h+x*p+O*c),k=w*f+I*p+T*c-(N*p+g*c+R*f),H=N*h+A*c+x*f-(S*f+I*h+b*c),Y=r*C+n*v+i*M+o*P;if(Math.abs(Y)<K.EPSILON21){if(eF.equalsEpsilon(e3.getMatrix3(e,tr),tn,K.EPSILON7)&&eW.equals(e3.getRow(e,3,ti),to))return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=1,t;throw new e1("matrix is not invertible because its determinate is zero.")}return Y=1/Y,t[0]=C*Y,t[1]=v*Y,t[2]=M*Y,t[3]=P*Y,t[4]=L*Y,t[5]=F*Y,t[6]=D*Y,t[7]=B*Y,t[8]=z*Y,t[9]=U*Y,t[10]=j*Y,t[11]=q*Y,t[12]=G*Y,t[13]=V*Y,t[14]=k*Y,t[15]=H*Y,t},e3.inverseTransformation=(e,t)=>{W.typeOf.object("matrix",e),W.typeOf.object("result",t);let r=e[0],n=e[1],i=e[2],o=e[4],a=e[5],s=e[6],l=e[8],u=e[9],c=e[10],f=e[12],h=e[13],p=e[14],d=-r*f-n*h-i*p,m=-o*f-a*h-s*p,y=-l*f-u*h-c*p;return t[0]=r,t[1]=o,t[2]=l,t[3]=0,t[4]=n,t[5]=a,t[6]=u,t[7]=0,t[8]=i,t[9]=s,t[10]=c,t[11]=0,t[12]=d,t[13]=m,t[14]=y,t[15]=1,t};let ta=new e3;e3.inverseTranspose=(e,t)=>(W.typeOf.object("matrix",e),W.typeOf.object("result",t),e3.inverse(e3.transpose(e,ta),t)),e3.IDENTITY=Object.freeze(new e3(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),e3.ZERO=Object.freeze(new e3(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),e3.COLUMN0ROW0=0,e3.COLUMN0ROW1=1,e3.COLUMN0ROW2=2,e3.COLUMN0ROW3=3,e3.COLUMN1ROW0=4,e3.COLUMN1ROW1=5,e3.COLUMN1ROW2=6,e3.COLUMN1ROW3=7,e3.COLUMN2ROW0=8,e3.COLUMN2ROW1=9,e3.COLUMN2ROW2=10,e3.COLUMN2ROW3=11,e3.COLUMN3ROW0=12,e3.COLUMN3ROW1=13,e3.COLUMN3ROW2=14,e3.COLUMN3ROW3=15,Object.defineProperties(e3.prototype,{length:{get:()=>e3.packedLength}}),e3.prototype.clone=function(e){return e3.clone(this,e)},e3.prototype.equals=function(e){return e3.equals(this,e)},e3.equalsArray=(e,t,r)=>e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]&&e[4]===t[r+4]&&e[5]===t[r+5]&&e[6]===t[r+6]&&e[7]===t[r+7]&&e[8]===t[r+8]&&e[9]===t[r+9]&&e[10]===t[r+10]&&e[11]===t[r+11]&&e[12]===t[r+12]&&e[13]===t[r+13]&&e[14]===t[r+14]&&e[15]===t[r+15],e3.prototype.equalsEpsilon=function(e,t){return e3.equalsEpsilon(this,e,t)},e3.prototype.toString=function(){return`(${this[0]}, ${this[4]}, ${this[8]}, ${this[12]})
(${this[1]}, ${this[5]}, ${this[9]}, ${this[13]})
(${this[2]}, ${this[6]}, ${this[10]}, ${this[14]})
(${this[3]}, ${this[7]}, ${this[11]}, ${this[15]})`};let ts=function(e,t,r){let n,i;W.defined("array",e),W.defined("itemToFind",t),W.defined("comparator",r);let o=0,a=e.length-1;for(;o<=a;){if((i=r(e[n=~~((o+a)/2)],t))<0){o=n+1;continue}if(i>0){a=n-1;continue}return n}return~(a+1)},tl=function(e,t,r,n,i){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=r,this.yPoleOffset=n,this.ut1MinusUtc=i},tu=function(e){if(null===e||isNaN(e))throw new Y("year is required and must be a number.");return e%4==0&&e%100!=0||e%400==0},tc=[31,28,31,30,31,30,31,31,30,31,30,31],tf=function(e,t,r,n,i,o,a,s){e=e??1,t=t??1,r=r??1,n=n??0,i=i??0,o=o??0,a=a??0,s=s??!1,W.typeOf.number.greaterThanOrEquals("Year",e,1),W.typeOf.number.lessThanOrEquals("Year",e,9999),W.typeOf.number.greaterThanOrEquals("Month",t,1),W.typeOf.number.lessThanOrEquals("Month",t,12),W.typeOf.number.greaterThanOrEquals("Day",r,1),W.typeOf.number.lessThanOrEquals("Day",r,31),W.typeOf.number.greaterThanOrEquals("Hour",n,0),W.typeOf.number.lessThanOrEquals("Hour",n,23),W.typeOf.number.greaterThanOrEquals("Minute",i,0),W.typeOf.number.lessThanOrEquals("Minute",i,59),W.typeOf.bool("IsLeapSecond",s),W.typeOf.number.greaterThanOrEquals("Second",o,0),W.typeOf.number.lessThanOrEquals("Second",o,s?60:59),W.typeOf.number.greaterThanOrEquals("Millisecond",a,0),W.typeOf.number.lessThan("Millisecond",a,1e3),function(){let n=2===t&&tu(e)?tc[t-1]+1:tc[t-1];if(r>n)throw new Y("Month and Day represents invalid date")}(),this.year=e,this.month=t,this.day=r,this.hour=n,this.minute=i,this.second=o,this.millisecond=a,this.isLeapSecond=s},th=function(e,t){this.julianDate=e,this.offset=t},tp=Object.freeze({SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5}),td=Object.freeze({UTC:0,TAI:1}),tm=new tf,ty=[31,28,31,30,31,30,31,31,30,31,30,31];function t_(e,t){return tP.compare(e.julianDate,t.julianDate)}let tE=new th;function tO(e){tE.julianDate=e;let t=tP.leapSeconds,r=ts(t,tE,t_);r<0&&(r=~r),r>=t.length&&(r=t.length-1);let n=t[r].offset;r>0&&tP.secondsDifference(t[r].julianDate,e)>n&&(n=t[--r].offset),tP.addSeconds(e,n,e)}function tg(e,t){tE.julianDate=e;let r=tP.leapSeconds,n=ts(r,tE,t_);if(n<0&&(n=~n),0===n)return tP.addSeconds(e,-r[0].offset,t);if(n>=r.length)return tP.addSeconds(e,-r[n-1].offset,t);let i=tP.secondsDifference(r[n].julianDate,e);return 0===i?tP.addSeconds(e,-r[n].offset,t):i<=1?void 0:tP.addSeconds(e,-r[--n].offset,t)}function tT(e,t,r){let n=t/tp.SECONDS_PER_DAY|0;return e+=n,(t-=tp.SECONDS_PER_DAY*n)<0&&(e--,t+=tp.SECONDS_PER_DAY),r.dayNumber=e,r.secondsOfDay=t,r}function tA(e,t,r,n,i,o,a){let s=(t-14)/12|0,l=e+4800+s,u=(1461*l/4|0)+(367*(t-2-12*s)/12|0)-(3*((l+100)/100|0)/4|0)+r-32075;(n-=12)<0&&(n+=24);let c=o+(n*tp.SECONDS_PER_HOUR+i*tp.SECONDS_PER_MINUTE+a*tp.SECONDS_PER_MILLISECOND);return c>=43200&&(u-=1),[u,c]}let tb=/^(\d{4})$/,tw=/^(\d{4})-(\d{2})$/,tR=/^(\d{4})-?(\d{3})$/,tS=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,tx=/^(\d{4})-?(\d{2})-?(\d{2})$/,tN=/([Z+-])?(\d{2})?:?(\d{2})?$/,tI=/^(\d{2})(\.\d+)?/.source+tN.source,tC=/^(\d{2}):?(\d{2})(\.\d+)?/.source+tN.source,tv=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+tN.source,tM="Invalid ISO 8601 date.";function tP(e,t,r){this.dayNumber=void 0,this.secondsOfDay=void 0,e=e??0,t=t??0,r=r??td.UTC;let n=0|e;t+=(e-n)*tp.SECONDS_PER_DAY,tT(n,t,this),r===td.UTC&&tO(this)}tP.fromGregorianDate=(e,t)=>{if(!(e instanceof tf))throw new Y("date must be a valid GregorianDate.");let r=tA(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return H(t)?(tT(r[0],r[1],t),tO(t),t):new tP(r[0],r[1],td.UTC)},tP.fromDate=(e,t)=>{if(!(e instanceof Date)||isNaN(e.getTime()))throw new Y("date must be a valid JavaScript Date.");let r=tA(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return H(t)?(tT(r[0],r[1],t),tO(t),t):new tP(r[0],r[1],td.UTC)},tP.fromIso8601=(e,t)=>{let r,n,i,o,a;if("string"!=typeof e)throw new Y(tM);let s=(e=e.replace(",",".")).split("T"),l=1,u=1,c=0,f=0,h=0,p=0,d=s[0],m=s[1];if(!H(d))throw new Y(tM);if(null!==(s=d.match(tx))){if((o=d.split("-").length-1)>0&&2!==o)throw new Y(tM);r=+s[1],l=+s[2],u=+s[3]}else if(null!==(s=d.match(tw)))r=+s[1],l=+s[2];else if(null!==(s=d.match(tb)))r=+s[1];else{let e;if(null!==(s=d.match(tR))){if(r=+s[1],e=+s[2],i=tu(r),e<1||i&&e>366||!i&&e>365)throw new Y(tM)}else if(null!==(s=d.match(tS))){r=+s[1];let t=+s[2],n=+s[3]||0;if((o=d.split("-").length-1)>0&&(!H(s[3])&&1!==o||H(s[3])&&2!==o))throw new Y(tM);e=7*t+n-new Date(Date.UTC(r,0,4)).getUTCDay()-3}else throw new Y(tM);(n=new Date(Date.UTC(r,0,1))).setUTCDate(e),l=n.getUTCMonth()+1,u=n.getUTCDate()}if(i=tu(r),l<1||l>12||u<1||(2!==l||!i)&&u>ty[l-1]||i&&2===l&&u>29)throw new Y(tM);if(H(m)){if(null!==(s=m.match(tv))){if((o=m.split(":").length-1)>0&&2!==o&&3!==o)throw new Y(tM);c=+s[1],f=+s[2],h=+s[3],p=1e3*(s[4]||0),a=5}else if(null!==(s=m.match(tC))){if((o=m.split(":").length-1)>2)throw new Y(tM);c=+s[1],f=+s[2],h=60*(s[3]||0),a=4}else if(null!==(s=m.match(tI)))c=+s[1],f=60*(s[2]||0),a=3;else throw new Y(tM);if(f>=60||h>=61||c>24||24===c&&(f>0||h>0||p>0))throw new Y(tM);let e=s[a],t=+s[a+1],n=+(s[a+2]||0);switch(e){case"+":c-=t,f-=n;break;case"-":c+=t,f+=n;break;case"Z":break;default:f+=new Date(Date.UTC(r,l-1,u,c,f)).getTimezoneOffset()}}let y=60===h;for(y&&h--;f>=60;)f-=60,c++;for(;c>=24;)c-=24,u++;for(n=i&&2===l?29:ty[l-1];u>n;)u-=n,++l>12&&(l-=12,r++),n=i&&2===l?29:ty[l-1];for(;f<0;)f+=60,c--;for(;c<0;)c+=24,u--;for(;u<1;)--l<1&&(l+=12,r--),u+=n=i&&2===l?29:ty[l-1];let _=tA(r,l,u,c,f,h,p);return H(t)?(tT(_[0],_[1],t),tO(t)):t=new tP(_[0],_[1],td.UTC),y&&tP.addSeconds(t,1,t),t},tP.now=e=>tP.fromDate(new Date,e);let tL=new tP(0,0,td.TAI);tP.toGregorianDate=(e,t)=>{if(!H(e))throw new Y("julianDate is required.");let r=!1,n=tg(e,tL);H(n)||(tP.addSeconds(e,-1,tL),n=tg(tL,tL),r=!0);let i=n.dayNumber,o=n.secondsOfDay;o>=43200&&(i+=1);let a=i+68569|0,s=4*a/146097|0,l=4e3*((a=a-((146097*s+3)/4|0)|0)+1)/1461001|0,u=80*(a=a-(1461*l/4|0)+31|0)/2447|0,c=a-(2447*u/80|0)|0;a=u/11|0;let f=u+2-12*a|0,h=100*(s-49)+l+a|0,p=o/tp.SECONDS_PER_HOUR|0,d=o-p*tp.SECONDS_PER_HOUR,m=d/tp.SECONDS_PER_MINUTE|0,y=0|(d-=m*tp.SECONDS_PER_MINUTE),_=(d-y)/tp.SECONDS_PER_MILLISECOND;return((p+=12)>23&&(p-=24),r&&(y+=1),H(t))?(t.year=h,t.month=f,t.day=c,t.hour=p,t.minute=m,t.second=y,t.millisecond=_,t.isLeapSecond=r,t):new tf(h,f,c,p,m,y,_,r)},tP.toDate=e=>{if(!H(e))throw new Y("julianDate is required.");let t=tP.toGregorianDate(e,tm),r=t.second;return t.isLeapSecond&&(r-=1),new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,r,t.millisecond))},tP.toIso8601=(e,t)=>{let r;if(!H(e))throw new Y("julianDate is required.");let n=tP.toGregorianDate(e,tm),i=n.year,o=n.month,a=n.day,s=n.hour,l=n.minute,u=n.second,c=n.millisecond;if(1e4===i&&1===o&&1===a&&0===s&&0===l&&0===u&&0===c&&(i=9999,o=12,a=31,s=24),!H(t)&&0!==c){let e=.01*c;return r=e<1e-6?e.toFixed(20).replace(".","").replace(/0+$/,""):e.toString().replace(".",""),`${i.toString().padStart(4,"0")}-${o.toString().padStart(2,"0")}-${a.toString().padStart(2,"0")}T${s.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}.${r}Z`}return H(t)&&0!==t?(r=(.01*c).toFixed(t).replace(".","").slice(0,t),`${i.toString().padStart(4,"0")}-${o.toString().padStart(2,"0")}-${a.toString().padStart(2,"0")}T${s.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}.${r}Z`):`${i.toString().padStart(4,"0")}-${o.toString().padStart(2,"0")}-${a.toString().padStart(2,"0")}T${s.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}Z`},tP.clone=(e,t)=>{if(H(e))return H(t)?(t.dayNumber=e.dayNumber,t.secondsOfDay=e.secondsOfDay,t):new tP(e.dayNumber,e.secondsOfDay,td.TAI)},tP.compare=(e,t)=>{if(!H(e))throw new Y("left is required.");if(!H(t))throw new Y("right is required.");let r=e.dayNumber-t.dayNumber;return 0!==r?r:e.secondsOfDay-t.secondsOfDay},tP.equals=(e,t)=>e===t||H(e)&&H(t)&&e.dayNumber===t.dayNumber&&e.secondsOfDay===t.secondsOfDay,tP.equalsEpsilon=(e,t,r)=>(r=r??0,e===t||H(e)&&H(t)&&Math.abs(tP.secondsDifference(e,t))<=r),tP.totalDays=e=>{if(!H(e))throw new Y("julianDate is required.");return e.dayNumber+e.secondsOfDay/tp.SECONDS_PER_DAY},tP.secondsDifference=(e,t)=>{if(!H(e))throw new Y("left is required.");if(!H(t))throw new Y("right is required.");return(e.dayNumber-t.dayNumber)*tp.SECONDS_PER_DAY+(e.secondsOfDay-t.secondsOfDay)},tP.daysDifference=(e,t)=>{if(!H(e))throw new Y("left is required.");if(!H(t))throw new Y("right is required.");return e.dayNumber-t.dayNumber+(e.secondsOfDay-t.secondsOfDay)/tp.SECONDS_PER_DAY},tP.computeTaiMinusUtc=e=>{tE.julianDate=e;let t=tP.leapSeconds,r=ts(t,tE,t_);return r<0&&(r=~r,--r<0&&(r=0)),t[r].offset},tP.addSeconds=(e,t,r)=>{if(!H(e))throw new Y("julianDate is required.");if(!H(t))throw new Y("seconds is required.");if(!H(r))throw new Y("result is required.");return tT(e.dayNumber,e.secondsOfDay+t,r)},tP.addMinutes=(e,t,r)=>{if(!H(e))throw new Y("julianDate is required.");if(!H(t))throw new Y("minutes is required.");if(!H(r))throw new Y("result is required.");let n=e.secondsOfDay+t*tp.SECONDS_PER_MINUTE;return tT(e.dayNumber,n,r)},tP.addHours=(e,t,r)=>{if(!H(e))throw new Y("julianDate is required.");if(!H(t))throw new Y("hours is required.");if(!H(r))throw new Y("result is required.");let n=e.secondsOfDay+t*tp.SECONDS_PER_HOUR;return tT(e.dayNumber,n,r)},tP.addDays=(e,t,r)=>{if(!H(e))throw new Y("julianDate is required.");if(!H(t))throw new Y("days is required.");if(!H(r))throw new Y("result is required.");return tT(e.dayNumber+t,e.secondsOfDay,r)},tP.lessThan=(e,t)=>0>tP.compare(e,t),tP.lessThanOrEquals=(e,t)=>0>=tP.compare(e,t),tP.greaterThan=(e,t)=>tP.compare(e,t)>0,tP.greaterThanOrEquals=(e,t)=>tP.compare(e,t)>=0,tP.prototype.clone=function(e){return tP.clone(this,e)},tP.prototype.equals=function(e){return tP.equals(this,e)},tP.prototype.equalsEpsilon=function(e,t){return tP.equalsEpsilon(this,e,t)},tP.prototype.toString=function(){return tP.toIso8601(this)},tP.leapSeconds=[new th(new tP(2441317,43210,td.TAI),10),new th(new tP(2441499,43211,td.TAI),11),new th(new tP(2441683,43212,td.TAI),12),new th(new tP(2442048,43213,td.TAI),13),new th(new tP(2442413,43214,td.TAI),14),new th(new tP(2442778,43215,td.TAI),15),new th(new tP(2443144,43216,td.TAI),16),new th(new tP(2443509,43217,td.TAI),17),new th(new tP(2443874,43218,td.TAI),18),new th(new tP(2444239,43219,td.TAI),19),new th(new tP(2444786,43220,td.TAI),20),new th(new tP(2445151,43221,td.TAI),21),new th(new tP(2445516,43222,td.TAI),22),new th(new tP(2446247,43223,td.TAI),23),new th(new tP(2447161,43224,td.TAI),24),new th(new tP(2447892,43225,td.TAI),25),new th(new tP(2448257,43226,td.TAI),26),new th(new tP(2448804,43227,td.TAI),27),new th(new tP(2449169,43228,td.TAI),28),new th(new tP(2449534,43229,td.TAI),29),new th(new tP(2450083,43230,td.TAI),30),new th(new tP(2450630,43231,td.TAI),31),new th(new tP(2451179,43232,td.TAI),32),new th(new tP(2453736,43233,td.TAI),33),new th(new tP(2454832,43234,td.TAI),34),new th(new tP(2456109,43235,td.TAI),35),new th(new tP(2457204,43236,td.TAI),36),new th(new tP(2457754,43237,td.TAI),37)];var tF=r(46781),tD=r.n(tF);let tB=function e(t,r){if(null===t||"object"!=typeof t)return t;r=r??!1;let n=new t.constructor;for(let i in t)if(Object.hasOwn(t,i)){let o=t[i];r&&(o=e(o,r)),n[i]=o}return n},tz=function e(t,r,n){let i,o,a;n=n??!1;let s={},l=H(t),u=H(r);if(l)for(i in t)Object.hasOwn(t,i)&&(o=t[i],u&&n&&"object"==typeof o&&Object.hasOwn(r,i)&&"object"==typeof(a=r[i])?s[i]=e(o,a,n):s[i]=o);if(u)for(i in r)Object.hasOwn(r,i)&&!Object.hasOwn(s,i)&&(a=r[i],s[i]=a);return s},tU=function(){let e,t,r=new Promise((r,n)=>{e=r,t=n});return{resolve:e,reject:t,promise:r}};function tj(e,t){let r;return"undefined"!=typeof document&&(r=document),tj._implementation(e,t,r)}tj._implementation=(e,t,r)=>{if(!H(e))throw new Y("relative uri is required.");if(!H(t)){if(void 0===r)return e;t=r.baseURI??r.location.href}let n=new(tD())(e);return""!==n.scheme()?n.toString():n.absoluteTo(t).toString()};let tq=function(e,t){if(!H(e))throw new Y("uri is required.");let r="",n=e.lastIndexOf("/");return -1!==n&&(r=e.substring(0,n+1)),t&&(0!==(e=new(tD())(e)).query().length&&(r+=`?${e.query()}`),0!==e.fragment().length&&(r+=`#${e.fragment()}`)),r},tG=function(e){if(!H(e))throw new Y("uri is required.");let t=new(tD())(e);t.normalize();let r=t.path(),n=r.lastIndexOf("/");return -1!==n&&(r=r.substr(n+1)),r=-1===(n=r.lastIndexOf("."))?"":r.substr(n+1)},tV={},tk=function(e,t,r){H(t)||(t=e.width),H(r)||(r=e.height);let n=tV[t];H(n)||(n={},tV[t]=n);let i=n[r];if(!H(i)){let e=document.createElement("canvas");e.width=t,e.height=r,(i=e.getContext("2d",{willReadFrequently:!0})).globalCompositeOperation="copy",n[r]=i}return i.drawImage(e,0,0,t,r),i.getImageData(0,0,t,r).data},tH=/^blob:/i,tY=function(e){return W.typeOf.string("uri",e),tH.test(e)},tW=function(e){H(n)||(n=document.createElement("a")),n.href=window.location.href;let t=n.host,r=n.protocol;return n.href=e,n.href=n.href,r!==n.protocol||t!==n.host},tX=/^data:/i,t$=function(e){return W.typeOf.string("uri",e),tX.test(e)},tZ=function(e){let t=document.createElement("script");return t.async=!0,t.src=e,new Promise((e,r)=>{window.crossOriginIsolated&&t.setAttribute("crossorigin","anonymous");let n=document.getElementsByTagName("head")[0];t.onload=()=>{t.onload=void 0,n.removeChild(t),e()},t.onerror=e=>{r(e)},n.appendChild(t)})},tK=function(e){if(!H(e))throw new Y("obj is required.");let t="";for(let r in e)if(Object.hasOwn(e,r)){let n=e[r],i=`${encodeURIComponent(r)}=`;if(Array.isArray(n))for(let e=0,r=n.length;e<r;++e)t+=`${i+encodeURIComponent(n[e])}&`;else t+=`${i+encodeURIComponent(n)}&`}return t.slice(0,-1)},tJ=function(e){if(!H(e))throw new Y("queryString is required.");let t={};if(""===e)return t;let r=e.replace(/\+/g,"%20").split(/[&;]/);for(let e=0,n=r.length;e<n;++e){let n=r[e].split("="),i=decodeURIComponent(n[0]),o=n[1];o=H(o)?decodeURIComponent(o):"";let a=t[i];"string"==typeof a?t[i]=[a,o]:Array.isArray(a)?a.push(o):t[i]=o}return t},tQ=Object.freeze({UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5}),t0=Object.freeze({TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3});function t1(e){let t=(e=e??e0.EMPTY_OBJECT).throttleByServer??!1,r=e.throttle??!1;this.url=e.url,this.requestFunction=e.requestFunction,this.cancelFunction=e.cancelFunction,this.priorityFunction=e.priorityFunction,this.priority=e.priority??0,this.throttle=r,this.throttleByServer=t,this.type=e.type??t0.OTHER,this.serverKey=e.serverKey,this.state=tQ.UNISSUED,this.deferred=void 0,this.cancelled=!1}t1.prototype.cancel=function(){this.cancelled=!0},t1.prototype.clone=function(e){return H(e)?(e.url=this.url,e.requestFunction=this.requestFunction,e.cancelFunction=this.cancelFunction,e.priorityFunction=this.priorityFunction,e.priority=this.priority,e.throttle=this.throttle,e.throttleByServer=this.throttleByServer,e.type=this.type,e.serverKey=this.serverKey,e.state=tQ.UNISSUED,e.deferred=void 0,e.cancelled=!1,e):new t1(this)};let t3=function(e){let t={};if(!e)return t;let r=e.split("\r\n");for(let e=0;e<r.length;++e){let n=r[e],i=n.indexOf(": ");if(i>0){let e=n.substring(0,i),r=n.substring(i+2);t[e]=r}}return t};function t2(e,t,r){this.statusCode=e,this.response=t,this.responseHeaders=r,"string"==typeof this.responseHeaders&&(this.responseHeaders=t3(this.responseHeaders))}function t4(){this._listeners=new Map,this._toRemove=new Map,this._toAdd=new Map,this._invokingListeners=!1,this._listenerCount=0}function t5(e,t,r,n){t.has(r)||t.set(r,new Set);let i=t.get(r);return!i.has(n)&&(i.add(n),!0)}function t6(e,t,r,n){let i=t.get(r);if(!i||!i.has(n))return!1;if(e._invokingListeners){if(!t5(e,e._toRemove,r,n))return!1}else i.delete(n),0===i.size&&t.delete(r);return!0}function t8(e){W.typeOf.object("options",e),W.defined("options.comparator",e.comparator),this._comparator=e.comparator,this._array=[],this._length=0,this._maximumLength=void 0}function t7(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}t2.prototype.toString=function(){let e="Request has failed.";return H(this.statusCode)&&(e+=` Status Code: ${this.statusCode}`),e},Object.defineProperties(t4.prototype,{numberOfListeners:{get:function(){return this._listenerCount}}}),t4.prototype.addEventListener=function(e,t){return W.typeOf.func("listener",e),t5(this,this._invokingListeners?this._toAdd:this._listeners,e,t)&&this._listenerCount++,()=>{this.removeEventListener(e,t)}},t4.prototype.removeEventListener=function(e,t){W.typeOf.func("listener",e);let r=t6(this,this._listeners,e,t),n=t6(this,this._toAdd,e,t),i=r||n;return i&&this._listenerCount--,i},t4.prototype.raiseEvent=function(){for(let[e,t]of(this._invokingListeners=!0,this._listeners.entries()))if(H(e))for(let r of t)e.apply(r,arguments);for(let[e,t]of(this._invokingListeners=!1,this._toAdd.entries()))for(let r of t)t5(this,this._listeners,e,r);for(let[e,t]of(this._toAdd.clear(),this._toRemove.entries()))for(let r of t)t6(this,this._listeners,e,r);this._toRemove.clear()},Object.defineProperties(t8.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(e){W.typeOf.number.greaterThanOrEquals("maximumLength",e,0);let t=this._length;if(e<t){let r=this._array;for(let n=e;n<t;++n)r[n]=void 0;this._length=e,r.length=e}this._maximumLength=e}},comparator:{get:function(){return this._comparator}}}),t8.prototype.reserve=function(e){e=e??this._length,this._array.length=e},t8.prototype.heapify=function(e){e=e??0;let t=this._length,r=this._comparator,n=this._array,i=-1,o=!0;for(;o;){let a=2*(e+1),s=a-1;i=s<t&&0>r(n[s],n[e])?s:e,a<t&&0>r(n[a],n[i])&&(i=a),i!==e?(t7(n,i,e),e=i):o=!1}},t8.prototype.resort=function(){let e=this._length;for(let t=Math.ceil(e/2);t>=0;--t)this.heapify(t)},t8.prototype.insert=function(e){let t;W.defined("element",e);let r=this._array,n=this._comparator,i=this._maximumLength,o=this._length++;for(o<r.length?r[o]=e:r.push(e);0!==o;){let e=Math.floor((o-1)/2);if(0>n(r[o],r[e]))t7(r,o,e),o=e;else break}return H(i)&&this._length>i&&(t=r[i],this._length=i),t},t8.prototype.pop=function(e){if(e=e??0,0===this._length)return;W.typeOf.number.lessThan("index",e,this._length);let t=this._array,r=t[e];return t7(t,e,--this._length),this.heapify(e),t[this._length]=void 0,r};let t9={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0},re=20,rt=new t8({comparator:function(e,t){return e.priority-t.priority}});rt.maximumLength=re,rt.reserve(re);let rr=[],rn={},ri="undefined"!=typeof document?new(tD())(document.location.href):new(tD()),ro=new t4;function ra(){}function rs(e){H(e.priorityFunction)&&(e.priority=e.priorityFunction())}function rl(e){return e.state===tQ.UNISSUED&&(e.state=tQ.ISSUED,e.deferred=tU()),e.deferred.promise}function ru(e){let t=rl(e);return e.state=tQ.ACTIVE,rr.push(e),++t9.numberOfActiveRequests,++t9.numberOfActiveRequestsEver,++rn[e.serverKey],e.requestFunction().then(t=>{if(e.state===tQ.CANCELLED)return;let r=e.deferred;--t9.numberOfActiveRequests,--rn[e.serverKey],ro.raiseEvent(),e.state=tQ.RECEIVED,e.deferred=void 0,r.resolve(t)}).catch(t=>{e.state!==tQ.CANCELLED&&(++t9.numberOfFailedRequests,--t9.numberOfActiveRequests,--rn[e.serverKey],ro.raiseEvent(t),e.state=tQ.FAILED,e.deferred.reject(t))}),t}function rc(e){let t=e.state===tQ.ACTIVE;if(e.state=tQ.CANCELLED,++t9.numberOfCancelledRequests,H(e.deferred)){let t=e.deferred;e.deferred=void 0,t.reject()}t&&(--t9.numberOfActiveRequests,--rn[e.serverKey],++t9.numberOfCancelledActiveRequests),H(e.cancelFunction)&&e.cancelFunction()}ra.maximumRequests=50,ra.maximumRequestsPerServer=18,ra.requestsByServer={},ra.throttleRequests=!0,ra.debugShowStatistics=!1,ra.requestCompletedEvent=ro,Object.defineProperties(ra,{statistics:{get:()=>t9},priorityHeapLength:{get:()=>re,set:e=>{if(e<re)for(;rt.length>e;)rc(rt.pop());re=e,rt.maximumLength=e,rt.reserve(e)}}}),ra.serverHasOpenSlots=(e,t)=>{t=t??1;let r=ra.requestsByServer[e]??ra.maximumRequestsPerServer;return rn[e]+t<=r},ra.heapHasOpenSlots=e=>rt.length+e<=re,ra.update=()=>{let e,t,r=0,n=rr.length;for(e=0;e<n;++e){if((t=rr[e]).cancelled&&rc(t),t.state!==tQ.ACTIVE){++r;continue}r>0&&(rr[e-r]=t)}rr.length-=r;let i=rt.internalArray,o=rt.length;for(e=0;e<o;++e)rs(i[e]);rt.resort();let a=Math.max(ra.maximumRequests-rr.length,0),s=0;for(;s<a&&rt.length>0;){if((t=rt.pop()).cancelled||t.throttleByServer&&!ra.serverHasOpenSlots(t.serverKey)){rc(t);continue}ru(t),++s}ra.debugShowStatistics&&(0===t9.numberOfActiveRequests&&t9.lastNumberOfActiveRequests>0&&(t9.numberOfAttemptedRequests>0&&(console.log(`Number of attempted requests: ${t9.numberOfAttemptedRequests}`),t9.numberOfAttemptedRequests=0),t9.numberOfCancelledRequests>0&&(console.log(`Number of cancelled requests: ${t9.numberOfCancelledRequests}`),t9.numberOfCancelledRequests=0),t9.numberOfCancelledActiveRequests>0&&(console.log(`Number of cancelled active requests: ${t9.numberOfCancelledActiveRequests}`),t9.numberOfCancelledActiveRequests=0),t9.numberOfFailedRequests>0&&(console.log(`Number of failed requests: ${t9.numberOfFailedRequests}`),t9.numberOfFailedRequests=0)),t9.lastNumberOfActiveRequests=t9.numberOfActiveRequests)},ra.getServerKey=e=>{W.typeOf.string("url",e);let t=new(tD())(e);""===t.scheme()&&(t=t.absoluteTo(ri)).normalize();let r=t.authority();return/:/.test(r)||(r=`${r}:${"https"===t.scheme()?"443":"80"}`),H(rn[r])||(rn[r]=0),r},ra.request=e=>{if(W.typeOf.object("request",e),W.typeOf.string("request.url",e.url),W.typeOf.func("request.requestFunction",e.requestFunction),t$(e.url)||tY(e.url))return ro.raiseEvent(),e.state=tQ.RECEIVED,e.requestFunction();if(++t9.numberOfAttemptedRequests,H(e.serverKey)||(e.serverKey=ra.getServerKey(e.url)),ra.throttleRequests&&e.throttleByServer&&!ra.serverHasOpenSlots(e.serverKey))return;if(!ra.throttleRequests||!e.throttle)return ru(e);if(rr.length>=ra.maximumRequests)return;rs(e);let t=rt.insert(e);if(H(t)){if(t===e)return;rc(t)}return rl(e)},ra.clearForSpecs=()=>{for(;rt.length>0;)rc(rt.pop());let e=rr.length;for(let t=0;t<e;++t)rc(rr[t]);rr.length=0,rn={},t9.numberOfAttemptedRequests=0,t9.numberOfActiveRequests=0,t9.numberOfCancelledRequests=0,t9.numberOfCancelledActiveRequests=0,t9.numberOfFailedRequests=0,t9.numberOfActiveRequestsEver=0,t9.lastNumberOfActiveRequests=0},ra.numberOfActiveRequestsByServer=e=>rn[e],ra.requestHeap=rt;let rf={},rh={};rf.add=(e,t)=>{if(!H(e))throw new Y("host is required.");if(!H(t)||t<=0)throw new Y("port is required to be greater than 0.");let r=`${e.toLowerCase()}:${t}`;H(rh[r])||(rh[r]=!0)},rf.remove=(e,t)=>{if(!H(e))throw new Y("host is required.");if(!H(t)||t<=0)throw new Y("port is required to be greater than 0.");let r=`${e.toLowerCase()}:${t}`;H(rh[r])&&delete rh[r]},rf.contains=e=>{if(!H(e))throw new Y("url is required.");let t=function(e){let t=new(tD())(e);t.normalize();let r=t.authority();if(0!==r.length){if(t.authority(r),-1!==r.indexOf("@")&&(r=r.split("@")[1]),-1===r.indexOf(":")){let e=t.scheme();if(0===e.length&&(e=(e=window.location.protocol).substring(0,e.length-1)),"http"===e)r+=":80";else{if("https"!==e)return;r+=":443"}}return r}}(e);return!!(H(t)&&H(rh[t]))},rf.clear=()=>{rh={}};let rp=(()=>{try{let e=new XMLHttpRequest;return e.open("GET","#",!0),e.responseType="blob","blob"===e.responseType}catch(e){return!1}})();function rd(e){"string"==typeof(e=e??e0.EMPTY_OBJECT)&&(e={url:e}),W.typeOf.string("options.url",e.url),this._url=void 0,this._templateValues=rm(e.templateValues,{}),this._queryParameters=rm(e.queryParameters,{}),this.headers=rm(e.headers,{}),this.request=e.request??new t1,this.proxy=e.proxy,this.retryCallback=e.retryCallback,this.retryAttempts=e.retryAttempts??0,this._retryCount=0,e.parseUrl??!0?this.parseUrl(e.url,!0,!0):this._url=e.url,this._credits=e.credits}function rm(e,t){return H(e)?tB(e):t}function ry(e,t,r){if(!r)return tz(e,t);let n=tB(e,!0);for(let e in t)if(Object.hasOwn(t,e)){let r=n[e],i=t[e];H(r)?(Array.isArray(r)||(r=n[e]=[r]),n[e]=r.concat(i)):n[e]=Array.isArray(i)?i.slice():i}return n}function r_(e){if(e.state===tQ.ISSUED||e.state===tQ.ACTIVE)throw new e1("The Resource is already being fetched.");e.state=tQ.UNISSUED,e.deferred=void 0}rd.createIfNeeded=e=>e instanceof rd?e.getDerivedResource({request:e.request}):"string"!=typeof e?e:new rd({url:e}),rd.supportsImageBitmapOptions=()=>H(i)?i:i="function"!=typeof createImageBitmap?Promise.resolve(!1):rd.fetchBlob({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAABGdBTUEAAE4g3rEiDgAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAADElEQVQI12Ng6GAAAAEUAIngE3ZiAAAAAElFTkSuQmCC"}).then(e=>Promise.all([createImageBitmap(e,{imageOrientation:"flipY",premultiplyAlpha:"none",colorSpaceConversion:"none"}),createImageBitmap(e)])).then(e=>{let t=tk(e[0]),r=tk(e[1]);return t[1]!==r[1]}).catch(()=>!1),Object.defineProperties(rd,{isBlobSupported:{get:()=>rp}}),Object.defineProperties(rd.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){return this.getUrlComponent(!0,!0)},set:function(e){this.parseUrl(e,!1,!1)}},extension:{get:function(){return tG(this._url)}},isDataUri:{get:function(){return t$(this._url)}},isBlobUri:{get:function(){return tY(this._url)}},isCrossOriginUrl:{get:function(){return tW(this._url)}},hasHeaders:{get:function(){return Object.keys(this.headers).length>0}},credits:{get:function(){return this._credits}}}),rd.prototype.toString=function(){return this.getUrlComponent(!0,!0)},rd.prototype.parseUrl=function(e,t,r,n){var i;let o=new(tD())(e),a=0===(i=o.query()).length?{}:-1===i.indexOf("=")?{[i]:void 0}:tJ(i);this._queryParameters=t?ry(a,this.queryParameters,r):a,o.search(""),o.fragment(""),H(n)&&""===o.scheme()&&(o=o.absoluteTo(tj(n))),this._url=o.toString()},rd.prototype.getUrlComponent=function(e,t){var r;let n;if(this.isDataUri)return this._url;let i=this._url;e&&(i=`${i}${0===(n=Object.keys(r=this.queryParameters)).length?"":1!==n.length||H(r[n[0]])?`?${tK(r)}`:`?${n[0]}`}`),i=i.replace(/%7B/g,"{").replace(/%7D/g,"}");let o=this._templateValues;return Object.keys(o).length>0&&(i=i.replace(/{(.*?)}/g,(e,t)=>{let r=o[t];return H(r)?encodeURIComponent(r):e})),t&&H(this.proxy)&&(i=this.proxy.getURL(i)),i},rd.prototype.setQueryParameters=function(e,t){t?this._queryParameters=ry(this._queryParameters,e,!1):this._queryParameters=ry(e,this._queryParameters,!1)},rd.prototype.appendQueryParameters=function(e){this._queryParameters=ry(e,this._queryParameters,!0)},rd.prototype.setTemplateValues=function(e,t){t?this._templateValues=tz(this._templateValues,e):this._templateValues=tz(e,this._templateValues)},rd.prototype.getDerivedResource=function(e){let t=this.clone();if(t._retryCount=0,H(e.url)){let r=e.preserveQueryParameters??!1;t.parseUrl(e.url,!0,r,this._url)}return H(e.queryParameters)&&(t._queryParameters=tz(e.queryParameters,t.queryParameters)),H(e.templateValues)&&(t._templateValues=tz(e.templateValues,t.templateValues)),H(e.headers)&&(t.headers=tz(e.headers,t.headers)),H(e.proxy)&&(t.proxy=e.proxy),H(e.request)&&(t.request=e.request),H(e.retryCallback)&&(t.retryCallback=e.retryCallback),H(e.retryAttempts)&&(t.retryAttempts=e.retryAttempts),t},rd.prototype.retryOnError=function(e){let t=this.retryCallback;return"function"!=typeof t||this._retryCount>=this.retryAttempts?Promise.resolve(!1):Promise.resolve(t(this,e)).then(e=>(++this._retryCount,e))},rd.prototype.clone=function(e){return H(e)?(e._url=this._url,e._queryParameters=tB(this._queryParameters),e._templateValues=tB(this._templateValues),e.headers=tB(this.headers),e.proxy=this.proxy,e.retryCallback=this.retryCallback,e.retryAttempts=this.retryAttempts,e._retryCount=0,e.request=this.request.clone(),e):new rd({url:this._url,queryParameters:this.queryParameters,templateValues:this.templateValues,headers:this.headers,proxy:this.proxy,retryCallback:this.retryCallback,retryAttempts:this.retryAttempts,request:this.request.clone(),parseUrl:!1,credits:H(this.credits)?this.credits.slice():void 0})},rd.prototype.getBaseUri=function(e){return tq(this.getUrlComponent(e),e)},rd.prototype.appendForwardSlash=function(){var e;this._url=((0===(e=this._url).length||"/"!==e[e.length-1])&&(e=`${e}/`),e)},rd.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})},rd.fetchArrayBuffer=e=>new rd(e).fetchArrayBuffer(),rd.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})},rd.fetchBlob=e=>new rd(e).fetchBlob(),rd.prototype.fetchImage=function(e){let t,r,n,i=(e=e??e0.EMPTY_OBJECT).preferImageBitmap??!1,o=e.preferBlob??!1,a=e.flipY??!1,s=e.skipColorSpaceConversion??!1;if(r_(this.request),!rp||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!o)return this._fetchImage({resource:this,flipY:a,skipColorSpaceConversion:s,preferImageBitmap:i});let l=this.fetchBlob();if(H(l))return rd.supportsImageBitmapOptions().then(e=>(t=e&&i,l)).then(e=>H(e)?(n=e,t)?rd.createImageBitmapFromBlob(e,{flipY:a,premultiplyAlpha:!1,skipColorSpaceConversion:s}):(r=new rd({url:window.URL.createObjectURL(e)}))._fetchImage({flipY:a,skipColorSpaceConversion:s,preferImageBitmap:!1}):void 0).then(e=>{if(H(e))return e.blob=n,t||window.URL.revokeObjectURL(r.url),e}).catch(e=>(H(r)&&window.URL.revokeObjectURL(r.url),e.blob=n,Promise.reject(e)))},rd.prototype._fetchImage=function(e){let t=e.flipY,r=e.skipColorSpaceConversion,n=e.preferImageBitmap,i=this.request;i.url=this.url,i.requestFunction=()=>{let e=!1;this.isDataUri||this.isBlobUri||(e=this.isCrossOriginUrl);let o=tU();return rd._Implementations.createImage(i,e,o,t,r,n),o.promise};let o=ra.request(i);if(H(o))return o.catch(e=>i.state!==tQ.FAILED?Promise.reject(e):this.retryOnError(e).then(o=>o?(i.state=tQ.UNISSUED,i.deferred=void 0,this._fetchImage({flipY:t,skipColorSpaceConversion:r,preferImageBitmap:n})):Promise.reject(e)))},rd.fetchImage=e=>new rd(e).fetchImage({flipY:e.flipY,skipColorSpaceConversion:e.skipColorSpaceConversion,preferBlob:e.preferBlob,preferImageBitmap:e.preferImageBitmap}),rd.prototype.fetchText=function(){return this.fetch({responseType:"text"})},rd.fetchText=e=>new rd(e).fetchText(),rd.prototype.fetchJson=function(){let e=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});if(H(e))return e.then(e=>{if(H(e))return JSON.parse(e)})},rd.fetchJson=e=>new rd(e).fetchJson(),rd.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})},rd.fetchXML=e=>new rd(e).fetchXML(),rd.prototype.fetchJsonp=function(e){let t;e=e??"callback",r_(this.request);do t=`loadJsonp${K.nextRandomNumber().toString().substring(2,8)}`;while(H(window[t]))return function e(t,r,n){let i={};i[r]=n,t.setQueryParameters(i);let o=t.request,a=t.url;o.url=a,o.requestFunction=()=>{let e=tU();return window[n]=t=>{e.resolve(t);try{delete window[n]}catch(e){window[n]=void 0}},rd._Implementations.loadAndExecuteScript(a,n,e),e.promise};let s=ra.request(o);if(H(s))return s.catch(i=>o.state!==tQ.FAILED?Promise.reject(i):t.retryOnError(i).then(a=>a?(o.state=tQ.UNISSUED,o.deferred=void 0,e(t,r,n)):Promise.reject(i)))}(this,e,t)},rd.fetchJsonp=e=>new rd(e).fetchJsonp(e.callbackParameterName),rd.prototype._makeRequest=function(e){r_(this.request);let t=this.request,r=this.url;t.url=r,t.requestFunction=()=>{let n=e.responseType,i=tz(e.headers,this.headers),o=e.overrideMimeType,a=e.method,s=e.data,l=tU(),u=rd._Implementations.loadWithXhr(r,n,a,s,i,l,o);return H(u)&&H(u.abort)&&(t.cancelFunction=()=>{u.abort()}),l.promise};let n=ra.request(t);if(H(n))return n.then(e=>(t.cancelFunction=void 0,e)).catch(r=>(t.cancelFunction=void 0,t.state!==tQ.FAILED)?Promise.reject(r):this.retryOnError(r).then(n=>n?(t.state=tQ.UNISSUED,t.deferred=void 0,this.fetch(e)):Promise.reject(r)))};let rE=/^data:(.*?)(;base64)?,(.*)$/;function rO(e,t){let r=decodeURIComponent(t);return e?atob(r):r}function rg(e,t){let r=rO(e,t),n=new ArrayBuffer(r.length),i=new Uint8Array(n);for(let e=0;e<r.length;e++)i[e]=r.charCodeAt(e);return n}rd.prototype.fetch=function(e){return(e=rm(e,{})).method="GET",this._makeRequest(e)},rd.fetch=e=>new rd(e).fetch({responseType:e.responseType,overrideMimeType:e.overrideMimeType}),rd.prototype.delete=function(e){return(e=rm(e,{})).method="DELETE",this._makeRequest(e)},rd.delete=e=>new rd(e).delete({responseType:e.responseType,overrideMimeType:e.overrideMimeType,data:e.data}),rd.prototype.head=function(e){return(e=rm(e,{})).method="HEAD",this._makeRequest(e)},rd.head=e=>new rd(e).head({responseType:e.responseType,overrideMimeType:e.overrideMimeType}),rd.prototype.options=function(e){return(e=rm(e,{})).method="OPTIONS",this._makeRequest(e)},rd.options=e=>new rd(e).options({responseType:e.responseType,overrideMimeType:e.overrideMimeType}),rd.prototype.post=function(e,t){return W.defined("data",e),(t=rm(t,{})).method="POST",t.data=e,this._makeRequest(t)},rd.post=e=>new rd(e).post(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType}),rd.prototype.put=function(e,t){return W.defined("data",e),(t=rm(t,{})).method="PUT",t.data=e,this._makeRequest(t)},rd.put=e=>new rd(e).put(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType}),rd.prototype.patch=function(e,t){return W.defined("data",e),(t=rm(t,{})).method="PATCH",t.data=e,this._makeRequest(t)},rd.patch=e=>new rd(e).patch(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType}),rd._Implementations={},rd._Implementations.loadImageElement=(e,t,r)=>{let n=new Image;n.onload=()=>{0===n.naturalWidth&&0===n.naturalHeight&&0===n.width&&0===n.height&&(n.width=300,n.height=150),r.resolve(n)},n.onerror=e=>{r.reject(e)},t&&(rf.contains(e)?n.crossOrigin="use-credentials":n.crossOrigin=""),n.src=e},rd._Implementations.createImage=(e,t,r,n,i,o,a)=>{let s=e.url;rd.supportsImageBitmapOptions().then(l=>{if(!(l&&o))return void rd._Implementations.loadImageElement(s,t,r);let u=tU(),c=rd._Implementations.loadWithXhr(s,"blob","GET",void 0,a,u,void 0,void 0,void 0);return H(c)&&H(c.abort)&&(e.cancelFunction=()=>{c.abort()}),u.promise.then(e=>H(e)?rd.createImageBitmapFromBlob(e,{flipY:n,premultiplyAlpha:!1,skipColorSpaceConversion:i}):void r.reject(new e1(`Successfully retrieved ${s} but it contained no content.`))).then(e=>{r.resolve(e)})}).catch(e=>{r.reject(e)})},rd.createImageBitmapFromBlob=(e,t)=>(W.defined("options",t),W.typeOf.bool("options.flipY",t.flipY),W.typeOf.bool("options.premultiplyAlpha",t.premultiplyAlpha),W.typeOf.bool("options.skipColorSpaceConversion",t.skipColorSpaceConversion),createImageBitmap(e,{imageOrientation:t.flipY?"flipY":"none",premultiplyAlpha:t.premultiplyAlpha?"premultiply":"none",colorSpaceConversion:t.skipColorSpaceConversion?"none":"default"}));let rT="undefined"==typeof XMLHttpRequest;function rA(e){e=e??e0.EMPTY_OBJECT,this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._addNewLeapSeconds=e.addNewLeapSeconds??!0,H(e.data)?rw(this,e.data):rw(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function rb(e,t){return tP.compare(e.julianDate,t)}function rw(e,t){let r;if(!H(t.columnNames))throw new e1("Error in loaded EOP data: The columnNames property is required.");if(!H(t.samples))throw new e1("Error in loaded EOP data: The samples property is required.");let n=t.columnNames.indexOf("modifiedJulianDateUtc"),i=t.columnNames.indexOf("xPoleWanderRadians"),o=t.columnNames.indexOf("yPoleWanderRadians"),a=t.columnNames.indexOf("ut1MinusUtcSeconds"),s=t.columnNames.indexOf("xCelestialPoleOffsetRadians"),l=t.columnNames.indexOf("yCelestialPoleOffsetRadians"),u=t.columnNames.indexOf("taiMinusUtcSeconds");if(n<0||i<0||o<0||a<0||s<0||l<0||u<0)throw new e1("Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns");let c=e._samples=t.samples,f=e._dates=[];e._dateColumn=n,e._xPoleWanderRadiansColumn=i,e._yPoleWanderRadiansColumn=o,e._ut1MinusUtcSecondsColumn=a,e._xCelestialPoleOffsetRadiansColumn=s,e._yCelestialPoleOffsetRadiansColumn=l,e._taiMinusUtcSecondsColumn=u,e._columnCount=t.columnNames.length,e._lastIndex=void 0;let h=e._addNewLeapSeconds;for(let t=0,i=c.length;t<i;t+=e._columnCount){let e=c[t+n],i=c[t+u],o=new tP(e+tp.MODIFIED_JULIAN_DATE_DIFFERENCE,i,td.TAI);if(f.push(o),h){if(i!==r&&H(r)){let e=tP.leapSeconds,t=ts(e,o,rb);if(t<0){let r=new th(o,i);e.splice(~t,0,r)}}r=i}}}function rR(e,t,r,n,i){let o=r*n;i.xPoleWander=t[o+e._xPoleWanderRadiansColumn],i.yPoleWander=t[o+e._yPoleWanderRadiansColumn],i.xPoleOffset=t[o+e._xCelestialPoleOffsetRadiansColumn],i.yPoleOffset=t[o+e._yCelestialPoleOffsetRadiansColumn],i.ut1MinusUtc=t[o+e._ut1MinusUtcSecondsColumn]}rd._Implementations.loadWithXhr=(e,t,r,n,i,o,a)=>{let s=rE.exec(e);if(null!==s)return void o.resolve(function(e,t){t=t??"";let r=e[1],n=!!e[2],i=e[3];switch(t){case"":case"text":return rO(n,i);case"arraybuffer":return rg(n,i);case"blob":return new Blob([rg(n,i)],{type:r});case"document":return new DOMParser().parseFromString(rO(n,i),r);case"json":return JSON.parse(rO(n,i));default:throw new Y(`Unhandled responseType: ${t}`)}}(s,t));if(rT)return void fetch(e,{method:r,headers:i}).then(async e=>{if(!e.ok){let t={};e.headers.forEach((e,r)=>{t[r]=e}),o.reject(new t2(e.status,e,t));return}switch(t){case"text":o.resolve(e.text());break;case"json":o.resolve(e.json());break;default:o.resolve(new Uint8Array(await e.arrayBuffer()).buffer)}}).catch(()=>{o.reject(new t2)});let l=new XMLHttpRequest;if(rf.contains(e)&&(l.withCredentials=!0),l.open(r,e,!0),H(a)&&H(l.overrideMimeType)&&l.overrideMimeType(a),H(i))for(let e in i)Object.hasOwn(i,e)&&l.setRequestHeader(e,i[e]);H(t)&&(l.responseType=t);let u=!1;return"string"==typeof e&&(u=0===e.indexOf("file://")||"undefined"!=typeof window&&"file://"===window.location.origin),l.onload=()=>{if((l.status<200||l.status>=300)&&!(u&&0===l.status))return void o.reject(new t2(l.status,l.response,l.getAllResponseHeaders()));let e=l.response,n=l.responseType;if("HEAD"===r||"OPTIONS"===r){let e=l.getAllResponseHeaders().trim().split(/[\r\n]+/),t={};e.forEach(e=>{let r=e.split(": ");t[r.shift()]=r.join(": ")}),o.resolve(t);return}if(204===l.status)o.resolve(void 0);else if(H(e)&&(!H(t)||n===t))o.resolve(e);else if("json"===t&&"string"==typeof e)try{o.resolve(JSON.parse(e))}catch(e){o.reject(e)}else(""===n||"document"===n)&&H(l.responseXML)&&l.responseXML.hasChildNodes()?o.resolve(l.responseXML):(""===n||"text"===n)&&H(l.responseText)?o.resolve(l.responseText):o.reject(new e1("Invalid XMLHttpRequest response type."))},l.onerror=e=>{o.reject(new t2)},l.send(n),l},rd._Implementations.loadAndExecuteScript=(e,t,r)=>tZ(e,t).catch(e=>{r.reject(e)}),rd._DefaultImplementations={},rd._DefaultImplementations.createImage=rd._Implementations.createImage,rd._DefaultImplementations.loadWithXhr=rd._Implementations.loadWithXhr,rd._DefaultImplementations.loadAndExecuteScript=rd._Implementations.loadAndExecuteScript,rd.DEFAULT=Object.freeze(new rd({url:"undefined"==typeof document?"":document.location.href.split("?")[0]}));function rS(e,t,r,n,i,o,a){var s,l,u,c,f;let h=e._columnCount;if(o>t.length-1)return a.xPoleWander=0,a.yPoleWander=0,a.xPoleOffset=0,a.yPoleOffset=0,a.ut1MinusUtc=0,a;let p=t[i],d=t[o];if(p.equals(d)||n.equals(p))return rR(e,r,i,h,a),a;if(n.equals(d))return rR(e,r,o,h,a),a;let m=tP.secondsDifference(n,p)/tP.secondsDifference(d,p),y=i*h,_=o*h,E=r[y+e._ut1MinusUtcSecondsColumn],O=r[_+e._ut1MinusUtcSecondsColumn],g=O-E;if(g>.5||g<-.5){let t=r[y+e._taiMinusUtcSecondsColumn],i=r[_+e._taiMinusUtcSecondsColumn];t!==i&&(d.equals(n)?E=O:O-=i-t)}return a.xPoleWander=(s=r[y+e._xPoleWanderRadiansColumn])+m*(r[_+e._xPoleWanderRadiansColumn]-s),a.yPoleWander=(l=r[y+e._yPoleWanderRadiansColumn])+m*(r[_+e._yPoleWanderRadiansColumn]-l),a.xPoleOffset=(u=r[y+e._xCelestialPoleOffsetRadiansColumn])+m*(r[_+e._xCelestialPoleOffsetRadiansColumn]-u),a.yPoleOffset=(c=r[y+e._yCelestialPoleOffsetRadiansColumn])+m*(r[_+e._yCelestialPoleOffsetRadiansColumn]-c),a.ut1MinusUtc=(f=E)+m*(O-f),a}function rx(e,t,r){this.heading=e??0,this.pitch=t??0,this.roll=r??0}function rN(e){return"undefined"==typeof document?e:(H(o)||(o=document.createElement("a")),o.href=e,o.href)}function rI(){if(H(a))return a;if(!H("/cesiumStatic"))throw new Y("Unable to determine Cesium base URL automatically, try defining a global variable called CESIUM_BASE_URL.");return(a=new rd({url:rN("/cesiumStatic")})).appendForwardSlash(),a}function rC(e){return rN(r(86921).toUrl(`../${e}`))}function rv(e){return rI().getDerivedResource({url:e}).url}function rM(e){return H(s)||(s="object"==typeof define&&H(define.amd)&&!define.amd.toUrlUndefined&&H(r(86921).toUrl)?rC:rv),s(e)}rA.fromUrl=async(e,t)=>{let r;W.defined("url",e),t=t??e0.EMPTY_OBJECT;let n=rd.createIfNeeded(e);try{r=await n.fetchJson()}catch(e){throw new e1(`An error occurred while retrieving the EOP data from the URL ${n.url}.`)}return new rA({addNewLeapSeconds:t.addNewLeapSeconds,data:r})},rA.NONE=Object.freeze({compute:(e,t)=>(H(t)?(t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0):t=new tl(0,0,0,0,0),t)}),rA.prototype.compute=function(e,t){if(!H(this._samples))return;if(H(t)||(t=new tl(0,0,0,0,0)),0===this._samples.length)return t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0,t;let r=this._dates,n=this._lastIndex,i=0,o=0;if(H(n)){let a=r[n],s=r[n+1],l=tP.lessThanOrEquals(a,e),u=!H(s),c=u||tP.greaterThanOrEquals(s,e);if(l&&c)return i=n,!u&&s.equals(e)&&++i,o=i+1,rS(this,r,this._samples,e,i,o,t),t}let a=ts(r,e,tP.compare,this._dateColumn);return a>=0?(a<r.length-1&&r[a+1].equals(e)&&++a,i=a,o=a):(i=(o=~a)-1)<0&&(i=0),this._lastIndex=i,rS(this,r,this._samples,e,i,o,t),t},rx.fromQuaternion=(e,t)=>{if(!H(e))throw new Y("quaternion is required");H(t)||(t=new rx);let r=2*(e.w*e.y-e.z*e.x),n=1-2*(e.x*e.x+e.y*e.y),i=2*(e.w*e.x+e.y*e.z),o=1-2*(e.y*e.y+e.z*e.z),a=2*(e.w*e.z+e.x*e.y);return t.heading=-Math.atan2(a,o),t.roll=Math.atan2(i,n),t.pitch=-K.asinClamped(r),t},rx.fromDegrees=(e,t,r,n)=>{if(!H(e))throw new Y("heading is required");if(!H(t))throw new Y("pitch is required");if(!H(r))throw new Y("roll is required");return H(n)||(n=new rx),n.heading=e*K.RADIANS_PER_DEGREE,n.pitch=t*K.RADIANS_PER_DEGREE,n.roll=r*K.RADIANS_PER_DEGREE,n},rx.clone=(e,t)=>{if(H(e))return H(t)?(t.heading=e.heading,t.pitch=e.pitch,t.roll=e.roll,t):new rx(e.heading,e.pitch,e.roll)},rx.equals=(e,t)=>e===t||H(e)&&H(t)&&e.heading===t.heading&&e.pitch===t.pitch&&e.roll===t.roll,rx.equalsEpsilon=(e,t,r,n)=>e===t||H(e)&&H(t)&&K.equalsEpsilon(e.heading,t.heading,r,n)&&K.equalsEpsilon(e.pitch,t.pitch,r,n)&&K.equalsEpsilon(e.roll,t.roll,r,n),rx.prototype.clone=function(e){return rx.clone(this,e)},rx.prototype.equals=function(e){return rx.equals(this,e)},rx.prototype.equalsEpsilon=function(e,t,r){return rx.equalsEpsilon(this,e,t,r)},rx.prototype.toString=function(){return`(${this.heading}, ${this.pitch}, ${this.roll})`},rM._cesiumScriptRegex=/((?:.*\/)|^)Cesium\.js(?:\?|#|$)/,rM._buildModuleUrlFromBaseUrl=rv,rM._clearBaseResource=()=>{a=void 0},rM.setBaseUrl=e=>{a=rd.DEFAULT.getDerivedResource({url:e})},rM.getCesiumBaseUrl=rI;let rP=function(e,t,r){this.x=e,this.y=t,this.s=r};function rL(e){e=e??e0.EMPTY_OBJECT,this._xysFileUrlTemplate=rd.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=e.interpolationOrder??9,this._sampleZeroJulianEphemerisDate=e.sampleZeroJulianEphemerisDate??2442396.5,this._sampleZeroDateTT=new tP(this._sampleZeroJulianEphemerisDate,0,td.TAI),this._stepSizeDays=e.stepSizeDays??1,this._samplesPerXysFile=e.samplesPerXysFile??1e3,this._totalSamples=e.totalSamples??27426,this._samples=Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];let t=this._interpolationOrder,r=this._denominators=Array(t+1),n=this._xTable=Array(t+1),i=this._stepSizeDays**t;for(let e=0;e<=t;++e){r[e]=i,n[e]=e*this._stepSizeDays;for(let n=0;n<=t;++n)n!==e&&(r[e]*=e-n);r[e]=1/r[e]}this._work=Array(t+1),this._coef=Array(t+1)}let rF=new tP(0,0,td.TAI);function rD(e,t,r){return rF.dayNumber=t,rF.secondsOfDay=r,tP.daysDifference(rF,e._sampleZeroDateTT)}function rB(e,t){if(e._chunkDownloadsInProgress[t])return e._chunkDownloadsInProgress[t];let r=e._xysFileUrlTemplate,n=(H(r)?r.getDerivedResource({templateValues:{0:t}}):new rd({url:rM(`Assets/IAU2006_XYS/IAU2006_XYS_${t}.json`)})).fetchJson().then(r=>{e._chunkDownloadsInProgress[t]=!1;let n=e._samples,i=r.samples,o=t*e._samplesPerXysFile*3;for(let e=0,t=i.length;e<t;++e)n[o+e]=i[e]});return e._chunkDownloadsInProgress[t]=n,n}rL.prototype.preload=function(e,t,r,n){let i=rD(this,e,t),o=rD(this,r,n),a=i/this._stepSizeDays-this._interpolationOrder/2|0;a<0&&(a=0);let s=o/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;s>=this._totalSamples&&(s=this._totalSamples-1);let l=a/this._samplesPerXysFile|0,u=s/this._samplesPerXysFile|0,c=[];for(let e=l;e<=u;++e)c.push(rB(this,e));return Promise.all(c)},rL.prototype.computeXysRadians=function(e,t,r){let n,i,o=rD(this,e,t);if(o<0)return;let a=o/this._stepSizeDays|0;if(a>=this._totalSamples)return;let s=this._interpolationOrder,l=a-(s/2|0);l<0&&(l=0);let u=l+s;u>=this._totalSamples&&(l=(u=this._totalSamples-1)-s)<0&&(l=0);let c=!1,f=this._samples;if(H(f[3*l])||(rB(this,l/this._samplesPerXysFile|0),c=!0),H(f[3*u])||(rB(this,u/this._samplesPerXysFile|0),c=!0),c)return;H(r)?(r.x=0,r.y=0,r.s=0):r=new rP(0,0,0);let h=o-l*this._stepSizeDays,p=this._work,d=this._denominators,m=this._coef,y=this._xTable;for(n=0;n<=s;++n)p[n]=h-y[n];for(n=0;n<=s;++n){for(i=0,m[n]=1;i<=s;++i)i!==n&&(m[n]*=p[i]);m[n]*=d[n];let e=(l+n)*3;r.x+=m[n]*f[e++],r.y+=m[n]*f[e++],r.s+=m[n]*f[e]}return r};let rz={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},rU={};function rj(e){let t=e.split(".");for(let e=0,r=t.length;e<r;++e)t[e]=parseInt(t[e],10);return t}function rq(){if(!H(c)&&(c=!1,!rH())){let e=/ Chrome\/([.0-9]+)/.exec(u.userAgent);null!==e&&(c=!0,f=rj(e[1]))}return c}function rG(){if(!H(h)&&(h=!1,!rq()&&!rH()&&/ Safari\/[.0-9]+/.test(u.userAgent))){let e=/ Version\/([.0-9]+)/.exec(u.userAgent);null!==e&&(h=!0,p=rj(e[1]))}return h}function rV(){if(!H(d)){d=!1;let e=/ AppleWebKit\/([.0-9]+)(\+?)/.exec(u.userAgent);null!==e&&(d=!0,(m=rj(e[1])).isNightly=!!e[2])}return d}function rk(){if(!H(y)){let e;y=!1,"Microsoft Internet Explorer"===u.appName?null!==(e=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(u.userAgent))&&(y=!0,_=rj(e[1])):"Netscape"===u.appName&&null!==(e=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(u.userAgent))&&(y=!0,_=rj(e[1]))}return y}function rH(){if(!H(E)){E=!1;let e=/ Edg\/([.0-9]+)/.exec(u.userAgent);null!==e&&(E=!0,O=rj(e[1]))}return E}function rY(){if(!H(g)){g=!1;let e=/Firefox\/([.0-9]+)/.exec(u.userAgent);null!==e&&(g=!0,T=rj(e[1]))}return g}function rW(){if(!H(S)){let e=document.createElement("canvas");e.setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;");let t=e.style.imageRendering;(S=H(t)&&""!==t)&&(R=t)}return S}function rX(){if(!rX.initialized)throw new Y("You must call FeatureDetection.supportsWebP.initialize and wait for the promise to resolve before calling FeatureDetection.supportsWebP");return rX._result}Object.defineProperties(rU,{element:{get:()=>{if(rU.supportsFullscreen())return document[rz.fullscreenElement]}},changeEventName:{get:()=>{if(rU.supportsFullscreen())return rz.fullscreenchange}},errorEventName:{get:()=>{if(rU.supportsFullscreen())return rz.fullscreenerror}},enabled:{get:()=>{if(rU.supportsFullscreen())return document[rz.fullscreenEnabled]}},fullscreen:{get:()=>{if(rU.supportsFullscreen())return null!==rU.element}}}),rU.supportsFullscreen=()=>{let e;if(H(l))return l;l=!1;let t=document.body;if("function"==typeof t.requestFullscreen)return rz.requestFullscreen="requestFullscreen",rz.exitFullscreen="exitFullscreen",rz.fullscreenEnabled="fullscreenEnabled",rz.fullscreenElement="fullscreenElement",rz.fullscreenchange="fullscreenchange",rz.fullscreenerror="fullscreenerror",l=!0;let r=["webkit","moz","o","ms","khtml"];for(let n=0,i=r.length;n<i;++n){let i=r[n];"function"==typeof t[e=`${i}RequestFullscreen`]?(rz.requestFullscreen=e,l=!0):"function"==typeof t[e=`${i}RequestFullScreen`]&&(rz.requestFullscreen=e,l=!0),"function"==typeof document[e=`${i}ExitFullscreen`]?rz.exitFullscreen=e:"function"==typeof document[e=`${i}CancelFullScreen`]&&(rz.exitFullscreen=e),void 0!==document[e=`${i}FullscreenEnabled`]?rz.fullscreenEnabled=e:void 0!==document[e=`${i}FullScreenEnabled`]&&(rz.fullscreenEnabled=e),void 0!==document[e=`${i}FullscreenElement`]?rz.fullscreenElement=e:void 0!==document[e=`${i}FullScreenElement`]&&(rz.fullscreenElement=e),e=`${i}fullscreenchange`,void 0!==document[`on${e}`]&&("ms"===i&&(e="MSFullscreenChange"),rz.fullscreenchange=e),e=`${i}fullscreenerror`,void 0!==document[`on${e}`]&&("ms"===i&&(e="MSFullscreenError"),rz.fullscreenerror=e)}return l},rU.requestFullscreen=(e,t)=>{rU.supportsFullscreen()&&e[rz.requestFullscreen]({vrDisplay:t})},rU.exitFullscreen=()=>{rU.supportsFullscreen()&&document[rz.exitFullscreen]()},rU._names=rz,u="undefined"!=typeof navigator?navigator:{},rX._promise=void 0,rX._result=void 0,rX.initialize=()=>(H(rX._promise)||(rX._promise=new Promise(e=>{let t=new Image;t.onload=()=>{rX._result=t.width>0&&t.height>0,e(rX._result)},t.onerror=()=>{rX._result=!1,e(rX._result)},t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"})),rX._promise),Object.defineProperties(rX,{initialized:{get:()=>H(rX._result)}});let r$=[];"undefined"!=typeof ArrayBuffer&&(r$.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!=typeof Uint8ClampedArray&&r$.push(Uint8ClampedArray),"undefined"!=typeof Uint8ClampedArray&&r$.push(Uint8ClampedArray),"undefined"!=typeof BigInt64Array&&r$.push(BigInt64Array),"undefined"!=typeof BigUint64Array&&r$.push(BigUint64Array));let rZ={isChrome:rq,chromeVersion:function(){return rq()&&f},isSafari:rG,safariVersion:function(){return rG()&&p},isWebkit:rV,webkitVersion:function(){return rV()&&m},isInternetExplorer:rk,internetExplorerVersion:function(){return rk()&&_},isEdge:rH,edgeVersion:function(){return rH()&&O},isFirefox:rY,firefoxVersion:function(){return rY()&&T},isWindows:function(){return H(A)||(A=/Windows/i.test(u.appVersion)),A},isIPadOrIOS:function(){return H(b)||(b="iPhone"===navigator.platform||"iPod"===navigator.platform||"iPad"===navigator.platform),b},hardwareConcurrency:u.hardwareConcurrency??3,supportsPointerEvents:function(){return H(w)||(w=!rY()&&"undefined"!=typeof PointerEvent&&(!H(u.pointerEnabled)||u.pointerEnabled)),w},supportsImageRenderingPixelated:rW,supportsWebP:rX,imageRenderingValue:function(){return rW()?R:void 0},typedArrayTypes:r$};function rK(e,t,r,n){this.x=e??0,this.y=t??0,this.z=r??0,this.w=n??0}rZ.supportsBasis=e=>rZ.supportsWebAssembly()&&e.context.supportsBasis,rZ.supportsFullscreen=()=>rU.supportsFullscreen(),rZ.supportsTypedArrays=()=>"undefined"!=typeof ArrayBuffer,rZ.supportsBigInt64Array=()=>"undefined"!=typeof BigInt64Array,rZ.supportsBigUint64Array=()=>"undefined"!=typeof BigUint64Array,rZ.supportsBigInt=()=>"undefined"!=typeof BigInt,rZ.supportsWebWorkers=()=>"undefined"!=typeof Worker,rZ.supportsWebAssembly=()=>"undefined"!=typeof WebAssembly,rZ.supportsWebgl2=e=>(W.defined("scene",e),e.context.webgl2),rZ.supportsEsmWebWorkers=()=>!rY()||parseInt(T)>=114;let rJ=new ee;rK.fromAxisAngle=(e,t,r)=>{W.typeOf.object("axis",e),W.typeOf.number("angle",t);let n=t/2,i=Math.sin(n),o=(rJ=ee.normalize(e,rJ)).x*i,a=rJ.y*i,s=rJ.z*i,l=Math.cos(n);return H(r)?(r.x=o,r.y=a,r.z=s,r.w=l,r):new rK(o,a,s,l)};let rQ=[1,2,0],r0=[,,,];rK.fromRotationMatrix=(e,t)=>{let r,n,i,o,a;W.typeOf.object("matrix",e);let s=e[eF.COLUMN0ROW0],l=e[eF.COLUMN1ROW1],u=e[eF.COLUMN2ROW2],c=s+l+u;if(c>0)a=.5*(r=Math.sqrt(c+1)),r=.5/r,n=(e[eF.COLUMN1ROW2]-e[eF.COLUMN2ROW1])*r,i=(e[eF.COLUMN2ROW0]-e[eF.COLUMN0ROW2])*r,o=(e[eF.COLUMN0ROW1]-e[eF.COLUMN1ROW0])*r;else{let t=0;l>s&&(t=1),u>s&&u>l&&(t=2);let c=rQ[t],f=rQ[c];r=Math.sqrt(e[eF.getElementIndex(t,t)]-e[eF.getElementIndex(c,c)]-e[eF.getElementIndex(f,f)]+1),r0[t]=.5*r,r=.5/r,a=(e[eF.getElementIndex(f,c)]-e[eF.getElementIndex(c,f)])*r,r0[c]=(e[eF.getElementIndex(c,t)]+e[eF.getElementIndex(t,c)])*r,r0[f]=(e[eF.getElementIndex(f,t)]+e[eF.getElementIndex(t,f)])*r,n=-r0[0],i=-r0[1],o=-r0[2]}return H(t)?(t.x=n,t.y=i,t.z=o,t.w=a,t):new rK(n,i,o,a)};let r1=new rK,r3=new rK,r2=new rK,r4=new rK;rK.fromHeadingPitchRoll=(e,t)=>(W.typeOf.object("headingPitchRoll",e),r4=rK.fromAxisAngle(ee.UNIT_X,e.roll,r1),r2=rK.fromAxisAngle(ee.UNIT_Y,-e.pitch,t),t=rK.multiply(r2,r4,r2),r3=rK.fromAxisAngle(ee.UNIT_Z,-e.heading,r1),rK.multiply(r3,t,t));let r5=new ee,r6=new ee,r8=new rK,r7=new rK,r9=new rK;rK.packedLength=4,rK.pack=(e,t,r)=>(W.typeOf.object("value",e),W.defined("array",t),r=r??0,t[r++]=e.x,t[r++]=e.y,t[r++]=e.z,t[r]=e.w,t),rK.unpack=(e,t,r)=>(W.defined("array",e),t=t??0,H(r)||(r=new rK),r.x=e[t],r.y=e[t+1],r.z=e[t+2],r.w=e[t+3],r),rK.packedInterpolationLength=3,rK.convertPackedArrayForInterpolation=(e,t,r,n)=>{rK.unpack(e,4*r,r9),rK.conjugate(r9,r9);for(let i=0,o=r-t+1;i<o;i++){let r=3*i;rK.unpack(e,(t+i)*4,r8),rK.multiply(r8,r9,r8),r8.w<0&&rK.negate(r8,r8),rK.computeAxis(r8,r5);let o=rK.computeAngle(r8);H(n)||(n=[]),n[r]=r5.x*o,n[r+1]=r5.y*o,n[r+2]=r5.z*o}},rK.unpackInterpolationResult=(e,t,r,n,i)=>{H(i)||(i=new rK),ee.fromArray(e,0,r6);let o=ee.magnitude(r6);return rK.unpack(t,4*n,r7),0===o?rK.clone(rK.IDENTITY,r8):rK.fromAxisAngle(r6,o,r8),rK.multiply(r8,r7,i)},rK.clone=(e,t)=>{if(H(e))return H(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new rK(e.x,e.y,e.z,e.w)},rK.conjugate=(e,t)=>(W.typeOf.object("quaternion",e),W.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t),rK.magnitudeSquared=e=>(W.typeOf.object("quaternion",e),e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w),rK.magnitude=e=>Math.sqrt(rK.magnitudeSquared(e)),rK.normalize=(e,t)=>{W.typeOf.object("result",t);let r=1/rK.magnitude(e),n=e.x*r,i=e.y*r,o=e.z*r,a=e.w*r;return t.x=n,t.y=i,t.z=o,t.w=a,t},rK.inverse=(e,t)=>{W.typeOf.object("result",t);let r=rK.magnitudeSquared(e);return t=rK.conjugate(e,t),rK.multiplyByScalar(t,1/r,t)},rK.add=(e,t,r)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r),r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r.w=e.w+t.w,r),rK.subtract=(e,t,r)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r),r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r.w=e.w-t.w,r),rK.negate=(e,t)=>(W.typeOf.object("quaternion",e),W.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t),rK.dot=(e,t)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w),rK.multiply=(e,t,r)=>{W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r);let n=e.x,i=e.y,o=e.z,a=e.w,s=t.x,l=t.y,u=t.z,c=t.w;return r.x=a*s+n*c+i*u-o*l,r.y=a*l-n*u+i*c+o*s,r.z=a*u+n*l-i*s+o*c,r.w=a*c-n*s-i*l-o*u,r},rK.multiplyByScalar=(e,t,r)=>(W.typeOf.object("quaternion",e),W.typeOf.number("scalar",t),W.typeOf.object("result",r),r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r.w=e.w*t,r),rK.divideByScalar=(e,t,r)=>(W.typeOf.object("quaternion",e),W.typeOf.number("scalar",t),W.typeOf.object("result",r),r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r.w=e.w/t,r),rK.computeAxis=(e,t)=>{W.typeOf.object("quaternion",e),W.typeOf.object("result",t);let r=e.w;if(Math.abs(r-1)<K.EPSILON6||Math.abs(r+1)<K.EPSILON6)return t.x=1,t.y=t.z=0,t;let n=1/Math.sqrt(1-r*r);return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t},rK.computeAngle=e=>(W.typeOf.object("quaternion",e),Math.abs(e.w-1)<K.EPSILON6)?0:2*Math.acos(e.w);let ne=new rK;rK.lerp=(e,t,r,n)=>(W.typeOf.object("start",e),W.typeOf.object("end",t),W.typeOf.number("t",r),W.typeOf.object("result",n),ne=rK.multiplyByScalar(t,r,ne),n=rK.multiplyByScalar(e,1-r,n),rK.add(ne,n,n));let nt=new rK,nr=new rK,nn=new rK;rK.slerp=(e,t,r,n)=>{W.typeOf.object("start",e),W.typeOf.object("end",t),W.typeOf.number("t",r),W.typeOf.object("result",n);let i=rK.dot(e,t),o=t;if(i<0&&(i=-i,o=nt=rK.negate(t,nt)),1-i<K.EPSILON6)return rK.lerp(e,o,r,n);let a=Math.acos(i);return nr=rK.multiplyByScalar(e,Math.sin((1-r)*a),nr),nn=rK.multiplyByScalar(o,Math.sin(r*a),nn),n=rK.add(nr,nn,n),rK.multiplyByScalar(n,1/Math.sin(a),n)},rK.log=(e,t)=>{W.typeOf.object("quaternion",e),W.typeOf.object("result",t);let r=K.acosClamped(e.w),n=0;return 0!==r&&(n=r/Math.sin(r)),ee.multiplyByScalar(e,n,t)},rK.exp=(e,t)=>{W.typeOf.object("cartesian",e),W.typeOf.object("result",t);let r=ee.magnitude(e),n=0;return 0!==r&&(n=Math.sin(r)/r),t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=Math.cos(r),t};let ni=new ee,no=new ee,na=new rK,ns=new rK;rK.computeInnerQuadrangle=(e,t,r,n)=>{W.typeOf.object("q0",e),W.typeOf.object("q1",t),W.typeOf.object("q2",r),W.typeOf.object("result",n);let i=rK.conjugate(t,na);rK.multiply(i,r,ns);let o=rK.log(ns,ni);rK.multiply(i,e,ns);let a=rK.log(ns,no);return ee.add(o,a,o),ee.multiplyByScalar(o,.25,o),ee.negate(o,o),rK.exp(o,na),rK.multiply(t,na,n)},rK.squad=(e,t,r,n,i,o)=>{W.typeOf.object("q0",e),W.typeOf.object("q1",t),W.typeOf.object("s0",r),W.typeOf.object("s1",n),W.typeOf.number("t",i),W.typeOf.object("result",o);let a=rK.slerp(e,t,i,na),s=rK.slerp(r,n,i,ns);return rK.slerp(a,s,2*i*(1-i),o)};let nl=new rK,nu=rZ.supportsTypedArrays()?new Float32Array(8):[],nc=rZ.supportsTypedArrays()?new Float32Array(8):[],nf=rZ.supportsTypedArrays()?new Float32Array(8):[],nh=rZ.supportsTypedArrays()?new Float32Array(8):[];for(let e=0;e<7;++e){let t=e+1,r=2*t+1;nu[e]=1/(t*r),nc[e]=t/r}nu[7]=.013978731275862502,nc[7]=15.208859628138402/17,rK.fastSlerp=(e,t,r,n)=>{let i;W.typeOf.object("start",e),W.typeOf.object("end",t),W.typeOf.number("t",r),W.typeOf.object("result",n);let o=rK.dot(e,t);o>=0?i=1:(i=-1,o=-o);let a=o-1,s=1-r,l=r*r,u=s*s;for(let e=7;e>=0;--e)nf[e]=(nu[e]*l-nc[e])*a,nh[e]=(nu[e]*u-nc[e])*a;let c=i*r*(1+nf[0]*(1+nf[1]*(1+nf[2]*(1+nf[3]*(1+nf[4]*(1+nf[5]*(1+nf[6]*(1+nf[7])))))))),f=s*(1+nh[0]*(1+nh[1]*(1+nh[2]*(1+nh[3]*(1+nh[4]*(1+nh[5]*(1+nh[6]*(1+nh[7])))))))),h=rK.multiplyByScalar(e,f,nl);return rK.multiplyByScalar(t,c,n),rK.add(h,n,n)},rK.fastSquad=(e,t,r,n,i,o)=>{W.typeOf.object("q0",e),W.typeOf.object("q1",t),W.typeOf.object("s0",r),W.typeOf.object("s1",n),W.typeOf.number("t",i),W.typeOf.object("result",o);let a=rK.fastSlerp(e,t,i,na),s=rK.fastSlerp(r,n,i,ns);return rK.fastSlerp(a,s,2*i*(1-i),o)},rK.equals=(e,t)=>e===t||H(e)&&H(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w,rK.equalsEpsilon=(e,t,r)=>(r=r??0,e===t||H(e)&&H(t)&&Math.abs(e.x-t.x)<=r&&Math.abs(e.y-t.y)<=r&&Math.abs(e.z-t.z)<=r&&Math.abs(e.w-t.w)<=r),rK.ZERO=Object.freeze(new rK(0,0,0,0)),rK.IDENTITY=Object.freeze(new rK(0,0,0,1)),rK.prototype.clone=function(e){return rK.clone(this,e)},rK.prototype.equals=function(e){return rK.equals(this,e)},rK.prototype.equalsEpsilon=function(e,t){return rK.equalsEpsilon(this,e,t)},rK.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`};let np={},nd={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},nm={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},ny={},n_={east:new ee,north:new ee,up:new ee,west:new ee,south:new ee,down:new ee},nE=new ee,nO=new ee,ng=new ee;np.localFrameToFixedFrameGenerator=(e,t)=>{let r;if(!Object.hasOwn(nd,e)||!Object.hasOwn(nd[e],t))throw new Y("firstAxis and secondAxis must be east, north, up, west, south or down.");let n=nd[e][t],i=e+t;return H(ny[i])?r=ny[i]:(r=(r,i,o)=>{if(!H(r))throw new Y("origin is required.");if(isNaN(r.x)||isNaN(r.y)||isNaN(r.z))throw new Y("origin has a NaN component");if(H(o)||(o=new e3),ee.equalsEpsilon(r,ee.ZERO,K.EPSILON14))ee.unpack(nm[e],0,nE),ee.unpack(nm[t],0,nO),ee.unpack(nm[n],0,ng);else if(K.equalsEpsilon(r.x,0,K.EPSILON14)&&K.equalsEpsilon(r.y,0,K.EPSILON14)){let i=K.sign(r.z);ee.unpack(nm[e],0,nE),"east"!==e&&"west"!==e&&ee.multiplyByScalar(nE,i,nE),ee.unpack(nm[t],0,nO),"east"!==t&&"west"!==t&&ee.multiplyByScalar(nO,i,nO),ee.unpack(nm[n],0,ng),"east"!==n&&"west"!==n&&ee.multiplyByScalar(ng,i,ng)}else{(i=i??eA.default).geodeticSurfaceNormal(r,n_.up);let o=n_.up,a=n_.east;a.x=-r.y,a.y=r.x,a.z=0,ee.normalize(a,n_.east),ee.cross(o,a,n_.north),ee.multiplyByScalar(n_.up,-1,n_.down),ee.multiplyByScalar(n_.east,-1,n_.west),ee.multiplyByScalar(n_.north,-1,n_.south),nE=n_[e],nO=n_[t],ng=n_[n]}return o[0]=nE.x,o[1]=nE.y,o[2]=nE.z,o[3]=0,o[4]=nO.x,o[5]=nO.y,o[6]=nO.z,o[7]=0,o[8]=ng.x,o[9]=ng.y,o[10]=ng.z,o[11]=0,o[12]=r.x,o[13]=r.y,o[14]=r.z,o[15]=1,o},ny[i]=r),r},np.eastNorthUpToFixedFrame=np.localFrameToFixedFrameGenerator("east","north"),np.northEastDownToFixedFrame=np.localFrameToFixedFrameGenerator("north","east"),np.northUpEastToFixedFrame=np.localFrameToFixedFrameGenerator("north","up"),np.northWestUpToFixedFrame=np.localFrameToFixedFrameGenerator("north","west");let nT=new rK,nA=new ee(1,1,1),nb=new e3;np.headingPitchRollToFixedFrame=(e,t,r,n,i)=>{W.typeOf.object("HeadingPitchRoll",t),n=n??np.eastNorthUpToFixedFrame;let o=rK.fromHeadingPitchRoll(t,nT),a=e3.fromTranslationQuaternionRotationScale(ee.ZERO,o,nA,nb);return i=n(e,r,i),e3.multiply(i,a,i)};let nw=new e3,nR=new eF;np.headingPitchRollQuaternion=(e,t,r,n,i)=>{W.typeOf.object("HeadingPitchRoll",t);let o=np.headingPitchRollToFixedFrame(e,t,r,n,nw),a=e3.getMatrix3(o,nR);return rK.fromRotationMatrix(a,i)};let nS=new ee(1,1,1),nx=new ee,nN=new e3,nI=new e3,nC=new eF,nv=new rK;np.fixedFrameToHeadingPitchRoll=(e,t,r,n)=>{W.defined("transform",e),t=t??eA.default,r=r??np.eastNorthUpToFixedFrame,H(n)||(n=new rx);let i=e3.getTranslation(e,nx);if(ee.equals(i,ee.ZERO))return n.heading=0,n.pitch=0,n.roll=0,n;let o=e3.inverseTransformation(r(i,t,nN),nN),a=e3.setScale(e,nS,nI);a=e3.setTranslation(a,ee.ZERO,a),o=e3.multiply(o,a,o);let s=rK.fromRotationMatrix(e3.getMatrix3(o,nC),nv);return s=rK.normalize(s,s),rx.fromQuaternion(s,n)};let nM=K.TWO_PI/86400,nP=new tP;np.computeIcrfToCentralBodyFixedMatrix=(e,t)=>{let r=np.computeIcrfToFixedMatrix(e,t);return H(r)||(r=np.computeTemeToPseudoFixedMatrix(e,t)),r},np.computeTemeToPseudoFixedMatrix=(e,t)=>{let r;if(!H(e))throw new Y("date is required.");let n=(nP=tP.addSeconds(e,-tP.computeTaiMinusUtc(e),nP)).dayNumber,i=nP.secondsOfDay,o=n-2451545,a=(24110.54841+(r=i>=43200?(o+.5)/tp.DAYS_PER_JULIAN_CENTURY:(o-.5)/tp.DAYS_PER_JULIAN_CENTURY)*(8640184.812866+r*(.093104+-62e-7*r)))*nM%K.TWO_PI+(72921158553e-15+11772758384668e-32*(n-2451545.5))*((i+.5*tp.SECONDS_PER_DAY)%tp.SECONDS_PER_DAY),s=Math.cos(a),l=Math.sin(a);return H(t)?(t[0]=s,t[1]=-l,t[2]=0,t[3]=l,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new eF(s,l,0,-l,s,0,0,0,1)},np.iau2006XysData=new rL,np.earthOrientationParameters=rA.NONE,np.preloadIcrfFixed=e=>{let t=e.start.dayNumber,r=e.start.secondsOfDay+32.184,n=e.stop.dayNumber,i=e.stop.secondsOfDay+32.184;return np.iau2006XysData.preload(t,r,n,i)},np.computeIcrfToFixedMatrix=(e,t)=>{if(!H(e))throw new Y("date is required.");H(t)||(t=new eF);let r=np.computeFixedToIcrfMatrix(e,t);if(H(r))return eF.transpose(r,t)};let nL=new rx,nF=new eF,nD=new tP;np.computeMoonFixedToIcrfMatrix=(e,t)=>{if(!H(e))throw new Y("date is required.");H(t)||(t=new eF);let r=tP.addSeconds(e,32.184,nD),n=tP.totalDays(r)-2451545,i=K.toRadians(12.112)-K.toRadians(.052992)*n,o=K.toRadians(24.224)-K.toRadians(.105984)*n,a=K.toRadians(227.645)+K.toRadians(13.012)*n,s=K.toRadians(261.105)+K.toRadians(13.340716)*n,l=K.toRadians(358)+K.toRadians(.9856)*n;return nL.pitch=K.toRadians(180)-K.toRadians(3.878)*Math.sin(i)-K.toRadians(.12)*Math.sin(o)+K.toRadians(.07)*Math.sin(a)-K.toRadians(.017)*Math.sin(s),nL.roll=K.toRadians(-23.47)+K.toRadians(1.543)*Math.cos(i)+K.toRadians(.24)*Math.cos(o)-K.toRadians(.028)*Math.cos(a)+K.toRadians(.007)*Math.cos(s),nL.heading=K.toRadians(154.375)+K.toRadians(13.17635831)*n+K.toRadians(3.558)*Math.sin(i)+K.toRadians(.121)*Math.sin(o)-K.toRadians(.064)*Math.sin(a)+K.toRadians(.016)*Math.sin(s)+K.toRadians(.025)*Math.sin(l),eF.fromHeadingPitchRoll(nL,nF)},np.computeIcrfToMoonFixedMatrix=(e,t)=>{if(!H(e))throw new Y("date is required.");H(t)||(t=new eF);let r=np.computeMoonFixedToIcrfMatrix(e,t);if(H(r))return eF.transpose(r,t)};let nB=new rP(0,0,0),nz=new tl(0,0,0,0,0,0),nU=new eF,nj=new eF;np.computeFixedToIcrfMatrix=(e,t)=>{if(!H(e))throw new Y("date is required.");H(t)||(t=new eF);let r=np.earthOrientationParameters.compute(e,nz);if(!H(r))return;let n=e.dayNumber,i=e.secondsOfDay+32.184,o=np.iau2006XysData.computeXysRadians(n,i,nB);if(!H(o))return;let a=o.x+r.xPoleOffset,s=o.y+r.yPoleOffset,l=1/(1+Math.sqrt(1-a*a-s*s));nU[0]=1-l*a*a,nU[3]=-l*a*s,nU[6]=a,nU[1]=-l*a*s,nU[4]=1-l*s*s,nU[7]=s,nU[2]=-a,nU[5]=-s,nU[8]=1-l*(a*a+s*s);let u=eF.fromRotationZ(-o.s,nj),c=eF.multiply(nU,u,nU),f=e.dayNumber,h=(e.secondsOfDay-tP.computeTaiMinusUtc(e)+r.ut1MinusUtc)/tp.SECONDS_PER_DAY,p=.779057273264+h+.00273781191135448*(f-2451545+h);p=p%1*K.TWO_PI;let d=eF.fromRotationZ(p,nj),m=eF.multiply(c,d,nU),y=Math.cos(r.xPoleWander),_=Math.cos(r.yPoleWander),E=Math.sin(r.xPoleWander),O=Math.sin(r.yPoleWander),g=n-2451545+i/tp.SECONDS_PER_DAY,T=-47e-6*(g/=36525)*K.RADIANS_PER_DEGREE/3600,A=Math.cos(T),b=Math.sin(T);return nj[0]=y*A,nj[1]=y*b,nj[2]=E,nj[3]=-_*b+O*E*A,nj[4]=_*A+O*E*b,nj[5]=-O*y,nj[6]=-O*b-_*E*A,nj[7]=O*A-_*E*b,nj[8]=_*y,eF.multiply(m,nj,t)};let nq=new eW;np.pointToWindowCoordinates=(e,t,r,n)=>((n=np.pointToGLWindowCoordinates(e,t,r,n)).y=2*t[5]-n.y,n),np.pointToGLWindowCoordinates=(e,t,r,n)=>{if(!H(e))throw new Y("modelViewProjectionMatrix is required.");if(!H(t))throw new Y("viewportTransformation is required.");if(!H(r))throw new Y("point is required.");return H(n)||(n=new em),e3.multiplyByVector(e,eW.fromElements(r.x,r.y,r.z,1,nq),nq),eW.multiplyByScalar(nq,1/nq.w,nq),e3.multiplyByVector(t,nq,nq),em.fromCartesian4(nq,n)};let nG=new ee,nV=new ee,nk=new ee;np.rotationMatrixFromPositionVelocity=(e,t,r,n)=>{if(!H(e))throw new Y("position is required.");if(!H(t))throw new Y("velocity is required.");let i=(r??eA.default).geodeticSurfaceNormal(e,nG),o=ee.cross(t,i,nV);ee.equalsEpsilon(o,ee.ZERO,K.EPSILON6)&&(o=ee.clone(ee.UNIT_X,o));let a=ee.cross(o,t,nk);return ee.normalize(a,a),ee.cross(t,a,o),ee.negate(o,o),ee.normalize(o,o),H(n)||(n=new eF),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=o.x,n[4]=o.y,n[5]=o.z,n[6]=a.x,n[7]=a.y,n[8]=a.z,n},np.SWIZZLE_3D_TO_2D_MATRIX=Object.freeze(new e3(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1));let nH=new ef,nY=new ee,nW=new ee,nX=new eF,n$=new e3,nZ=new e3;function nK(e,t,r,n){this.west=e??0,this.south=t??0,this.east=r??0,this.north=n??0}np.basisTo2D=(e,t,r)=>{let n;if(!H(e))throw new Y("projection is required.");if(!H(t))throw new Y("matrix is required.");if(!H(r))throw new Y("result is required.");let i=e3.getTranslation(t,nW),o=e.ellipsoid;if(ee.equals(i,ee.ZERO))n=ee.clone(ee.ZERO,nY);else{let t=o.cartesianToCartographic(i,nH);n=e.project(t,nY),ee.fromElements(n.z,n.x,n.y,n)}let a=np.eastNorthUpToFixedFrame(i,o,n$),s=e3.inverseTransformation(a,nZ),l=e3.getMatrix3(t,nX),u=e3.multiplyByMatrix3(s,l,r);return e3.multiply(np.SWIZZLE_3D_TO_2D_MATRIX,u,r),e3.setTranslation(r,n,r),r},np.ellipsoidTo2DModelMatrix=(e,t,r)=>{if(!H(e))throw new Y("projection is required.");if(!H(t))throw new Y("center is required.");if(!H(r))throw new Y("result is required.");let n=e.ellipsoid,i=np.eastNorthUpToFixedFrame(t,n,n$),o=e3.inverseTransformation(i,nZ),a=n.cartesianToCartographic(t,nH),s=e.project(a,nY);ee.fromElements(s.z,s.x,s.y,s);let l=e3.fromTranslation(s,n$);return e3.multiply(np.SWIZZLE_3D_TO_2D_MATRIX,o,r),e3.multiply(l,r,r),r},Object.defineProperties(nK.prototype,{width:{get:function(){return nK.computeWidth(this)}},height:{get:function(){return nK.computeHeight(this)}}}),nK.packedLength=4,nK.pack=(e,t,r)=>(W.typeOf.object("value",e),W.defined("array",t),r=r??0,t[r++]=e.west,t[r++]=e.south,t[r++]=e.east,t[r]=e.north,t),nK.unpack=(e,t,r)=>(W.defined("array",e),t=t??0,H(r)||(r=new nK),r.west=e[t++],r.south=e[t++],r.east=e[t++],r.north=e[t],r),nK.computeWidth=e=>{W.typeOf.object("rectangle",e);let t=e.east,r=e.west;return t<r&&(t+=K.TWO_PI),t-r},nK.computeHeight=e=>(W.typeOf.object("rectangle",e),e.north-e.south),nK.fromDegrees=(e,t,r,n,i)=>(e=K.toRadians(e??0),t=K.toRadians(t??0),r=K.toRadians(r??0),n=K.toRadians(n??0),H(i))?(i.west=e,i.south=t,i.east=r,i.north=n,i):new nK(e,t,r,n),nK.fromRadians=(e,t,r,n,i)=>H(i)?(i.west=e??0,i.south=t??0,i.east=r??0,i.north=n??0,i):new nK(e,t,r,n),nK.fromCartographicArray=(e,t)=>{W.defined("cartographics",e);let r=Number.MAX_VALUE,n=-Number.MAX_VALUE,i=Number.MAX_VALUE,o=-Number.MAX_VALUE,a=Number.MAX_VALUE,s=-Number.MAX_VALUE;for(let t=0,l=e.length;t<l;t++){let l=e[t];r=Math.min(r,l.longitude),n=Math.max(n,l.longitude),a=Math.min(a,l.latitude),s=Math.max(s,l.latitude);let u=l.longitude>=0?l.longitude:l.longitude+K.TWO_PI;i=Math.min(i,u),o=Math.max(o,u)}return(n-r>o-i&&(r=i,(n=o)>K.PI&&(n-=K.TWO_PI),r>K.PI&&(r-=K.TWO_PI)),H(t))?(t.west=r,t.south=a,t.east=n,t.north=s,t):new nK(r,a,n,s)},nK.fromCartesianArray=(e,t,r)=>{W.defined("cartesians",e),t=t??eA.default;let n=Number.MAX_VALUE,i=-Number.MAX_VALUE,o=Number.MAX_VALUE,a=-Number.MAX_VALUE,s=Number.MAX_VALUE,l=-Number.MAX_VALUE;for(let r=0,u=e.length;r<u;r++){let u=t.cartesianToCartographic(e[r]);n=Math.min(n,u.longitude),i=Math.max(i,u.longitude),s=Math.min(s,u.latitude),l=Math.max(l,u.latitude);let c=u.longitude>=0?u.longitude:u.longitude+K.TWO_PI;o=Math.min(o,c),a=Math.max(a,c)}return(i-n>a-o&&(n=o,(i=a)>K.PI&&(i-=K.TWO_PI),n>K.PI&&(n-=K.TWO_PI)),H(r))?(r.west=n,r.south=s,r.east=i,r.north=l,r):new nK(n,s,i,l)};let nJ=new ee,nQ=new ee,n0=new ee,n1=new ee,n3=new ee,n2=[,,,,,];for(let e=0;e<n2.length;++e)n2[e]=new ee;nK.fromBoundingSphere=(e,t,r)=>{W.typeOf.object("boundingSphere",e);let n=e.center,i=e.radius;if(H(t)||(t=eA.default),H(r)||(r=new nK),ee.equals(n,ee.ZERO))return nK.clone(nK.MAX_VALUE,r),r;let o=np.eastNorthUpToFixedFrame(n,t,nJ),a=e3.multiplyByPointAsVector(o,ee.UNIT_X,nQ);ee.normalize(a,a);let s=e3.multiplyByPointAsVector(o,ee.UNIT_Y,n0);ee.normalize(s,s),ee.multiplyByScalar(s,i,s),ee.multiplyByScalar(a,i,a);let l=ee.negate(s,n3),u=ee.negate(a,n1),c=n2[0];return ee.add(n,s,c),c=n2[1],ee.add(n,u,c),c=n2[2],ee.add(n,l,c),c=n2[3],ee.add(n,a,c),n2[4]=n,nK.fromCartesianArray(n2,t,r)},nK.clone=(e,t)=>{if(H(e))return H(t)?(t.west=e.west,t.south=e.south,t.east=e.east,t.north=e.north,t):new nK(e.west,e.south,e.east,e.north)},nK.equalsEpsilon=(e,t,r)=>(r=r??0,e===t||H(e)&&H(t)&&Math.abs(e.west-t.west)<=r&&Math.abs(e.south-t.south)<=r&&Math.abs(e.east-t.east)<=r&&Math.abs(e.north-t.north)<=r),nK.prototype.clone=function(e){return nK.clone(this,e)},nK.prototype.equals=function(e){return nK.equals(this,e)},nK.equals=(e,t)=>e===t||H(e)&&H(t)&&e.west===t.west&&e.south===t.south&&e.east===t.east&&e.north===t.north,nK.prototype.equalsEpsilon=function(e,t){return nK.equalsEpsilon(this,e,t)},nK._validate=e=>{W.typeOf.object("rectangle",e);let t=e.north;W.typeOf.number.greaterThanOrEquals("north",t,-K.PI_OVER_TWO),W.typeOf.number.lessThanOrEquals("north",t,K.PI_OVER_TWO);let r=e.south;W.typeOf.number.greaterThanOrEquals("south",r,-K.PI_OVER_TWO),W.typeOf.number.lessThanOrEquals("south",r,K.PI_OVER_TWO);let n=e.west;W.typeOf.number.greaterThanOrEquals("west",n,-Math.PI),W.typeOf.number.lessThanOrEquals("west",n,Math.PI);let i=e.east;W.typeOf.number.greaterThanOrEquals("east",i,-Math.PI),W.typeOf.number.lessThanOrEquals("east",i,Math.PI)},nK.southwest=(e,t)=>(W.typeOf.object("rectangle",e),H(t))?(t.longitude=e.west,t.latitude=e.south,t.height=0,t):new ef(e.west,e.south),nK.northwest=(e,t)=>(W.typeOf.object("rectangle",e),H(t))?(t.longitude=e.west,t.latitude=e.north,t.height=0,t):new ef(e.west,e.north),nK.northeast=(e,t)=>(W.typeOf.object("rectangle",e),H(t))?(t.longitude=e.east,t.latitude=e.north,t.height=0,t):new ef(e.east,e.north),nK.southeast=(e,t)=>(W.typeOf.object("rectangle",e),H(t))?(t.longitude=e.east,t.latitude=e.south,t.height=0,t):new ef(e.east,e.south),nK.center=(e,t)=>{W.typeOf.object("rectangle",e);let r=e.east,n=e.west;r<n&&(r+=K.TWO_PI);let i=K.negativePiToPi((n+r)*.5),o=(e.south+e.north)*.5;return H(t)?(t.longitude=i,t.latitude=o,t.height=0,t):new ef(i,o)},nK.intersection=(e,t,r)=>{W.typeOf.object("rectangle",e),W.typeOf.object("otherRectangle",t);let n=e.east,i=e.west,o=t.east,a=t.west;n<i&&o>0?n+=K.TWO_PI:o<a&&n>0&&(o+=K.TWO_PI),n<i&&a<0?a+=K.TWO_PI:o<a&&i<0&&(i+=K.TWO_PI);let s=K.negativePiToPi(Math.max(i,a)),l=K.negativePiToPi(Math.min(n,o));if((e.west<e.east||t.west<t.east)&&l<=s)return;let u=Math.max(e.south,t.south),c=Math.min(e.north,t.north);if(!(u>=c))return H(r)?(r.west=s,r.south=u,r.east=l,r.north=c,r):new nK(s,u,l,c)},nK.simpleIntersection=(e,t,r)=>{W.typeOf.object("rectangle",e),W.typeOf.object("otherRectangle",t);let n=Math.max(e.west,t.west),i=Math.max(e.south,t.south),o=Math.min(e.east,t.east),a=Math.min(e.north,t.north);if(!(i>=a)&&!(n>=o))return H(r)?(r.west=n,r.south=i,r.east=o,r.north=a,r):new nK(n,i,o,a)},nK.union=(e,t,r)=>{W.typeOf.object("rectangle",e),W.typeOf.object("otherRectangle",t),H(r)||(r=new nK);let n=e.east,i=e.west,o=t.east,a=t.west;n<i&&o>0?n+=K.TWO_PI:o<a&&n>0&&(o+=K.TWO_PI),n<i&&a<0?a+=K.TWO_PI:o<a&&i<0&&(i+=K.TWO_PI);let s=K.negativePiToPi(Math.min(i,a)),l=K.negativePiToPi(Math.max(n,o));return r.west=s,r.south=Math.min(e.south,t.south),r.east=l,r.north=Math.max(e.north,t.north),r},nK.expand=(e,t,r)=>(W.typeOf.object("rectangle",e),W.typeOf.object("cartographic",t),H(r)||(r=new nK),r.west=Math.min(e.west,t.longitude),r.south=Math.min(e.south,t.latitude),r.east=Math.max(e.east,t.longitude),r.north=Math.max(e.north,t.latitude),r),nK.contains=(e,t)=>{W.typeOf.object("rectangle",e),W.typeOf.object("cartographic",t);let r=t.longitude,n=t.latitude,i=e.west,o=e.east;return o<i&&(o+=K.TWO_PI,r<0&&(r+=K.TWO_PI)),(r>i||K.equalsEpsilon(r,i,K.EPSILON14))&&(r<o||K.equalsEpsilon(r,o,K.EPSILON14))&&n>=e.south&&n<=e.north};let n4=new ef;function n5(e,t){this.center=ee.clone(e??ee.ZERO),this.radius=t??0}nK.subsample=(e,t,r,n)=>{W.typeOf.object("rectangle",e),t=t??eA.default,r=r??0,H(n)||(n=[]);let i=0,o=e.north,a=e.south,s=e.east,l=e.west;n4.height=r,n4.longitude=l,n4.latitude=o,n[i]=t.cartographicToCartesian(n4,n[i]),i++,n4.longitude=s,n[i]=t.cartographicToCartesian(n4,n[i]),i++,n4.latitude=a,n[i]=t.cartographicToCartesian(n4,n[i]),i++,n4.longitude=l,n[i]=t.cartographicToCartesian(n4,n[i]),i++,o<0?n4.latitude=o:a>0?n4.latitude=a:n4.latitude=0;for(let r=1;r<8;++r)n4.longitude=-Math.PI+r*K.PI_OVER_TWO,nK.contains(e,n4)&&(n[i]=t.cartographicToCartesian(n4,n[i]),i++);return 0===n4.latitude&&(n4.longitude=l,n[i]=t.cartographicToCartesian(n4,n[i]),i++,n4.longitude=s,n[i]=t.cartographicToCartesian(n4,n[i]),i++),n.length=i,n},nK.subsection=(e,t,r,n,i,o)=>{if(W.typeOf.object("rectangle",e),W.typeOf.number.greaterThanOrEquals("westLerp",t,0),W.typeOf.number.lessThanOrEquals("westLerp",t,1),W.typeOf.number.greaterThanOrEquals("southLerp",r,0),W.typeOf.number.lessThanOrEquals("southLerp",r,1),W.typeOf.number.greaterThanOrEquals("eastLerp",n,0),W.typeOf.number.lessThanOrEquals("eastLerp",n,1),W.typeOf.number.greaterThanOrEquals("northLerp",i,0),W.typeOf.number.lessThanOrEquals("northLerp",i,1),W.typeOf.number.lessThanOrEquals("westLerp",t,n),W.typeOf.number.lessThanOrEquals("southLerp",r,i),H(o)||(o=new nK),e.west<=e.east){let r=e.east-e.west;o.west=e.west+t*r,o.east=e.west+n*r}else{let r=K.TWO_PI+e.east-e.west;o.west=K.negativePiToPi(e.west+t*r),o.east=K.negativePiToPi(e.west+n*r)}let a=e.north-e.south;return o.south=e.south+r*a,o.north=e.south+i*a,1===t&&(o.west=e.east),1===n&&(o.east=e.east),1===r&&(o.south=e.north),1===i&&(o.north=e.north),o},nK.MAX_VALUE=Object.freeze(new nK(-Math.PI,-K.PI_OVER_TWO,Math.PI,K.PI_OVER_TWO));let n6=new ee,n8=new ee,n7=new ee,n9=new ee,ie=new ee,it=new ee,ir=new ee,ii=new ee,io=new ee,ia=new ee,is=new ee,il=new ee,iu=4/3*K.PI;n5.fromPoints=(e,t)=>{let r;if(H(t)||(t=new n5),!H(e)||0===e.length)return t.center=ee.clone(ee.ZERO,t.center),t.radius=0,t;let n=ee.clone(e[0],ir),i=ee.clone(n,n6),o=ee.clone(n,n8),a=ee.clone(n,n7),s=ee.clone(n,n9),l=ee.clone(n,ie),u=ee.clone(n,it),c=e.length;for(r=1;r<c;r++){ee.clone(e[r],n);let t=n.x,c=n.y,f=n.z;t<i.x&&ee.clone(n,i),t>s.x&&ee.clone(n,s),c<o.y&&ee.clone(n,o),c>l.y&&ee.clone(n,l),f<a.z&&ee.clone(n,a),f>u.z&&ee.clone(n,u)}let f=ee.magnitudeSquared(ee.subtract(s,i,ii)),h=ee.magnitudeSquared(ee.subtract(l,o,ii)),p=ee.magnitudeSquared(ee.subtract(u,a,ii)),d=i,m=s,y=f;h>y&&(y=h,d=o,m=l),p>y&&(y=p,d=a,m=u),io.x=(d.x+m.x)*.5,io.y=(d.y+m.y)*.5,io.z=(d.z+m.z)*.5;let _=ee.magnitudeSquared(ee.subtract(m,io,ii)),E=Math.sqrt(_);ia.x=i.x,ia.y=o.y,ia.z=a.z,is.x=s.x,is.y=l.y,is.z=u.z;let O=ee.midpoint(ia,is,il),g=0;for(r=0;r<c;r++){ee.clone(e[r],n);let t=ee.magnitude(ee.subtract(n,O,ii));t>g&&(g=t);let i=ee.magnitudeSquared(ee.subtract(n,io,ii));if(i>_){let e=Math.sqrt(i);_=(E=(E+e)*.5)*E;let t=e-E;io.x=(E*io.x+t*n.x)/e,io.y=(E*io.y+t*n.y)/e,io.z=(E*io.z+t*n.z)/e}}return E<g?(ee.clone(io,t.center),t.radius=E):(ee.clone(O,t.center),t.radius=g),t};let ic=new eM,ih=new ee,ip=new ee,id=new ef,im=new ef;n5.fromRectangle2D=(e,t,r)=>n5.fromRectangleWithHeights2D(e,t,0,0,r),n5.fromRectangleWithHeights2D=(e,t,r,n,i)=>{if(H(i)||(i=new n5),!H(e))return i.center=ee.clone(ee.ZERO,i.center),i.radius=0,i;ic._ellipsoid=eA.default,t=t??ic,nK.southwest(e,id),id.height=r,nK.northeast(e,im),im.height=n;let o=t.project(id,ih),a=t.project(im,ip),s=a.x-o.x,l=a.y-o.y,u=a.z-o.z;i.radius=.5*Math.sqrt(s*s+l*l+u*u);let c=i.center;return c.x=o.x+.5*s,c.y=o.y+.5*l,c.z=o.z+.5*u,i};let iy=[];n5.fromRectangle3D=(e,t,r,n)=>{if(t=t??eA.default,r=r??0,H(n)||(n=new n5),!H(e))return n.center=ee.clone(ee.ZERO,n.center),n.radius=0,n;let i=nK.subsample(e,t,r,iy);return n5.fromPoints(i,n)},n5.fromVertices=(e,t,r,n)=>{let i;if(H(n)||(n=new n5),!H(e)||0===e.length)return n.center=ee.clone(ee.ZERO,n.center),n.radius=0,n;t=t??ee.ZERO,r=r??3,W.typeOf.number.greaterThanOrEquals("stride",r,3),ir.x=e[0]+t.x,ir.y=e[1]+t.y,ir.z=e[2]+t.z;let o=ee.clone(ir,n6),a=ee.clone(ir,n8),s=ee.clone(ir,n7),l=ee.clone(ir,n9),u=ee.clone(ir,ie),c=ee.clone(ir,it),f=e.length;for(i=0;i<f;i+=r){let r=e[i]+t.x,n=e[i+1]+t.y,f=e[i+2]+t.z;ir.x=r,ir.y=n,ir.z=f,r<o.x&&ee.clone(ir,o),r>l.x&&ee.clone(ir,l),n<a.y&&ee.clone(ir,a),n>u.y&&ee.clone(ir,u),f<s.z&&ee.clone(ir,s),f>c.z&&ee.clone(ir,c)}let h=ee.magnitudeSquared(ee.subtract(l,o,ii)),p=ee.magnitudeSquared(ee.subtract(u,a,ii)),d=ee.magnitudeSquared(ee.subtract(c,s,ii)),m=o,y=l,_=h;p>_&&(_=p,m=a,y=u),d>_&&(_=d,m=s,y=c),io.x=(m.x+y.x)*.5,io.y=(m.y+y.y)*.5,io.z=(m.z+y.z)*.5;let E=ee.magnitudeSquared(ee.subtract(y,io,ii)),O=Math.sqrt(E);ia.x=o.x,ia.y=a.y,ia.z=s.z,is.x=l.x,is.y=u.y,is.z=c.z;let g=ee.midpoint(ia,is,il),T=0;for(i=0;i<f;i+=r){ir.x=e[i]+t.x,ir.y=e[i+1]+t.y,ir.z=e[i+2]+t.z;let r=ee.magnitude(ee.subtract(ir,g,ii));r>T&&(T=r);let n=ee.magnitudeSquared(ee.subtract(ir,io,ii));if(n>E){let e=Math.sqrt(n);E=(O=(O+e)*.5)*O;let t=e-O;io.x=(O*io.x+t*ir.x)/e,io.y=(O*io.y+t*ir.y)/e,io.z=(O*io.z+t*ir.z)/e}}return O<T?(ee.clone(io,n.center),n.radius=O):(ee.clone(g,n.center),n.radius=T),n},n5.fromEncodedCartesianVertices=(e,t,r)=>{let n;if(H(r)||(r=new n5),!H(e)||!H(t)||e.length!==t.length||0===e.length)return r.center=ee.clone(ee.ZERO,r.center),r.radius=0,r;ir.x=e[0]+t[0],ir.y=e[1]+t[1],ir.z=e[2]+t[2];let i=ee.clone(ir,n6),o=ee.clone(ir,n8),a=ee.clone(ir,n7),s=ee.clone(ir,n9),l=ee.clone(ir,ie),u=ee.clone(ir,it),c=e.length;for(n=0;n<c;n+=3){let r=e[n]+t[n],c=e[n+1]+t[n+1],f=e[n+2]+t[n+2];ir.x=r,ir.y=c,ir.z=f,r<i.x&&ee.clone(ir,i),r>s.x&&ee.clone(ir,s),c<o.y&&ee.clone(ir,o),c>l.y&&ee.clone(ir,l),f<a.z&&ee.clone(ir,a),f>u.z&&ee.clone(ir,u)}let f=ee.magnitudeSquared(ee.subtract(s,i,ii)),h=ee.magnitudeSquared(ee.subtract(l,o,ii)),p=ee.magnitudeSquared(ee.subtract(u,a,ii)),d=i,m=s,y=f;h>y&&(y=h,d=o,m=l),p>y&&(y=p,d=a,m=u),io.x=(d.x+m.x)*.5,io.y=(d.y+m.y)*.5,io.z=(d.z+m.z)*.5;let _=ee.magnitudeSquared(ee.subtract(m,io,ii)),E=Math.sqrt(_);ia.x=i.x,ia.y=o.y,ia.z=a.z,is.x=s.x,is.y=l.y,is.z=u.z;let O=ee.midpoint(ia,is,il),g=0;for(n=0;n<c;n+=3){ir.x=e[n]+t[n],ir.y=e[n+1]+t[n+1],ir.z=e[n+2]+t[n+2];let r=ee.magnitude(ee.subtract(ir,O,ii));r>g&&(g=r);let i=ee.magnitudeSquared(ee.subtract(ir,io,ii));if(i>_){let e=Math.sqrt(i);_=(E=(E+e)*.5)*E;let t=e-E;io.x=(E*io.x+t*ir.x)/e,io.y=(E*io.y+t*ir.y)/e,io.z=(E*io.z+t*ir.z)/e}}return E<g?(ee.clone(io,r.center),r.radius=E):(ee.clone(O,r.center),r.radius=g),r},n5.fromCornerPoints=(e,t,r)=>{W.typeOf.object("corner",e),W.typeOf.object("oppositeCorner",t),H(r)||(r=new n5);let n=ee.midpoint(e,t,r.center);return r.radius=ee.distance(n,t),r},n5.fromEllipsoid=(e,t)=>(W.typeOf.object("ellipsoid",e),H(t)||(t=new n5),ee.clone(ee.ZERO,t.center),t.radius=e.maximumRadius,t);let i_=new ee;n5.fromBoundingSpheres=(e,t)=>{let r;if(H(t)||(t=new n5),!H(e)||0===e.length)return t.center=ee.clone(ee.ZERO,t.center),t.radius=0,t;let n=e.length;if(1===n)return n5.clone(e[0],t);if(2===n)return n5.union(e[0],e[1],t);let i=[];for(r=0;r<n;r++)i.push(e[r].center);let o=(t=n5.fromPoints(i,t)).center,a=t.radius;for(r=0;r<n;r++){let t=e[r];a=Math.max(a,ee.distance(o,t.center,i_)+t.radius)}return t.radius=a,t};let iE=new ee,iO=new ee,ig=new ee;n5.fromOrientedBoundingBox=(e,t)=>{W.defined("orientedBoundingBox",e),H(t)||(t=new n5);let r=e.halfAxes,n=eF.getColumn(r,0,iE),i=eF.getColumn(r,1,iO),o=eF.getColumn(r,2,ig);return ee.add(n,i,n),ee.add(n,o,n),t.center=ee.clone(e.center,t.center),t.radius=ee.magnitude(n),t};let iT=new ee,iA=new ee;n5.fromTransformation=(e,t)=>{W.typeOf.object("transformation",e),H(t)||(t=new n5);let r=e3.getTranslation(e,iT),n=e3.getScale(e,iA),i=.5*ee.magnitude(n);return t.center=ee.clone(r,t.center),t.radius=i,t},n5.clone=(e,t)=>{if(H(e))return H(t)?(t.center=ee.clone(e.center,t.center),t.radius=e.radius,t):new n5(e.center,e.radius)},n5.packedLength=4,n5.pack=(e,t,r)=>{W.typeOf.object("value",e),W.defined("array",t),r=r??0;let n=e.center;return t[r++]=n.x,t[r++]=n.y,t[r++]=n.z,t[r]=e.radius,t},n5.unpack=(e,t,r)=>{W.defined("array",e),t=t??0,H(r)||(r=new n5);let n=r.center;return n.x=e[t++],n.y=e[t++],n.z=e[t++],r.radius=e[t],r};let ib=new ee,iw=new ee;n5.union=(e,t,r)=>{W.typeOf.object("left",e),W.typeOf.object("right",t),H(r)||(r=new n5);let n=e.center,i=e.radius,o=t.center,a=t.radius,s=ee.subtract(o,n,ib),l=ee.magnitude(s);if(i>=l+a)return e.clone(r),r;if(a>=l+i)return t.clone(r),r;let u=(i+l+a)*.5,c=ee.multiplyByScalar(s,(-i+u)/l,iw);return ee.add(c,n,c),ee.clone(c,r.center),r.radius=u,r};let iR=new ee;n5.expand=(e,t,r)=>{W.typeOf.object("sphere",e),W.typeOf.object("point",t),r=n5.clone(e,r);let n=ee.magnitude(ee.subtract(t,r.center,iR));return n>r.radius&&(r.radius=n),r},n5.intersectPlane=(e,t)=>{W.typeOf.object("sphere",e),W.typeOf.object("plane",t);let r=e.center,n=e.radius,i=t.normal,o=ee.dot(i,r)+t.distance;return o<-n?eP.OUTSIDE:o<n?eP.INTERSECTING:eP.INSIDE},n5.transform=(e,t,r)=>(W.typeOf.object("sphere",e),W.typeOf.object("transform",t),H(r)||(r=new n5),r.center=e3.multiplyByPoint(t,e.center,r.center),r.radius=e3.getMaximumScale(t)*e.radius,r);let iS=new ee;n5.distanceSquaredTo=(e,t)=>{W.typeOf.object("sphere",e),W.typeOf.object("cartesian",t);let r=ee.subtract(e.center,t,iS),n=ee.magnitude(r)-e.radius;return n<=0?0:n*n},n5.transformWithoutScale=(e,t,r)=>(W.typeOf.object("sphere",e),W.typeOf.object("transform",t),H(r)||(r=new n5),r.center=e3.multiplyByPoint(t,e.center,r.center),r.radius=e.radius,r);let ix=new ee;n5.computePlaneDistances=(e,t,r,n)=>{W.typeOf.object("sphere",e),W.typeOf.object("position",t),W.typeOf.object("direction",r),H(n)||(n=new eL);let i=ee.subtract(e.center,t,ix),o=ee.dot(r,i);return n.start=o-e.radius,n.stop=o+e.radius,n};let iN=new ee,iI=new ee,iC=new ee,iv=new ee,iM=new ee,iP=new ef,iL=Array(8);for(let e=0;e<8;++e)iL[e]=new ee;let iF=new eM;n5.projectTo2D=(e,t,r)=>{let n;W.typeOf.object("sphere",e),iF._ellipsoid=eA.default;let i=(t=t??iF).ellipsoid,o=e.center,a=e.radius;n=ee.equals(o,ee.ZERO)?ee.clone(ee.UNIT_X,iN):i.geodeticSurfaceNormal(o,iN);let s=ee.cross(ee.UNIT_Z,n,iI);ee.normalize(s,s);let l=ee.cross(n,s,iC);ee.normalize(l,l),ee.multiplyByScalar(n,a,n),ee.multiplyByScalar(l,a,l),ee.multiplyByScalar(s,a,s);let u=ee.negate(l,iM),c=ee.negate(s,iv),f=iL[0];ee.add(n,l,f),ee.add(f,s,f),f=iL[1],ee.add(n,l,f),ee.add(f,c,f),f=iL[2],ee.add(n,u,f),ee.add(f,c,f),f=iL[3],ee.add(n,u,f),ee.add(f,s,f),ee.negate(n,n),f=iL[4],ee.add(n,l,f),ee.add(f,s,f),f=iL[5],ee.add(n,l,f),ee.add(f,c,f),f=iL[6],ee.add(n,u,f),ee.add(f,c,f),f=iL[7],ee.add(n,u,f),ee.add(f,s,f);let h=iL.length;for(let e=0;e<h;++e){let r=iL[e];ee.add(o,r,r);let n=i.cartesianToCartographic(r,iP);t.project(n,r)}let p=(o=(r=n5.fromPoints(iL,r)).center).x,d=o.y,m=o.z;return o.x=m,o.y=p,o.z=d,r},n5.isOccluded=(e,t)=>(W.typeOf.object("sphere",e),W.typeOf.object("occluder",t),!t.isBoundingSphereVisible(e)),n5.equals=(e,t)=>e===t||H(e)&&H(t)&&ee.equals(e.center,t.center)&&e.radius===t.radius,n5.prototype.intersectPlane=function(e){return n5.intersectPlane(this,e)},n5.prototype.distanceSquaredTo=function(e){return n5.distanceSquaredTo(this,e)},n5.prototype.computePlaneDistances=function(e,t,r){return n5.computePlaneDistances(this,e,t,r)},n5.prototype.isOccluded=function(e){return n5.isOccluded(this,e)},n5.prototype.equals=function(e){return n5.equals(this,e)},n5.prototype.clone=function(e){return n5.clone(this,e)},n5.prototype.volume=function(){let e=this.radius;return iu*e*e*e};let iD=Object.freeze({DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGBA_ASTC_4x4_WEBGL:37808,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGBA_BPTC_UNORM:36492,HALF_FLOAT_OES:36193,DOUBLE:5130,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,COLOR:6144,DEPTH:6145,STENCIL:6146,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,MAX_3D_TEXTURE_SIZE:32883,UNSIGNED_INT_2_10_10_10_REV:33640,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,MAX_TEXTURE_LOD_BIAS:34045,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,VERTEX_ATTRIB_ARRAY_INTEGER:35069,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,UNSIGNED_INT_10F_11F_11F_REV:35899,RGB9_E5:35901,UNSIGNED_INT_5_9_9_9_REV:35902,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,RASTERIZER_DISCARD:35977,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,UNSIGNED_INT_24_8:34042,DEPTH24_STENCIL8:35056,UNSIGNED_NORMALIZED:35863,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,MAX_SAMPLES:36183,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,VERTEX_ARRAY_BINDING:34229,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,SIGNED_NORMALIZED:36764,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,INVALID_INDEX:0xffffffff,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,SAMPLER_BINDING:35097,RGB10_A2UI:36975,INT_2_10_10_10_REV:36255,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497,TEXTURE_IMMUTABLE_FORMAT:37167,MAX_ELEMENT_INDEX:36203,TEXTURE_IMMUTABLE_LEVELS:33503,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047}),iB={BYTE:iD.BYTE,UNSIGNED_BYTE:iD.UNSIGNED_BYTE,SHORT:iD.SHORT,UNSIGNED_SHORT:iD.UNSIGNED_SHORT,INT:iD.INT,UNSIGNED_INT:iD.UNSIGNED_INT,FLOAT:iD.FLOAT,DOUBLE:iD.DOUBLE};iB.getSizeInBytes=e=>{if(!H(e))throw new Y("value is required.");switch(e){case iB.BYTE:return Int8Array.BYTES_PER_ELEMENT;case iB.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case iB.SHORT:return Int16Array.BYTES_PER_ELEMENT;case iB.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case iB.INT:return Int32Array.BYTES_PER_ELEMENT;case iB.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case iB.FLOAT:return Float32Array.BYTES_PER_ELEMENT;case iB.DOUBLE:return Float64Array.BYTES_PER_ELEMENT;default:throw new Y("componentDatatype is not a valid value.")}},iB.fromTypedArray=e=>{if(e instanceof Int8Array)return iB.BYTE;if(e instanceof Uint8Array)return iB.UNSIGNED_BYTE;if(e instanceof Int16Array)return iB.SHORT;if(e instanceof Uint16Array)return iB.UNSIGNED_SHORT;if(e instanceof Int32Array)return iB.INT;if(e instanceof Uint32Array)return iB.UNSIGNED_INT;if(e instanceof Float32Array)return iB.FLOAT;if(e instanceof Float64Array)return iB.DOUBLE;throw new Y("array must be an Int8Array, Uint8Array, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array, or Float64Array.")},iB.validate=e=>H(e)&&(e===iB.BYTE||e===iB.UNSIGNED_BYTE||e===iB.SHORT||e===iB.UNSIGNED_SHORT||e===iB.INT||e===iB.UNSIGNED_INT||e===iB.FLOAT||e===iB.DOUBLE),iB.createTypedArray=(e,t)=>{if(!H(e))throw new Y("componentDatatype is required.");if(!H(t))throw new Y("valuesOrLength is required.");switch(e){case iB.BYTE:return new Int8Array(t);case iB.UNSIGNED_BYTE:return new Uint8Array(t);case iB.SHORT:return new Int16Array(t);case iB.UNSIGNED_SHORT:return new Uint16Array(t);case iB.INT:return new Int32Array(t);case iB.UNSIGNED_INT:return new Uint32Array(t);case iB.FLOAT:return new Float32Array(t);case iB.DOUBLE:return new Float64Array(t);default:throw new Y("componentDatatype is not a valid value.")}},iB.createArrayBufferView=(e,t,r,n)=>{if(!H(e))throw new Y("componentDatatype is required.");if(!H(t))throw new Y("buffer is required.");switch(r=r??0,n=n??(t.byteLength-r)/iB.getSizeInBytes(e),e){case iB.BYTE:return new Int8Array(t,r,n);case iB.UNSIGNED_BYTE:return new Uint8Array(t,r,n);case iB.SHORT:return new Int16Array(t,r,n);case iB.UNSIGNED_SHORT:return new Uint16Array(t,r,n);case iB.INT:return new Int32Array(t,r,n);case iB.UNSIGNED_INT:return new Uint32Array(t,r,n);case iB.FLOAT:return new Float32Array(t,r,n);case iB.DOUBLE:return new Float64Array(t,r,n);default:throw new Y("componentDatatype is not a valid value.")}},iB.fromName=e=>{switch(e){case"BYTE":return iB.BYTE;case"UNSIGNED_BYTE":return iB.UNSIGNED_BYTE;case"SHORT":return iB.SHORT;case"UNSIGNED_SHORT":return iB.UNSIGNED_SHORT;case"INT":return iB.INT;case"UNSIGNED_INT":return iB.UNSIGNED_INT;case"FLOAT":return iB.FLOAT;case"DOUBLE":return iB.DOUBLE;default:throw new Y("name is not a valid value.")}};let iz=Object.freeze(iB),iU=Object.freeze({NONE:0,TRIANGLES:1,LINES:2,POLYLINES:3});function ij(e,t,r,n){this[0]=e??0,this[1]=r??0,this[2]=t??0,this[3]=n??0}ij.packedLength=4,ij.pack=(e,t,r)=>(W.typeOf.object("value",e),W.defined("array",t),r=r??0,t[r++]=e[0],t[r++]=e[1],t[r++]=e[2],t[r++]=e[3],t),ij.unpack=(e,t,r)=>(W.defined("array",e),t=t??0,H(r)||(r=new ij),r[0]=e[t++],r[1]=e[t++],r[2]=e[t++],r[3]=e[t++],r),ij.packArray=(e,t)=>{W.defined("array",e);let r=e.length,n=4*r;if(H(t))if(Array.isArray(t)||t.length===n)t.length!==n&&(t.length=n);else throw new Y("If result is a typed array, it must have exactly array.length * 4 elements");else t=Array(n);for(let n=0;n<r;++n)ij.pack(e[n],t,4*n);return t},ij.unpackArray=(e,t)=>{if(W.defined("array",e),W.typeOf.number.greaterThanOrEquals("array.length",e.length,4),e.length%4!=0)throw new Y("array length must be a multiple of 4.");let r=e.length;H(t)?t.length=r/4:t=Array(r/4);for(let n=0;n<r;n+=4){let r=n/4;t[r]=ij.unpack(e,n,t[r])}return t},ij.clone=(e,t)=>{if(H(e))return H(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):new ij(e[0],e[2],e[1],e[3])},ij.fromArray=ij.unpack,ij.fromColumnMajorArray=(e,t)=>(W.defined("values",e),ij.clone(e,t)),ij.fromRowMajorArray=(e,t)=>(W.defined("values",e),H(t))?(t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3],t):new ij(e[0],e[1],e[2],e[3]),ij.fromScale=(e,t)=>(W.typeOf.object("scale",e),H(t))?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=e.y,t):new ij(e.x,0,0,e.y),ij.fromUniformScale=(e,t)=>(W.typeOf.number("scale",e),H(t))?(t[0]=e,t[1]=0,t[2]=0,t[3]=e,t):new ij(e,0,0,e),ij.fromRotation=(e,t)=>{W.typeOf.number("angle",e);let r=Math.cos(e),n=Math.sin(e);return H(t)?(t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t):new ij(r,-n,n,r)},ij.toArray=(e,t)=>(W.typeOf.object("matrix",e),H(t))?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):[e[0],e[1],e[2],e[3]],ij.getElementIndex=(e,t)=>(W.typeOf.number.greaterThanOrEquals("row",t,0),W.typeOf.number.lessThanOrEquals("row",t,1),W.typeOf.number.greaterThanOrEquals("column",e,0),W.typeOf.number.lessThanOrEquals("column",e,1),2*e+t),ij.getColumn=(e,t,r)=>{W.typeOf.object("matrix",e),W.typeOf.number.greaterThanOrEquals("index",t,0),W.typeOf.number.lessThanOrEquals("index",t,1),W.typeOf.object("result",r);let n=2*t,i=e[n],o=e[n+1];return r.x=i,r.y=o,r},ij.setColumn=(e,t,r,n)=>{W.typeOf.object("matrix",e),W.typeOf.number.greaterThanOrEquals("index",t,0),W.typeOf.number.lessThanOrEquals("index",t,1),W.typeOf.object("cartesian",r),W.typeOf.object("result",n),n=ij.clone(e,n);let i=2*t;return n[i]=r.x,n[i+1]=r.y,n},ij.getRow=(e,t,r)=>{W.typeOf.object("matrix",e),W.typeOf.number.greaterThanOrEquals("index",t,0),W.typeOf.number.lessThanOrEquals("index",t,1),W.typeOf.object("result",r);let n=e[t],i=e[t+2];return r.x=n,r.y=i,r},ij.setRow=(e,t,r,n)=>(W.typeOf.object("matrix",e),W.typeOf.number.greaterThanOrEquals("index",t,0),W.typeOf.number.lessThanOrEquals("index",t,1),W.typeOf.object("cartesian",r),W.typeOf.object("result",n),(n=ij.clone(e,n))[t]=r.x,n[t+2]=r.y,n);let iq=new em;ij.setScale=(e,t,r)=>{W.typeOf.object("matrix",e),W.typeOf.object("scale",t),W.typeOf.object("result",r);let n=ij.getScale(e,iq),i=t.x/n.x,o=t.y/n.y;return r[0]=e[0]*i,r[1]=e[1]*i,r[2]=e[2]*o,r[3]=e[3]*o,r};let iG=new em;ij.setUniformScale=(e,t,r)=>{W.typeOf.object("matrix",e),W.typeOf.number("scale",t),W.typeOf.object("result",r);let n=ij.getScale(e,iG),i=t/n.x,o=t/n.y;return r[0]=e[0]*i,r[1]=e[1]*i,r[2]=e[2]*o,r[3]=e[3]*o,r};let iV=new em;ij.getScale=(e,t)=>(W.typeOf.object("matrix",e),W.typeOf.object("result",t),t.x=em.magnitude(em.fromElements(e[0],e[1],iV)),t.y=em.magnitude(em.fromElements(e[2],e[3],iV)),t);let ik=new em;ij.getMaximumScale=e=>(ij.getScale(e,ik),em.maximumComponent(ik));let iH=new em;ij.setRotation=(e,t,r)=>{W.typeOf.object("matrix",e),W.typeOf.object("result",r);let n=ij.getScale(e,iH);return r[0]=t[0]*n.x,r[1]=t[1]*n.x,r[2]=t[2]*n.y,r[3]=t[3]*n.y,r};let iY=new em;ij.getRotation=(e,t)=>{W.typeOf.object("matrix",e),W.typeOf.object("result",t);let r=ij.getScale(e,iY);return t[0]=e[0]/r.x,t[1]=e[1]/r.x,t[2]=e[2]/r.y,t[3]=e[3]/r.y,t},ij.multiply=(e,t,r)=>{W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r);let n=e[0]*t[0]+e[2]*t[1],i=e[0]*t[2]+e[2]*t[3],o=e[1]*t[0]+e[3]*t[1],a=e[1]*t[2]+e[3]*t[3];return r[0]=n,r[1]=o,r[2]=i,r[3]=a,r},ij.add=(e,t,r)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r),r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r),ij.subtract=(e,t,r)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r),r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r),ij.multiplyByVector=(e,t,r)=>{W.typeOf.object("matrix",e),W.typeOf.object("cartesian",t),W.typeOf.object("result",r);let n=e[0]*t.x+e[2]*t.y,i=e[1]*t.x+e[3]*t.y;return r.x=n,r.y=i,r},ij.multiplyByScalar=(e,t,r)=>(W.typeOf.object("matrix",e),W.typeOf.number("scalar",t),W.typeOf.object("result",r),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r),ij.multiplyByScale=(e,t,r)=>(W.typeOf.object("matrix",e),W.typeOf.object("scale",t),W.typeOf.object("result",r),r[0]=e[0]*t.x,r[1]=e[1]*t.x,r[2]=e[2]*t.y,r[3]=e[3]*t.y,r),ij.multiplyByUniformScale=(e,t,r)=>(W.typeOf.object("matrix",e),W.typeOf.number("scale",t),W.typeOf.object("result",r),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r),ij.negate=(e,t)=>(W.typeOf.object("matrix",e),W.typeOf.object("result",t),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t),ij.transpose=(e,t)=>{W.typeOf.object("matrix",e),W.typeOf.object("result",t);let r=e[0],n=e[2],i=e[1],o=e[3];return t[0]=r,t[1]=n,t[2]=i,t[3]=o,t},ij.abs=(e,t)=>(W.typeOf.object("matrix",e),W.typeOf.object("result",t),t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t),ij.equals=(e,t)=>e===t||H(e)&&H(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3],ij.equalsArray=(e,t,r)=>e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3],ij.equalsEpsilon=(e,t,r)=>(r=r??0,e===t||H(e)&&H(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r),ij.IDENTITY=Object.freeze(new ij(1,0,0,1)),ij.ZERO=Object.freeze(new ij(0,0,0,0)),ij.COLUMN0ROW0=0,ij.COLUMN0ROW1=1,ij.COLUMN1ROW0=2,ij.COLUMN1ROW1=3,Object.defineProperties(ij.prototype,{length:{get:()=>ij.packedLength}}),ij.prototype.clone=function(e){return ij.clone(this,e)},ij.prototype.equals=function(e){return ij.equals(this,e)},ij.prototype.equalsEpsilon=function(e,t){return ij.equalsEpsilon(this,e,t)},ij.prototype.toString=function(){return`(${this[0]}, ${this[2]})
(${this[1]}, ${this[3]})`};let iW={POINTS:iD.POINTS,LINES:iD.LINES,LINE_LOOP:iD.LINE_LOOP,LINE_STRIP:iD.LINE_STRIP,TRIANGLES:iD.TRIANGLES,TRIANGLE_STRIP:iD.TRIANGLE_STRIP,TRIANGLE_FAN:iD.TRIANGLE_FAN};iW.isLines=e=>e===iW.LINES||e===iW.LINE_LOOP||e===iW.LINE_STRIP,iW.isTriangles=e=>e===iW.TRIANGLES||e===iW.TRIANGLE_STRIP||e===iW.TRIANGLE_FAN,iW.validate=e=>e===iW.POINTS||e===iW.LINES||e===iW.LINE_LOOP||e===iW.LINE_STRIP||e===iW.TRIANGLES||e===iW.TRIANGLE_STRIP||e===iW.TRIANGLE_FAN;let iX=Object.freeze(iW);function i$(e){e=e??e0.EMPTY_OBJECT,W.typeOf.object("options.attributes",e.attributes),this.attributes=e.attributes,this.indices=e.indices,this.primitiveType=e.primitiveType??iX.TRIANGLES,this.boundingSphere=e.boundingSphere,this.geometryType=e.geometryType??iU.NONE,this.boundingSphereCV=e.boundingSphereCV,this.offsetAttribute=e.offsetAttribute}i$.computeNumberOfVertices=e=>{W.typeOf.object("geometry",e);let t=-1;for(let r in e.attributes)if(Object.hasOwn(e.attributes,r)&&H(e.attributes[r])&&H(e.attributes[r].values)){let n=e.attributes[r],i=n.values.length/n.componentsPerAttribute;if(t!==i&&-1!==t)throw new Y("All attribute lists must have the same number of attributes.");t=i}return t};let iZ=new ef,iK=new ee,iJ=new e3,iQ=[new ef,new ef,new ef],i0=[new em,new em,new em],i1=[new em,new em,new em],i3=new ee,i2=new rK,i4=new e3,i5=new ij;i$._textureCoordinateRotationPoints=(e,t,r,n)=>{let i,o=nK.center(n,iZ),a=ef.toCartesian(o,r,iK),s=np.eastNorthUpToFixedFrame(a,r,iJ),l=e3.inverse(s,iJ);iQ[0].longitude=n.west,iQ[0].latitude=n.south,iQ[1].longitude=n.west,iQ[1].latitude=n.north,iQ[2].longitude=n.east,iQ[2].latitude=n.south;let u=i3;for(i=0;i<3;i++)ef.toCartesian(iQ[i],r,u),u=e3.multiplyByPointAsVector(l,u,u),i0[i].x=u.x,i0[i].y=u.y;let c=rK.fromAxisAngle(ee.UNIT_Z,-t,i2),f=eF.fromQuaternion(c,i4),h=e.length,p=1/0,d=1/0,m=-1/0,y=-1/0;for(i=0;i<h;i++)u=e3.multiplyByPointAsVector(l,e[i],u),p=Math.min(p,(u=eF.multiplyByVector(f,u,u)).x),d=Math.min(d,u.y),m=Math.max(m,u.x),y=Math.max(y,u.y);let _=ij.fromRotation(t,i5);i1[0].x=p,i1[0].y=d,i1[1].x=p,i1[1].y=y,i1[2].x=m,i1[2].y=d;let E=i0[0],O=i0[2].x-E.x,g=i0[1].y-E.y;for(i=0;i<3;i++){let e=i1[i];ij.multiplyByVector(_,e,e),e.x=(e.x-E.x)/O,e.y=(e.y-E.y)/g}let T=i1[0],A=i1[1],b=i1[2],w=Array(6);return em.pack(T,w),em.pack(A,w,2),em.pack(b,w,4),w};let i6=function(e){if(!H((e=e??e0.EMPTY_OBJECT).componentDatatype))throw new Y("options.componentDatatype is required.");if(!H(e.componentsPerAttribute))throw new Y("options.componentsPerAttribute is required.");if(e.componentsPerAttribute<1||e.componentsPerAttribute>4)throw new Y("options.componentsPerAttribute must be between 1 and 4.");if(!H(e.values))throw new Y("options.values is required.");this.componentDatatype=e.componentDatatype,this.componentsPerAttribute=e.componentsPerAttribute,this.normalize=e.normalize??!1,this.values=e.values},i8=function(e){e=e??e0.EMPTY_OBJECT,this.position=e.position,this.normal=e.normal,this.st=e.st,this.bitangent=e.bitangent,this.tangent=e.tangent,this.color=e.color},i7=Object.freeze({NONE:0,TOP:1,ALL:2});function i9(e){e=e??e0.EMPTY_OBJECT,this.position=e.position??!1,this.normal=e.normal??!1,this.st=e.st??!1,this.bitangent=e.bitangent??!1,this.tangent=e.tangent??!1,this.color=e.color??!1}i9.POSITION_ONLY=Object.freeze(new i9({position:!0})),i9.POSITION_AND_NORMAL=Object.freeze(new i9({position:!0,normal:!0})),i9.POSITION_NORMAL_AND_ST=Object.freeze(new i9({position:!0,normal:!0,st:!0})),i9.POSITION_AND_ST=Object.freeze(new i9({position:!0,st:!0})),i9.POSITION_AND_COLOR=Object.freeze(new i9({position:!0,color:!0})),i9.ALL=Object.freeze(new i9({position:!0,normal:!0,st:!0,tangent:!0,bitangent:!0})),i9.DEFAULT=i9.POSITION_NORMAL_AND_ST,i9.packedLength=6,i9.pack=(e,t,r)=>{if(!H(e))throw new Y("value is required");if(!H(t))throw new Y("array is required");return r=r??0,t[r++]=+!!e.position,t[r++]=+!!e.normal,t[r++]=+!!e.st,t[r++]=+!!e.tangent,t[r++]=+!!e.bitangent,t[r]=+!!e.color,t},i9.unpack=(e,t,r)=>{if(!H(e))throw new Y("array is required");return t=t??0,H(r)||(r=new i9),r.position=1===e[t++],r.normal=1===e[t++],r.st=1===e[t++],r.tangent=1===e[t++],r.bitangent=1===e[t++],r.color=1===e[t],r},i9.clone=(e,t)=>{if(H(e))return H(t)||(t=new i9),t.position=e.position,t.normal=e.normal,t.st=e.st,t.tangent=e.tangent,t.bitangent=e.bitangent,t.color=e.color,t};let oe=new ee;function ot(e){let t=(e=e??e0.EMPTY_OBJECT).minimum,r=e.maximum;if(W.typeOf.object("min",t),W.typeOf.object("max",r),H(e.offsetAttribute)&&e.offsetAttribute===i7.TOP)throw new Y("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");let n=e.vertexFormat??i9.DEFAULT;this._minimum=ee.clone(t),this._maximum=ee.clone(r),this._vertexFormat=n,this._offsetAttribute=e.offsetAttribute,this._workerName="createBoxGeometry"}ot.fromDimensions=e=>{let t=(e=e??e0.EMPTY_OBJECT).dimensions;W.typeOf.object("dimensions",t),W.typeOf.number.greaterThanOrEquals("dimensions.x",t.x,0),W.typeOf.number.greaterThanOrEquals("dimensions.y",t.y,0),W.typeOf.number.greaterThanOrEquals("dimensions.z",t.z,0);let r=ee.multiplyByScalar(t,.5,new ee);return new ot({minimum:ee.negate(r,new ee),maximum:r,vertexFormat:e.vertexFormat,offsetAttribute:e.offsetAttribute})},ot.fromAxisAlignedBoundingBox=e=>(W.typeOf.object("boundingBox",e),new ot({minimum:e.minimum,maximum:e.maximum})),ot.packedLength=2*ee.packedLength+i9.packedLength+1,ot.pack=(e,t,r)=>(W.typeOf.object("value",e),W.defined("array",t),r=r??0,ee.pack(e._minimum,t,r),ee.pack(e._maximum,t,r+ee.packedLength),i9.pack(e._vertexFormat,t,r+2*ee.packedLength),t[r+2*ee.packedLength+i9.packedLength]=e._offsetAttribute??-1,t);let or=new ee,on=new ee,oi=new i9,oo={minimum:or,maximum:on,vertexFormat:oi,offsetAttribute:void 0};function oa(){return!0}ot.unpack=(e,t,r)=>{W.defined("array",e),t=t??0;let n=ee.unpack(e,t,or),i=ee.unpack(e,t+ee.packedLength,on),o=i9.unpack(e,t+2*ee.packedLength,oi),a=e[t+2*ee.packedLength+i9.packedLength];return H(r)?(r._minimum=ee.clone(n,r._minimum),r._maximum=ee.clone(i,r._maximum),r._vertexFormat=i9.clone(o,r._vertexFormat),r._offsetAttribute=-1===a?void 0:a,r):(oo.offsetAttribute=-1===a?void 0:a,new ot(oo))},ot.createGeometry=e=>{let t,r,n=e._minimum,i=e._maximum,o=e._vertexFormat;if(ee.equals(n,i))return;let a=new i8;if(o.position&&(o.st||o.normal||o.tangent||o.bitangent)){if(o.position&&((r=new Float64Array(72))[0]=n.x,r[1]=n.y,r[2]=i.z,r[3]=i.x,r[4]=n.y,r[5]=i.z,r[6]=i.x,r[7]=i.y,r[8]=i.z,r[9]=n.x,r[10]=i.y,r[11]=i.z,r[12]=n.x,r[13]=n.y,r[14]=n.z,r[15]=i.x,r[16]=n.y,r[17]=n.z,r[18]=i.x,r[19]=i.y,r[20]=n.z,r[21]=n.x,r[22]=i.y,r[23]=n.z,r[24]=i.x,r[25]=n.y,r[26]=n.z,r[27]=i.x,r[28]=i.y,r[29]=n.z,r[30]=i.x,r[31]=i.y,r[32]=i.z,r[33]=i.x,r[34]=n.y,r[35]=i.z,r[36]=n.x,r[37]=n.y,r[38]=n.z,r[39]=n.x,r[40]=i.y,r[41]=n.z,r[42]=n.x,r[43]=i.y,r[44]=i.z,r[45]=n.x,r[46]=n.y,r[47]=i.z,r[48]=n.x,r[49]=i.y,r[50]=n.z,r[51]=i.x,r[52]=i.y,r[53]=n.z,r[54]=i.x,r[55]=i.y,r[56]=i.z,r[57]=n.x,r[58]=i.y,r[59]=i.z,r[60]=n.x,r[61]=n.y,r[62]=n.z,r[63]=i.x,r[64]=n.y,r[65]=n.z,r[66]=i.x,r[67]=n.y,r[68]=i.z,r[69]=n.x,r[70]=n.y,r[71]=i.z,a.position=new i6({componentDatatype:iz.DOUBLE,componentsPerAttribute:3,values:r})),o.normal){let e=new Float32Array(72);e[0]=0,e[1]=0,e[2]=1,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=1,e[9]=0,e[10]=0,e[11]=1,e[12]=0,e[13]=0,e[14]=-1,e[15]=0,e[16]=0,e[17]=-1,e[18]=0,e[19]=0,e[20]=-1,e[21]=0,e[22]=0,e[23]=-1,e[24]=1,e[25]=0,e[26]=0,e[27]=1,e[28]=0,e[29]=0,e[30]=1,e[31]=0,e[32]=0,e[33]=1,e[34]=0,e[35]=0,e[36]=-1,e[37]=0,e[38]=0,e[39]=-1,e[40]=0,e[41]=0,e[42]=-1,e[43]=0,e[44]=0,e[45]=-1,e[46]=0,e[47]=0,e[48]=0,e[49]=1,e[50]=0,e[51]=0,e[52]=1,e[53]=0,e[54]=0,e[55]=1,e[56]=0,e[57]=0,e[58]=1,e[59]=0,e[60]=0,e[61]=-1,e[62]=0,e[63]=0,e[64]=-1,e[65]=0,e[66]=0,e[67]=-1,e[68]=0,e[69]=0,e[70]=-1,e[71]=0,a.normal=new i6({componentDatatype:iz.FLOAT,componentsPerAttribute:3,values:e})}if(o.st){let e=new Float32Array(48);e[0]=0,e[1]=0,e[2]=1,e[3]=0,e[4]=1,e[5]=1,e[6]=0,e[7]=1,e[8]=1,e[9]=0,e[10]=0,e[11]=0,e[12]=0,e[13]=1,e[14]=1,e[15]=1,e[16]=0,e[17]=0,e[18]=1,e[19]=0,e[20]=1,e[21]=1,e[22]=0,e[23]=1,e[24]=1,e[25]=0,e[26]=0,e[27]=0,e[28]=0,e[29]=1,e[30]=1,e[31]=1,e[32]=1,e[33]=0,e[34]=0,e[35]=0,e[36]=0,e[37]=1,e[38]=1,e[39]=1,e[40]=0,e[41]=0,e[42]=1,e[43]=0,e[44]=1,e[45]=1,e[46]=0,e[47]=1,a.st=new i6({componentDatatype:iz.FLOAT,componentsPerAttribute:2,values:e})}if(o.tangent){let e=new Float32Array(72);e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=1,e[7]=0,e[8]=0,e[9]=1,e[10]=0,e[11]=0,e[12]=-1,e[13]=0,e[14]=0,e[15]=-1,e[16]=0,e[17]=0,e[18]=-1,e[19]=0,e[20]=0,e[21]=-1,e[22]=0,e[23]=0,e[24]=0,e[25]=1,e[26]=0,e[27]=0,e[28]=1,e[29]=0,e[30]=0,e[31]=1,e[32]=0,e[33]=0,e[34]=1,e[35]=0,e[36]=0,e[37]=-1,e[38]=0,e[39]=0,e[40]=-1,e[41]=0,e[42]=0,e[43]=-1,e[44]=0,e[45]=0,e[46]=-1,e[47]=0,e[48]=-1,e[49]=0,e[50]=0,e[51]=-1,e[52]=0,e[53]=0,e[54]=-1,e[55]=0,e[56]=0,e[57]=-1,e[58]=0,e[59]=0,e[60]=1,e[61]=0,e[62]=0,e[63]=1,e[64]=0,e[65]=0,e[66]=1,e[67]=0,e[68]=0,e[69]=1,e[70]=0,e[71]=0,a.tangent=new i6({componentDatatype:iz.FLOAT,componentsPerAttribute:3,values:e})}if(o.bitangent){let e=new Float32Array(72);e[0]=0,e[1]=1,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=1,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=1,e[14]=0,e[15]=0,e[16]=1,e[17]=0,e[18]=0,e[19]=1,e[20]=0,e[21]=0,e[22]=1,e[23]=0,e[24]=0,e[25]=0,e[26]=1,e[27]=0,e[28]=0,e[29]=1,e[30]=0,e[31]=0,e[32]=1,e[33]=0,e[34]=0,e[35]=1,e[36]=0,e[37]=0,e[38]=1,e[39]=0,e[40]=0,e[41]=1,e[42]=0,e[43]=0,e[44]=1,e[45]=0,e[46]=0,e[47]=1,e[48]=0,e[49]=0,e[50]=1,e[51]=0,e[52]=0,e[53]=1,e[54]=0,e[55]=0,e[56]=1,e[57]=0,e[58]=0,e[59]=1,e[60]=0,e[61]=0,e[62]=1,e[63]=0,e[64]=0,e[65]=1,e[66]=0,e[67]=0,e[68]=1,e[69]=0,e[70]=0,e[71]=1,a.bitangent=new i6({componentDatatype:iz.FLOAT,componentsPerAttribute:3,values:e})}(t=new Uint16Array(36))[0]=0,t[1]=1,t[2]=2,t[3]=0,t[4]=2,t[5]=3,t[6]=6,t[7]=5,t[8]=4,t[9]=7,t[10]=6,t[11]=4,t[12]=8,t[13]=9,t[14]=10,t[15]=8,t[16]=10,t[17]=11,t[18]=14,t[19]=13,t[20]=12,t[21]=15,t[22]=14,t[23]=12,t[24]=18,t[25]=17,t[26]=16,t[27]=19,t[28]=18,t[29]=16,t[30]=20,t[31]=21,t[32]=22,t[33]=20,t[34]=22,t[35]=23}else(r=new Float64Array(24))[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=i.x,r[4]=n.y,r[5]=n.z,r[6]=i.x,r[7]=i.y,r[8]=n.z,r[9]=n.x,r[10]=i.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=i.z,r[15]=i.x,r[16]=n.y,r[17]=i.z,r[18]=i.x,r[19]=i.y,r[20]=i.z,r[21]=n.x,r[22]=i.y,r[23]=i.z,a.position=new i6({componentDatatype:iz.DOUBLE,componentsPerAttribute:3,values:r}),(t=new Uint16Array(36))[0]=4,t[1]=5,t[2]=6,t[3]=4,t[4]=6,t[5]=7,t[6]=1,t[7]=0,t[8]=3,t[9]=1,t[10]=3,t[11]=2,t[12]=1,t[13]=6,t[14]=5,t[15]=1,t[16]=2,t[17]=6,t[18]=2,t[19]=3,t[20]=7,t[21]=2,t[22]=7,t[23]=6,t[24]=3,t[25]=0,t[26]=4,t[27]=3,t[28]=4,t[29]=7,t[30]=0,t[31]=1,t[32]=5,t[33]=0,t[34]=5,t[35]=4;let s=ee.subtract(i,n,oe),l=.5*ee.magnitude(s);if(H(e._offsetAttribute)){let t=r.length,n=+(e._offsetAttribute!==i7.NONE),i=new Uint8Array(t/3).fill(n);a.applyOffset=new i6({componentDatatype:iz.UNSIGNED_BYTE,componentsPerAttribute:1,values:i})}return new i$({attributes:a,indices:t,primitiveType:iX.TRIANGLES,boundingSphere:new n5(ee.ZERO,l),offsetAttribute:e._offsetAttribute})},ot.getUnitBox=()=>(H(x)||(x=ot.createGeometry(ot.fromDimensions({dimensions:new ee(1,1,1),vertexFormat:i9.POSITION_ONLY}))),x);let os=function(e,t){function r(){throw new Y(t)}for(let n in t=t??"This object was destroyed, i.e., destroy() was called.",e)"function"==typeof e[n]&&(e[n]=r);e.isDestroyed=oa},ol={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4"};ol.getMathType=e=>{switch(e){case ol.SCALAR:return Number;case ol.VEC2:return em;case ol.VEC3:return ee;case ol.VEC4:return eW;case ol.MAT2:return ij;case ol.MAT3:return eF;case ol.MAT4:return e3;default:throw new Y("attributeType is not a valid value.")}},ol.getNumberOfComponents=e=>{switch(e){case ol.SCALAR:return 1;case ol.VEC2:return 2;case ol.VEC3:return 3;case ol.VEC4:case ol.MAT2:return 4;case ol.MAT3:return 9;case ol.MAT4:return 16;default:throw new Y("attributeType is not a valid value.")}},ol.getAttributeLocationCount=e=>{switch(e){case ol.SCALAR:case ol.VEC2:case ol.VEC3:case ol.VEC4:return 1;case ol.MAT2:return 2;case ol.MAT3:return 3;case ol.MAT4:return 4;default:throw new Y("attributeType is not a valid value.")}},ol.getGlslType=e=>{switch(W.typeOf.string("attributeType",e),e){case ol.SCALAR:return"float";case ol.VEC2:return"vec2";case ol.VEC3:return"vec3";case ol.VEC4:return"vec4";case ol.MAT2:return"mat2";case ol.MAT3:return"mat3";case ol.MAT4:return"mat4";default:throw new Y("attributeType is not a valid value.")}};let ou=Object.freeze(ol),oc=1/256,of={};of.octEncodeInRange=(e,t,r)=>{if(W.defined("vector",e),W.defined("result",r),Math.abs(ee.magnitudeSquared(e)-1)>K.EPSILON6)throw new Y("vector must be normalized.");if(r.x=e.x/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),r.y=e.y/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),e.z<0){let e=r.x,t=r.y;r.x=(1-Math.abs(t))*K.signNotZero(e),r.y=(1-Math.abs(e))*K.signNotZero(t)}return r.x=K.toSNorm(r.x,t),r.y=K.toSNorm(r.y,t),r},of.octEncode=(e,t)=>of.octEncodeInRange(e,255,t);let oh=new em,op=new Uint8Array(1);function od(e){return op[0]=e,op[0]}of.octEncodeToCartesian4=(e,t)=>(of.octEncodeInRange(e,65535,oh),t.x=od(oh.x*oc),t.y=od(oh.x),t.z=od(oh.y*oc),t.w=od(oh.y),t),of.octDecodeInRange=(e,t,r,n)=>{if(W.defined("result",n),e<0||e>r||t<0||t>r)throw new Y(`x and y must be unsigned normalized integers between 0 and ${r}`);if(n.x=K.fromSNorm(e,r),n.y=K.fromSNorm(t,r),n.z=1-(Math.abs(n.x)+Math.abs(n.y)),n.z<0){let e=n.x;n.x=(1-Math.abs(n.y))*K.signNotZero(e),n.y=(1-Math.abs(e))*K.signNotZero(n.y)}return ee.normalize(n,n)},of.octDecode=(e,t,r)=>of.octDecodeInRange(e,t,255,r),of.octDecodeFromCartesian4=(e,t)=>{W.typeOf.object("encoded",e),W.typeOf.object("result",t);let r=e.x,n=e.y,i=e.z,o=e.w;if(r<0||r>255||n<0||n>255||i<0||i>255||o<0||o>255)throw new Y("x, y, z, and w must be unsigned normalized integers between 0 and 255");return of.octDecodeInRange(256*r+n,256*i+o,65535,t)},of.octPackFloat=e=>(W.defined("encoded",e),256*e.x+e.y);let om=new em;function oy(e){return e>>1^-(1&e)}of.octEncodeFloat=e=>(of.octEncode(e,om),of.octPackFloat(om)),of.octDecodeFloat=(e,t)=>{W.defined("value",e);let r=e/256,n=Math.floor(r);return of.octDecode(n,(r-n)*256,t)},of.octPack=(e,t,r,n)=>{W.defined("v1",e),W.defined("v2",t),W.defined("v3",r),W.defined("result",n);let i=of.octEncodeFloat(e),o=of.octEncodeFloat(t),a=of.octEncode(r,om);return n.x=65536*a.x+i,n.y=65536*a.y+o,n},of.octUnpack=(e,t,r,n)=>{W.defined("packed",e),W.defined("v1",t),W.defined("v2",r),W.defined("v3",n);let i=e.x/65536,o=Math.floor(i),a=(i-o)*65536,s=Math.floor(i=e.y/65536),l=(i-s)*65536;of.octDecodeFloat(a,t),of.octDecodeFloat(l,r),of.octDecode(o,s,n)},of.compressTextureCoordinates=e=>(W.defined("textureCoordinates",e),4096*(4095*e.x|0)+(4095*e.y|0)),of.decompressTextureCoordinates=(e,t)=>{W.defined("compressed",e),W.defined("result",t);let r=Math.floor(e/4096);return t.x=r/4095,t.y=(e-4096*r)/4095,t},of.zigZagDeltaDecode=(e,t,r)=>{W.defined("uBuffer",e),W.defined("vBuffer",t),W.typeOf.number.equals("uBuffer.length","vBuffer.length",e.length,t.length),H(r)&&W.typeOf.number.equals("uBuffer.length","heightBuffer.length",e.length,r.length);let n=e.length,i=0,o=0,a=0;for(let s=0;s<n;++s)i+=oy(e[s]),o+=oy(t[s]),e[s]=i,t[s]=o,H(r)&&(a+=oy(r[s]),r[s]=a)},of.dequantize=(e,t,r,n)=>{let i;W.defined("typedArray",e),W.defined("componentDatatype",t),W.defined("type",r),W.defined("count",n);let o=ou.getNumberOfComponents(r);switch(t){case iz.BYTE:i=127;break;case iz.UNSIGNED_BYTE:i=255;break;case iz.SHORT:i=32767;break;case iz.UNSIGNED_SHORT:i=65535;break;case iz.INT:i=0x7fffffff;break;case iz.UNSIGNED_INT:i=0xffffffff;break;default:throw new Y(`Cannot dequantize component datatype: ${t}`)}let a=new Float32Array(n*o);for(let t=0;t<n;t++)for(let r=0;r<o;r++){let n=t*o+r;a[n]=Math.max(e[n]/i,-1)}return a},of.decodeRGB565=(e,t)=>{W.defined("typedArray",e);let r=3*e.length;H(t)&&W.typeOf.number.equals("result.length","typedArray.length * 3",t.length,r);let n=e.length;H(t)||(t=new Float32Array(3*n));let i=1/31,o=1/63;for(let r=0;r<n;r++){let n=e[r],a=n>>11,s=n>>5&63,l=31&n,u=3*r;t[u]=a*i,t[u+1]=s*o,t[u+2]=l*i}return t};let o_=new ee,oE=new ee,oO=new ee,og=function(e,t,r,n,i){let o,a,s,l,u,c,f,h;if(W.defined("point",e),W.defined("p0",t),W.defined("p1",r),W.defined("p2",n),H(i)||(i=new ee),H(t.z)){if(ee.equalsEpsilon(e,t,K.EPSILON14))return ee.clone(ee.UNIT_X,i);if(ee.equalsEpsilon(e,r,K.EPSILON14))return ee.clone(ee.UNIT_Y,i);if(ee.equalsEpsilon(e,n,K.EPSILON14))return ee.clone(ee.UNIT_Z,i);o=ee.subtract(r,t,o_),a=ee.subtract(n,t,oE),s=ee.subtract(e,t,oO),l=ee.dot(o,o),u=ee.dot(o,a),c=ee.dot(o,s),f=ee.dot(a,a),h=ee.dot(a,s)}else{if(em.equalsEpsilon(e,t,K.EPSILON14))return ee.clone(ee.UNIT_X,i);if(em.equalsEpsilon(e,r,K.EPSILON14))return ee.clone(ee.UNIT_Y,i);if(em.equalsEpsilon(e,n,K.EPSILON14))return ee.clone(ee.UNIT_Z,i);o=em.subtract(r,t,o_),a=em.subtract(n,t,oE),s=em.subtract(e,t,oO),l=em.dot(o,o),u=em.dot(o,a),c=em.dot(o,s),f=em.dot(a,a),h=em.dot(a,s)}i.y=f*c-u*h,i.z=l*h-u*c;let p=l*f-u*u;if(0!==p)return i.y/=p,i.z/=p,i.x=1-i.y-i.z,i};function oT(){this.high=ee.clone(ee.ZERO),this.low=ee.clone(ee.ZERO)}oT.encode=(e,t)=>{let r;return W.typeOf.number("value",e),H(t)||(t={high:0,low:0}),e>=0?(r=65536*Math.floor(e/65536),t.high=r,t.low=e-r):(r=65536*Math.floor(-e/65536),t.high=-r,t.low=e+r),t};let oA={high:0,low:0};oT.fromCartesian=(e,t)=>{W.typeOf.object("cartesian",e),H(t)||(t=new oT);let r=t.high,n=t.low;return oT.encode(e.x,oA),r.x=oA.high,n.x=oA.low,oT.encode(e.y,oA),r.y=oA.high,n.y=oA.low,oT.encode(e.z,oA),r.z=oA.high,n.z=oA.low,t};let ob=new oT;oT.writeElements=(e,t,r)=>{W.defined("cartesianArray",t),W.typeOf.number("index",r),W.typeOf.number.greaterThanOrEquals("index",r,0),oT.fromCartesian(e,ob);let n=ob.high,i=ob.low;t[r]=n.x,t[r+1]=n.y,t[r+2]=n.z,t[r+3]=i.x,t[r+4]=i.y,t[r+5]=i.z};let ow={UNSIGNED_BYTE:iD.UNSIGNED_BYTE,UNSIGNED_SHORT:iD.UNSIGNED_SHORT,UNSIGNED_INT:iD.UNSIGNED_INT};ow.getSizeInBytes=e=>{switch(e){case ow.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case ow.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case ow.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT}throw new Y("indexDatatype is required and must be a valid IndexDatatype constant.")},ow.fromSizeInBytes=e=>{switch(e){case 2:return ow.UNSIGNED_SHORT;case 4:return ow.UNSIGNED_INT;case 1:return ow.UNSIGNED_BYTE;default:throw new Y("Size in bytes cannot be mapped to an IndexDatatype")}},ow.validate=e=>H(e)&&(e===ow.UNSIGNED_BYTE||e===ow.UNSIGNED_SHORT||e===ow.UNSIGNED_INT),ow.createTypedArray=(e,t)=>{if(!H(e))throw new Y("numberOfVertices is required.");return e>=K.SIXTY_FOUR_KILOBYTES?new Uint32Array(t):new Uint16Array(t)},ow.createTypedArrayFromArrayBuffer=(e,t,r,n)=>{if(!H(e))throw new Y("numberOfVertices is required.");if(!H(t))throw new Y("sourceArray is required.");if(!H(r))throw new Y("byteOffset is required.");return e>=K.SIXTY_FOUR_KILOBYTES?new Uint32Array(t,r,n):new Uint16Array(t,r,n)},ow.fromTypedArray=e=>{if(e instanceof Uint8Array)return ow.UNSIGNED_BYTE;if(e instanceof Uint16Array)return ow.UNSIGNED_SHORT;if(e instanceof Uint32Array)return ow.UNSIGNED_INT;throw new Y("array must be a Uint8Array, Uint16Array, or Uint32Array.")};let oR=Object.freeze(ow),oS={};function ox(e,t,r){let n=e+t;return K.sign(e)!==K.sign(t)&&Math.abs(n/Math.max(Math.abs(e),Math.abs(t)))<r?0:n}oS.computeDiscriminant=(e,t,r)=>{if("number"!=typeof e)throw new Y("a is a required number.");if("number"!=typeof t)throw new Y("b is a required number.");if("number"!=typeof r)throw new Y("c is a required number.");return t*t-4*e*r},oS.computeRealRoots=(e,t,r)=>{let n;if("number"!=typeof e)throw new Y("a is a required number.");if("number"!=typeof t)throw new Y("b is a required number.");if("number"!=typeof r)throw new Y("c is a required number.");if(0===e)return 0===t?[]:[-r/t];if(0===t){if(0===r)return[0,0];let t=Math.abs(r),i=Math.abs(e);if(t<i&&t/i<K.EPSILON14)return[0,0];if(t>i&&i/t<K.EPSILON14||(n=-r/e)<0)return[];let o=Math.sqrt(n);return[-o,o]}if(0===r)return(n=-t/e)<0?[n,0]:[0,n];let i=ox(t*t,-(4*e*r),K.EPSILON14);if(i<0)return[];let o=-.5*ox(t,K.sign(t)*Math.sqrt(i),K.EPSILON14);return t>0?[o/e,r/o]:[r/o,o/e]};let oN={};function oI(e,t,r,n){let i,o,a=t/3,s=r/3,l=e*s,u=a*n,c=a*a,f=s*s,h=e*s-c,p=e*n-a*s,d=a*n-f,m=4*h*d-p*p;if(m<0){let t,r,y;c*u>=l*f?(t=e,r=h,y=-2*a*h+e*p):(t=n,r=d,y=-n*p+2*s*d);let _=-(y<0?-1:1)*Math.abs(t)*Math.sqrt(-m),E=(o=-y+_)/2,O=E<0?-((-E)**(1/3)):E**(1/3),g=o===_?-O:-r/O;return(i=r<=0?O+g:-y/(O*O+g*g+r),c*u>=l*f)?[(i-a)/e]:[-n/(i+s)]}let y=Math.sqrt(m),_=Math.sqrt(3)/2,E=Math.abs(Math.atan2(e*y,-(-2*a*h+e*p))/3),O=Math.cos(E);o=(i=2*Math.sqrt(-h))*O;let g=i*(-O/2-_*Math.sin(E)),T=o+g>2*a?o-a:g-a,A=T/e;E=Math.abs(Math.atan2(n*y,-(-n*p+2*s*d))/3),o=(i=2*Math.sqrt(-d))*(O=Math.cos(E));let b=-n,w=o+(g=i*(-O/2-_*Math.sin(E)))<2*s?o+s:g+s,R=b/w,S=-T*w-e*b,x=(s*S-T*b*a)/(-a*S+e*w*s);if(A<=x)return A<=R?x<=R?[A,x,R]:[A,R,x]:[R,A,x];return A<=R?[x,A,R]:x<=R?[x,R,A]:[R,x,A]}oN.computeDiscriminant=(e,t,r,n)=>{if("number"!=typeof e)throw new Y("a is a required number.");if("number"!=typeof t)throw new Y("b is a required number.");if("number"!=typeof r)throw new Y("c is a required number.");if("number"!=typeof n)throw new Y("d is a required number.");let i=t*t,o=r*r;return 18*e*t*r*n+i*o-e*e*27*(n*n)-4*(e*o*r+i*t*n)},oN.computeRealRoots=(e,t,r,n)=>{let i,o;if("number"!=typeof e)throw new Y("a is a required number.");if("number"!=typeof t)throw new Y("b is a required number.");if("number"!=typeof r)throw new Y("c is a required number.");if("number"!=typeof n)throw new Y("d is a required number.");if(0===e)return oS.computeRealRoots(t,r,n);if(0===t){if(0===r){if(0===n)return[0,0,0];let t=(o=-n/e)<0?-((-o)**(1/3)):o**(1/3);return[t,t,t]}return 0===n?0===(i=oS.computeRealRoots(e,0,r)).Length?[0]:[i[0],0,i[1]]:oI(e,0,r,n)}if(0===r)return 0===n?(o=-t/e)<0?[o,0,0]:[0,0,o]:oI(e,t,0,n);if(0===n)return 0===(i=oS.computeRealRoots(e,t,r)).length?[0]:i[1]<=0?[i[0],i[1],0]:i[0]>=0?[0,i[0],i[1]]:[i[0],0,i[1]];return oI(e,t,r,n)};let oC={};function ov(e,t){t=ee.clone(t??ee.ZERO),ee.equals(t,ee.ZERO)||ee.normalize(t,t),this.origin=ee.clone(e??ee.ZERO),this.direction=t}oC.computeDiscriminant=(e,t,r,n,i)=>{if("number"!=typeof e)throw new Y("a is a required number.");if("number"!=typeof t)throw new Y("b is a required number.");if("number"!=typeof r)throw new Y("c is a required number.");if("number"!=typeof n)throw new Y("d is a required number.");if("number"!=typeof i)throw new Y("e is a required number.");let o=e*e,a=t*t,s=a*t,l=r*r,u=l*r,c=n*n,f=c*n,h=i*i;return a*l*c-4*s*f-4*e*u*c+18*e*t*r*f-27*o*c*c+o*e*256*(h*i)+i*(18*s*r*n-4*a*u+16*e*l*l-80*e*t*l*n-6*e*a*c+144*o*r*c)+h*(144*e*a*r-27*a*a-128*o*l-192*o*t*n)},oC.computeRealRoots=(e,t,r,n,i)=>{if("number"!=typeof e)throw new Y("a is a required number.");if("number"!=typeof t)throw new Y("b is a required number.");if("number"!=typeof r)throw new Y("c is a required number.");if("number"!=typeof n)throw new Y("d is a required number.");if("number"!=typeof i)throw new Y("e is a required number.");if(Math.abs(e)<K.EPSILON15)return oN.computeRealRoots(t,r,n,i);let o=t/e,a=r/e,s=n/e,l=i/e,u=+(o<0);switch(u+=a<0?u+1:u,u+=s<0?u+1:u,u+=l<0?u+1:u){case 0:case 3:case 4:case 6:case 7:case 9:case 10:case 12:case 13:case 14:case 15:return function(e,t,r,n){let i=e*e,o=t-3*i/8,a=r-t*e/2+i*e/8,s=n-r*e/4+t*i/16-3*i*i/256,l=oN.computeRealRoots(1,2*o,o*o-4*s,-a*a);if(l.length>0){let t=-e/4,r=l[l.length-1];if(Math.abs(r)<K.EPSILON14){let e=oS.computeRealRoots(1,o,s);if(2===e.length){let r,n=e[0],i=e[1];if(n>=0&&i>=0){let e=Math.sqrt(n),r=Math.sqrt(i);return[t-r,t-e,t+e,t+r]}if(n>=0&&i<0)return[t-(r=Math.sqrt(n)),t+r];if(n<0&&i>=0)return[t-(r=Math.sqrt(i)),t+r]}}else if(r>0){let e=Math.sqrt(r),n=oS.computeRealRoots(1,e,(o+r-a/e)/2),i=oS.computeRealRoots(1,-e,(o+r+a/e)/2);if(0!==n.length){if(n[0]+=t,n[1]+=t,0!==i.length){if(i[0]+=t,i[1]+=t,n[1]<=i[0])return[n[0],n[1],i[0],i[1]];if(i[1]<=n[0])return[i[0],i[1],n[0],n[1]];if(n[0]>=i[0]&&n[1]<=i[1])return[i[0],n[0],n[1],i[1]];else if(i[0]>=n[0]&&i[1]<=n[1])return[n[0],i[0],i[1],n[1]];else if(n[0]>i[0]&&n[0]<i[1])return[i[0],n[0],i[1],n[1]];return[n[0],i[0],n[1],i[1]]}return n}if(0!==i.length)return i[0]+=t,i[1]+=t,i}}return[]}(o,a,s,l);case 1:case 2:case 5:case 8:case 11:return function(e,t,r,n){let i=e*e,o=oN.computeRealRoots(1,-2*t,r*e+t*t-4*n,i*n-r*t*e+r*r);if(o.length>0){let a,s,l,u,c,f,h=o[0],p=t-h,d=p*p,m=e/2,y=p/2,_=d-4*n,E=d+4*Math.abs(n),O=i-4*h,g=i+4*Math.abs(h);if(h<0||_*g<O*E){let t=Math.sqrt(O);a=t/2,s=0===t?0:(e*y-r)/t}else{let t=Math.sqrt(_);a=0===t?0:(e*y-r)/t,s=t/2}0===m&&0===a?(l=0,u=0):K.sign(m)===K.sign(a)?u=h/(l=m+a):l=h/(u=m-a),0===y&&0===s?(c=0,f=0):K.sign(y)===K.sign(s)?f=n/(c=y+s):c=n/(f=y-s);let T=oS.computeRealRoots(1,l,c),A=oS.computeRealRoots(1,u,f);if(0!==T.length){if(0!==A.length){if(T[1]<=A[0])return[T[0],T[1],A[0],A[1]];if(A[1]<=T[0])return[A[0],A[1],T[0],T[1]];if(T[0]>=A[0]&&T[1]<=A[1])return[A[0],T[0],T[1],A[1]];else if(A[0]>=T[0]&&A[1]<=T[1])return[T[0],A[0],A[1],T[1]];else if(T[0]>A[0]&&T[0]<A[1])return[A[0],T[0],A[1],T[1]];return[T[0],A[0],T[1],A[1]]}return T}if(0!==A.length)return A}return[]}(o,a,s,l);default:return}},ov.clone=(e,t)=>{if(H(e))return H(t)?(t.origin=ee.clone(e.origin),t.direction=ee.clone(e.direction),t):new ov(e.origin,e.direction)},ov.getPoint=(e,t,r)=>(W.typeOf.object("ray",e),W.typeOf.number("t",t),H(r)||(r=new ee),r=ee.multiplyByScalar(e.direction,t,r),ee.add(e.origin,r,r));let oM={};oM.rayPlane=(e,t,r)=>{if(!H(e))throw new Y("ray is required.");if(!H(t))throw new Y("plane is required.");H(r)||(r=new ee);let n=e.origin,i=e.direction,o=t.normal,a=ee.dot(o,i);if(Math.abs(a)<K.EPSILON15)return;let s=(-t.distance-ee.dot(o,n))/a;if(!(s<0))return r=ee.multiplyByScalar(i,s,r),ee.add(n,r,r)};let oP=new ee,oL=new ee,oF=new ee,oD=new ee,oB=new ee;oM.rayTriangleParametric=(e,t,r,n,i)=>{let o,a,s,l,u;if(!H(e))throw new Y("ray is required.");if(!H(t))throw new Y("p0 is required.");if(!H(r))throw new Y("p1 is required.");if(!H(n))throw new Y("p2 is required.");i=i??!1;let c=e.origin,f=e.direction,h=ee.subtract(r,t,oP),p=ee.subtract(n,t,oL),d=ee.cross(f,p,oF),m=ee.dot(h,d);if(i){if(m<K.EPSILON6||(o=ee.subtract(c,t,oD),(s=ee.dot(o,d))<0||s>m)||(a=ee.cross(o,h,oB),(l=ee.dot(f,a))<0||s+l>m))return;u=ee.dot(p,a)/m}else{if(Math.abs(m)<K.EPSILON6)return;let e=1/m;if(o=ee.subtract(c,t,oD),(s=ee.dot(o,d)*e)<0||s>1||(a=ee.cross(o,h,oB),(l=ee.dot(f,a)*e)<0||s+l>1))return;u=ee.dot(p,a)*e}return u},oM.rayTriangle=(e,t,r,n,i,o)=>{let a=oM.rayTriangleParametric(e,t,r,n,i);if(H(a)&&!(a<0))return H(o)||(o=new ee),ee.multiplyByScalar(e.direction,a,o),ee.add(e.origin,o,o)};let oz=new ov;oM.lineSegmentTriangle=(e,t,r,n,i,o,a)=>{if(!H(e))throw new Y("v0 is required.");if(!H(t))throw new Y("v1 is required.");if(!H(r))throw new Y("p0 is required.");if(!H(n))throw new Y("p1 is required.");if(!H(i))throw new Y("p2 is required.");ee.clone(e,oz.origin),ee.subtract(t,e,oz.direction),ee.normalize(oz.direction,oz.direction);let s=oM.rayTriangleParametric(oz,r,n,i,o);if(!(!H(s)||s<0||s>ee.distance(e,t)))return H(a)||(a=new ee),ee.multiplyByScalar(oz.direction,s,a),ee.add(oz.origin,a,a)};let oU={root0:0,root1:0};function oj(e,t,r){H(r)||(r=new eL);let n=e.origin,i=e.direction,o=t.center,a=t.radius*t.radius,s=ee.subtract(n,o,oF),l=function(e,t,r,n){let i=t*t-4*e*r;if(i<0)return;if(i>0){let r=1/(2*e),o=Math.sqrt(i),a=(-t+o)*r,s=(-t-o)*r;return a<s?(n.root0=a,n.root1=s):(n.root0=s,n.root1=a),n}let o=-t/(2*e);if(0!==o)return n.root0=n.root1=o,n}(ee.dot(i,i),2*ee.dot(i,s),ee.magnitudeSquared(s)-a,oU);if(H(l))return r.start=l.root0,r.stop=l.root1,r}oM.raySphere=(e,t,r)=>{if(!H(e))throw new Y("ray is required.");if(!H(t))throw new Y("sphere is required.");if(H(r=oj(e,t,r))&&!(r.stop<0))return r.start=Math.max(r.start,0),r};let oq=new ov;oM.lineSegmentSphere=(e,t,r,n)=>{if(!H(e))throw new Y("p0 is required.");if(!H(t))throw new Y("p1 is required.");if(!H(r))throw new Y("sphere is required.");ee.clone(e,oq.origin);let i=ee.subtract(t,e,oq.direction),o=ee.magnitude(i);if(ee.normalize(i,i),H(n=oj(oq,r,n))&&!(n.stop<0)&&!(n.start>o))return n.start=Math.max(n.start,0),n.stop=Math.min(n.stop,o),n};let oG=new ee,oV=new ee;oM.rayEllipsoid=(e,t)=>{let r,n,i,o,a;if(!H(e))throw new Y("ray is required.");if(!H(t))throw new Y("ellipsoid is required.");let s=t.oneOverRadii,l=ee.multiplyComponents(s,e.origin,oG),u=ee.multiplyComponents(s,e.direction,oV),c=ee.magnitudeSquared(l),f=ee.dot(l,u);if(c>1){if(f>=0)return;let e=f*f;if(r=c-1,e<(i=(n=ee.magnitudeSquared(u))*r))return;if(e>i){o=f*f-i;let e=(a=-f+Math.sqrt(o))/n,t=r/a;return e<t?new eL(e,t):{start:t,stop:e}}let t=Math.sqrt(r/n);return new eL(t,t)}return c<1?(r=c-1,o=f*f-(i=(n=ee.magnitudeSquared(u))*r),new eL(0,(a=-f+Math.sqrt(o))/n)):f<0?new eL(0,-f/(n=ee.magnitudeSquared(u))):void 0};let ok=new eL,oH=new eL,oY=new eL;function oW(e,t,r,n,i){if(i.start=(r-e)/t,i.stop=(n-e)/t,i.stop<i.start){let e=i.stop;i.stop=i.start,i.start=e}return i}function oX(e,t,r){let n=e+t;return K.sign(e)!==K.sign(t)&&Math.abs(n/Math.max(Math.abs(e),Math.abs(t)))<r?0:n}oM.rayAxisAlignedBoundingBox=(e,t,r)=>{if(!H(e))throw new Y("ray is required.");if(!H(t))throw new Y("box is required.");H(r)||(r=new eL);let n=oW(e.origin.x,e.direction.x,t.minimum.x,t.maximum.x,ok),i=oW(e.origin.y,e.direction.y,t.minimum.y,t.maximum.y,oH),o=oW(e.origin.z,e.direction.z,t.minimum.z,t.maximum.z,oY);if((r.start=n.start>i.start?n.start:i.start,r.stop=n.stop<i.stop?n.stop:i.stop,!(n.start>i.stop)&&!(i.start>n.stop))&&!(r.start>o.stop)&&!(o.start>r.stop))return o.start>r.start&&(r.start=o.start),o.stop<r.stop&&(r.stop=o.stop),r},oM.quadraticVectorExpression=(e,t,r,n,i)=>{let o,a=n*n,s=i*i,l=(e[eF.COLUMN1ROW1]-e[eF.COLUMN2ROW2])*s,u=i*(n*oX(e[eF.COLUMN1ROW0],e[eF.COLUMN0ROW1],K.EPSILON15)+t.y),c=e[eF.COLUMN0ROW0]*a+e[eF.COLUMN2ROW2]*s+n*t.x+r,f=s*oX(e[eF.COLUMN2ROW1],e[eF.COLUMN1ROW2],K.EPSILON15),h=i*(n*oX(e[eF.COLUMN2ROW0],e[eF.COLUMN0ROW2])+t.z),p=[];if(0===h&&0===f){if(0===(o=oS.computeRealRoots(l,u,c)).length)return p;let e=o[0],t=Math.sqrt(Math.max(1-e*e,0));if(p.push(new ee(n,i*e,-(i*t))),p.push(new ee(n,i*e,i*t)),2===o.length){let e=o[1],t=Math.sqrt(Math.max(1-e*e,0));p.push(new ee(n,i*e,-(i*t))),p.push(new ee(n,i*e,i*t))}return p}let d=h*h,m=f*f,y=h*f,_=l*l+m,E=2*(u*l+y),O=2*c*l+u*u-m+d,g=2*(c*u-y),T=c*c-d;if(0===_&&0===E&&0===O&&0===g)return p;let A=(o=oC.computeRealRoots(_,E,O,g,T)).length;if(0===A)return p;for(let e=0;e<A;++e){let t=o[e],r=t*t,a=Math.sqrt(Math.max(1-r,0)),s=(K.sign(l)===K.sign(c)?oX(l*r+c,u*t,K.EPSILON12):K.sign(c)===K.sign(u*t)?oX(l*r,u*t+c,K.EPSILON12):oX(l*r+u*t,c,K.EPSILON12))*oX(f*t,h,K.EPSILON15);s<0?p.push(new ee(n,i*t,i*a)):s>0?p.push(new ee(n,i*t,-(i*a))):0!==a?(p.push(new ee(n,i*t,-(i*a))),p.push(new ee(n,i*t,i*a)),++e):p.push(new ee(n,i*t,i*a))}return p};let o$=new ee,oZ=new ee,oK=new ee,oJ=new ee,oQ=new ee,o0=new eF,o1=new eF,o3=new eF,o2=new eF,o4=new eF,o5=new eF,o6=new eF,o8=new ee,o7=new ee,o9=new ef;oM.grazingAltitudeLocation=function(e,t){let r,n;if(!H(e))throw new Y("ray is required.");if(!H(t))throw new Y("ellipsoid is required.");let i=e.origin,o=e.direction;if(!ee.equals(i,ee.ZERO)){let e=t.geodeticSurfaceNormal(i,o$);if(ee.dot(o,e)>=0)return i}let a=H(this.rayEllipsoid(e,t)),s=t.transformPositionToScaledSpace(o,o$),l=ee.normalize(s,s),u=ee.mostOrthogonalAxis(s,oJ),c=ee.normalize(ee.cross(u,l,oZ),oZ),f=ee.normalize(ee.cross(l,c,oK),oK);o0[0]=l.x,o0[1]=l.y,o0[2]=l.z,o0[3]=c.x,o0[4]=c.y,o0[5]=c.z,o0[6]=f.x,o0[7]=f.y,o0[8]=f.z;let h=eF.transpose(o0,o1),p=eF.fromScale(t.radii,o3),d=eF.fromScale(t.oneOverRadii,o2);o4[0]=0,o4[1]=-o.z,o4[2]=o.y,o4[3]=o.z,o4[4]=0,o4[5]=-o.x,o4[6]=-o.y,o4[7]=o.x,o4[8]=0;let m=eF.multiply(eF.multiply(h,d,o5),o4,o5),y=eF.multiply(eF.multiply(m,p,o6),o0,o6),_=eF.multiplyByVector(m,i,oQ),E=oM.quadraticVectorExpression(y,ee.negate(_,o$),0,0,1),O=E.length;if(O>0){let e=ee.clone(ee.ZERO,o7),s=-1/0;for(let t=0;t<O;++t){r=eF.multiplyByVector(p,eF.multiplyByVector(o0,E[t],o8),o8);let n=ee.normalize(ee.subtract(r,i,oJ),oJ),a=ee.dot(n,o);a>s&&(s=a,e=ee.clone(r,e))}let l=t.cartesianToCartographic(e,o9);return s=K.clamp(s,0,1),n=ee.magnitude(ee.subtract(e,i,oJ))*Math.sqrt(1-s*s),l.height=n=a?-n:n,t.cartographicToCartesian(l,new ee)}};let ae=new ee;function at(e,t){if(W.typeOf.object("normal",e),!K.equalsEpsilon(ee.magnitude(e),1,K.EPSILON6))throw new Y("normal must be normalized.");W.typeOf.number("distance",t),this.normal=ee.clone(e),this.distance=t}oM.lineSegmentPlane=(e,t,r,n)=>{if(!H(e))throw new Y("endPoint0 is required.");if(!H(t))throw new Y("endPoint1 is required.");if(!H(r))throw new Y("plane is required.");H(n)||(n=new ee);let i=ee.subtract(t,e,ae),o=r.normal,a=ee.dot(o,i);if(Math.abs(a)<K.EPSILON6)return;let s=ee.dot(o,e),l=-(r.distance+s)/a;if(!(l<0)&&!(l>1))return ee.multiplyByScalar(i,l,n),ee.add(e,n,n),n},oM.trianglePlaneIntersection=(e,t,r,n)=>{let i,o,a;if(!H(e)||!H(t)||!H(r)||!H(n))throw new Y("p0, p1, p2, and plane are required.");let s=n.normal,l=n.distance,u=ee.dot(s,e)+l<0,c=ee.dot(s,t)+l<0,f=ee.dot(s,r)+l<0;if((1==(a=0+ +!!u+ +!!c+ +!!f)||2===a)&&(i=new ee,o=new ee),1===a){if(u)return oM.lineSegmentPlane(e,t,n,i),oM.lineSegmentPlane(e,r,n,o),{positions:[e,t,r,i,o],indices:[0,3,4,1,2,4,1,4,3]};else if(c)return oM.lineSegmentPlane(t,r,n,i),oM.lineSegmentPlane(t,e,n,o),{positions:[e,t,r,i,o],indices:[1,3,4,2,0,4,2,4,3]};else if(f)return oM.lineSegmentPlane(r,e,n,i),oM.lineSegmentPlane(r,t,n,o),{positions:[e,t,r,i,o],indices:[2,3,4,0,1,4,0,4,3]}}else if(2===a){if(!u)return oM.lineSegmentPlane(t,e,n,i),oM.lineSegmentPlane(r,e,n,o),{positions:[e,t,r,i,o],indices:[1,2,4,1,4,3,0,3,4]};else if(!c)return oM.lineSegmentPlane(r,t,n,i),oM.lineSegmentPlane(e,t,n,o),{positions:[e,t,r,i,o],indices:[2,0,4,2,4,3,1,3,4]};else if(!f)return oM.lineSegmentPlane(e,r,n,i),oM.lineSegmentPlane(t,r,n,o),{positions:[e,t,r,i,o],indices:[0,1,4,0,4,3,2,3,4]}}},at.fromPointNormal=(e,t,r)=>{if(W.typeOf.object("point",e),W.typeOf.object("normal",t),!K.equalsEpsilon(ee.magnitude(t),1,K.EPSILON6))throw new Y("normal must be normalized.");let n=-ee.dot(t,e);return H(r)?(ee.clone(t,r.normal),r.distance=n,r):new at(t,n)};let ar=new ee;at.fromCartesian4=(e,t)=>{W.typeOf.object("coefficients",e);let r=ee.fromCartesian4(e,ar),n=e.w;if(!K.equalsEpsilon(ee.magnitude(r),1,K.EPSILON6))throw new Y("normal must be normalized.");return H(t)?(ee.clone(r,t.normal),t.distance=n,t):new at(r,n)},at.getPointDistance=(e,t)=>(W.typeOf.object("plane",e),W.typeOf.object("point",t),ee.dot(e.normal,t)+e.distance);let an=new ee;at.projectPointOntoPlane=(e,t,r)=>{W.typeOf.object("plane",e),W.typeOf.object("point",t),H(r)||(r=new ee);let n=at.getPointDistance(e,t),i=ee.multiplyByScalar(e.normal,n,an);return ee.subtract(t,i,r)};let ai=new e3,ao=new eW,aa=new ee;at.transform=(e,t,r)=>{W.typeOf.object("plane",e),W.typeOf.object("transform",t);let n=e.normal,i=e.distance,o=e3.inverseTranspose(t,ai),a=eW.fromElements(n.x,n.y,n.z,i,ao);a=e3.multiplyByVector(o,a,a);let s=ee.fromCartesian4(a,aa);return a=eW.divideByScalar(a,ee.magnitude(s),a),at.fromCartesian4(a,r)},at.clone=(e,t)=>(W.typeOf.object("plane",e),H(t))?(ee.clone(e.normal,t.normal),t.distance=e.distance,t):new at(e.normal,e.distance),at.equals=(e,t)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),e.distance===t.distance&&ee.equals(e.normal,t.normal)),at.ORIGIN_XY_PLANE=Object.freeze(new at(ee.UNIT_Z,0)),at.ORIGIN_YZ_PLANE=Object.freeze(new at(ee.UNIT_X,0)),at.ORIGIN_ZX_PLANE=Object.freeze(new at(ee.UNIT_Y,0));let as={};as.calculateACMR=e=>{let t=(e=e??e0.EMPTY_OBJECT).indices,r=e.maximumIndex,n=e.cacheSize??24;if(!H(t))throw new Y("indices is required.");let i=t.length;if(i<3||i%3!=0)throw new Y("indices length must be a multiple of three.");if(r<=0)throw new Y("maximumIndex must be greater than zero.");if(n<3)throw new Y("cacheSize must be greater than two.");if(!H(r)){r=0;let e=0,n=t[0];for(;e<i;)n>r&&(r=n),n=t[++e]}let o=[];for(let e=0;e<r+1;e++)o[e]=0;let a=n+1;for(let e=0;e<i;++e)a-o[t[e]]>n&&(o[t[e]]=a,++a);return(a-n+1)/(i/3)},as.tipsify=e=>{let t,r,n,i,o,a,s=(e=e??e0.EMPTY_OBJECT).indices,l=e.maximumIndex,u=e.cacheSize??24;if(!H(s))throw new Y("indices is required.");let c=s.length;if(c<3||c%3!=0)throw new Y("indices length must be a multiple of three.");if(l<=0)throw new Y("maximumIndex must be greater than zero.");if(u<3)throw new Y("cacheSize must be greater than two.");let f=0,h=0,p=s[0];if(H(l))f=l+1;else{for(;h<c;)p>f&&(f=p),p=s[++h];if(-1===f)return 0;++f}let d=[];for(r=0;r<f;r++)d[r]={numLiveTriangles:0,timeStamp:0,vertexTriangles:[]};h=0;let m=0;for(;h<c;)d[s[h]].vertexTriangles.push(m),++d[s[h]].numLiveTriangles,d[s[h+1]].vertexTriangles.push(m),++d[s[h+1]].numLiveTriangles,d[s[h+2]].vertexTriangles.push(m),++d[s[h+2]].numLiveTriangles,++m,h+=3;let y=0,_=u+1;t=1;let E=[],O=[],g=0,T=[],A=c/3,b=[];for(r=0;r<A;r++)b[r]=!1;for(;-1!==y;){E=[],a=(i=d[y]).vertexTriangles.length;for(let e=0;e<a;++e)if(!b[m=i.vertexTriangles[e]]){b[m]=!0,h=m+m+m;for(let e=0;e<3;++e)o=s[h],E.push(o),O.push(o),T[g]=o,++g,n=d[o],--n.numLiveTriangles,_-n.timeStamp>u&&(n.timeStamp=_,++_),++h}y=function(e,r,n,i,o,a,s){let l,u=-1,c=-1,f=0;for(;f<n.length;){let e=n[f];i[e].numLiveTriangles&&(l=0,o-i[e].timeStamp+2*i[e].numLiveTriangles<=r&&(l=o-i[e].timeStamp),(l>c||-1===c)&&(c=l,u=e)),++f}if(-1===u){for(;a.length>=1;){let e=a[a.length-1];if(a.splice(a.length-1,1),i[e].numLiveTriangles>0)return e}for(;t<s;){if(i[t].numLiveTriangles>0)return++t-1;++t}return -1}return u}(0,u,E,d,_,O,f)}return T};let al={};function au(e,t,r,n,i){e[t++]=r,e[t++]=n,e[t++]=n,e[t++]=i,e[t++]=i,e[t]=r}function ac(e){let t={};for(let r in e)if(Object.hasOwn(e,r)&&H(e[r])&&H(e[r].values)){let n=e[r];t[r]=new i6({componentDatatype:n.componentDatatype,componentsPerAttribute:n.componentsPerAttribute,normalize:n.normalize,values:[]})}return t}al.toWireframe=e=>{if(!H(e))throw new Y("geometry is required.");let t=e.indices;if(H(t)){switch(e.primitiveType){case iX.TRIANGLES:e.indices=function(e){let t=e.length,r=oR.createTypedArray(t,t/3*6),n=0;for(let i=0;i<t;i+=3,n+=6)au(r,n,e[i],e[i+1],e[i+2]);return r}(t);break;case iX.TRIANGLE_STRIP:e.indices=function(e){let t=e.length;if(t>=3){let r=oR.createTypedArray(t,(t-2)*6);au(r,0,e[0],e[1],e[2]);let n=6;for(let i=3;i<t;++i,n+=6)au(r,n,e[i-1],e[i],e[i-2]);return r}return new Uint16Array}(t);break;case iX.TRIANGLE_FAN:e.indices=function(e){if(e.length>0){let t=e.length-1,r=oR.createTypedArray(t,(t-1)*6),n=e[0],i=0;for(let o=1;o<t;++o,i+=6)au(r,i,n,e[o],e[o+1]);return r}return new Uint16Array}(t);break;default:throw new Y("geometry.primitiveType must be TRIANGLES, TRIANGLE_STRIP, or TRIANGLE_FAN.")}e.primitiveType=iX.LINES}return e},al.createLineSegmentsForVectors=(e,t,r)=>{let n;if(t=t??"normal",!H(e))throw new Y("geometry is required.");if(!H(e.attributes.position))throw new Y("geometry.attributes.position is required.");if(!H(e.attributes[t]))throw new Y(`geometry.attributes must have an attribute with the same name as the attributeName parameter, ${t}.`);r=r??1e4;let i=e.attributes.position.values,o=e.attributes[t].values,a=i.length,s=new Float64Array(2*a),l=0;for(let e=0;e<a;e+=3)s[l++]=i[e],s[l++]=i[e+1],s[l++]=i[e+2],s[l++]=i[e]+o[e]*r,s[l++]=i[e+1]+o[e+1]*r,s[l++]=i[e+2]+o[e+2]*r;let u=e.boundingSphere;return H(u)&&(n=new n5(u.center,u.radius+r)),new i$({attributes:{position:new i6({componentDatatype:iz.DOUBLE,componentsPerAttribute:3,values:s})},primitiveType:iX.LINES,boundingSphere:n})},al.createAttributeLocations=e=>{let t;if(!H(e))throw new Y("geometry is required.");let r=["position","positionHigh","positionLow","position3DHigh","position3DLow","position2DHigh","position2DLow","pickColor","normal","st","tangent","bitangent","extrudeDirection","compressedAttributes"],n=e.attributes,i={},o=0,a=r.length;for(t=0;t<a;++t){let e=r[t];H(n[e])&&(i[e]=o++)}for(let e in n)Object.hasOwn(n,e)&&!H(i[e])&&(i[e]=o++);return i},al.reorderForPreVertexCache=e=>{if(!H(e))throw new Y("geometry is required.");let t=i$.computeNumberOfVertices(e),r=e.indices;if(H(r)){let n,i=new Int32Array(t);for(let e=0;e<t;e++)i[e]=-1;let o=r.length,a=oR.createTypedArray(t,o),s=0,l=0,u=0;for(;s<o;)-1!==(n=i[r[s]])?a[l]=n:(i[n=r[s]]=u,a[l]=u,++u),++s,++l;e.indices=a;let c=e.attributes;for(let e in c)if(Object.hasOwn(c,e)&&H(c[e])&&H(c[e].values)){let r=c[e],n=r.values,o=0,a=r.componentsPerAttribute,s=iz.createTypedArray(r.componentDatatype,u*a);for(;o<t;){let e=i[o];if(-1!==e)for(let t=0;t<a;t++)s[a*e+t]=n[a*o+t];++o}r.values=s}}return e},al.reorderForPostVertexCache=(e,t)=>{if(!H(e))throw new Y("geometry is required.");let r=e.indices;if(e.primitiveType===iX.TRIANGLES&&H(r)){let n=r.length,i=0;for(let e=0;e<n;e++)r[e]>i&&(i=r[e]);e.indices=as.tipsify({indices:r,maximumIndex:i,cacheSize:t})}return e},al.fitToUnsignedShortIndices=e=>{if(!H(e))throw new Y("geometry is required.");if(H(e.indices)&&e.primitiveType!==iX.TRIANGLES&&e.primitiveType!==iX.LINES&&e.primitiveType!==iX.POINTS)throw new Y("geometry.primitiveType must equal to PrimitiveType.TRIANGLES, PrimitiveType.LINES, or PrimitiveType.POINTS.");let t=[],r=i$.computeNumberOfVertices(e);if(H(e.indices)&&r>=K.SIXTY_FOUR_KILOBYTES){let r,o=[],a=[],s=0,l=ac(e.attributes),u=e.indices,c=u.length;e.primitiveType===iX.TRIANGLES?r=3:e.primitiveType===iX.LINES?r=2:e.primitiveType===iX.POINTS&&(r=1);for(let f=0;f<c;f+=r){for(let t=0;t<r;++t){let r=u[f+t],c=o[r];if(!H(c)){c=s++,o[r]=c;var n=l,i=e.attributes;for(let e in i)if(Object.hasOwn(i,e)&&H(i[e])&&H(i[e].values)){let t=i[e];for(let i=0;i<t.componentsPerAttribute;++i)n[e].values.push(t.values[r*t.componentsPerAttribute+i])}}a.push(c)}s+r>=K.SIXTY_FOUR_KILOBYTES&&(t.push(new i$({attributes:l,indices:a,primitiveType:e.primitiveType,boundingSphere:e.boundingSphere,boundingSphereCV:e.boundingSphereCV})),o=[],a=[],s=0,l=ac(e.attributes))}0!==a.length&&t.push(new i$({attributes:l,indices:a,primitiveType:e.primitiveType,boundingSphere:e.boundingSphere,boundingSphereCV:e.boundingSphereCV}))}else t.push(e);return t};let af=new ee,ah=new ef;al.projectTo2D=(e,t,r,n,i)=>{if(!H(e))throw new Y("geometry is required.");if(!H(t))throw new Y("attributeName is required.");if(!H(r))throw new Y("attributeName3D is required.");if(!H(n))throw new Y("attributeName2D is required.");if(!H(e.attributes[t]))throw new Y(`geometry must have attribute matching the attributeName argument: ${t}.`);if(e.attributes[t].componentDatatype!==iz.DOUBLE)throw new Y("The attribute componentDatatype must be ComponentDatatype.DOUBLE.");let o=e.attributes[t],a=(i=H(i)?i:new eM).ellipsoid,s=o.values,l=new Float64Array(s.length),u=0;for(let e=0;e<s.length;e+=3){let t=ee.fromArray(s,e,af),r=a.cartesianToCartographic(t,ah);if(!H(r))throw new Y(`Could not project point (${t.x}, ${t.y}, ${t.z}) to 2D.`);let n=i.project(r,af);l[u++]=n.x,l[u++]=n.y,l[u++]=n.z}return e.attributes[r]=o,e.attributes[n]=new i6({componentDatatype:iz.DOUBLE,componentsPerAttribute:3,values:l}),delete e.attributes[t],e};let ap={high:0,low:0};al.encodeAttribute=(e,t,r,n)=>{if(!H(e))throw new Y("geometry is required.");if(!H(t))throw new Y("attributeName is required.");if(!H(r))throw new Y("attributeHighName is required.");if(!H(n))throw new Y("attributeLowName is required.");if(!H(e.attributes[t]))throw new Y(`geometry must have attribute matching the attributeName argument: ${t}.`);if(e.attributes[t].componentDatatype!==iz.DOUBLE)throw new Y("The attribute componentDatatype must be ComponentDatatype.DOUBLE.");let i=e.attributes[t],o=i.values,a=o.length,s=new Float32Array(a),l=new Float32Array(a);for(let e=0;e<a;++e)oT.encode(o[e],ap),s[e]=ap.high,l[e]=ap.low;let u=i.componentsPerAttribute;return e.attributes[r]=new i6({componentDatatype:iz.FLOAT,componentsPerAttribute:u,values:s}),e.attributes[n]=new i6({componentDatatype:iz.FLOAT,componentsPerAttribute:u,values:l}),delete e.attributes[t],e};let ad=new ee;function am(e,t){if(H(t)){let r=t.values,n=r.length;for(let t=0;t<n;t+=3)ee.unpack(r,t,ad),e3.multiplyByPoint(e,ad,ad),ee.pack(ad,r,t)}}function ay(e,t){if(H(t)){let r=t.values,n=r.length;for(let t=0;t<n;t+=3)ee.unpack(r,t,ad),eF.multiplyByVector(e,ad,ad),ad=ee.normalize(ad,ad),ee.pack(ad,r,t)}}let a_=new e3,aE=new eF;al.transformToWorldCoordinates=e=>{if(!H(e))throw new Y("instance is required.");let t=e.modelMatrix;if(e3.equals(t,e3.IDENTITY))return e;let r=e.geometry.attributes;am(t,r.position),am(t,r.prevPosition),am(t,r.nextPosition),(H(r.normal)||H(r.tangent)||H(r.bitangent))&&(e3.inverse(t,a_),e3.transpose(a_,a_),e3.getMatrix3(a_,aE),ay(aE,r.normal),ay(aE,r.tangent),ay(aE,r.bitangent));let n=e.geometry.boundingSphere;return H(n)&&(e.geometry.boundingSphere=n5.transform(n,t,n)),e.modelMatrix=e3.clone(e3.IDENTITY),e};let aO=new ee;function ag(e,t){let r,n,i,o,a,s,l,u,c,f=e.length,h=e[0].modelMatrix,p=H(e[0][t].indices),d=e[0][t].primitiveType;for(n=1;n<f;++n){if(!e3.equals(e[n].modelMatrix,h))throw new Y("All instances must have the same modelMatrix.");if(H(e[n][t].indices)!==p)throw new Y("All instance geometries must have an indices or not have one.");if(e[n][t].primitiveType!==d)throw new Y("All instance geometries must have the same primitiveType.")}let m=function(e,t){let r,n=e.length,i={},o=e[0][t].attributes;for(r in o)if(Object.hasOwn(o,r)&&H(o[r])&&H(o[r].values)){let a=o[r],s=a.values.length,l=!0;for(let i=1;i<n;++i){let n=e[i][t].attributes[r];if(!H(n)||a.componentDatatype!==n.componentDatatype||a.componentsPerAttribute!==n.componentsPerAttribute||a.normalize!==n.normalize){l=!1;break}s+=n.values.length}l&&(i[r]=new i6({componentDatatype:a.componentDatatype,componentsPerAttribute:a.componentsPerAttribute,normalize:a.normalize,values:iz.createTypedArray(a.componentDatatype,s)}))}return i}(e,t);for(r in m)if(Object.hasOwn(m,r))for(n=0,a=m[r].values,o=0;n<f;++n)for(i=0,l=(s=e[n][t].attributes[r].values).length;i<l;++i)a[o++]=s[i];if(p){let r=0;for(n=0;n<f;++n)r+=e[n][t].indices.length;let i=i$.computeNumberOfVertices(new i$({attributes:m,primitiveType:iX.POINTS})),a=oR.createTypedArray(i,r),s=0,l=0;for(n=0;n<f;++n){let r=e[n][t].indices,i=r.length;for(o=0;o<i;++o)a[s++]=l+r[o];l+=i$.computeNumberOfVertices(e[n][t])}u=a}let y=new ee,_=0;for(n=0;n<f;++n){if(!H(c=e[n][t].boundingSphere)){y=void 0;break}ee.add(c.center,y,y)}if(H(y))for(ee.divideByScalar(y,f,y),n=0;n<f;++n){c=e[n][t].boundingSphere;let r=ee.magnitude(ee.subtract(c.center,y,aO))+c.radius;r>_&&(_=r)}return new i$({attributes:m,indices:u,primitiveType:d,boundingSphere:H(y)?new n5(y,_):void 0})}al.combineInstances=e=>{if(!H(e)||e.length<1)throw new Y("instances is required and must have length greater than zero.");let t=[],r=[],n=e.length;for(let i=0;i<n;++i){let n=e[i];H(n.geometry)?t.push(n):H(n.westHemisphereGeometry)&&H(n.eastHemisphereGeometry)&&r.push(n)}let i=[];return t.length>0&&i.push(ag(t,"geometry")),r.length>0&&(i.push(ag(r,"westHemisphereGeometry")),i.push(ag(r,"eastHemisphereGeometry"))),i};let aT=new ee,aA=new ee,ab=new ee,aw=new ee;al.computeNormal=e=>{let t,r;if(!H(e))throw new Y("geometry is required.");if(!H(e.attributes.position)||!H(e.attributes.position.values))throw new Y("geometry.attributes.position.values is required.");if(!H(e.indices))throw new Y("geometry.indices is required.");if(e.indices.length<2||e.indices.length%3!=0)throw new Y("geometry.indices length must be greater than 0 and be a multiple of 3.");if(e.primitiveType!==iX.TRIANGLES)throw new Y("geometry.primitiveType must be PrimitiveType.TRIANGLES.");let n=e.indices,i=e.attributes,o=i.position.values,a=i.position.values.length/3,s=n.length,l=Array(a),u=Array(s/3),c=Array(s);for(t=0;t<a;t++)l[t]={indexOffset:0,count:0,currentCount:0};let f=0;for(t=0;t<s;t+=3){let e=n[t],r=n[t+1],i=n[t+2],a=3*e,s=3*r,c=3*i;aA.x=o[a],aA.y=o[a+1],aA.z=o[a+2],ab.x=o[s],ab.y=o[s+1],ab.z=o[s+2],aw.x=o[c],aw.y=o[c+1],aw.z=o[c+2],l[e].count++,l[r].count++,l[i].count++,ee.subtract(ab,aA,ab),ee.subtract(aw,aA,aw),u[f]=ee.cross(ab,aw,new ee),f++}let h=0;for(t=0;t<a;t++)l[t].indexOffset+=h,h+=l[t].count;for(t=0,f=0;t<s;t+=3){let e=(r=l[n[t]]).indexOffset+r.currentCount;c[e]=f,r.currentCount++,c[e=(r=l[n[t+1]]).indexOffset+r.currentCount]=f,r.currentCount++,c[e=(r=l[n[t+2]]).indexOffset+r.currentCount]=f,r.currentCount++,f++}let p=new Float32Array(3*a);for(t=0;t<a;t++){let e=3*t;if(r=l[t],ee.clone(ee.ZERO,aT),r.count>0){for(f=0;f<r.count;f++)ee.add(aT,u[c[r.indexOffset+f]],aT);ee.equalsEpsilon(ee.ZERO,aT,K.EPSILON10)&&ee.clone(u[c[r.indexOffset]],aT)}ee.equalsEpsilon(ee.ZERO,aT,K.EPSILON10)&&(aT.z=1),ee.normalize(aT,aT),p[e]=aT.x,p[e+1]=aT.y,p[e+2]=aT.z}return e.attributes.normal=new i6({componentDatatype:iz.FLOAT,componentsPerAttribute:3,values:p}),e};let aR=new ee,aS=new ee,ax=new ee;al.computeTangentAndBitangent=e=>{let t,r,n,i;if(!H(e))throw new Y("geometry is required.");let o=e.attributes,a=e.indices;if(!H(o.position)||!H(o.position.values))throw new Y("geometry.attributes.position.values is required.");if(!H(o.normal)||!H(o.normal.values))throw new Y("geometry.attributes.normal.values is required.");if(!H(o.st)||!H(o.st.values))throw new Y("geometry.attributes.st.values is required.");if(!H(a))throw new Y("geometry.indices is required.");if(a.length<2||a.length%3!=0)throw new Y("geometry.indices length must be greater than 0 and be a multiple of 3.");if(e.primitiveType!==iX.TRIANGLES)throw new Y("geometry.primitiveType must be PrimitiveType.TRIANGLES.");let s=e.attributes.position.values,l=e.attributes.normal.values,u=e.attributes.st.values,c=e.attributes.position.values.length/3,f=a.length,h=Array(3*c);for(t=0;t<h.length;t++)h[t]=0;for(t=0;t<f;t+=3){let e=a[t],o=a[t+1],l=a[t+2];r=3*e,n=3*o,i=3*l;let c=2*e,f=2*o,p=2*l,d=s[r],m=s[r+1],y=s[r+2],_=u[c],E=u[c+1],O=u[f+1]-E,g=u[p+1]-E,T=1/((u[f]-_)*g-(u[p]-_)*O),A=(g*(s[n]-d)-O*(s[i]-d))*T,b=(g*(s[n+1]-m)-O*(s[i+1]-m))*T,w=(g*(s[n+2]-y)-O*(s[i+2]-y))*T;h[r]+=A,h[r+1]+=b,h[r+2]+=w,h[n]+=A,h[n+1]+=b,h[n+2]+=w,h[i]+=A,h[i+1]+=b,h[i+2]+=w}let p=new Float32Array(3*c),d=new Float32Array(3*c);for(t=0;t<c;t++){n=(r=3*t)+1,i=r+2;let e=ee.fromArray(l,r,aR),o=ee.fromArray(h,r,ax),a=ee.dot(e,o);ee.multiplyByScalar(e,a,aS),ee.normalize(ee.subtract(o,aS,o),o),p[r]=o.x,p[n]=o.y,p[i]=o.z,ee.normalize(ee.cross(e,o,o),o),d[r]=o.x,d[n]=o.y,d[i]=o.z}return e.attributes.tangent=new i6({componentDatatype:iz.FLOAT,componentsPerAttribute:3,values:p}),e.attributes.bitangent=new i6({componentDatatype:iz.FLOAT,componentsPerAttribute:3,values:d}),e};let aN=new em,aI=new ee,aC=new ee,av=new ee,aM=new em;function aP(e,t){Math.abs(e.y)<K.EPSILON6&&(t?e.y=-K.EPSILON6:e.y=K.EPSILON6)}al.compressVertices=e=>{let t,r,n,i,o,a;if(!H(e))throw new Y("geometry is required.");let s=e.attributes.extrudeDirection;if(H(s)){let n=s.values,i=new Float32Array(2*(r=n.length/3)),o=0;for(t=0;t<r;++t){if(ee.fromArray(n,3*t,aI),ee.equals(aI,ee.ZERO)){o+=2;continue}aM=of.octEncodeInRange(aI,65535,aM),i[o++]=aM.x,i[o++]=aM.y}return e.attributes.compressedAttributes=new i6({componentDatatype:iz.FLOAT,componentsPerAttribute:2,values:i}),delete e.attributes.extrudeDirection,e}let l=e.attributes.normal,u=e.attributes.st,c=H(l),f=H(u);if(!c&&!f)return e;let h=e.attributes.tangent,p=e.attributes.bitangent,d=H(h),m=H(p);c&&(n=l.values),f&&(i=u.values),d&&(o=h.values),m&&(a=p.values);let y=r=(c?n.length:i.length)/(c?3:2),_=f&&c?2:1;_+=d||m?1:0;let E=new Float32Array(y*=_),O=0;for(t=0;t<r;++t){f&&(em.fromArray(i,2*t,aN),E[O++]=of.compressTextureCoordinates(aN));let e=3*t;c&&H(o)&&H(a)?(ee.fromArray(n,e,aI),ee.fromArray(o,e,aC),ee.fromArray(a,e,av),of.octPack(aI,aC,av,aN),E[O++]=aN.x,E[O++]=aN.y):(c&&(ee.fromArray(n,e,aI),E[O++]=of.octEncodeFloat(aI)),d&&(ee.fromArray(o,e,aI),E[O++]=of.octEncodeFloat(aI)),m&&(ee.fromArray(a,e,aI),E[O++]=of.octEncodeFloat(aI)))}return e.attributes.compressedAttributes=new i6({componentDatatype:iz.FLOAT,componentsPerAttribute:_,values:E}),c&&delete e.attributes.normal,f&&delete e.attributes.st,m&&delete e.attributes.bitangent,d&&delete e.attributes.tangent,e};let aL=new ee;function aF(e,t,r,n){ee.add(e,ee.multiplyByScalar(ee.subtract(t,e,aL),e.y/(e.y-t.y),aL),r),ee.clone(r,n),aP(r,!0),aP(n,!1)}let aD=new ee,aB=new ee,az=new ee,aU=new ee,aj={positions:Array(7),indices:Array(9)};function aq(e,t){let r=e.attributes;if(0===r.position.values.length)return;for(let e in r)if(Object.hasOwn(r,e)&&H(r[e])&&H(r[e].values)){let t=r[e];t.values=iz.createTypedArray(t.componentDatatype,t.values)}let n=i$.computeNumberOfVertices(e);return e.indices=oR.createTypedArray(n,e.indices),t&&(e.boundingSphere=n5.fromVertices(r.position.values)),e}function aG(e){let t=e.attributes,r={};for(let e in t)if(Object.hasOwn(t,e)&&H(t[e])&&H(t[e].values)){let n=t[e];r[e]=new i6({componentDatatype:n.componentDatatype,componentsPerAttribute:n.componentsPerAttribute,normalize:n.normalize,values:[]})}return new i$({attributes:r,indices:[],primitiveType:e.primitiveType})}function aV(e,t,r){let n=H(e.geometry.boundingSphere);t=aq(t,n),H(r=aq(r,n))&&!H(t)?e.geometry=r:!H(r)&&H(t)?e.geometry=t:(e.westHemisphereGeometry=t,e.eastHemisphereGeometry=r,e.geometry=void 0)}function ak(e,t){let r=new e,n=new e,i=new e;return(o,a,s,l,u,c,f,h)=>{let p=e.fromArray(u,o*t,r),d=e.fromArray(u,a*t,n),m=e.fromArray(u,s*t,i);e.multiplyByScalar(p,l.x,p),e.multiplyByScalar(d,l.y,d),e.multiplyByScalar(m,l.z,m);let y=e.add(p,d,p);e.add(y,m,y),h&&e.normalize(y,y),e.pack(y,c,f*t)}}let aH=ak(eW,4),aY=ak(ee,3),aW=ak(em,2),aX=new ee,a$=new ee,aZ=new ee,aK=new ee;function aJ(e,t,r,n,i,o,a,s,l,u,c,f,h,p,d,m){if(!H(o)&&!H(a)&&!H(s)&&!H(l)&&!H(u)&&0===p)return;let y=og(n,ee.fromArray(i,3*e,aX),ee.fromArray(i,3*t,a$),ee.fromArray(i,3*r,aZ),aK);if(H(y)){var _;let n,i,E;if(H(o)&&aY(e,t,r,y,o,f.normal.values,m,!0),H(u)){let n,i=ee.fromArray(u,3*e,aX),o=ee.fromArray(u,3*t,a$),a=ee.fromArray(u,3*r,aZ);ee.multiplyByScalar(i,y.x,i),ee.multiplyByScalar(o,y.y,o),ee.multiplyByScalar(a,y.z,a),ee.equals(i,ee.ZERO)&&ee.equals(o,ee.ZERO)&&ee.equals(a,ee.ZERO)?((n=aX).x=0,n.y=0,n.z=0):(n=ee.add(i,o,i),ee.add(n,a,n),ee.normalize(n,n)),ee.pack(n,f.extrudeDirection.values,3*m)}if(H(c)&&(_=f.applyOffset.values,n=c[e]*y.x,i=c[t]*y.y,E=c[r]*y.z,_[m]=+(n+i+E>K.EPSILON6)),H(a)&&aY(e,t,r,y,a,f.tangent.values,m,!0),H(s)&&aY(e,t,r,y,s,f.bitangent.values,m,!0),H(l)&&aW(e,t,r,y,l,f.st.values,m),p>0)for(let n=0;n<p;n++){let i=h[n];!function(e,t,r,n,i,o,a){let s=o.componentsPerAttribute,l=o.values,u=a.values;switch(s){case 4:aH(e,t,r,n,l,u,i,!1);break;case 3:aY(e,t,r,n,l,u,i,!1);break;case 2:aW(e,t,r,n,l,u,i,!1);break;default:u[i]=l[e]*n.x+l[t]*n.y+l[r]*n.z}}(e,t,r,y,m,d[i],f[i])}}}function aQ(e,t,r,n,i,o){let a=e.position.values.length/3;if(-1!==i){let s=n[i],l=r[s];return -1===l?(r[s]=a,e.position.values.push(o.x,o.y,o.z),t.push(a),a):(t.push(l),l)}return e.position.values.push(o.x,o.y,o.z),t.push(a),a}let a0={position:!0,normal:!0,bitangent:!0,tangent:!0,st:!0,extrudeDirection:!0,applyOffset:!0};function a1(e){let t,r,n,i,o,a=e.geometry,s=a.attributes,l=s.position.values,u=H(s.normal)?s.normal.values:void 0,c=H(s.bitangent)?s.bitangent.values:void 0,f=H(s.tangent)?s.tangent.values:void 0,h=H(s.st)?s.st.values:void 0,p=H(s.extrudeDirection)?s.extrudeDirection.values:void 0,d=H(s.applyOffset)?s.applyOffset.values:void 0,m=a.indices,y=[];for(let e in s)Object.hasOwn(s,e)&&!a0[e]&&H(s[e])&&y.push(e);let _=y.length,E=aG(a),O=aG(a),g=[];g.length=l.length/3;let T=[];for(o=0,T.length=l.length/3;o<g.length;++o)g[o]=-1,T[o]=-1;let A=m.length;for(o=0;o<A;o+=3){let e=m[o],a=m[o+1],A=m[o+2],b=ee.fromArray(l,3*e),w=ee.fromArray(l,3*a),R=ee.fromArray(l,3*A),S=function(e,t,r){let n;if(e.x>=0||t.x>=0||r.x>=0)return;!function(e,t,r){if(0!==e.y&&0!==t.y&&0!==r.y){aP(e,e.y<0),aP(t,t.y<0),aP(r,r.y<0);return}let n=Math.abs(e.y),i=Math.abs(t.y),o=Math.abs(r.y),a=(n>i?n>o?K.sign(e.y):K.sign(r.y):i>o?K.sign(t.y):K.sign(r.y))<0;aP(e,a),aP(t,a),aP(r,a)}(e,t,r);let i=e.y<0,o=t.y<0,a=r.y<0;n=0+ +!!i+ +!!o+ +!!a;let s=aj.indices;1===n?(s[1]=3,s[2]=4,s[5]=6,s[7]=6,s[8]=5,i?(aF(e,t,aD,az),aF(e,r,aB,aU),s[0]=0,s[3]=1,s[4]=2,s[6]=1):o?(aF(t,r,aD,az),aF(t,e,aB,aU),s[0]=1,s[3]=2,s[4]=0,s[6]=2):a&&(aF(r,e,aD,az),aF(r,t,aB,aU),s[0]=2,s[3]=0,s[4]=1,s[6]=0)):2===n&&(s[2]=4,s[4]=4,s[5]=3,s[7]=5,s[8]=6,i?o?a||(aF(r,e,aD,az),aF(r,t,aB,aU),s[0]=0,s[1]=1,s[3]=0,s[6]=2):(aF(t,r,aD,az),aF(t,e,aB,aU),s[0]=2,s[1]=0,s[3]=2,s[6]=1):(aF(e,t,aD,az),aF(e,r,aB,aU),s[0]=1,s[1]=2,s[3]=1,s[6]=0));let l=aj.positions;return l[0]=e,l[1]=t,l[2]=r,l.length=3,(1===n||2===n)&&(l[3]=aD,l[4]=aB,l[5]=az,l[6]=aU,l.length=7),aj}(b,w,R);if(H(S)&&S.positions.length>3){let b=S.positions,w=S.indices,R=w.length;for(let S=0;S<R;++S){let R=w[S],x=b[R];x.y<0?(t=O.attributes,r=O.indices,n=g):(t=E.attributes,r=E.indices,n=T),i=aQ(t,r,n,m,R<3?o+R:-1,x),aJ(e,a,A,x,l,u,f,c,h,p,d,t,y,_,s,i)}}else H(S)&&(b=S.positions[0],w=S.positions[1],R=S.positions[2]),b.y<0?(t=O.attributes,r=O.indices,n=g):(t=E.attributes,r=E.indices,n=T),i=aQ(t,r,n,m,o,b),aJ(e,a,A,b,l,u,f,c,h,p,d,t,y,_,s,i),i=aQ(t,r,n,m,o+1,w),aJ(e,a,A,w,l,u,f,c,h,p,d,t,y,_,s,i),i=aQ(t,r,n,m,o+2,R),aJ(e,a,A,R,l,u,f,c,h,p,d,t,y,_,s,i)}aV(e,O,E)}let a3=at.fromPointNormal(ee.ZERO,ee.UNIT_Y),a2=new ee,a4=new ee;function a5(e,t,r,n,i,o,a){if(!H(a))return;let s=ee.fromArray(n,3*e,aX);ee.equalsEpsilon(s,r,K.EPSILON10)?o.applyOffset.values[i]=a[e]:o.applyOffset.values[i]=a[t]}function a6(e){let t,r=e.geometry,n=r.attributes,i=n.position.values,o=H(n.applyOffset)?n.applyOffset.values:void 0,a=r.indices,s=aG(r),l=aG(r),u=a.length,c=[];c.length=i.length/3;let f=[];for(t=0,f.length=i.length/3;t<c.length;++t)c[t]=-1,f[t]=-1;for(t=0;t<u;t+=2){let e,r=a[t],n=a[t+1],u=ee.fromArray(i,3*r,aX),h=ee.fromArray(i,3*n,a$);Math.abs(u.y)<K.EPSILON6&&(u.y<0?u.y=-K.EPSILON6:u.y=K.EPSILON6),Math.abs(h.y)<K.EPSILON6&&(h.y<0?h.y=-K.EPSILON6:h.y=K.EPSILON6);let p=s.attributes,d=s.indices,m=f,y=l.attributes,_=l.indices,E=c,O=oM.lineSegmentPlane(u,h,a3,aZ);if(H(O)){let g=ee.multiplyByScalar(ee.UNIT_Y,5*K.EPSILON9,a2);u.y<0&&(ee.negate(g,g),p=l.attributes,d=l.indices,m=c,y=s.attributes,_=s.indices,E=f);let T=ee.add(O,g,a4);e=aQ(p,d,m,a,t,u),a5(r,n,u,i,e,p,o),e=aQ(p,d,m,a,-1,T),a5(r,n,T,i,e,p,o),ee.negate(g,g),ee.add(O,g,T),e=aQ(y,_,E,a,-1,T),a5(r,n,T,i,e,y,o),e=aQ(y,_,E,a,t+1,h),a5(r,n,h,i,e,y,o)}else{let p,d,m;u.y<0?(p=l.attributes,d=l.indices,m=c):(p=s.attributes,d=s.indices,m=f),e=aQ(p,d,m,a,t,u),a5(r,n,u,i,e,p,o),e=aQ(p,d,m,a,t+1,h),a5(r,n,h,i,e,p,o)}}aV(e,l,s)}let a8=new em,a7=new em,a9=new ee,se=new ee,st=new ee,sr=new ee,sn=new ee,si=new ee,so=new eW;function sa(e){let t=e.attributes,r=t.position.values,n=t.prevPosition.values,i=t.nextPosition.values,o=r.length;for(let e=0;e<o;e+=3){let t=ee.unpack(r,e,a9);if(t.x>0)continue;let a=ee.unpack(n,e,se);(t.y<0&&a.y>0||t.y>0&&a.y<0)&&(e-3>0?(n[e]=r[e-3],n[e+1]=r[e-2],n[e+2]=r[e-1]):ee.pack(t,n,e));let s=ee.unpack(i,e,st);(t.y<0&&s.y>0||t.y>0&&s.y<0)&&(e+3<o?(i[e]=r[e+3],i[e+1]=r[e+4],i[e+2]=r[e+5]):ee.pack(t,i,e))}}let ss=5*K.EPSILON9,sl=K.EPSILON6;al.splitLongitude=e=>{if(!H(e))throw new Y("instance is required.");let t=e.geometry,r=t.boundingSphere;if(H(r)&&(r.center.x-r.radius>0||n5.intersectPlane(r,at.ORIGIN_ZX_PLANE)!==eP.INTERSECTING))return e;if(t.geometryType!==iU.NONE)switch(t.geometryType){case iU.POLYLINES:!function(e){let t,r,n,i=e.geometry,o=i.attributes,a=o.position.values,s=o.prevPosition.values,l=o.nextPosition.values,u=o.expandAndWidth.values,c=H(o.st)?o.st.values:void 0,f=H(o.color)?o.color.values:void 0,h=aG(i),p=aG(i),d=!1,m=a.length/3;for(t=0;t<m;t+=4){let e=t,i=t+2,o=ee.fromArray(a,3*e,a9),m=ee.fromArray(a,3*i,se);if(Math.abs(o.y)<sl)for(o.y=sl*(m.y<0?-1:1),a[3*t+1]=o.y,a[(t+1)*3+1]=o.y,r=3*e;r<3*e+12;r+=3)s[r]=a[3*t],s[r+1]=a[3*t+1],s[r+2]=a[3*t+2];if(Math.abs(m.y)<sl)for(m.y=sl*(o.y<0?-1:1),a[(t+2)*3+1]=m.y,a[(t+3)*3+1]=m.y,r=3*e;r<3*e+12;r+=3)l[r]=a[(t+2)*3],l[r+1]=a[(t+2)*3+1],l[r+2]=a[(t+2)*3+2];let y=h.attributes,_=h.indices,E=p.attributes,O=p.indices,g=oM.lineSegmentPlane(o,m,a3,sr);if(H(g)){d=!0;let a=ee.multiplyByScalar(ee.UNIT_Y,ss,sn);o.y<0&&(ee.negate(a,a),y=p.attributes,_=p.indices,E=h.attributes,O=h.indices);let T=ee.add(g,a,si);y.position.values.push(o.x,o.y,o.z,o.x,o.y,o.z),y.position.values.push(T.x,T.y,T.z),y.position.values.push(T.x,T.y,T.z),y.prevPosition.values.push(s[3*e],s[3*e+1],s[3*e+2]),y.prevPosition.values.push(s[3*e+3],s[3*e+4],s[3*e+5]),y.prevPosition.values.push(o.x,o.y,o.z,o.x,o.y,o.z),y.nextPosition.values.push(T.x,T.y,T.z),y.nextPosition.values.push(T.x,T.y,T.z),y.nextPosition.values.push(T.x,T.y,T.z),y.nextPosition.values.push(T.x,T.y,T.z),ee.negate(a,a),ee.add(g,a,T),E.position.values.push(T.x,T.y,T.z),E.position.values.push(T.x,T.y,T.z),E.position.values.push(m.x,m.y,m.z,m.x,m.y,m.z),E.prevPosition.values.push(T.x,T.y,T.z),E.prevPosition.values.push(T.x,T.y,T.z),E.prevPosition.values.push(T.x,T.y,T.z),E.prevPosition.values.push(T.x,T.y,T.z),E.nextPosition.values.push(m.x,m.y,m.z,m.x,m.y,m.z),E.nextPosition.values.push(l[3*i],l[3*i+1],l[3*i+2]),E.nextPosition.values.push(l[3*i+3],l[3*i+4],l[3*i+5]);let A=Math.abs(em.fromArray(u,2*e,a8).y);y.expandAndWidth.values.push(-1,A,1,A),y.expandAndWidth.values.push(-1,-A,1,-A),E.expandAndWidth.values.push(-1,A,1,A),E.expandAndWidth.values.push(-1,-A,1,-A);let b=ee.magnitudeSquared(ee.subtract(g,o,st));if(b/=ee.magnitudeSquared(ee.subtract(m,o,st)),H(f)){let t=eW.fromArray(f,4*e,so),n=eW.fromArray(f,4*i,so),o=K.lerp(t.x,n.x,b),a=K.lerp(t.y,n.y,b),s=K.lerp(t.z,n.z,b),l=K.lerp(t.w,n.w,b);for(r=4*e;r<4*e+8;++r)y.color.values.push(f[r]);for(y.color.values.push(o,a,s,l),y.color.values.push(o,a,s,l),E.color.values.push(o,a,s,l),E.color.values.push(o,a,s,l),r=4*i;r<4*i+8;++r)E.color.values.push(f[r])}if(H(c)){let n=em.fromArray(c,2*e,a8),o=em.fromArray(c,(t+3)*2,a7),a=K.lerp(n.x,o.x,b);for(r=2*e;r<2*e+4;++r)y.st.values.push(c[r]);for(y.st.values.push(a,n.y),y.st.values.push(a,o.y),E.st.values.push(a,n.y),E.st.values.push(a,o.y),r=2*i;r<2*i+4;++r)E.st.values.push(c[r])}n=y.position.values.length/3-4,_.push(n,n+2,n+1),_.push(n+1,n+2,n+3),n=E.position.values.length/3-4,O.push(n,n+2,n+1),O.push(n+1,n+2,n+3)}else{let e,i;for(o.y<0?(e=p.attributes,i=p.indices):(e=h.attributes,i=h.indices),e.position.values.push(o.x,o.y,o.z),e.position.values.push(o.x,o.y,o.z),e.position.values.push(m.x,m.y,m.z),e.position.values.push(m.x,m.y,m.z),r=3*t;r<3*t+12;++r)e.prevPosition.values.push(s[r]),e.nextPosition.values.push(l[r]);for(r=2*t;r<2*t+8;++r)e.expandAndWidth.values.push(u[r]),H(c)&&e.st.values.push(c[r]);if(H(f))for(r=4*t;r<4*t+16;++r)e.color.values.push(f[r]);n=e.position.values.length/3-4,i.push(n,n+2,n+1),i.push(n+1,n+2,n+3)}}d&&(sa(p),sa(h)),aV(e,p,h)}(e);break;case iU.TRIANGLES:a1(e);break;case iU.LINES:a6(e)}else!function(e){switch(e.primitiveType){case iX.TRIANGLE_FAN:let t=i$.computeNumberOfVertices(e);if(t<3)throw new Y("The number of vertices must be at least three.");let r=oR.createTypedArray(t,(t-2)*3);r[0]=1,r[1]=0,r[2]=2;let n=3;for(let e=3;e<t;++e)r[n++]=e-1,r[n++]=0,r[n++]=e;return e.indices=r,e.primitiveType=iX.TRIANGLES;case iX.TRIANGLE_STRIP:let i=i$.computeNumberOfVertices(e);if(i<3)throw new Y("The number of vertices must be at least 3.");let o=oR.createTypedArray(i,(i-2)*3);o[0]=0,o[1]=1,o[2]=2,i>3&&(o[3]=0,o[4]=2,o[5]=3);let a=6;for(let e=3;e<i-1;e+=2)o[a++]=e,o[a++]=e-1,o[a++]=e+1,e+2<i&&(o[a++]=e,o[a++]=e+1,o[a++]=e+2);return e.indices=o,e.primitiveType=iX.TRIANGLES;case iX.TRIANGLES:if(H(e.indices))return;let s=i$.computeNumberOfVertices(e);if(s<3)throw new Y("The number of vertices must be at least three.");if(s%3!=0)throw new Y("The number of vertices must be a multiple of three.");let l=oR.createTypedArray(s,s);for(let e=0;e<s;++e)l[e]=e;return e.indices=l;case iX.LINE_STRIP:let u=i$.computeNumberOfVertices(e);if(u<2)throw new Y("The number of vertices must be at least two.");let c=oR.createTypedArray(u,(u-1)*2);c[0]=0,c[1]=1;let f=2;for(let e=2;e<u;++e)c[f++]=e-1,c[f++]=e;return e.indices=c,e.primitiveType=iX.LINES;case iX.LINE_LOOP:let h=i$.computeNumberOfVertices(e);if(h<2)throw new Y("The number of vertices must be at least two.");let p=oR.createTypedArray(h,2*h);p[0]=0,p[1]=1;let d=2;for(let e=2;e<h;++e)p[d++]=e-1,p[d++]=e;return p[d++]=h-1,p[d]=0,e.indices=p,e.primitiveType=iX.LINES;case iX.LINES:if(H(e.indices))return;let m=i$.computeNumberOfVertices(e);if(m<2)throw new Y("The number of vertices must be at least two.");if(m%2!=0)throw new Y("The number of vertices must be a multiple of 2.");let y=oR.createTypedArray(m,m);for(let e=0;e<m;++e)y[e]=e;return e.indices=y}}(t),t.primitiveType===iX.TRIANGLES?a1(e):t.primitiveType===iX.LINES&&a6(e);return e};let su={STREAM_DRAW:iD.STREAM_DRAW,STATIC_DRAW:iD.STATIC_DRAW,DYNAMIC_DRAW:iD.DYNAMIC_DRAW,DYNAMIC_READ:iD.DYNAMIC_READ,validate:e=>e===su.STREAM_DRAW||e===su.STATIC_DRAW||e===su.DYNAMIC_DRAW||e===su.DYNAMIC_READ},sc=Object.freeze(su),sf={UNSIGNED_BYTE:iD.UNSIGNED_BYTE,UNSIGNED_SHORT:iD.UNSIGNED_SHORT,UNSIGNED_INT:iD.UNSIGNED_INT,FLOAT:iD.FLOAT,HALF_FLOAT:iD.HALF_FLOAT_OES,UNSIGNED_INT_24_8:iD.UNSIGNED_INT_24_8,UNSIGNED_SHORT_4_4_4_4:iD.UNSIGNED_SHORT_4_4_4_4,UNSIGNED_SHORT_5_5_5_1:iD.UNSIGNED_SHORT_5_5_5_1,UNSIGNED_SHORT_5_6_5:iD.UNSIGNED_SHORT_5_6_5};sf.toWebGLConstant=(e,t)=>{switch(e){case sf.UNSIGNED_BYTE:return iD.UNSIGNED_BYTE;case sf.UNSIGNED_SHORT:return iD.UNSIGNED_SHORT;case sf.UNSIGNED_INT:return iD.UNSIGNED_INT;case sf.FLOAT:return iD.FLOAT;case sf.HALF_FLOAT:return t.webgl2?iD.HALF_FLOAT:iD.HALF_FLOAT_OES;case sf.UNSIGNED_INT_24_8:return iD.UNSIGNED_INT_24_8;case sf.UNSIGNED_SHORT_4_4_4_4:return iD.UNSIGNED_SHORT_4_4_4_4;case sf.UNSIGNED_SHORT_5_5_5_1:return iD.UNSIGNED_SHORT_5_5_5_1;case sf.UNSIGNED_SHORT_5_6_5:return sf.UNSIGNED_SHORT_5_6_5}},sf.isPacked=e=>e===sf.UNSIGNED_INT_24_8||e===sf.UNSIGNED_SHORT_4_4_4_4||e===sf.UNSIGNED_SHORT_5_5_5_1||e===sf.UNSIGNED_SHORT_5_6_5,sf.sizeInBytes=e=>{switch(e){case sf.UNSIGNED_BYTE:return 1;case sf.UNSIGNED_SHORT:case sf.UNSIGNED_SHORT_4_4_4_4:case sf.UNSIGNED_SHORT_5_5_5_1:case sf.UNSIGNED_SHORT_5_6_5:case sf.HALF_FLOAT:return 2;case sf.UNSIGNED_INT:case sf.FLOAT:case sf.UNSIGNED_INT_24_8:return 4}},sf.validate=e=>e===sf.UNSIGNED_BYTE||e===sf.UNSIGNED_SHORT||e===sf.UNSIGNED_INT||e===sf.FLOAT||e===sf.HALF_FLOAT||e===sf.UNSIGNED_INT_24_8||e===sf.UNSIGNED_SHORT_4_4_4_4||e===sf.UNSIGNED_SHORT_5_5_5_1||e===sf.UNSIGNED_SHORT_5_6_5,sf.getTypedArrayConstructor=e=>{let t=sf.sizeInBytes(e);return t===Uint8Array.BYTES_PER_ELEMENT?Uint8Array:t===Uint16Array.BYTES_PER_ELEMENT?Uint16Array:t===Float32Array.BYTES_PER_ELEMENT&&e===sf.FLOAT?Float32Array:Uint32Array};let sh=Object.freeze(sf),sp={DEPTH_COMPONENT:iD.DEPTH_COMPONENT,DEPTH_STENCIL:iD.DEPTH_STENCIL,ALPHA:iD.ALPHA,RED:iD.RED,RG:iD.RG,RGB:iD.RGB,RGBA:iD.RGBA,RED_INTEGER:iD.RED_INTEGER,RG_INTEGER:iD.RG_INTEGER,RGB_INTEGER:iD.RGB_INTEGER,RGBA_INTEGER:iD.RGBA_INTEGER,LUMINANCE:iD.LUMINANCE,LUMINANCE_ALPHA:iD.LUMINANCE_ALPHA,RGB_DXT1:iD.COMPRESSED_RGB_S3TC_DXT1_EXT,RGBA_DXT1:iD.COMPRESSED_RGBA_S3TC_DXT1_EXT,RGBA_DXT3:iD.COMPRESSED_RGBA_S3TC_DXT3_EXT,RGBA_DXT5:iD.COMPRESSED_RGBA_S3TC_DXT5_EXT,RGB_PVRTC_4BPPV1:iD.COMPRESSED_RGB_PVRTC_4BPPV1_IMG,RGB_PVRTC_2BPPV1:iD.COMPRESSED_RGB_PVRTC_2BPPV1_IMG,RGBA_PVRTC_4BPPV1:iD.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,RGBA_PVRTC_2BPPV1:iD.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG,RGBA_ASTC:iD.COMPRESSED_RGBA_ASTC_4x4_WEBGL,RGB_ETC1:iD.COMPRESSED_RGB_ETC1_WEBGL,RGB8_ETC2:iD.COMPRESSED_RGB8_ETC2,RGBA8_ETC2_EAC:iD.COMPRESSED_RGBA8_ETC2_EAC,RGBA_BC7:iD.COMPRESSED_RGBA_BPTC_UNORM};sp.componentsLength=e=>{switch(e){case sp.RGB:case sp.RGB_INTEGER:return 3;case sp.RGBA:case sp.RGBA_INTEGER:return 4;case sp.LUMINANCE_ALPHA:case sp.RG:case sp.RG_INTEGER:return 2;case sp.ALPHA:case sp.RED:case sp.RED_INTEGER:case sp.LUMINANCE:default:return 1}},sp.validate=e=>e===sp.DEPTH_COMPONENT||e===sp.DEPTH_STENCIL||e===sp.ALPHA||e===sp.RED||e===sp.RG||e===sp.RGB||e===sp.RGBA||e===sp.RED_INTEGER||e===sp.RG_INTEGER||e===sp.RGB_INTEGER||e===sp.RGBA_INTEGER||e===sp.LUMINANCE||e===sp.LUMINANCE_ALPHA||e===sp.RGB_DXT1||e===sp.RGBA_DXT1||e===sp.RGBA_DXT3||e===sp.RGBA_DXT5||e===sp.RGB_PVRTC_4BPPV1||e===sp.RGB_PVRTC_2BPPV1||e===sp.RGBA_PVRTC_4BPPV1||e===sp.RGBA_PVRTC_2BPPV1||e===sp.RGBA_ASTC||e===sp.RGB_ETC1||e===sp.RGB8_ETC2||e===sp.RGBA8_ETC2_EAC||e===sp.RGBA_BC7,sp.isColorFormat=e=>e===sp.RED||e===sp.ALPHA||e===sp.RGB||e===sp.RGBA||e===sp.LUMINANCE||e===sp.LUMINANCE_ALPHA,sp.isDepthFormat=e=>e===sp.DEPTH_COMPONENT||e===sp.DEPTH_STENCIL,sp.isCompressedFormat=e=>e===sp.RGB_DXT1||e===sp.RGBA_DXT1||e===sp.RGBA_DXT3||e===sp.RGBA_DXT5||e===sp.RGB_PVRTC_4BPPV1||e===sp.RGB_PVRTC_2BPPV1||e===sp.RGBA_PVRTC_4BPPV1||e===sp.RGBA_PVRTC_2BPPV1||e===sp.RGBA_ASTC||e===sp.RGB_ETC1||e===sp.RGB8_ETC2||e===sp.RGBA8_ETC2_EAC||e===sp.RGBA_BC7,sp.isDXTFormat=e=>e===sp.RGB_DXT1||e===sp.RGBA_DXT1||e===sp.RGBA_DXT3||e===sp.RGBA_DXT5,sp.isPVRTCFormat=e=>e===sp.RGB_PVRTC_4BPPV1||e===sp.RGB_PVRTC_2BPPV1||e===sp.RGBA_PVRTC_4BPPV1||e===sp.RGBA_PVRTC_2BPPV1,sp.isASTCFormat=e=>e===sp.RGBA_ASTC,sp.isETC1Format=e=>e===sp.RGB_ETC1,sp.isETC2Format=e=>e===sp.RGB8_ETC2||e===sp.RGBA8_ETC2_EAC,sp.isBC7Format=e=>e===sp.RGBA_BC7,sp.compressedTextureSizeInBytes=(e,t,r)=>{switch(e){case sp.RGB_DXT1:case sp.RGBA_DXT1:case sp.RGB_ETC1:case sp.RGB8_ETC2:return Math.floor((t+3)/4)*Math.floor((r+3)/4)*8;case sp.RGBA_DXT3:case sp.RGBA_DXT5:case sp.RGBA_ASTC:case sp.RGBA8_ETC2_EAC:return Math.floor((t+3)/4)*Math.floor((r+3)/4)*16;case sp.RGB_PVRTC_4BPPV1:case sp.RGBA_PVRTC_4BPPV1:return Math.floor((Math.max(t,8)*Math.max(r,8)*4+7)/8);case sp.RGB_PVRTC_2BPPV1:case sp.RGBA_PVRTC_2BPPV1:return Math.floor((Math.max(t,16)*Math.max(r,8)*2+7)/8);case sp.RGBA_BC7:return Math.ceil(t/4)*Math.ceil(r/4)*16;default:return 0}},sp.textureSizeInBytes=(e,t,r,n)=>{let i=sp.componentsLength(e);return sh.isPacked(t)&&(i=1),i*sh.sizeInBytes(t)*r*n},sp.texture3DSizeInBytes=(e,t,r,n,i)=>{let o=sp.componentsLength(e);return sh.isPacked(t)&&(o=1),o*sh.sizeInBytes(t)*r*n*i},sp.alignmentInBytes=(e,t,r)=>{let n=sp.textureSizeInBytes(e,t,r,1)%4;return 0===n?4:2===n?2:1},sp.createTypedArray=(e,t,r,n)=>new(sh.getTypedArrayConstructor(t))(sp.componentsLength(e)*r*n),sp.flipY=(e,t,r,n,i)=>{if(1===i)return e;let o=sp.createTypedArray(t,r,n,i),a=sp.componentsLength(t),s=n*a;for(let t=0;t<i;++t){let r=t*n*a,l=(i-t-1)*n*a;for(let t=0;t<s;++t)o[l+t]=e[r+t]}return o},sp.toInternalFormat=(e,t,r)=>{if(!r.webgl2)return e;if(e===sp.DEPTH_STENCIL)return iD.DEPTH24_STENCIL8;if(e===sp.DEPTH_COMPONENT){if(t===sh.UNSIGNED_SHORT)return iD.DEPTH_COMPONENT16;else if(t===sh.UNSIGNED_INT)return iD.DEPTH_COMPONENT24}if(t===sh.FLOAT)switch(e){case sp.RGBA:return iD.RGBA32F;case sp.RGB:return iD.RGB32F;case sp.RG:return iD.RG32F;case sp.RED:return iD.R32F}if(t===sh.HALF_FLOAT)switch(e){case sp.RGBA:return iD.RGBA16F;case sp.RGB:return iD.RGB16F;case sp.RG:return iD.RG16F;case sp.RED:return iD.R16F}if(t===sh.UNSIGNED_BYTE)switch(e){case sp.RGBA:return iD.RGBA8;case sp.RGB:return iD.RGB8;case sp.RG:return iD.RG8;case sp.RED:return iD.R8}if(t===sh.INT)switch(e){case sp.RGBA_INTEGER:return iD.RGBA32I;case sp.RGB_INTEGER:return iD.RGB32I;case sp.RG_INTEGER:return iD.RG32I;case sp.RED_INTEGER:return iD.R32I}if(t===sh.UNSIGNED_INT)switch(e){case sp.RGBA_INTEGER:return iD.RGBA32UI;case sp.RGB_INTEGER:return iD.RGB32UI;case sp.RG_INTEGER:return iD.RG32UI;case sp.RED_INTEGER:return iD.R32UI}return e};let sd=Object.freeze(sp),sm={_maximumCombinedTextureImageUnits:0,_maximumCubeMapSize:0,_maximumFragmentUniformVectors:0,_maximumTextureImageUnits:0,_maximumRenderbufferSize:0,_maximumTextureSize:0,_maximumVaryingVectors:0,_maximumVertexAttributes:0,_maximumVertexTextureImageUnits:0,_maximumVertexUniformVectors:0,_minimumAliasedLineWidth:0,_maximumAliasedLineWidth:0,_minimumAliasedPointSize:0,_maximumAliasedPointSize:0,_maximumViewportWidth:0,_maximumViewportHeight:0,_maximumTextureFilterAnisotropy:0,_maximumDrawBuffers:0,_maximumColorAttachments:0,_maximumSamples:0,_highpFloatSupported:!1,_highpIntSupported:!1};function sy(e,t,r,n,i,o,a,s,l,u,c){this._context=e,this._texture=t,this._textureTarget=r,this._targetFace=n,this._pixelDatatype=a,this._internalFormat=i,this._pixelFormat=o,this._size=s,this._preMultiplyAlpha=l,this._flipY=u,this._initialized=c}function s_(e,t,r){let n=e._gl;n.framebufferTexture2D(n.FRAMEBUFFER,t,r._target,r._texture,0)}function sE(e,t,r){let n=e._gl;n.framebufferRenderbuffer(n.FRAMEBUFFER,t,n.RENDERBUFFER,r._getRenderbuffer())}function sO(e){let t=(e=e??e0.EMPTY_OBJECT).context;W.defined("options.context",t);let r=t._gl,n=sm.maximumColorAttachments;if(this._gl=r,this._framebuffer=r.createFramebuffer(),this._colorTextures=[],this._colorRenderbuffers=[],this._activeColorAttachments=[],this._depthTexture=void 0,this._depthRenderbuffer=void 0,this._stencilRenderbuffer=void 0,this._depthStencilTexture=void 0,this._depthStencilRenderbuffer=void 0,this.destroyAttachments=e.destroyAttachments??!0,H(e.colorTextures)&&H(e.colorRenderbuffers))throw new Y("Cannot have both color texture and color renderbuffer attachments.");if(H(e.depthTexture)&&H(e.depthRenderbuffer))throw new Y("Cannot have both a depth texture and depth renderbuffer attachment.");if(H(e.depthStencilTexture)&&H(e.depthStencilRenderbuffer))throw new Y("Cannot have both a depth-stencil texture and depth-stencil renderbuffer attachment.");let i=H(e.depthTexture)||H(e.depthRenderbuffer),o=H(e.depthStencilTexture)||H(e.depthStencilRenderbuffer);if(i&&o)throw new Y("Cannot have both a depth and depth-stencil attachment.");if(H(e.stencilRenderbuffer)&&o)throw new Y("Cannot have both a stencil and depth-stencil attachment.");if(i&&H(e.stencilRenderbuffer))throw new Y("Cannot have both a depth and stencil attachment.");if(this._bind(),H(e.colorTextures)){let r=e.colorTextures,i=this._colorTextures.length=this._activeColorAttachments.length=r.length;if(i>n)throw new Y("The number of color attachments exceeds the number supported.");for(let e=0;e<i;++e){let n=r[e];if(!sd.isColorFormat(n.pixelFormat))throw new Y("The color-texture pixel-format must be a color format.");if(n.pixelDatatype===sh.FLOAT&&!t.colorBufferFloat)throw new Y("The color texture pixel datatype is FLOAT and the WebGL implementation does not support the EXT_color_buffer_float or WEBGL_color_buffer_float extensions. See Context.colorBufferFloat.");if(n.pixelDatatype===sh.HALF_FLOAT&&!t.colorBufferHalfFloat)throw new Y("The color texture pixel datatype is HALF_FLOAT and the WebGL implementation does not support the EXT_color_buffer_half_float extension. See Context.colorBufferHalfFloat.");let i=this._gl.COLOR_ATTACHMENT0+e;s_(this,i,n),this._activeColorAttachments[e]=i,this._colorTextures[e]=n}}if(H(e.colorRenderbuffers)){let t=e.colorRenderbuffers,r=this._colorRenderbuffers.length=this._activeColorAttachments.length=t.length;if(r>n)throw new Y("The number of color attachments exceeds the number supported.");for(let e=0;e<r;++e){let r=t[e],n=this._gl.COLOR_ATTACHMENT0+e;sE(this,n,r),this._activeColorAttachments[e]=n,this._colorRenderbuffers[e]=r}}if(H(e.depthTexture)){let t=e.depthTexture;if(t.pixelFormat!==sd.DEPTH_COMPONENT)throw new Y("The depth-texture pixel-format must be DEPTH_COMPONENT.");s_(this,this._gl.DEPTH_ATTACHMENT,t),this._depthTexture=t}if(H(e.depthRenderbuffer)){let t=e.depthRenderbuffer;sE(this,this._gl.DEPTH_ATTACHMENT,t),this._depthRenderbuffer=t}if(H(e.stencilRenderbuffer)){let t=e.stencilRenderbuffer;sE(this,this._gl.STENCIL_ATTACHMENT,t),this._stencilRenderbuffer=t}if(H(e.depthStencilTexture)){let t=e.depthStencilTexture;if(t.pixelFormat!==sd.DEPTH_STENCIL)throw new Y("The depth-stencil pixel-format must be DEPTH_STENCIL.");s_(this,this._gl.DEPTH_STENCIL_ATTACHMENT,t),this._depthStencilTexture=t}if(H(e.depthStencilRenderbuffer)){let t=e.depthStencilRenderbuffer;sE(this,this._gl.DEPTH_STENCIL_ATTACHMENT,t),this._depthStencilRenderbuffer=t}this._unBind()}Object.defineProperties(sm,{maximumCombinedTextureImageUnits:{get:()=>sm._maximumCombinedTextureImageUnits},maximumCubeMapSize:{get:()=>sm._maximumCubeMapSize},maximumFragmentUniformVectors:{get:()=>sm._maximumFragmentUniformVectors},maximumTextureImageUnits:{get:()=>sm._maximumTextureImageUnits},maximumRenderbufferSize:{get:()=>sm._maximumRenderbufferSize},maximumTextureSize:{get:()=>sm._maximumTextureSize},maximumVaryingVectors:{get:()=>sm._maximumVaryingVectors},maximumVertexAttributes:{get:()=>sm._maximumVertexAttributes},maximumVertexTextureImageUnits:{get:()=>sm._maximumVertexTextureImageUnits},maximumVertexUniformVectors:{get:()=>sm._maximumVertexUniformVectors},minimumAliasedLineWidth:{get:()=>sm._minimumAliasedLineWidth},maximumAliasedLineWidth:{get:()=>sm._maximumAliasedLineWidth},minimumAliasedPointSize:{get:()=>sm._minimumAliasedPointSize},maximumAliasedPointSize:{get:()=>sm._maximumAliasedPointSize},maximumViewportWidth:{get:()=>sm._maximumViewportWidth},maximumViewportHeight:{get:()=>sm._maximumViewportHeight},maximumTextureFilterAnisotropy:{get:()=>sm._maximumTextureFilterAnisotropy},maximumDrawBuffers:{get:()=>sm._maximumDrawBuffers},maximumColorAttachments:{get:()=>sm._maximumColorAttachments},maximumSamples:{get:()=>sm._maximumSamples},highpFloatSupported:{get:()=>sm._highpFloatSupported},highpIntSupported:{get:()=>sm._highpIntSupported}}),Object.defineProperties(sy.prototype,{pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},_target:{get:function(){return this._targetFace}}}),sy.prototype.copyFrom=function(e){W.defined("options",e);let{xOffset:t=0,yOffset:r=0,source:n,skipColorSpaceConversion:i=!1}=e;if(W.defined("options.source",n),W.typeOf.number.greaterThanOrEquals("xOffset",t,0),W.typeOf.number.greaterThanOrEquals("yOffset",r,0),t+n.width>this._size)throw new Y("xOffset + options.source.width must be less than or equal to width.");if(r+n.height>this._size)throw new Y("yOffset + options.source.height must be less than or equal to height.");let{width:o,height:a}=n,s=this._context._gl,l=this._textureTarget,u=this._targetFace;s.activeTexture(s.TEXTURE0),s.bindTexture(l,this._texture);let c=n.arrayBufferView,f=this._size,h=this._pixelFormat,p=this._internalFormat,d=this._pixelDatatype,m=this._preMultiplyAlpha,y=this._flipY,_=4;H(c)&&(_=sd.alignmentInBytes(h,d,o)),s.pixelStorei(s.UNPACK_ALIGNMENT,_),i?s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,s.NONE):s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,s.BROWSER_DEFAULT_WEBGL);let E=!1;if(!this._initialized){let e;0===t&&0===r&&o===f&&a===f?(H(c)?(s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,!1),y&&(c=sd.flipY(c,h,d,f,f)),e=c):(s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,m),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,y),e=n),E=!0):(s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,!1),e=sd.createTypedArray(h,d,f,f)),s.texImage2D(u,0,p,f,f,0,h,sh.toWebGLConstant(d,this._context),e),this._initialized=!0}E||(H(c)?(s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,!1),y&&(c=sd.flipY(c,h,d,o,a)),s.texSubImage2D(u,0,t,r,o,a,h,sh.toWebGLConstant(d,this._context),c)):(s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,m),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,y),s.texSubImage2D(u,0,t,r,h,sh.toWebGLConstant(d,this._context),n))),s.bindTexture(l,null)},sy.prototype.copyFromFramebuffer=function(e,t,r,n,i,o){if(e=e??0,t=t??0,r=r??0,n=n??0,i=i??this._size,o=o??this._size,W.typeOf.number.greaterThanOrEquals("xOffset",e,0),W.typeOf.number.greaterThanOrEquals("yOffset",t,0),W.typeOf.number.greaterThanOrEquals("framebufferXOffset",r,0),W.typeOf.number.greaterThanOrEquals("framebufferYOffset",n,0),e+i>this._size)throw new Y("xOffset + source.width must be less than or equal to width.");if(t+o>this._size)throw new Y("yOffset + source.height must be less than or equal to height.");if(this._pixelDatatype===sh.FLOAT)throw new Y("Cannot call copyFromFramebuffer when the texture pixel data type is FLOAT.");if(this._pixelDatatype===sh.HALF_FLOAT)throw new Y("Cannot call copyFromFramebuffer when the texture pixel data type is HALF_FLOAT.");let a=this._context._gl,s=this._textureTarget;a.activeTexture(a.TEXTURE0),a.bindTexture(s,this._texture),a.copyTexSubImage2D(this._targetFace,0,e,t,r,n,i,o),a.bindTexture(s,null),this._initialized=!0},sy.prototype.copyMipmapFromFramebuffer=function(e,t,r,n,i){if(e=e??0,t=t??0,r=r??this._size,n=n??this._size,i=i??0,W.typeOf.number.greaterThanOrEquals("xOffset",e,0),W.typeOf.number.greaterThanOrEquals("yOffset",t,0),e+r>this._size)throw new Y("xOffset + source.width must be less than or equal to width.");if(t+n>this._size)throw new Y("yOffset + source.height must be less than or equal to height.");if(this._pixelDatatype===sh.FLOAT)throw new Y("Cannot call copyFromFramebuffer when the texture pixel data type is FLOAT.");if(this._pixelDatatype===sh.HALF_FLOAT)throw new Y("Cannot call copyFromFramebuffer when the texture pixel data type is HALF_FLOAT.");let o=this._context._gl,a=this._textureTarget;o.activeTexture(o.TEXTURE0),o.bindTexture(a,this._texture),o.copyTexImage2D(this._targetFace,i,this._internalFormat,e,t,r,n,0),o.bindTexture(a,null),this._initialized=!0},Object.defineProperties(sO.prototype,{status:{get:function(){this._bind();let e=this._gl.checkFramebufferStatus(this._gl.FRAMEBUFFER);return this._unBind(),e}},numberOfColorAttachments:{get:function(){return this._activeColorAttachments.length}},depthTexture:{get:function(){return this._depthTexture}},depthRenderbuffer:{get:function(){return this._depthRenderbuffer}},stencilRenderbuffer:{get:function(){return this._stencilRenderbuffer}},depthStencilTexture:{get:function(){return this._depthStencilTexture}},depthStencilRenderbuffer:{get:function(){return this._depthStencilRenderbuffer}},hasDepthAttachment:{get:function(){return!!(this.depthTexture||this.depthRenderbuffer||this.depthStencilTexture||this.depthStencilRenderbuffer)}}}),sO.prototype._bind=function(){let e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer)},sO.prototype._unBind=function(){let e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,null)},sO.prototype.bindDraw=function(){let e=this._gl;e.bindFramebuffer(e.DRAW_FRAMEBUFFER,this._framebuffer)},sO.prototype.bindRead=function(){let e=this._gl;e.bindFramebuffer(e.READ_FRAMEBUFFER,this._framebuffer)},sO.prototype._getActiveColorAttachments=function(){return this._activeColorAttachments},sO.prototype.getColorTexture=function(e){if(!H(e)||e<0||e>=this._colorTextures.length)throw new Y("index is required, must be greater than or equal to zero and must be less than the number of color attachments.");return this._colorTextures[e]},sO.prototype.getColorRenderbuffer=function(e){if(!H(e)||e<0||e>=this._colorRenderbuffers.length)throw new Y("index is required, must be greater than or equal to zero and must be less than the number of color attachments.");return this._colorRenderbuffers[e]},sO.prototype.isDestroyed=()=>!1,sO.prototype.destroy=function(){if(this.destroyAttachments){let e=this._colorTextures;for(let t=0;t<e.length;++t){let r=e[t];H(r)&&r.destroy()}let t=this._colorRenderbuffers;for(let e=0;e<t.length;++e){let r=t[e];H(r)&&r.destroy()}this._depthTexture=this._depthTexture&&this._depthTexture.destroy(),this._depthRenderbuffer=this._depthRenderbuffer&&this._depthRenderbuffer.destroy(),this._stencilRenderbuffer=this._stencilRenderbuffer&&this._stencilRenderbuffer.destroy(),this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._depthStencilRenderbuffer=this._depthStencilRenderbuffer&&this._depthStencilRenderbuffer.destroy()}return this._gl.deleteFramebuffer(this._framebuffer),os(this)};let sg={DONT_CARE:iD.DONT_CARE,FASTEST:iD.FASTEST,NICEST:iD.NICEST,validate:e=>e===sg.DONT_CARE||e===sg.FASTEST||e===sg.NICEST},sT=Object.freeze(sg),sA={NEAREST:iD.NEAREST,LINEAR:iD.LINEAR};sA.validate=e=>e===sA.NEAREST||e===sA.LINEAR;let sb=Object.freeze(sA),sw={NEAREST:iD.NEAREST,LINEAR:iD.LINEAR,NEAREST_MIPMAP_NEAREST:iD.NEAREST_MIPMAP_NEAREST,LINEAR_MIPMAP_NEAREST:iD.LINEAR_MIPMAP_NEAREST,NEAREST_MIPMAP_LINEAR:iD.NEAREST_MIPMAP_LINEAR,LINEAR_MIPMAP_LINEAR:iD.LINEAR_MIPMAP_LINEAR};sw.validate=e=>e===sw.NEAREST||e===sw.LINEAR||e===sw.NEAREST_MIPMAP_NEAREST||e===sw.LINEAR_MIPMAP_NEAREST||e===sw.NEAREST_MIPMAP_LINEAR||e===sw.LINEAR_MIPMAP_LINEAR;let sR=Object.freeze(sw),sS={CLAMP_TO_EDGE:iD.CLAMP_TO_EDGE,REPEAT:iD.REPEAT,MIRRORED_REPEAT:iD.MIRRORED_REPEAT,validate:e=>e===sS.CLAMP_TO_EDGE||e===sS.REPEAT||e===sS.MIRRORED_REPEAT},sx=Object.freeze(sS);function sN(e){let{wrapR:t=sx.CLAMP_TO_EDGE,wrapS:r=sx.CLAMP_TO_EDGE,wrapT:n=sx.CLAMP_TO_EDGE,minificationFilter:i=sR.LINEAR,magnificationFilter:o=sb.LINEAR,maximumAnisotropy:a=1}=e=e??e0.EMPTY_OBJECT;if(!sx.validate(t))throw new Y("Invalid sampler.wrapR.");if(!sx.validate(r))throw new Y("Invalid sampler.wrapS.");if(!sx.validate(n))throw new Y("Invalid sampler.wrapT.");if(!sR.validate(i))throw new Y("Invalid sampler.minificationFilter.");if(!sb.validate(o))throw new Y("Invalid sampler.magnificationFilter.");W.typeOf.number.greaterThanOrEquals("maximumAnisotropy",a,1),this._wrapR=t,this._wrapS=r,this._wrapT=n,this._minificationFilter=i,this._magnificationFilter=o,this._maximumAnisotropy=a}function sI(e){if(e=e??e0.EMPTY_OBJECT,W.defined("options.context",e.context),!H(e.typedArray)&&!H(e.sizeInBytes))throw new Y("Either options.sizeInBytes or options.typedArray is required.");if(H(e.typedArray)&&H(e.sizeInBytes))throw new Y("Cannot pass in both options.sizeInBytes and options.typedArray.");if(H(e.typedArray)&&(W.typeOf.object("options.typedArray",e.typedArray),W.typeOf.number("options.typedArray.byteLength",e.typedArray.byteLength)),!sc.validate(e.usage))throw new Y("usage is invalid.");let t=e.context._gl,r=e.bufferTarget,n=e.typedArray,i=e.sizeInBytes,o=e.usage,a=H(n);a&&(i=n.byteLength),W.typeOf.number.greaterThan("sizeInBytes",i,0);let s=t.createBuffer();t.bindBuffer(r,s),t.bufferData(r,a?n:i,o),t.bindBuffer(r,null),this._id="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),this._gl=t,this._webgl2=e.context._webgl2,this._bufferTarget=r,this._sizeInBytes=i,this._usage=o,this._buffer=s,this.vertexArrayDestroyable=!0}function sC(e,t,r){for(let r=0;r<t.length;++r){let n=t[r];n.enabled&&n.vertexAttrib(e)}H(r)&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r._getBuffer())}function sv(e){let t,r;e=e??e0.EMPTY_OBJECT,W.defined("options.context",e.context),W.defined("options.attributes",e.attributes);let n=e.context,i=n._gl,o=e.attributes,a=e.indexBuffer,s=[],l=1,u=!1,c=!1,f=o.length;for(t=0;t<f;++t)!function(e,t,r,n){let i=H(t.vertexBuffer),o=H(t.value),a=t.value?t.value.length:t.componentsPerAttribute;if(!i&&!o)throw new Y("attribute must have a vertexBuffer or a value.");if(i&&o)throw new Y("attribute cannot have both a vertexBuffer and a value.  It must have either a vertexBuffer property defining per-vertex data or a value property defining data for all vertices.");if(1!==a&&2!==a&&3!==a&&4!==a){if(o)throw new Y("attribute.value.length must be in the range [1, 4].");throw new Y("attribute.componentsPerAttribute must be in the range [1, 4].")}if(H(t.componentDatatype)&&!iz.validate(t.componentDatatype))throw new Y("attribute must have a valid componentDatatype or not specify it.");if(H(t.strideInBytes)&&t.strideInBytes>255)throw new Y("attribute must have a strideInBytes less than or equal to 255 or not specify it.");if(H(t.instanceDivisor)&&t.instanceDivisor>0&&!n.instancedArrays)throw new Y("instanced arrays is not supported");if(H(t.instanceDivisor)&&t.instanceDivisor<0)throw new Y("attribute must have an instanceDivisor greater than or equal to zero");if(H(t.instanceDivisor)&&o)throw new Y("attribute cannot have have an instanceDivisor if it is not backed by a buffer");if(H(t.instanceDivisor)&&t.instanceDivisor>0&&0===t.index)throw new Y("attribute zero cannot have an instanceDivisor greater than 0");let s={index:t.index??r,enabled:t.enabled??!0,vertexBuffer:t.vertexBuffer,value:o?t.value.slice(0):void 0,componentsPerAttribute:a,componentDatatype:t.componentDatatype??iz.FLOAT,normalize:t.normalize??!1,offsetInBytes:t.offsetInBytes??0,strideInBytes:t.strideInBytes??0,instanceDivisor:t.instanceDivisor??0};if(i)s.vertexAttrib=function(e){let t=this.index;e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer._getBuffer()),e.vertexAttribPointer(t,this.componentsPerAttribute,this.componentDatatype,this.normalize,this.strideInBytes,this.offsetInBytes),e.enableVertexAttribArray(t),this.instanceDivisor>0&&(n.glVertexAttribDivisor(t,this.instanceDivisor),n._vertexAttribDivisors[t]=this.instanceDivisor,n._previousDrawInstanced=!0)},s.disableVertexAttribArray=function(e){e.disableVertexAttribArray(this.index),this.instanceDivisor>0&&n.glVertexAttribDivisor(r,0)};else{switch(s.componentsPerAttribute){case 1:s.vertexAttrib=function(e){e.vertexAttrib1fv(this.index,this.value)};break;case 2:s.vertexAttrib=function(e){e.vertexAttrib2fv(this.index,this.value)};break;case 3:s.vertexAttrib=function(e){e.vertexAttrib3fv(this.index,this.value)};break;case 4:s.vertexAttrib=function(e){e.vertexAttrib4fv(this.index,this.value)}}s.disableVertexAttribArray=e=>{}}e.push(s)}(s,o[t],t,n);for(t=0,f=s.length;t<f;++t){let e=s[t];if(H(e.vertexBuffer)&&0===e.instanceDivisor){let t=e.strideInBytes||e.componentsPerAttribute*iz.getSizeInBytes(e.componentDatatype);l=e.vertexBuffer.sizeInBytes/t;break}}for(t=0;t<f;++t)s[t].instanceDivisor>0&&(u=!0),H(s[t].value)&&(c=!0);let h={};for(t=0;t<f;++t){let e=s[t].index;if(h[e])throw new Y(`Index ${e} is used by more than one attribute.`);h[e]=!0}n.vertexArrayObject&&(r=n.glCreateVertexArray(),n.glBindVertexArray(r),sC(i,s,a),n.glBindVertexArray(null)),this._numberOfVertices=l,this._hasInstancedAttributes=u,this._hasConstantAttributes=c,this._context=n,this._gl=i,this._vao=r,this._attributes=s,this._indexBuffer=a}function sM(e){return e.values.length/e.componentsPerAttribute}function sP(e){e=e??e0.EMPTY_OBJECT,W.defined("options.context",e.context);let{context:t,source:r,pixelFormat:n=sd.RGBA,pixelDatatype:i=sh.UNSIGNED_BYTE,flipY:o=!0,skipColorSpaceConversion:a=!1,sampler:s=new sN}=e,l=e.preMultiplyAlpha||n===sd.RGB||n===sd.LUMINANCE,{width:u,height:c}=e;if(H(r)){if(!Object.values(sP.FaceName).every(e=>H(r[e])))throw new Y(`options.source requires faces ${Object.values(sP.FaceName).join(", ")}.`);for(let e of({width:u,height:c}=r.positiveX,sP.faceNames())){let t=r[e];if(Number(t.width)!==u||Number(t.height)!==c)throw new Y("Each face in options.source must have the same width and height.")}}let f=u;if(!H(u)||!H(c))throw new Y("options requires a source field to create an initialized cube map or width and height fields to create a blank cube map.");if(u!==c)throw new Y("Width must equal height.");if(f<=0)throw new Y("Width and height must be greater than zero.");if(sm.maximumCubeMapSize>0&&f>sm.maximumCubeMapSize)throw new Y(`Width and height must be less than or equal to the maximum cube map size (${sm.maximumCubeMapSize}). Check maximumCubeMapSize.`);if(!sd.validate(n))throw new Y("Invalid options.pixelFormat.");if(sd.isDepthFormat(n))throw new Y("options.pixelFormat cannot be DEPTH_COMPONENT or DEPTH_STENCIL.");if(!sh.validate(i))throw new Y("Invalid options.pixelDatatype.");if(i===sh.FLOAT&&!t.floatingPointTexture)throw new Y("When options.pixelDatatype is FLOAT, this WebGL implementation must support the OES_texture_float extension.");if(i===sh.HALF_FLOAT&&!t.halfFloatingPointTexture)throw new Y("When options.pixelDatatype is HALF_FLOAT, this WebGL implementation must support the OES_texture_half_float extension.");let h=6*sd.textureSizeInBytes(n,i,f,f),p=sd.toInternalFormat(n,i,t),d=t._gl,m=d.TEXTURE_CUBE_MAP,y=d.createTexture();this._context=t,this._textureFilterAnisotropic=t._textureFilterAnisotropic,this._textureTarget=m,this._texture=y,this._pixelFormat=n,this._pixelDatatype=i,this._size=f,this._hasMipmap=!1,this._sizeInBytes=h,this._preMultiplyAlpha=l,this._flipY=o;let _=H(r);function E(e){return new sy(t,y,m,e,p,n,i,f,l,o,_)}for(let e of(this._positiveX=E(d.TEXTURE_CUBE_MAP_POSITIVE_X),this._negativeX=E(d.TEXTURE_CUBE_MAP_NEGATIVE_X),this._positiveY=E(d.TEXTURE_CUBE_MAP_POSITIVE_Y),this._negativeY=E(d.TEXTURE_CUBE_MAP_NEGATIVE_Y),this._positiveZ=E(d.TEXTURE_CUBE_MAP_POSITIVE_Z),this._negativeZ=E(d.TEXTURE_CUBE_MAP_NEGATIVE_Z),this._sampler=s,sF(this,s),d.activeTexture(d.TEXTURE0),d.bindTexture(m,y),a?d.pixelStorei(d.UNPACK_COLORSPACE_CONVERSION_WEBGL,d.NONE):d.pixelStorei(d.UNPACK_COLORSPACE_CONVERSION_WEBGL,d.BROWSER_DEFAULT_WEBGL),sP.faceNames()))sL(this[e],r?.[e],0);d.bindTexture(m,null)}function sL(e,t,r){r=r??0;let n=e._targetFace,i=Math.max(Math.floor(e._size/2**r),1),o=e._pixelFormat,a=e._pixelDatatype,s=e._internalFormat,l=e._flipY,u=e._preMultiplyAlpha,c=e._context,f=c._gl;if(!H(t))return void f.texImage2D(n,r,s,i,i,0,o,sh.toWebGLConstant(a,c),null);let{arrayBufferView:h}=t,p=4;H(h)&&(p=sd.alignmentInBytes(o,a,i)),f.pixelStorei(f.UNPACK_ALIGNMENT,p),H(h)?(f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,!1),l&&(h=sd.flipY(h,o,a,i,i)),f.texImage2D(n,r,s,i,i,0,o,sh.toWebGLConstant(a,c),h)):(f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,l),f.texImage2D(n,r,s,o,sh.toWebGLConstant(a,c),t))}function sF(e,t){let{minificationFilter:r,magnificationFilter:n}=t,i=[sR.NEAREST_MIPMAP_NEAREST,sR.NEAREST_MIPMAP_LINEAR,sR.LINEAR_MIPMAP_NEAREST,sR.LINEAR_MIPMAP_LINEAR].includes(r),o=e._context,a=e._pixelDatatype;(a!==sh.FLOAT||o.textureFloatLinear)&&(a!==sh.HALF_FLOAT||o.textureHalfFloatLinear)||(r=i?sR.NEAREST_MIPMAP_NEAREST:sR.NEAREST,n=sb.NEAREST);let s=o._gl,l=e._textureTarget;s.activeTexture(s.TEXTURE0),s.bindTexture(l,e._texture),s.texParameteri(l,s.TEXTURE_MIN_FILTER,r),s.texParameteri(l,s.TEXTURE_MAG_FILTER,n),s.texParameteri(l,s.TEXTURE_WRAP_S,t.wrapS),s.texParameteri(l,s.TEXTURE_WRAP_T,t.wrapT),H(e._textureFilterAnisotropic)&&s.texParameteri(l,e._textureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.maximumAnisotropy),s.bindTexture(l,null)}Object.defineProperties(sN.prototype,{wrapR:{get:function(){return this._wrapR}},wrapS:{get:function(){return this._wrapS}},wrapT:{get:function(){return this._wrapT}},minificationFilter:{get:function(){return this._minificationFilter}},magnificationFilter:{get:function(){return this._magnificationFilter}},maximumAnisotropy:{get:function(){return this._maximumAnisotropy}}}),sN.equals=(e,t)=>e===t||H(e)&&H(t)&&e._wrapR===t._wrapR&&e._wrapS===t._wrapS&&e._wrapT===t._wrapT&&e._minificationFilter===t._minificationFilter&&e._magnificationFilter===t._magnificationFilter&&e._maximumAnisotropy===t._maximumAnisotropy,sN.NEAREST=Object.freeze(new sN({wrapR:sx.CLAMP_TO_EDGE,wrapS:sx.CLAMP_TO_EDGE,wrapT:sx.CLAMP_TO_EDGE,minificationFilter:sR.NEAREST,magnificationFilter:sb.NEAREST})),sI.createPixelBuffer=e=>{if(W.defined("options.context",e.context),!e.context._webgl2)throw new Y("A WebGL 2 context is required to create PixelBuffers.");return new sI({context:e.context,bufferTarget:iD.PIXEL_PACK_BUFFER,typedArray:e.typedArray,sizeInBytes:e.sizeInBytes,usage:e.usage})},sI.createVertexBuffer=e=>(W.defined("options.context",e.context),new sI({context:e.context,bufferTarget:iD.ARRAY_BUFFER,typedArray:e.typedArray,sizeInBytes:e.sizeInBytes,usage:e.usage})),sI.createIndexBuffer=e=>{if(W.defined("options.context",e.context),!oR.validate(e.indexDatatype))throw new Y("Invalid indexDatatype.");if(e.indexDatatype===oR.UNSIGNED_INT&&!e.context.elementIndexUint)throw new Y("IndexDatatype.UNSIGNED_INT requires OES_element_index_uint, which is not supported on this system.  Check context.elementIndexUint.");let t=e.context,r=e.indexDatatype,n=oR.getSizeInBytes(r),i=new sI({context:t,bufferTarget:iD.ELEMENT_ARRAY_BUFFER,typedArray:e.typedArray,sizeInBytes:e.sizeInBytes,usage:e.usage}),o=i.sizeInBytes/n;return Object.defineProperties(i,{indexDatatype:{get:()=>r},bytesPerIndex:{get:()=>n},numberOfIndices:{get:()=>o}}),i},Object.defineProperties(sI.prototype,{sizeInBytes:{get:function(){return this._sizeInBytes}},usage:{get:function(){return this._usage}}}),sI.prototype._getBuffer=function(){return this._buffer},sI.prototype._bind=function(){let e=this._gl,t=this._bufferTarget;e.bindBuffer(t,this._buffer)},sI.prototype._unBind=function(){let e=this._gl,t=this._bufferTarget;e.bindBuffer(t,null)},sI.prototype.copyFromArrayView=function(e,t){t=t??0,W.defined("arrayView",e),W.typeOf.number.lessThanOrEquals("offsetInBytes + arrayView.byteLength",t+e.byteLength,this._sizeInBytes);let r=this._gl,n=this._bufferTarget;r.bindBuffer(n,this._buffer),r.bufferSubData(n,t,e),r.bindBuffer(n,null)},sI.prototype.copyFromBuffer=function(e,t,r,n){if(!this._webgl2)throw new Y("A WebGL 2 context is required.");if(!H(e))throw new Y("readBuffer must be defined.");if(!H(n)||n<=0)throw new Y("sizeInBytes must be defined and be greater than zero.");if(!H(t)||t<0||t+n>e._sizeInBytes)throw new Y("readOffset must be greater than or equal to zero and readOffset + sizeInBytes must be less than of equal to readBuffer.sizeInBytes.");if(!H(r)||r<0||r+n>this._sizeInBytes)throw new Y("writeOffset must be greater than or equal to zero and writeOffset + sizeInBytes must be less than of equal to this.sizeInBytes.");if(this._buffer===e._buffer&&(r>=t&&r<t+n||t>r&&t<r+n))throw new Y("When readBuffer is equal to this, the ranges [readOffset + sizeInBytes) and [writeOffset, writeOffset + sizeInBytes) must not overlap.");if(this._bufferTarget===iD.ELEMENT_ARRAY_BUFFER&&e._bufferTarget!==iD.ELEMENT_ARRAY_BUFFER||this._bufferTarget!==iD.ELEMENT_ARRAY_BUFFER&&e._bufferTarget===iD.ELEMENT_ARRAY_BUFFER)throw new Y("Can not copy an index buffer into another buffer type.");let i=iD.COPY_READ_BUFFER,o=iD.COPY_WRITE_BUFFER,a=this._gl;a.bindBuffer(o,this._buffer),a.bindBuffer(i,e._buffer),a.copyBufferSubData(i,o,t,r,n),a.bindBuffer(o,null),a.bindBuffer(i,null)},sI.prototype.getBufferData=function(e,t,r,n){let i,o;if(t=t??0,r=r??0,!this._webgl2)throw new Y("A WebGL 2 context is required.");if(!H(e))throw new Y("arrayView is required.");let a=e.byteLength;if(H(n)?(i=n,H(a)?o=1:(a=e.length,o=e.BYTES_PER_ELEMENT)):H(a)?(i=a-r,o=1):(i=(a=e.length)-r,o=e.BYTES_PER_ELEMENT),r<0||r>a)throw new Y("destinationOffset must be greater than zero and less than the arrayView length.");if(r+i>a)throw new Y("destinationOffset + length must be less than or equal to the arrayViewLength.");if(t<0||t>this._sizeInBytes)throw new Y("sourceOffset must be greater than zero and less than the buffers size.");if(t+i*o>this._sizeInBytes)throw new Y("sourceOffset + length must be less than the buffers size.");let s=this._gl,l=iD.COPY_READ_BUFFER;s.bindBuffer(l,this._buffer),s.getBufferSubData(l,t,e,r,n),s.bindBuffer(l,null)},sI.prototype.isDestroyed=()=>!1,sI.prototype.destroy=function(){return this._gl.deleteBuffer(this._buffer),os(this)},sv.fromGeometry=e=>{let t,r,n,i;e=e??e0.EMPTY_OBJECT,W.defined("options.context",e.context);let o=e.context,a=e.geometry??e0.EMPTY_OBJECT,s=e.bufferUsage??sc.DYNAMIC_DRAW,l=e.attributeLocations??e0.EMPTY_OBJECT,u=e.interleave??!1,c=e.vertexArrayAttributes,f=H(c)?c:[],h=a.attributes;if(u){let e=function(e){let t,r,n,i,o=[];for(r in e)Object.hasOwn(e,r)&&H(e[r])&&H(e[r].values)&&(o.push(r),e[r].componentDatatype===iz.DOUBLE&&(e[r].componentDatatype=iz.FLOAT,e[r].values=iz.createTypedArray(iz.FLOAT,e[r].values)));let a=o.length;if(a>0)for(t=1,i=sM(e[o[0]]);t<a;++t){let r=sM(e[o[t]]);if(r!==i)throw new e1(`Each attribute list must have the same number of vertices.  Attribute ${o[t]} has a different number of vertices (${r.toString()}) than attribute ${o[0]} (${i.toString()}).`)}o.sort((t,r)=>iz.getSizeInBytes(e[r].componentDatatype)-iz.getSizeInBytes(e[t].componentDatatype));let s=0,l={};for(t=0;t<a;++t){var u;n=e[r=o[t]],l[r]=s,s+=(u=n,iz.getSizeInBytes(u.componentDatatype)*u.componentsPerAttribute)}if(s>0){let u=iz.getSizeInBytes(e[o[0]].componentDatatype),c=s%u;0!==c&&(s+=u-c);let f=new ArrayBuffer(i*s),h={};for(t=0;t<a;++t){r=o[t];let n=iz.getSizeInBytes(e[r].componentDatatype);h[r]={pointer:iz.createTypedArray(e[r].componentDatatype,f),index:l[r]/n,strideInComponentType:s/n}}for(t=0;t<i;++t)for(let i=0;i<a;++i){let a=(n=e[r=o[i]]).values,s=h[r],l=s.pointer,u=n.componentsPerAttribute;for(let e=0;e<u;++e)l[s.index+e]=a[t*u+e];s.index+=s.strideInComponentType}return{buffer:f,offsetsInBytes:l,vertexSizeInBytes:s}}}(h);if(H(e)){n=sI.createVertexBuffer({context:o,typedArray:e.buffer,usage:s});let i=e.offsetsInBytes,a=e.vertexSizeInBytes;for(t in h)Object.hasOwn(h,t)&&H(h[t])&&(H((r=h[t]).values)?f.push({index:l[t],vertexBuffer:n,componentDatatype:r.componentDatatype,componentsPerAttribute:r.componentsPerAttribute,normalize:r.normalize,offsetInBytes:i[t],strideInBytes:a}):f.push({index:l[t],value:r.value,componentDatatype:r.componentDatatype,normalize:r.normalize}))}}else for(t in h)if(Object.hasOwn(h,t)&&H(h[t])){let e=(r=h[t]).componentDatatype;e===iz.DOUBLE&&(e=iz.FLOAT);let i={};n=void 0,H(r.values)&&(n=sI.createVertexBuffer({context:o,typedArray:iz.createTypedArray(e,r.values),usage:s}),i={index:l[t],vertexBuffer:n,value:r.value,componentDatatype:e,componentsPerAttribute:r.componentsPerAttribute,normalize:r.normalize}),H(r.typedArray)&&(n=sI.createVertexBuffer({context:o,typedArray:r.typedArray,usage:s}),i={index:l[t],vertexBuffer:n,value:void 0,componentDatatype:e,componentsPerAttribute:ou.getNumberOfComponents(r.type),normalize:r.normalized,instanceDivisor:r.instanceDivisor}),f.push(i)}let p=a.indices;return H(p)&&(i=i$.computeNumberOfVertices(a)>=K.SIXTY_FOUR_KILOBYTES&&o.elementIndexUint?sI.createIndexBuffer({context:o,typedArray:new Uint32Array(p),usage:s,indexDatatype:oR.UNSIGNED_INT}):sI.createIndexBuffer({context:o,typedArray:new Uint16Array(p),usage:s,indexDatatype:oR.UNSIGNED_SHORT})),new sv({context:o,attributes:f,indexBuffer:i})},Object.defineProperties(sv.prototype,{numberOfAttributes:{get:function(){return this._attributes.length}},numberOfVertices:{get:function(){return this._numberOfVertices}},indexBuffer:{get:function(){return this._indexBuffer}}}),sv.prototype.getAttribute=function(e){return W.defined("index",e),this._attributes[e]},sv.prototype._bind=function(){H(this._vao)?(this._context.glBindVertexArray(this._vao),this._context.instancedArrays&&function(e){let t,r=e._context,n=e._hasInstancedAttributes;if(!n&&!r._previousDrawInstanced)return;r._previousDrawInstanced=n;let i=r._vertexAttribDivisors,o=e._attributes,a=sm.maximumVertexAttributes;if(n){let e=o.length;for(t=0;t<e;++t){let e=o[t];if(e.enabled){let t=e.instanceDivisor,n=e.index;t!==i[n]&&(r.glVertexAttribDivisor(n,t),i[n]=t)}}}else for(t=0;t<a;++t)i[t]>0&&(r.glVertexAttribDivisor(t,0),i[t]=0)}(this),this._hasConstantAttributes&&function(e,t){let r=e._attributes,n=r.length;for(let e=0;e<n;++e){let n=r[e];n.enabled&&H(n.value)&&n.vertexAttrib(t)}}(this,this._gl)):sC(this._gl,this._attributes,this._indexBuffer)},sv.prototype._unBind=function(){if(H(this._vao))this._context.glBindVertexArray(null);else{let e=this._attributes,t=this._gl;for(let r=0;r<e.length;++r){let n=e[r];n.enabled&&n.disableVertexAttribArray(t)}this._indexBuffer&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}},sv.prototype.isDestroyed=()=>!1,sv.prototype.destroy=function(){let e=this._attributes;for(let t=0;t<e.length;++t){let r=e[t].vertexBuffer;H(r)&&!r.isDestroyed()&&r.vertexArrayDestroyable&&r.destroy()}let t=this._indexBuffer;return H(t)&&!t.isDestroyed()&&t.vertexArrayDestroyable&&t.destroy(),H(this._vao)&&this._context.glDeleteVertexArray(this._vao),os(this)},sP.prototype.copyFace=function(e,t,r,n){let i=new sO({context:e.context,colorTextures:[t],destroyAttachments:!1});i._bind(),this[r].copyMipmapFromFramebuffer(0,0,t.width,t.height,n??0),i._unBind(),i.destroy()},sP.FaceName=Object.freeze({POSITIVEX:"positiveX",NEGATIVEX:"negativeX",POSITIVEY:"positiveY",NEGATIVEY:"negativeY",POSITIVEZ:"positiveZ",NEGATIVEZ:"negativeZ"}),sP.faceNames=()=>(function*(){yield sP.FaceName.POSITIVEX,yield sP.FaceName.NEGATIVEX,yield sP.FaceName.POSITIVEY,yield sP.FaceName.NEGATIVEY,yield sP.FaceName.POSITIVEZ,yield sP.FaceName.NEGATIVEZ})(),sP.loadFace=sL,Object.defineProperties(sP.prototype,{positiveX:{get:function(){return this._positiveX}},negativeX:{get:function(){return this._negativeX}},positiveY:{get:function(){return this._positiveY}},negativeY:{get:function(){return this._negativeY}},positiveZ:{get:function(){return this._positiveZ}},negativeZ:{get:function(){return this._negativeZ}},sampler:{get:function(){return this._sampler},set:function(e){sF(this,e),this._sampler=e}},pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},width:{get:function(){return this._size}},height:{get:function(){return this._size}},sizeInBytes:{get:function(){return this._hasMipmap?Math.floor(4*this._sizeInBytes/3):this._sizeInBytes}},preMultiplyAlpha:{get:function(){return this._preMultiplyAlpha}},flipY:{get:function(){return this._flipY}},_target:{get:function(){return this._textureTarget}}}),sP.getDirection=(e,t)=>{switch(e){case sP.FaceName.POSITIVEX:return ee.clone(ee.UNIT_X,t);case sP.FaceName.NEGATIVEX:return ee.negate(ee.UNIT_X,t);case sP.FaceName.POSITIVEY:return ee.clone(ee.UNIT_Y,t);case sP.FaceName.NEGATIVEY:return ee.negate(ee.UNIT_Y,t);case sP.FaceName.POSITIVEZ:return ee.clone(ee.UNIT_Z,t);case sP.FaceName.NEGATIVEZ:return ee.negate(ee.UNIT_Z,t)}},sP.prototype.loadMipmaps=function(e,t){if(W.defined("source",e),!Array.isArray(e))throw new Y("source must be an array");let r=Math.log2(this._size);if(e.length!==r)throw new Y("all mip levels must be defined");t=t??!1;let n=this._context._gl,i=this._texture,o=this._textureTarget;n.activeTexture(n.TEXTURE0),n.bindTexture(o,i),t?n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE):n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.BROWSER_DEFAULT_WEBGL);for(let t=0;t<e.length;t++){let r=e[t],n=t+1;for(let e of sP.faceNames())sL(this[e],r[e],n)}n.bindTexture(o,null),this._hasMipmap=!0},sP.prototype.generateMipmap=function(e){if(e=e??sT.DONT_CARE,this._size>1&&!K.isPowerOfTwo(this._size))throw new Y("width and height must be a power of two to call generateMipmap().");if(!sT.validate(e))throw new Y("hint is invalid.");this._hasMipmap=!0;let t=this._context._gl,r=this._textureTarget;t.hint(t.GENERATE_MIPMAP_HINT,e),t.activeTexture(t.TEXTURE0),t.bindTexture(r,this._texture),t.generateMipmap(r),t.bindTexture(r,null)},sP.createVertexArray=function(e){let t=ot.createGeometry(ot.fromDimensions({dimensions:new ee(2,2,2),vertexFormat:i9.POSITION_ONLY})),r=this._attributeLocations=al.createAttributeLocations(t);return sv.fromGeometry({context:e,geometry:t,attributeLocations:r,bufferUsage:sc.STATIC_DRAW})},sP.prototype.isDestroyed=()=>!1,sP.prototype.destroy=function(){return this._context._gl.deleteTexture(this._texture),this._positiveX=os(this._positiveX),this._negativeX=os(this._negativeX),this._positiveY=os(this._positiveY),this._negativeY=os(this._negativeY),this._positiveZ=os(this._positiveZ),this._negativeZ=os(this._negativeZ),os(this)};function sD(e){e=e??e0.EMPTY_OBJECT,this._boundingVolume=e.boundingVolume,this._orientedBoundingBox=e.orientedBoundingBox,this._modelMatrix=e.modelMatrix,this._primitiveType=e.primitiveType??iX.TRIANGLES,this._vertexArray=e.vertexArray,this._count=e.count,this._offset=e.offset??0,this._instanceCount=e.instanceCount??0,this._shaderProgram=e.shaderProgram,this._uniformMap=e.uniformMap,this._renderState=e.renderState,this._framebuffer=e.framebuffer,this._pass=e.pass,this._owner=e.owner,this._debugOverlappingFrustums=0,this._pickId=e.pickId,this._pickMetadataAllowed=!0===e.pickMetadataAllowed,this._pickedMetadataInfo=void 0,this._flags=0,this.cull=e.cull??!0,this.occlude=e.occlude??!0,this.executeInClosestFrustum=e.executeInClosestFrustum??!1,this.debugShowBoundingVolume=e.debugShowBoundingVolume??!1,this.castShadows=e.castShadows??!1,this.receiveShadows=e.receiveShadows??!1,this.pickOnly=e.pickOnly??!1,this.depthForTranslucentClassification=e.depthForTranslucentClassification??!1,this.dirty=!0,this.lastDirtyTime=0,this.derivedCommands={}}function sB(e,t){return(e._flags&t)===t}function sz(e,t,r){r?e._flags|=t:e._flags&=~t}Object.defineProperties(sD.prototype,{boundingVolume:{get:function(){return this._boundingVolume},set:function(e){this._boundingVolume!==e&&(this._boundingVolume=e,this.dirty=!0)}},orientedBoundingBox:{get:function(){return this._orientedBoundingBox},set:function(e){this._orientedBoundingBox!==e&&(this._orientedBoundingBox=e,this.dirty=!0)}},cull:{get:function(){return sB(this,1)},set:function(e){sB(this,1)!==e&&(sz(this,1,e),this.dirty=!0)}},occlude:{get:function(){return sB(this,2)},set:function(e){sB(this,2)!==e&&(sz(this,2,e),this.dirty=!0)}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix!==e&&(this._modelMatrix=e,this.dirty=!0)}},primitiveType:{get:function(){return this._primitiveType},set:function(e){this._primitiveType!==e&&(this._primitiveType=e,this.dirty=!0)}},vertexArray:{get:function(){return this._vertexArray},set:function(e){this._vertexArray!==e&&(this._vertexArray=e,this.dirty=!0)}},count:{get:function(){return this._count},set:function(e){this._count!==e&&(this._count=e,this.dirty=!0)}},offset:{get:function(){return this._offset},set:function(e){this._offset!==e&&(this._offset=e,this.dirty=!0)}},instanceCount:{get:function(){return this._instanceCount},set:function(e){this._instanceCount!==e&&(this._instanceCount=e,this.dirty=!0)}},shaderProgram:{get:function(){return this._shaderProgram},set:function(e){this._shaderProgram!==e&&(this._shaderProgram=e,this.dirty=!0)}},castShadows:{get:function(){return sB(this,16)},set:function(e){sB(this,16)!==e&&(sz(this,16,e),this.dirty=!0)}},receiveShadows:{get:function(){return sB(this,32)},set:function(e){sB(this,32)!==e&&(sz(this,32,e),this.dirty=!0)}},uniformMap:{get:function(){return this._uniformMap},set:function(e){this._uniformMap!==e&&(this._uniformMap=e,this.dirty=!0)}},renderState:{get:function(){return this._renderState},set:function(e){this._renderState!==e&&(this._renderState=e,this.dirty=!0)}},framebuffer:{get:function(){return this._framebuffer},set:function(e){this._framebuffer!==e&&(this._framebuffer=e,this.dirty=!0)}},pass:{get:function(){return this._pass},set:function(e){this._pass!==e&&(this._pass=e,this.dirty=!0)}},executeInClosestFrustum:{get:function(){return sB(this,4)},set:function(e){sB(this,4)!==e&&(sz(this,4,e),this.dirty=!0)}},owner:{get:function(){return this._owner},set:function(e){this._owner!==e&&(this._owner=e,this.dirty=!0)}},debugShowBoundingVolume:{get:function(){return sB(this,8)},set:function(e){sB(this,8)!==e&&(sz(this,8,e),this.dirty=!0)}},debugOverlappingFrustums:{get:function(){return this._debugOverlappingFrustums},set:function(e){this._debugOverlappingFrustums!==e&&(this._debugOverlappingFrustums=e,this.dirty=!0)}},pickId:{get:function(){return this._pickId},set:function(e){this._pickId!==e&&(this._pickId=e,this.dirty=!0)}},pickMetadataAllowed:{get:function(){return this._pickMetadataAllowed}},pickedMetadataInfo:{get:function(){return this._pickedMetadataInfo},set:function(e){this._pickedMetadataInfo!==e&&(this._pickedMetadataInfo=e,this.dirty=!0)}},pickOnly:{get:function(){return sB(this,64)},set:function(e){sB(this,64)!==e&&(sz(this,64,e),this.dirty=!0)}},depthForTranslucentClassification:{get:function(){return sB(this,128)},set:function(e){sB(this,128)!==e&&(sz(this,128,e),this.dirty=!0)}}}),sD.shallowClone=(e,t)=>{if(H(e))return H(t)||(t=new sD),t._boundingVolume=e._boundingVolume,t._orientedBoundingBox=e._orientedBoundingBox,t._modelMatrix=e._modelMatrix,t._primitiveType=e._primitiveType,t._vertexArray=e._vertexArray,t._count=e._count,t._offset=e._offset,t._instanceCount=e._instanceCount,t._shaderProgram=e._shaderProgram,t._uniformMap=e._uniformMap,t._renderState=e._renderState,t._framebuffer=e._framebuffer,t._pass=e._pass,t._owner=e._owner,t._debugOverlappingFrustums=e._debugOverlappingFrustums,t._pickId=e._pickId,t._pickMetadataAllowed=e._pickMetadataAllowed,t._pickedMetadataInfo=e._pickedMetadataInfo,t._flags=e._flags,t.dirty=!0,t.lastDirtyTime=0,t},sD.prototype.execute=function(e,t){e.draw(this,t)};let sU=function(e,t,r){if(W.defined("context",e),W.defined("urls",t),Object.values(sP.FaceName).some(e=>!H(t[e])))throw new Y("urls must have positiveX, negativeX, positiveY, negativeY, positiveZ, and negativeZ properties.");let n={flipY:!0,skipColorSpaceConversion:r,preferImageBitmap:!0};return Promise.all([rd.createIfNeeded(t.positiveX).fetchImage(n),rd.createIfNeeded(t.negativeX).fetchImage(n),rd.createIfNeeded(t.positiveY).fetchImage(n),rd.createIfNeeded(t.negativeY).fetchImage(n),rd.createIfNeeded(t.positiveZ).fetchImage(n),rd.createIfNeeded(t.negativeZ).fetchImage(n)]).then(t=>new sP({context:e,source:{positiveX:t[0],negativeX:t[1],positiveY:t[2],negativeY:t[3],positiveZ:t[4],negativeZ:t[5]}}))};function sj(e,t,r,n){this.x=e??0,this.y=t??0,this.width=r??0,this.height=n??0}sj.packedLength=4,sj.pack=(e,t,r)=>(W.typeOf.object("value",e),W.defined("array",t),r=r??0,t[r++]=e.x,t[r++]=e.y,t[r++]=e.width,t[r]=e.height,t),sj.unpack=(e,t,r)=>(W.defined("array",e),t=t??0,H(r)||(r=new sj),r.x=e[t++],r.y=e[t++],r.width=e[t++],r.height=e[t],r),sj.fromPoints=(e,t)=>{if(H(t)||(t=new sj),!H(e)||0===e.length)return t.x=0,t.y=0,t.width=0,t.height=0,t;let r=e.length,n=e[0].x,i=e[0].y,o=e[0].x,a=e[0].y;for(let t=1;t<r;t++){let r=e[t],s=r.x,l=r.y;n=Math.min(s,n),o=Math.max(s,o),i=Math.min(l,i),a=Math.max(l,a)}return t.x=n,t.y=i,t.width=o-n,t.height=a-i,t};let sq=new eM,sG=new ef,sV=new ef;function sk(e,t,r){return(r<0&&(r+=1),r>1&&(r-=1),6*r<1)?e+(t-e)*6*r:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function sH(e,t,r,n){this.red=e??1,this.green=t??1,this.blue=r??1,this.alpha=n??1}sj.fromRectangle=(e,t,r)=>{if(H(r)||(r=new sj),!H(e))return r.x=0,r.y=0,r.width=0,r.height=0,r;sq._ellipsoid=eA.default;let n=(t=t??sq).project(nK.southwest(e,sG)),i=t.project(nK.northeast(e,sV));return em.subtract(i,n,i),r.x=n.x,r.y=n.y,r.width=i.x,r.height=i.y,r},sj.clone=(e,t)=>{if(H(e))return H(t)?(t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t):new sj(e.x,e.y,e.width,e.height)},sj.union=(e,t,r)=>{W.typeOf.object("left",e),W.typeOf.object("right",t),H(r)||(r=new sj);let n=Math.min(e.x,t.x),i=Math.min(e.y,t.y),o=Math.max(e.x+e.width,t.x+t.width),a=Math.max(e.y+e.height,t.y+t.height);return r.x=n,r.y=i,r.width=o-n,r.height=a-i,r},sj.expand=(e,t,r)=>{W.typeOf.object("rectangle",e),W.typeOf.object("point",t),r=sj.clone(e,r);let n=t.x-r.x,i=t.y-r.y;return n>r.width?r.width=n:n<0&&(r.width-=n,r.x=t.x),i>r.height?r.height=i:i<0&&(r.height-=i,r.y=t.y),r},sj.intersect=(e,t)=>{W.typeOf.object("left",e),W.typeOf.object("right",t);let r=e.x,n=e.y,i=t.x,o=t.y;return r>i+t.width||r+e.width<i||n+e.height<o||n>o+t.height?eP.OUTSIDE:eP.INTERSECTING},sj.equals=(e,t)=>e===t||H(e)&&H(t)&&e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height,sj.prototype.clone=function(e){return sj.clone(this,e)},sj.prototype.intersect=function(e){return sj.intersect(this,e)},sj.prototype.equals=function(e){return sj.equals(this,e)},sH.fromCartesian4=(e,t)=>(W.typeOf.object("cartesian",e),H(t))?(t.red=e.x,t.green=e.y,t.blue=e.z,t.alpha=e.w,t):new sH(e.x,e.y,e.z,e.w),sH.fromBytes=(e,t,r,n,i)=>(e=sH.byteToFloat(e??255),t=sH.byteToFloat(t??255),r=sH.byteToFloat(r??255),n=sH.byteToFloat(n??255),H(i))?(i.red=e,i.green=t,i.blue=r,i.alpha=n,i):new sH(e,t,r,n),sH.fromAlpha=(e,t,r)=>(W.typeOf.object("color",e),W.typeOf.number("alpha",t),H(r))?(r.red=e.red,r.green=e.green,r.blue=e.blue,r.alpha=t,r):new sH(e.red,e.green,e.blue,t),rZ.supportsTypedArrays()&&(I=new Uint32Array(N=new ArrayBuffer(4)),C=new Uint8Array(N)),sH.fromRgba=(e,t)=>(I[0]=e,sH.fromBytes(C[0],C[1],C[2],C[3],t)),sH.fromHsl=(e,t,r,n,i)=>{e=(e??0)%1,n=n??1;let o=r=r??0,a=r,s=r;if(0!==(t=t??0)){let n;n=r<.5?r*(1+t):r+t-r*t;let i=2*r-n;o=sk(i,n,e+1/3),a=sk(i,n,e),s=sk(i,n,e-1/3)}return H(i)?(i.red=o,i.green=a,i.blue=s,i.alpha=n,i):new sH(o,a,s,n)},sH.fromRandom=(e,t)=>{let r=(e=e??e0.EMPTY_OBJECT).red;if(!H(r)){let t=e.minimumRed??0,n=e.maximumRed??1;W.typeOf.number.lessThanOrEquals("minimumRed",t,n),r=t+K.nextRandomNumber()*(n-t)}let n=e.green;if(!H(n)){let t=e.minimumGreen??0,r=e.maximumGreen??1;W.typeOf.number.lessThanOrEquals("minimumGreen",t,r),n=t+K.nextRandomNumber()*(r-t)}let i=e.blue;if(!H(i)){let t=e.minimumBlue??0,r=e.maximumBlue??1;W.typeOf.number.lessThanOrEquals("minimumBlue",t,r),i=t+K.nextRandomNumber()*(r-t)}let o=e.alpha;if(!H(o)){let t=e.minimumAlpha??0,r=e.maximumAlpha??1;W.typeOf.number.lessThanOrEquals("minimumAlpha",t,r),o=t+K.nextRandomNumber()*(r-t)}return H(t)?(t.red=r,t.green=n,t.blue=i,t.alpha=o,t):new sH(r,n,i,o)};let sY=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,sW=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,sX=/^rgba?\s*\(\s*([0-9.]+%?)\s*[,\s]+\s*([0-9.]+%?)\s*[,\s]+\s*([0-9.]+%?)(?:\s*[,\s/]+\s*([0-9.]+))?\s*\)$/i,s$=/^hsla?\s*\(\s*([0-9.]+)\s*[,\s]+\s*([0-9.]+%)\s*[,\s]+\s*([0-9.]+%)(?:\s*[,\s/]+\s*([0-9.]+))?\s*\)$/i;sH.fromCssColorString=(e,t)=>{W.typeOf.string("color",e),H(t)||(t=new sH);let r=sH[(e=e.trim()).toUpperCase()];if(H(r))return sH.clone(r,t),t;let n=sY.exec(e);return null!==n?(t.red=parseInt(n[1],16)/15,t.green=parseInt(n[2],16)/15,t.blue=parseInt(n[3],16)/15,t.alpha=parseInt(n[4]??"f",16)/15,t):null!==(n=sW.exec(e))?(t.red=parseInt(n[1],16)/255,t.green=parseInt(n[2],16)/255,t.blue=parseInt(n[3],16)/255,t.alpha=parseInt(n[4]??"ff",16)/255,t):null!==(n=sX.exec(e))?(t.red=parseFloat(n[1])/("%"===n[1].substr(-1)?100:255),t.green=parseFloat(n[2])/("%"===n[2].substr(-1)?100:255),t.blue=parseFloat(n[3])/("%"===n[3].substr(-1)?100:255),t.alpha=parseFloat(n[4]??"1.0"),t):null!==(n=s$.exec(e))?sH.fromHsl(parseFloat(n[1])/360,parseFloat(n[2])/100,parseFloat(n[3])/100,parseFloat(n[4]??"1.0"),t):t=void 0},sH.packedLength=4,sH.pack=(e,t,r)=>(W.typeOf.object("value",e),W.defined("array",t),r=r??0,t[r++]=e.red,t[r++]=e.green,t[r++]=e.blue,t[r]=e.alpha,t),sH.unpack=(e,t,r)=>(W.defined("array",e),t=t??0,H(r)||(r=new sH),r.red=e[t++],r.green=e[t++],r.blue=e[t++],r.alpha=e[t],r),sH.byteToFloat=e=>e/255,sH.floatToByte=e=>1===e?255:256*e|0,sH.clone=(e,t)=>{if(H(e))return H(t)?(t.red=e.red,t.green=e.green,t.blue=e.blue,t.alpha=e.alpha,t):new sH(e.red,e.green,e.blue,e.alpha)},sH.equals=(e,t)=>e===t||H(e)&&H(t)&&e.red===t.red&&e.green===t.green&&e.blue===t.blue&&e.alpha===t.alpha,sH.equalsArray=(e,t,r)=>e.red===t[r]&&e.green===t[r+1]&&e.blue===t[r+2]&&e.alpha===t[r+3],sH.prototype.clone=function(e){return sH.clone(this,e)},sH.prototype.equals=function(e){return sH.equals(this,e)},sH.prototype.equalsEpsilon=function(e,t){return this===e||H(e)&&Math.abs(this.red-e.red)<=t&&Math.abs(this.green-e.green)<=t&&Math.abs(this.blue-e.blue)<=t&&Math.abs(this.alpha-e.alpha)<=t},sH.prototype.toString=function(){return`(${this.red}, ${this.green}, ${this.blue}, ${this.alpha})`},sH.prototype.toCssColorString=function(){let e=sH.floatToByte(this.red),t=sH.floatToByte(this.green),r=sH.floatToByte(this.blue);return 1===this.alpha?`rgb(${e},${t},${r})`:`rgba(${e},${t},${r},${this.alpha})`},sH.prototype.toCssHexString=function(){let e=sH.floatToByte(this.red).toString(16);e.length<2&&(e=`0${e}`);let t=sH.floatToByte(this.green).toString(16);t.length<2&&(t=`0${t}`);let r=sH.floatToByte(this.blue).toString(16);if(r.length<2&&(r=`0${r}`),this.alpha<1){let n=sH.floatToByte(this.alpha).toString(16);return n.length<2&&(n=`0${n}`),`#${e}${t}${r}${n}`}return`#${e}${t}${r}`},sH.prototype.toBytes=function(e){let t=sH.floatToByte(this.red),r=sH.floatToByte(this.green),n=sH.floatToByte(this.blue),i=sH.floatToByte(this.alpha);return H(e)?(e[0]=t,e[1]=r,e[2]=n,e[3]=i,e):[t,r,n,i]},sH.bytesToRgba=(e,t,r,n)=>(C[0]=e,C[1]=t,C[2]=r,C[3]=n,I[0]),sH.prototype.toRgba=function(){return sH.bytesToRgba(sH.floatToByte(this.red),sH.floatToByte(this.green),sH.floatToByte(this.blue),sH.floatToByte(this.alpha))},sH.prototype.brighten=function(e,t){return W.typeOf.number("magnitude",e),W.typeOf.number.greaterThanOrEquals("magnitude",e,0),W.typeOf.object("result",t),e=1-e,t.red=1-(1-this.red)*e,t.green=1-(1-this.green)*e,t.blue=1-(1-this.blue)*e,t.alpha=this.alpha,t},sH.prototype.darken=function(e,t){return W.typeOf.number("magnitude",e),W.typeOf.number.greaterThanOrEquals("magnitude",e,0),W.typeOf.object("result",t),e=1-e,t.red=this.red*e,t.green=this.green*e,t.blue=this.blue*e,t.alpha=this.alpha,t},sH.prototype.withAlpha=function(e,t){return sH.fromAlpha(this,e,t)},sH.add=(e,t,r)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r),r.red=e.red+t.red,r.green=e.green+t.green,r.blue=e.blue+t.blue,r.alpha=e.alpha+t.alpha,r),sH.subtract=(e,t,r)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r),r.red=e.red-t.red,r.green=e.green-t.green,r.blue=e.blue-t.blue,r.alpha=e.alpha-t.alpha,r),sH.multiply=(e,t,r)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r),r.red=e.red*t.red,r.green=e.green*t.green,r.blue=e.blue*t.blue,r.alpha=e.alpha*t.alpha,r),sH.divide=(e,t,r)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r),r.red=e.red/t.red,r.green=e.green/t.green,r.blue=e.blue/t.blue,r.alpha=e.alpha/t.alpha,r),sH.mod=(e,t,r)=>(W.typeOf.object("left",e),W.typeOf.object("right",t),W.typeOf.object("result",r),r.red=e.red%t.red,r.green=e.green%t.green,r.blue=e.blue%t.blue,r.alpha=e.alpha%t.alpha,r),sH.lerp=(e,t,r,n)=>(W.typeOf.object("start",e),W.typeOf.object("end",t),W.typeOf.number("t",r),W.typeOf.object("result",n),n.red=K.lerp(e.red,t.red,r),n.green=K.lerp(e.green,t.green,r),n.blue=K.lerp(e.blue,t.blue,r),n.alpha=K.lerp(e.alpha,t.alpha,r),n),sH.multiplyByScalar=(e,t,r)=>(W.typeOf.object("color",e),W.typeOf.number("scalar",t),W.typeOf.object("result",r),r.red=e.red*t,r.green=e.green*t,r.blue=e.blue*t,r.alpha=e.alpha*t,r),sH.divideByScalar=(e,t,r)=>(W.typeOf.object("color",e),W.typeOf.number("scalar",t),W.typeOf.object("result",r),r.red=e.red/t,r.green=e.green/t,r.blue=e.blue/t,r.alpha=e.alpha/t,r),sH.ALICEBLUE=Object.freeze(sH.fromCssColorString("#F0F8FF")),sH.ANTIQUEWHITE=Object.freeze(sH.fromCssColorString("#FAEBD7")),sH.AQUA=Object.freeze(sH.fromCssColorString("#00FFFF")),sH.AQUAMARINE=Object.freeze(sH.fromCssColorString("#7FFFD4")),sH.AZURE=Object.freeze(sH.fromCssColorString("#F0FFFF")),sH.BEIGE=Object.freeze(sH.fromCssColorString("#F5F5DC")),sH.BISQUE=Object.freeze(sH.fromCssColorString("#FFE4C4")),sH.BLACK=Object.freeze(sH.fromCssColorString("#000000")),sH.BLANCHEDALMOND=Object.freeze(sH.fromCssColorString("#FFEBCD")),sH.BLUE=Object.freeze(sH.fromCssColorString("#0000FF")),sH.BLUEVIOLET=Object.freeze(sH.fromCssColorString("#8A2BE2")),sH.BROWN=Object.freeze(sH.fromCssColorString("#A52A2A")),sH.BURLYWOOD=Object.freeze(sH.fromCssColorString("#DEB887")),sH.CADETBLUE=Object.freeze(sH.fromCssColorString("#5F9EA0")),sH.CHARTREUSE=Object.freeze(sH.fromCssColorString("#7FFF00")),sH.CHOCOLATE=Object.freeze(sH.fromCssColorString("#D2691E")),sH.CORAL=Object.freeze(sH.fromCssColorString("#FF7F50")),sH.CORNFLOWERBLUE=Object.freeze(sH.fromCssColorString("#6495ED")),sH.CORNSILK=Object.freeze(sH.fromCssColorString("#FFF8DC")),sH.CRIMSON=Object.freeze(sH.fromCssColorString("#DC143C")),sH.CYAN=Object.freeze(sH.fromCssColorString("#00FFFF")),sH.DARKBLUE=Object.freeze(sH.fromCssColorString("#00008B")),sH.DARKCYAN=Object.freeze(sH.fromCssColorString("#008B8B")),sH.DARKGOLDENROD=Object.freeze(sH.fromCssColorString("#B8860B")),sH.DARKGRAY=Object.freeze(sH.fromCssColorString("#A9A9A9")),sH.DARKGREEN=Object.freeze(sH.fromCssColorString("#006400")),sH.DARKGREY=sH.DARKGRAY,sH.DARKKHAKI=Object.freeze(sH.fromCssColorString("#BDB76B")),sH.DARKMAGENTA=Object.freeze(sH.fromCssColorString("#8B008B")),sH.DARKOLIVEGREEN=Object.freeze(sH.fromCssColorString("#556B2F")),sH.DARKORANGE=Object.freeze(sH.fromCssColorString("#FF8C00")),sH.DARKORCHID=Object.freeze(sH.fromCssColorString("#9932CC")),sH.DARKRED=Object.freeze(sH.fromCssColorString("#8B0000")),sH.DARKSALMON=Object.freeze(sH.fromCssColorString("#E9967A")),sH.DARKSEAGREEN=Object.freeze(sH.fromCssColorString("#8FBC8F")),sH.DARKSLATEBLUE=Object.freeze(sH.fromCssColorString("#483D8B")),sH.DARKSLATEGRAY=Object.freeze(sH.fromCssColorString("#2F4F4F")),sH.DARKSLATEGREY=sH.DARKSLATEGRAY,sH.DARKTURQUOISE=Object.freeze(sH.fromCssColorString("#00CED1")),sH.DARKVIOLET=Object.freeze(sH.fromCssColorString("#9400D3")),sH.DEEPPINK=Object.freeze(sH.fromCssColorString("#FF1493")),sH.DEEPSKYBLUE=Object.freeze(sH.fromCssColorString("#00BFFF")),sH.DIMGRAY=Object.freeze(sH.fromCssColorString("#696969")),sH.DIMGREY=sH.DIMGRAY,sH.DODGERBLUE=Object.freeze(sH.fromCssColorString("#1E90FF")),sH.FIREBRICK=Object.freeze(sH.fromCssColorString("#B22222")),sH.FLORALWHITE=Object.freeze(sH.fromCssColorString("#FFFAF0")),sH.FORESTGREEN=Object.freeze(sH.fromCssColorString("#228B22")),sH.FUCHSIA=Object.freeze(sH.fromCssColorString("#FF00FF")),sH.GAINSBORO=Object.freeze(sH.fromCssColorString("#DCDCDC")),sH.GHOSTWHITE=Object.freeze(sH.fromCssColorString("#F8F8FF")),sH.GOLD=Object.freeze(sH.fromCssColorString("#FFD700")),sH.GOLDENROD=Object.freeze(sH.fromCssColorString("#DAA520")),sH.GRAY=Object.freeze(sH.fromCssColorString("#808080")),sH.GREEN=Object.freeze(sH.fromCssColorString("#008000")),sH.GREENYELLOW=Object.freeze(sH.fromCssColorString("#ADFF2F")),sH.GREY=sH.GRAY,sH.HONEYDEW=Object.freeze(sH.fromCssColorString("#F0FFF0")),sH.HOTPINK=Object.freeze(sH.fromCssColorString("#FF69B4")),sH.INDIANRED=Object.freeze(sH.fromCssColorString("#CD5C5C")),sH.INDIGO=Object.freeze(sH.fromCssColorString("#4B0082")),sH.IVORY=Object.freeze(sH.fromCssColorString("#FFFFF0")),sH.KHAKI=Object.freeze(sH.fromCssColorString("#F0E68C")),sH.LAVENDER=Object.freeze(sH.fromCssColorString("#E6E6FA")),sH.LAVENDAR_BLUSH=Object.freeze(sH.fromCssColorString("#FFF0F5")),sH.LAWNGREEN=Object.freeze(sH.fromCssColorString("#7CFC00")),sH.LEMONCHIFFON=Object.freeze(sH.fromCssColorString("#FFFACD")),sH.LIGHTBLUE=Object.freeze(sH.fromCssColorString("#ADD8E6")),sH.LIGHTCORAL=Object.freeze(sH.fromCssColorString("#F08080")),sH.LIGHTCYAN=Object.freeze(sH.fromCssColorString("#E0FFFF")),sH.LIGHTGOLDENRODYELLOW=Object.freeze(sH.fromCssColorString("#FAFAD2")),sH.LIGHTGRAY=Object.freeze(sH.fromCssColorString("#D3D3D3")),sH.LIGHTGREEN=Object.freeze(sH.fromCssColorString("#90EE90")),sH.LIGHTGREY=sH.LIGHTGRAY,sH.LIGHTPINK=Object.freeze(sH.fromCssColorString("#FFB6C1")),sH.LIGHTSEAGREEN=Object.freeze(sH.fromCssColorString("#20B2AA")),sH.LIGHTSKYBLUE=Object.freeze(sH.fromCssColorString("#87CEFA")),sH.LIGHTSLATEGRAY=Object.freeze(sH.fromCssColorString("#778899")),sH.LIGHTSLATEGREY=sH.LIGHTSLATEGRAY,sH.LIGHTSTEELBLUE=Object.freeze(sH.fromCssColorString("#B0C4DE")),sH.LIGHTYELLOW=Object.freeze(sH.fromCssColorString("#FFFFE0")),sH.LIME=Object.freeze(sH.fromCssColorString("#00FF00")),sH.LIMEGREEN=Object.freeze(sH.fromCssColorString("#32CD32")),sH.LINEN=Object.freeze(sH.fromCssColorString("#FAF0E6")),sH.MAGENTA=Object.freeze(sH.fromCssColorString("#FF00FF")),sH.MAROON=Object.freeze(sH.fromCssColorString("#800000")),sH.MEDIUMAQUAMARINE=Object.freeze(sH.fromCssColorString("#66CDAA")),sH.MEDIUMBLUE=Object.freeze(sH.fromCssColorString("#0000CD")),sH.MEDIUMORCHID=Object.freeze(sH.fromCssColorString("#BA55D3")),sH.MEDIUMPURPLE=Object.freeze(sH.fromCssColorString("#9370DB")),sH.MEDIUMSEAGREEN=Object.freeze(sH.fromCssColorString("#3CB371")),sH.MEDIUMSLATEBLUE=Object.freeze(sH.fromCssColorString("#7B68EE")),sH.MEDIUMSPRINGGREEN=Object.freeze(sH.fromCssColorString("#00FA9A")),sH.MEDIUMTURQUOISE=Object.freeze(sH.fromCssColorString("#48D1CC")),sH.MEDIUMVIOLETRED=Object.freeze(sH.fromCssColorString("#C71585")),sH.MIDNIGHTBLUE=Object.freeze(sH.fromCssColorString("#191970")),sH.MINTCREAM=Object.freeze(sH.fromCssColorString("#F5FFFA")),sH.MISTYROSE=Object.freeze(sH.fromCssColorString("#FFE4E1")),sH.MOCCASIN=Object.freeze(sH.fromCssColorString("#FFE4B5")),sH.NAVAJOWHITE=Object.freeze(sH.fromCssColorString("#FFDEAD")),sH.NAVY=Object.freeze(sH.fromCssColorString("#000080")),sH.OLDLACE=Object.freeze(sH.fromCssColorString("#FDF5E6")),sH.OLIVE=Object.freeze(sH.fromCssColorString("#808000")),sH.OLIVEDRAB=Object.freeze(sH.fromCssColorString("#6B8E23")),sH.ORANGE=Object.freeze(sH.fromCssColorString("#FFA500")),sH.ORANGERED=Object.freeze(sH.fromCssColorString("#FF4500")),sH.ORCHID=Object.freeze(sH.fromCssColorString("#DA70D6")),sH.PALEGOLDENROD=Object.freeze(sH.fromCssColorString("#EEE8AA")),sH.PALEGREEN=Object.freeze(sH.fromCssColorString("#98FB98")),sH.PALETURQUOISE=Object.freeze(sH.fromCssColorString("#AFEEEE")),sH.PALEVIOLETRED=Object.freeze(sH.fromCssColorString("#DB7093")),sH.PAPAYAWHIP=Object.freeze(sH.fromCssColorString("#FFEFD5")),sH.PEACHPUFF=Object.freeze(sH.fromCssColorString("#FFDAB9")),sH.PERU=Object.freeze(sH.fromCssColorString("#CD853F")),sH.PINK=Object.freeze(sH.fromCssColorString("#FFC0CB")),sH.PLUM=Object.freeze(sH.fromCssColorString("#DDA0DD")),sH.POWDERBLUE=Object.freeze(sH.fromCssColorString("#B0E0E6")),sH.PURPLE=Object.freeze(sH.fromCssColorString("#800080")),sH.RED=Object.freeze(sH.fromCssColorString("#FF0000")),sH.ROSYBROWN=Object.freeze(sH.fromCssColorString("#BC8F8F")),sH.ROYALBLUE=Object.freeze(sH.fromCssColorString("#4169E1")),sH.SADDLEBROWN=Object.freeze(sH.fromCssColorString("#8B4513")),sH.SALMON=Object.freeze(sH.fromCssColorString("#FA8072")),sH.SANDYBROWN=Object.freeze(sH.fromCssColorString("#F4A460")),sH.SEAGREEN=Object.freeze(sH.fromCssColorString("#2E8B57")),sH.SEASHELL=Object.freeze(sH.fromCssColorString("#FFF5EE")),sH.SIENNA=Object.freeze(sH.fromCssColorString("#A0522D")),sH.SILVER=Object.freeze(sH.fromCssColorString("#C0C0C0")),sH.SKYBLUE=Object.freeze(sH.fromCssColorString("#87CEEB")),sH.SLATEBLUE=Object.freeze(sH.fromCssColorString("#6A5ACD")),sH.SLATEGRAY=Object.freeze(sH.fromCssColorString("#708090")),sH.SLATEGREY=sH.SLATEGRAY,sH.SNOW=Object.freeze(sH.fromCssColorString("#FFFAFA")),sH.SPRINGGREEN=Object.freeze(sH.fromCssColorString("#00FF7F")),sH.STEELBLUE=Object.freeze(sH.fromCssColorString("#4682B4")),sH.TAN=Object.freeze(sH.fromCssColorString("#D2B48C")),sH.TEAL=Object.freeze(sH.fromCssColorString("#008080")),sH.THISTLE=Object.freeze(sH.fromCssColorString("#D8BFD8")),sH.TOMATO=Object.freeze(sH.fromCssColorString("#FF6347")),sH.TURQUOISE=Object.freeze(sH.fromCssColorString("#40E0D0")),sH.VIOLET=Object.freeze(sH.fromCssColorString("#EE82EE")),sH.WHEAT=Object.freeze(sH.fromCssColorString("#F5DEB3")),sH.WHITE=Object.freeze(sH.fromCssColorString("#FFFFFF")),sH.WHITESMOKE=Object.freeze(sH.fromCssColorString("#F5F5F5")),sH.YELLOW=Object.freeze(sH.fromCssColorString("#FFFF00")),sH.YELLOWGREEN=Object.freeze(sH.fromCssColorString("#9ACD32")),sH.TRANSPARENT=Object.freeze(new sH(0,0,0,0));let sZ={CLOCKWISE:iD.CW,COUNTER_CLOCKWISE:iD.CCW};sZ.validate=e=>e===sZ.CLOCKWISE||e===sZ.COUNTER_CLOCKWISE;let sK=Object.freeze(sZ),sJ=function e(t){let r;if("object"!=typeof t||null===t)return t;let n=Object.keys(t);for(let i=0;i<n.length;i++)Object.hasOwn(t,r=n[i])&&"_applyFunctions"!==r&&(t[r]=e(t[r]));return Object.freeze(t)};function sQ(e){return e===iD.FUNC_ADD||e===iD.FUNC_SUBTRACT||e===iD.FUNC_REVERSE_SUBTRACT||e===iD.MIN||e===iD.MAX}function s0(e){return e===iD.ZERO||e===iD.ONE||e===iD.SRC_COLOR||e===iD.ONE_MINUS_SRC_COLOR||e===iD.DST_COLOR||e===iD.ONE_MINUS_DST_COLOR||e===iD.SRC_ALPHA||e===iD.ONE_MINUS_SRC_ALPHA||e===iD.DST_ALPHA||e===iD.ONE_MINUS_DST_ALPHA||e===iD.CONSTANT_COLOR||e===iD.ONE_MINUS_CONSTANT_COLOR||e===iD.CONSTANT_ALPHA||e===iD.ONE_MINUS_CONSTANT_ALPHA||e===iD.SRC_ALPHA_SATURATE}function s1(e){return e===iD.NEVER||e===iD.LESS||e===iD.EQUAL||e===iD.LEQUAL||e===iD.GREATER||e===iD.NOTEQUAL||e===iD.GEQUAL||e===iD.ALWAYS}function s3(e){return e===iD.ZERO||e===iD.KEEP||e===iD.REPLACE||e===iD.INCR||e===iD.DECR||e===iD.INVERT||e===iD.INCR_WRAP||e===iD.DECR_WRAP}function s2(e){var t,r;let n=e??e0.EMPTY_OBJECT,i=n.cull??e0.EMPTY_OBJECT,o=n.polygonOffset??e0.EMPTY_OBJECT,a=n.scissorTest??e0.EMPTY_OBJECT,s=a.rectangle??e0.EMPTY_OBJECT,l=n.depthRange??e0.EMPTY_OBJECT,u=n.depthTest??e0.EMPTY_OBJECT,c=n.colorMask??e0.EMPTY_OBJECT,f=n.blending??e0.EMPTY_OBJECT,h=f.color??e0.EMPTY_OBJECT,p=n.stencilTest??e0.EMPTY_OBJECT,d=p.frontOperation??e0.EMPTY_OBJECT,m=p.backOperation??e0.EMPTY_OBJECT,y=n.sampleCoverage??e0.EMPTY_OBJECT,_=n.viewport;if(this.frontFace=n.frontFace??sK.COUNTER_CLOCKWISE,this.cull={enabled:i.enabled??!1,face:i.face??iD.BACK},this.lineWidth=n.lineWidth??1,this.polygonOffset={enabled:o.enabled??!1,factor:o.factor??0,units:o.units??0},this.scissorTest={enabled:a.enabled??!1,rectangle:sj.clone(s)},this.depthRange={near:l.near??0,far:l.far??1},this.depthTest={enabled:u.enabled??!1,func:u.func??iD.LESS},this.colorMask={red:c.red??!0,green:c.green??!0,blue:c.blue??!0,alpha:c.alpha??!0},this.depthMask=n.depthMask??!0,this.stencilMask=n.stencilMask??-1,this.blending={enabled:f.enabled??!1,color:new sH(h.red??0,h.green??0,h.blue??0,h.alpha??0),equationRgb:f.equationRgb??iD.FUNC_ADD,equationAlpha:f.equationAlpha??iD.FUNC_ADD,functionSourceRgb:f.functionSourceRgb??iD.ONE,functionSourceAlpha:f.functionSourceAlpha??iD.ONE,functionDestinationRgb:f.functionDestinationRgb??iD.ZERO,functionDestinationAlpha:f.functionDestinationAlpha??iD.ZERO},this.stencilTest={enabled:p.enabled??!1,frontFunction:p.frontFunction??iD.ALWAYS,backFunction:p.backFunction??iD.ALWAYS,reference:p.reference??0,mask:p.mask??-1,frontOperation:{fail:d.fail??iD.KEEP,zFail:d.zFail??iD.KEEP,zPass:d.zPass??iD.KEEP},backOperation:{fail:m.fail??iD.KEEP,zFail:m.zFail??iD.KEEP,zPass:m.zPass??iD.KEEP}},this.sampleCoverage={enabled:y.enabled??!1,value:y.value??1,invert:y.invert??!1},this.viewport=H(_)?new sj(_.x,_.y,_.width,_.height):void 0,sm.maximumAliasedLineWidth>0&&(this.lineWidth<sm.minimumAliasedLineWidth||this.lineWidth>sm.maximumAliasedLineWidth))throw new Y("renderState.lineWidth is out of range.  Check minimumAliasedLineWidth and maximumAliasedLineWidth.");if(!sK.validate(this.frontFace))throw new Y("Invalid renderState.frontFace.");if((t=this.cull.face)!==iD.FRONT&&t!==iD.BACK&&t!==iD.FRONT_AND_BACK)throw new Y("Invalid renderState.cull.face.");if(this.scissorTest.rectangle.width<0||this.scissorTest.rectangle.height<0)throw new Y("renderState.scissorTest.rectangle.width and renderState.scissorTest.rectangle.height must be greater than or equal to zero.");if(this.depthRange.near>this.depthRange.far)throw new Y("renderState.depthRange.near can not be greater than renderState.depthRange.far.");if(this.depthRange.near<0)throw new Y("renderState.depthRange.near must be greater than or equal to zero.");if(this.depthRange.far>1)throw new Y("renderState.depthRange.far must be less than or equal to one.");if((r=this.depthTest.func)!==iD.NEVER&&r!==iD.LESS&&r!==iD.EQUAL&&r!==iD.LEQUAL&&r!==iD.GREATER&&r!==iD.NOTEQUAL&&r!==iD.GEQUAL&&r!==iD.ALWAYS)throw new Y("Invalid renderState.depthTest.func.");if(this.blending.color.red<0||this.blending.color.red>1||this.blending.color.green<0||this.blending.color.green>1||this.blending.color.blue<0||this.blending.color.blue>1||this.blending.color.alpha<0||this.blending.color.alpha>1)throw new Y("renderState.blending.color components must be greater than or equal to zero and less than or equal to one.");if(!sQ(this.blending.equationRgb))throw new Y("Invalid renderState.blending.equationRgb.");if(!sQ(this.blending.equationAlpha))throw new Y("Invalid renderState.blending.equationAlpha.");if(!s0(this.blending.functionSourceRgb))throw new Y("Invalid renderState.blending.functionSourceRgb.");if(!s0(this.blending.functionSourceAlpha))throw new Y("Invalid renderState.blending.functionSourceAlpha.");if(!s0(this.blending.functionDestinationRgb))throw new Y("Invalid renderState.blending.functionDestinationRgb.");if(!s0(this.blending.functionDestinationAlpha))throw new Y("Invalid renderState.blending.functionDestinationAlpha.");if(!s1(this.stencilTest.frontFunction))throw new Y("Invalid renderState.stencilTest.frontFunction.");if(!s1(this.stencilTest.backFunction))throw new Y("Invalid renderState.stencilTest.backFunction.");if(!s3(this.stencilTest.frontOperation.fail))throw new Y("Invalid renderState.stencilTest.frontOperation.fail.");if(!s3(this.stencilTest.frontOperation.zFail))throw new Y("Invalid renderState.stencilTest.frontOperation.zFail.");if(!s3(this.stencilTest.frontOperation.zPass))throw new Y("Invalid renderState.stencilTest.frontOperation.zPass.");if(!s3(this.stencilTest.backOperation.fail))throw new Y("Invalid renderState.stencilTest.backOperation.fail.");if(!s3(this.stencilTest.backOperation.zFail))throw new Y("Invalid renderState.stencilTest.backOperation.zFail.");if(!s3(this.stencilTest.backOperation.zPass))throw new Y("Invalid renderState.stencilTest.backOperation.zPass.");if(H(this.viewport)){if(this.viewport.width<0)throw new Y("renderState.viewport.width must be greater than or equal to zero.");if(this.viewport.height<0)throw new Y("renderState.viewport.height must be greater than or equal to zero.");if(sm.maximumViewportWidth>0&&this.viewport.width>sm.maximumViewportWidth)throw new Y(`renderState.viewport.width must be less than or equal to the maximum viewport width (${sm.maximumViewportWidth.toString()}).  Check maximumViewportWidth.`);if(sm.maximumViewportHeight>0&&this.viewport.height>sm.maximumViewportHeight)throw new Y(`renderState.viewport.height must be less than or equal to the maximum viewport height (${sm.maximumViewportHeight.toString()}).  Check maximumViewportHeight.`)}this.id=0,this._applyFunctions=[]}let s4=0,s5={};function s6(e,t,r){r?e.enable(t):e.disable(t)}function s8(e,t){e.frontFace(t.frontFace)}function s7(e,t){let r=t.cull,n=r.enabled;s6(e,e.CULL_FACE,n),n&&e.cullFace(r.face)}function s9(e,t){e.lineWidth(t.lineWidth)}function le(e,t){let r=t.polygonOffset,n=r.enabled;s6(e,e.POLYGON_OFFSET_FILL,n),n&&e.polygonOffset(r.factor,r.units)}function lt(e,t,r){let n=t.scissorTest,i=H(r.scissorTest)?r.scissorTest.enabled:n.enabled;if(s6(e,e.SCISSOR_TEST,i),i){let t=H(r.scissorTest)?r.scissorTest.rectangle:n.rectangle;e.scissor(t.x,t.y,t.width,t.height)}}function lr(e,t){let r=t.depthRange;e.depthRange(r.near,r.far)}function ln(e,t){let r=t.depthTest,n=r.enabled;s6(e,e.DEPTH_TEST,n),n&&e.depthFunc(r.func)}function li(e,t){let r=t.colorMask;e.colorMask(r.red,r.green,r.blue,r.alpha)}function lo(e,t){e.depthMask(t.depthMask)}function la(e,t){e.stencilMask(t.stencilMask)}function ls(e,t,r){let n=t.blending,i=H(r.blendingEnabled)?r.blendingEnabled:n.enabled;if(s6(e,e.BLEND,i),i){var o;o=n.color,e.blendColor(o.red,o.green,o.blue,o.alpha),e.blendEquationSeparate(n.equationRgb,n.equationAlpha),e.blendFuncSeparate(n.functionSourceRgb,n.functionDestinationRgb,n.functionSourceAlpha,n.functionDestinationAlpha)}}function ll(e,t){let r=t.stencilTest,n=r.enabled;if(s6(e,e.STENCIL_TEST,n),n){let t=r.frontFunction,n=r.backFunction,i=r.reference,o=r.mask;e.stencilFunc(t,i,o),e.stencilFuncSeparate(e.BACK,n,i,o),e.stencilFuncSeparate(e.FRONT,t,i,o);let a=r.frontOperation,s=a.fail,l=a.zFail,u=a.zPass;e.stencilOpSeparate(e.FRONT,s,l,u);let c=r.backOperation,f=c.fail,h=c.zFail,p=c.zPass;e.stencilOpSeparate(e.BACK,f,h,p)}}function lu(e,t){let r=t.sampleCoverage,n=r.enabled;s6(e,e.SAMPLE_COVERAGE,n),n&&e.sampleCoverage(r.value,r.invert)}s2.fromCache=e=>{let t=JSON.stringify(e),r=s5[t];if(H(r))return++r.referenceCount,r.state;let n=new s2(e),i=JSON.stringify(n);return H(r=s5[i])||(n.id=s4++,r={referenceCount:0,state:n=sJ(n)},s5[i]=r),++r.referenceCount,s5[t]={referenceCount:1,state:r.state},r.state},s2.removeFromCache=e=>{let t=JSON.stringify(new s2(e)),r=s5[t],n=JSON.stringify(e),i=s5[n];H(i)&&(--i.referenceCount,0===i.referenceCount&&(delete s5[n],H(r)&&--r.referenceCount)),H(r)&&0===r.referenceCount&&delete s5[t]},s2.getCache=()=>s5,s2.clearCache=()=>{s5={}};let lc=new sj;function lf(e,t,r){let n=t.viewport??r.viewport;H(n)||((n=lc).width=r.context.drawingBufferWidth,n.height=r.context.drawingBufferHeight),r.context.uniformState.viewport=n,e.viewport(n.x,n.y,n.width,n.height)}s2.apply=(e,t,r)=>{s8(e,t),s7(e,t),s9(e,t),le(e,t),lr(e,t),ln(e,t),li(e,t),lo(e,t),la(e,t),ll(e,t),lu(e,t),lt(e,t,r),ls(e,t,r),lf(e,t,r)},s2.partialApply=(e,t,r,n,i,o)=>{if(t!==r){let n=r._applyFunctions[t.id];if(!H(n)){let e;e=[],t.frontFace!==r.frontFace&&e.push(s8),(t.cull.enabled!==r.cull.enabled||t.cull.face!==r.cull.face)&&e.push(s7),t.lineWidth!==r.lineWidth&&e.push(s9),(t.polygonOffset.enabled!==r.polygonOffset.enabled||t.polygonOffset.factor!==r.polygonOffset.factor||t.polygonOffset.units!==r.polygonOffset.units)&&e.push(le),(t.depthRange.near!==r.depthRange.near||t.depthRange.far!==r.depthRange.far)&&e.push(lr),(t.depthTest.enabled!==r.depthTest.enabled||t.depthTest.func!==r.depthTest.func)&&e.push(ln),(t.colorMask.red!==r.colorMask.red||t.colorMask.green!==r.colorMask.green||t.colorMask.blue!==r.colorMask.blue||t.colorMask.alpha!==r.colorMask.alpha)&&e.push(li),t.depthMask!==r.depthMask&&e.push(lo),t.stencilMask!==r.stencilMask&&e.push(la),(t.stencilTest.enabled!==r.stencilTest.enabled||t.stencilTest.frontFunction!==r.stencilTest.frontFunction||t.stencilTest.backFunction!==r.stencilTest.backFunction||t.stencilTest.reference!==r.stencilTest.reference||t.stencilTest.mask!==r.stencilTest.mask||t.stencilTest.frontOperation.fail!==r.stencilTest.frontOperation.fail||t.stencilTest.frontOperation.zFail!==r.stencilTest.frontOperation.zFail||t.stencilTest.backOperation.fail!==r.stencilTest.backOperation.fail||t.stencilTest.backOperation.zFail!==r.stencilTest.backOperation.zFail||t.stencilTest.backOperation.zPass!==r.stencilTest.backOperation.zPass)&&e.push(ll),(t.sampleCoverage.enabled!==r.sampleCoverage.enabled||t.sampleCoverage.value!==r.sampleCoverage.value||t.sampleCoverage.invert!==r.sampleCoverage.invert)&&e.push(lu),n=e,r._applyFunctions[t.id]=n}let i=n.length;for(let t=0;t<i;++t)n[t](e,r)}((H(n.scissorTest)?n.scissorTest:t.scissorTest)!==(H(i.scissorTest)?i.scissorTest:r.scissorTest)||o)&&lt(e,r,i);let a=H(n.blendingEnabled)?n.blendingEnabled:t.blending.enabled,s=H(i.blendingEnabled)?i.blendingEnabled:r.blending.enabled;(a!==s||s&&t.blending!==r.blending)&&ls(e,r,i),(t!==r||n!==i||n.context!==i.context)&&lf(e,r,i)},s2.getState=e=>{if(!H(e))throw new Y("renderState is required.");return{frontFace:e.frontFace,cull:{enabled:e.cull.enabled,face:e.cull.face},lineWidth:e.lineWidth,polygonOffset:{enabled:e.polygonOffset.enabled,factor:e.polygonOffset.factor,units:e.polygonOffset.units},scissorTest:{enabled:e.scissorTest.enabled,rectangle:sj.clone(e.scissorTest.rectangle)},depthRange:{near:e.depthRange.near,far:e.depthRange.far},depthTest:{enabled:e.depthTest.enabled,func:e.depthTest.func},colorMask:{red:e.colorMask.red,green:e.colorMask.green,blue:e.colorMask.blue,alpha:e.colorMask.alpha},depthMask:e.depthMask,stencilMask:e.stencilMask,blending:{enabled:e.blending.enabled,color:sH.clone(e.blending.color),equationRgb:e.blending.equationRgb,equationAlpha:e.blending.equationAlpha,functionSourceRgb:e.blending.functionSourceRgb,functionSourceAlpha:e.blending.functionSourceAlpha,functionDestinationRgb:e.blending.functionDestinationRgb,functionDestinationAlpha:e.blending.functionDestinationAlpha},stencilTest:{enabled:e.stencilTest.enabled,frontFunction:e.stencilTest.frontFunction,backFunction:e.stencilTest.backFunction,reference:e.stencilTest.reference,mask:e.stencilTest.mask,frontOperation:{fail:e.stencilTest.frontOperation.fail,zFail:e.stencilTest.frontOperation.zFail,zPass:e.stencilTest.frontOperation.zPass},backOperation:{fail:e.stencilTest.backOperation.fail,zFail:e.stencilTest.backOperation.zFail,zPass:e.stencilTest.backOperation.zPass}},sampleCoverage:{enabled:e.sampleCoverage.enabled,value:e.sampleCoverage.value,invert:e.sampleCoverage.invert},viewport:H(e.viewport)?sj.clone(e.viewport):void 0}};let lh=new ee;function lp(e){this._size=e.size,this._datatype=e.datatype,this.getValue=e.getValue}let ld={};ld[iD.FLOAT]="float",ld[iD.FLOAT_VEC2]="vec2",ld[iD.FLOAT_VEC3]="vec3",ld[iD.FLOAT_VEC4]="vec4",ld[iD.INT]="int",ld[iD.INT_VEC2]="ivec2",ld[iD.INT_VEC3]="ivec3",ld[iD.INT_VEC4]="ivec4",ld[iD.BOOL]="bool",ld[iD.BOOL_VEC2]="bvec2",ld[iD.BOOL_VEC3]="bvec3",ld[iD.BOOL_VEC4]="bvec4",ld[iD.FLOAT_MAT2]="mat2",ld[iD.FLOAT_MAT3]="mat3",ld[iD.FLOAT_MAT4]="mat4",ld[iD.SAMPLER_2D]="sampler2D",ld[iD.SAMPLER_CUBE]="samplerCube",lp.prototype.getDeclaration=function(e){let t=`uniform ${ld[this._datatype]} ${e}`,r=this._size;return 1===r?t+=";":t+=`[${r.toString()}];`,t};let lm={czm_viewport:new lp({size:1,datatype:iD.FLOAT_VEC4,getValue:e=>e.viewportCartesian4}),czm_viewportOrthographic:new lp({size:1,datatype:iD.FLOAT_MAT4,getValue:e=>e.viewportOrthographic}),czm_viewportTransformation:new lp({size:1,datatype:iD.FLOAT_MAT4,getValue:e=>e.viewportTransformation}),czm_globeDepthTexture:new lp({size:1,datatype:iD.SAMPLER_2D,getValue:e=>e.globeDepthTexture}),czm_edgeIdTexture:new lp({size:1,datatype:iD.SAMPLER_2D,getValue:e=>e.edgeIdTexture}),czm_edgeColorTexture:new lp({size:1,datatype:iD.SAMPLER_2D,getValue:e=>e.edgeColorTexture}),czm_edgeDepthTexture:new lp({size:1,datatype:iD.SAMPLER_2D,getValue:e=>e.edgeDepthTexture}),czm_model:new lp({size:1,datatype:iD.FLOAT_MAT4,getValue:e=>e.model}),czm_inverseModel:new lp({size:1,datatype:iD.FLOAT_MAT4,getValue:e=>e.inverseModel}),czm_view:new lp({size:1,datatype:iD.FLOAT_MAT4,getValue:e=>e.view}),czm_view3D:new lp({size:1,datatype:iD.FLOAT_MAT4,getValue:e=>e.view3D}),czm_viewRotation:new lp({size:1,datatype:iD.FLOAT_MAT3,getValue:e=>e.viewRotation}),czm_viewRotation3D:new lp({size:1,datatype:iD.FLOAT_MAT3,getValue:e=>e.viewRotation3D}),czm_inverseView:new lp({size:1,datatype:iD.FLOAT_MAT4,getValue:e=>e.inverseView}),czm_inverseView3D:new lp({size:1,datatype:iD.FLOAT_MAT4,getValue:e=>e.inverseView3D}),czm_inverseViewRotation:new lp({size:1,datatype:iD.FLOAT_MAT3,getValue:e=>e.inverseViewRotation}),czm_inverseViewRotation3D:new lp({size:1,datatype:iD.FLOAT_MAT3,getValue:e=>e.inverseViewRotation3D}),czm_projection:new lp({size:1,datatype:iD.FLOAT_MAT4,getValue:e=>e.projection}),czm_inverseProjection:new lp({size:1,datatype:iD.FLOAT_MAT4,getValue:e=>e.inverseProjection}),czm_infiniteProjection:new lp({size:1,datatype:iD.FLOAT_MAT4,getValue:e=>e.infiniteProjection}),czm_modelView:new lp({size:1,datatype:iD.FLOAT_MAT4,getValue:e=>e.modelView}),czm_modelView3D:new lp({size:1,datatype:iD.FLOAT_MAT4,getValue:e=>e.modelView3D}),czm_modelViewRelativeToEye:new lp({size:1,datatype:iD.FLOAT_MAT4,getValue:e=>e.modelViewRelativeToEye}),czm_inverseModelView:new lp({size:1,datatype:iD.FLOAT_MAT4,getValue:e=>e.inverseModelView}),czm_inverseModelView3D:new lp({size:1,datatype:iD.FLOAT_MAT4,getValue:e=>e.inverseModelView3D}),czm_viewProjection:new lp({size:1,datatype:iD.FLOAT_MAT4,getValue:e=>e.viewProjection}),czm_inverseViewProjection:new lp({size:1,datatype:iD.FLOAT_MAT4,getValue:e=>e.inverseViewProjection}),czm_modelViewProjection:new lp({size:1,datatype:iD.FLOAT_MAT4,getValue:e=>e.modelViewProjection}),czm_inverseModelViewProjection:new lp({size:1,datatype:iD.FLOAT_MAT4,getValue:e=>e.inverseModelViewProjection}),czm_modelViewProjectionRelativeToEye:new lp({size:1,datatype:iD.FLOAT_MAT4,getValue:e=>e.modelViewProjectionRelativeToEye}),czm_modelViewInfiniteProjection:new lp({size:1,datatype:iD.FLOAT_MAT4,getValue:e=>e.modelViewInfiniteProjection}),czm_orthographicIn3D:new lp({size:1,datatype:iD.FLOAT,getValue:e=>+!!e.orthographicIn3D}),czm_normal:new lp({size:1,datatype:iD.FLOAT_MAT3,getValue:e=>e.normal}),czm_normal3D:new lp({size:1,datatype:iD.FLOAT_MAT3,getValue:e=>e.normal3D}),czm_inverseNormal:new lp({size:1,datatype:iD.FLOAT_MAT3,getValue:e=>e.inverseNormal}),czm_inverseNormal3D:new lp({size:1,datatype:iD.FLOAT_MAT3,getValue:e=>e.inverseNormal3D}),czm_eyeHeight:new lp({size:1,datatype:iD.FLOAT,getValue:e=>e.eyeHeight}),czm_eyeHeight2D:new lp({size:1,datatype:iD.FLOAT_VEC2,getValue:e=>e.eyeHeight2D}),czm_eyeEllipsoidNormalEC:new lp({size:1,datatype:iD.FLOAT_VEC3,getValue:e=>e.eyeEllipsoidNormalEC}),czm_eyeEllipsoidCurvature:new lp({size:1,datatype:iD.FLOAT_VEC2,getValue:e=>e.eyeEllipsoidCurvature}),czm_modelToEnu:new lp({size:1,datatype:iD.FLOAT_MAT4,getValue:e=>e.modelToEnu}),czm_enuToModel:new lp({size:1,datatype:iD.FLOAT_MAT4,getValue:e=>e.enuToModel}),czm_entireFrustum:new lp({size:1,datatype:iD.FLOAT_VEC2,getValue:e=>e.entireFrustum}),czm_currentFrustum:new lp({size:1,datatype:iD.FLOAT_VEC2,getValue:e=>e.currentFrustum}),czm_frustumPlanes:new lp({size:1,datatype:iD.FLOAT_VEC4,getValue:e=>e.frustumPlanes}),czm_farDepthFromNearPlusOne:new lp({size:1,datatype:iD.FLOAT,getValue:e=>e.farDepthFromNearPlusOne}),czm_log2FarDepthFromNearPlusOne:new lp({size:1,datatype:iD.FLOAT,getValue:e=>e.log2FarDepthFromNearPlusOne}),czm_oneOverLog2FarDepthFromNearPlusOne:new lp({size:1,datatype:iD.FLOAT,getValue:e=>e.oneOverLog2FarDepthFromNearPlusOne}),czm_sunPositionWC:new lp({size:1,datatype:iD.FLOAT_VEC3,getValue:e=>e.sunPositionWC}),czm_sunPositionColumbusView:new lp({size:1,datatype:iD.FLOAT_VEC3,getValue:e=>e.sunPositionColumbusView}),czm_sunDirectionEC:new lp({size:1,datatype:iD.FLOAT_VEC3,getValue:e=>e.sunDirectionEC}),czm_sunDirectionWC:new lp({size:1,datatype:iD.FLOAT_VEC3,getValue:e=>e.sunDirectionWC}),czm_moonDirectionEC:new lp({size:1,datatype:iD.FLOAT_VEC3,getValue:e=>e.moonDirectionEC}),czm_lightDirectionEC:new lp({size:1,datatype:iD.FLOAT_VEC3,getValue:e=>e.lightDirectionEC}),czm_lightDirectionWC:new lp({size:1,datatype:iD.FLOAT_VEC3,getValue:e=>e.lightDirectionWC}),czm_lightColor:new lp({size:1,datatype:iD.FLOAT_VEC3,getValue:e=>e.lightColor}),czm_lightColorHdr:new lp({size:1,datatype:iD.FLOAT_VEC3,getValue:e=>e.lightColorHdr}),czm_encodedCameraPositionMCHigh:new lp({size:1,datatype:iD.FLOAT_VEC3,getValue:e=>e.encodedCameraPositionMCHigh}),czm_encodedCameraPositionMCLow:new lp({size:1,datatype:iD.FLOAT_VEC3,getValue:e=>e.encodedCameraPositionMCLow}),czm_viewerPositionWC:new lp({size:1,datatype:iD.FLOAT_VEC3,getValue:e=>e3.getTranslation(e.inverseView,lh)}),czm_frameNumber:new lp({size:1,datatype:iD.FLOAT,getValue:e=>e.frameState.frameNumber}),czm_morphTime:new lp({size:1,datatype:iD.FLOAT,getValue:e=>e.frameState.morphTime}),czm_sceneMode:new lp({size:1,datatype:iD.FLOAT,getValue:e=>e.frameState.mode}),czm_pass:new lp({size:1,datatype:iD.FLOAT,getValue:e=>e.pass}),czm_backgroundColor:new lp({size:1,datatype:iD.FLOAT_VEC4,getValue:e=>e.backgroundColor}),czm_brdfLut:new lp({size:1,datatype:iD.SAMPLER_2D,getValue:e=>e.brdfLut}),czm_environmentMap:new lp({size:1,datatype:iD.SAMPLER_CUBE,getValue:e=>e.environmentMap}),czm_specularEnvironmentMaps:new lp({size:1,datatype:iD.SAMPLER_CUBE,getValue:e=>e.specularEnvironmentMaps}),czm_specularEnvironmentMapsMaximumLOD:new lp({size:1,datatype:iD.FLOAT,getValue:e=>e.specularEnvironmentMapsMaximumLOD}),czm_sphericalHarmonicCoefficients:new lp({size:9,datatype:iD.FLOAT_VEC3,getValue:e=>e.sphericalHarmonicCoefficients}),czm_temeToPseudoFixed:new lp({size:1,datatype:iD.FLOAT_MAT3,getValue:e=>e.temeToPseudoFixedMatrix}),czm_pixelRatio:new lp({size:1,datatype:iD.FLOAT,getValue:e=>e.pixelRatio}),czm_fogDensity:new lp({size:1,datatype:iD.FLOAT,getValue:e=>e.fogDensity}),czm_fogVisualDensityScalar:new lp({size:1,datatype:iD.FLOAT,getValue:e=>e.fogVisualDensityScalar}),czm_fogMinimumBrightness:new lp({size:1,datatype:iD.FLOAT,getValue:e=>e.fogMinimumBrightness}),czm_atmosphereHsbShift:new lp({size:1,datatype:iD.FLOAT_VEC3,getValue:e=>e.atmosphereHsbShift}),czm_atmosphereLightIntensity:new lp({size:1,datatype:iD.FLOAT,getValue:e=>e.atmosphereLightIntensity}),czm_atmosphereRayleighCoefficient:new lp({size:1,datatype:iD.FLOAT_VEC3,getValue:e=>e.atmosphereRayleighCoefficient}),czm_atmosphereRayleighScaleHeight:new lp({size:1,datatype:iD.FLOAT,getValue:e=>e.atmosphereRayleighScaleHeight}),czm_atmosphereMieCoefficient:new lp({size:1,datatype:iD.FLOAT_VEC3,getValue:e=>e.atmosphereMieCoefficient}),czm_atmosphereMieScaleHeight:new lp({size:1,datatype:iD.FLOAT,getValue:e=>e.atmosphereMieScaleHeight}),czm_atmosphereMieAnisotropy:new lp({size:1,datatype:iD.FLOAT,getValue:e=>e.atmosphereMieAnisotropy}),czm_atmosphereDynamicLighting:new lp({size:1,datatype:iD.FLOAT,getValue:e=>e.atmosphereDynamicLighting}),czm_splitPosition:new lp({size:1,datatype:iD.FLOAT,getValue:e=>e.splitPosition}),czm_geometricToleranceOverMeter:new lp({size:1,datatype:iD.FLOAT,getValue:e=>e.geometricToleranceOverMeter}),czm_minimumDisableDepthTestDistance:new lp({size:1,datatype:iD.FLOAT,getValue:e=>e.minimumDisableDepthTestDistance}),czm_invertClassificationColor:new lp({size:1,datatype:iD.FLOAT_VEC4,getValue:e=>e.invertClassificationColor}),czm_gamma:new lp({size:1,datatype:iD.FLOAT,getValue:e=>e.gamma}),czm_ellipsoidRadii:new lp({size:1,datatype:iD.FLOAT_VEC3,getValue:e=>e.ellipsoid.radii}),czm_ellipsoidInverseRadii:new lp({size:1,datatype:iD.FLOAT_VEC3,getValue:e=>e.ellipsoid.oneOverRadii})};function ly(e,t,r,n){this.name=r,this.value=void 0,this._value=0,this._gl=e,this._location=n}function l_(e,t,r,n){this.name=r,this.value=void 0,this._value=new em,this._gl=e,this._location=n}function lE(e,t,r,n){this.name=r,this.value=void 0,this._value=void 0,this._gl=e,this._location=n}function lO(e,t,r,n){this.name=r,this.value=void 0,this._value=void 0,this._gl=e,this._location=n}function lg(e,t,r,n){this.name=r,this.value=void 0,this._gl=e,this._location=n,this.textureUnitIndex=void 0}function lT(e,t,r,n){this.name=r,this.value=void 0,this._value=0,this._gl=e,this._location=n}function lA(e,t,r,n){this.name=r,this.value=void 0,this._value=new em,this._gl=e,this._location=n}function lb(e,t,r,n){this.name=r,this.value=void 0,this._value=new ee,this._gl=e,this._location=n}function lw(e,t,r,n){this.name=r,this.value=void 0,this._value=new eW,this._gl=e,this._location=n}ly.prototype.set=function(){this.value!==this._value&&(this._value=this.value,this._gl.uniform1f(this._location,this.value))},l_.prototype.set=function(){let e=this.value;em.equals(e,this._value)||(em.clone(e,this._value),this._gl.uniform2f(this._location,e.x,e.y))},lE.prototype.set=function(){let e=this.value;if(H(e.red))sH.equals(e,this._value)||(this._value=sH.clone(e,this._value),this._gl.uniform3f(this._location,e.red,e.green,e.blue));else if(H(e.x))ee.equals(e,this._value)||(this._value=ee.clone(e,this._value),this._gl.uniform3f(this._location,e.x,e.y,e.z));else throw new Y(`Invalid vec3 value for uniform "${this.name}".`)},lO.prototype.set=function(){let e=this.value;if(H(e.red))sH.equals(e,this._value)||(this._value=sH.clone(e,this._value),this._gl.uniform4f(this._location,e.red,e.green,e.blue,e.alpha));else if(H(e.x))eW.equals(e,this._value)||(this._value=eW.clone(e,this._value),this._gl.uniform4f(this._location,e.x,e.y,e.z,e.w));else throw new Y(`Invalid vec4 value for uniform "${this.name}".`)},lg.prototype.set=function(){let e=this._gl;e.activeTexture(e.TEXTURE0+this.textureUnitIndex);let t=this.value;e.bindTexture(t._target,t._texture)},lg.prototype._setSampler=function(e){return this.textureUnitIndex=e,this._gl.uniform1i(this._location,e),e+1},lT.prototype.set=function(){this.value!==this._value&&(this._value=this.value,this._gl.uniform1i(this._location,this.value))},lA.prototype.set=function(){let e=this.value;em.equals(e,this._value)||(em.clone(e,this._value),this._gl.uniform2i(this._location,e.x,e.y))},lb.prototype.set=function(){let e=this.value;ee.equals(e,this._value)||(ee.clone(e,this._value),this._gl.uniform3i(this._location,e.x,e.y,e.z))},lw.prototype.set=function(){let e=this.value;eW.equals(e,this._value)||(eW.clone(e,this._value),this._gl.uniform4i(this._location,e.x,e.y,e.z,e.w))};let lR=new Float32Array(4);function lS(e,t,r,n){this.name=r,this.value=void 0,this._value=new ij,this._gl=e,this._location=n}lS.prototype.set=function(){if(!ij.equalsArray(this.value,this._value,0)){ij.clone(this.value,this._value);let e=ij.toArray(this.value,lR);this._gl.uniformMatrix2fv(this._location,!1,e)}};let lx=new Float32Array(9);function lN(e,t,r,n){this.name=r,this.value=void 0,this._value=new eF,this._gl=e,this._location=n}lN.prototype.set=function(){if(!eF.equalsArray(this.value,this._value,0)){eF.clone(this.value,this._value);let e=eF.toArray(this.value,lx);this._gl.uniformMatrix3fv(this._location,!1,e)}};let lI=new Float32Array(16);function lC(e,t,r,n){this.name=r,this.value=void 0,this._value=new e3,this._gl=e,this._location=n}lC.prototype.set=function(){if(!e3.equalsArray(this.value,this._value,0)){e3.clone(this.value,this._value);let e=e3.toArray(this.value,lI);this._gl.uniformMatrix4fv(this._location,!1,e)}};let lv=function(e,t,r,n){switch(t.type){case e.FLOAT:return new ly(e,t,r,n);case e.FLOAT_VEC2:return new l_(e,t,r,n);case e.FLOAT_VEC3:return new lE(e,t,r,n);case e.FLOAT_VEC4:return new lO(e,t,r,n);case e.SAMPLER_2D:case e.SAMPLER_3D:case e.SAMPLER_CUBE:case e.UNSIGNED_INT_SAMPLER_2D:return new lg(e,t,r,n);case e.INT:case e.BOOL:return new lT(e,t,r,n);case e.INT_VEC2:case e.BOOL_VEC2:return new lA(e,t,r,n);case e.INT_VEC3:case e.BOOL_VEC3:return new lb(e,t,r,n);case e.INT_VEC4:case e.BOOL_VEC4:return new lw(e,t,r,n);case e.FLOAT_MAT2:return new lS(e,t,r,n);case e.FLOAT_MAT3:return new lN(e,t,r,n);case e.FLOAT_MAT4:return new lC(e,t,r,n);default:throw new e1(`Unrecognized uniform type: ${t.type} for uniform "${r}".`)}};function lM(e,t,r,n){let i=n.length;this.name=r,this.value=Array(i),this._value=new Float32Array(i),this._gl=e,this._location=n[0]}function lP(e,t,r,n){let i=n.length;this.name=r,this.value=Array(i),this._value=new Float32Array(2*i),this._gl=e,this._location=n[0]}function lL(e,t,r,n){let i=n.length;this.name=r,this.value=Array(i),this._value=new Float32Array(3*i),this._gl=e,this._location=n[0]}function lF(e,t,r,n){let i=n.length;this.name=r,this.value=Array(i),this._value=new Float32Array(4*i),this._gl=e,this._location=n[0]}function lD(e,t,r,n){let i=n.length;this.name=r,this.value=Array(i),this._value=new Float32Array(i),this._gl=e,this._locations=n,this.textureUnitIndex=void 0}function lB(e,t,r,n){let i=n.length;this.name=r,this.value=Array(i),this._value=new Int32Array(i),this._gl=e,this._location=n[0]}function lz(e,t,r,n){let i=n.length;this.name=r,this.value=Array(i),this._value=new Int32Array(2*i),this._gl=e,this._location=n[0]}function lU(e,t,r,n){let i=n.length;this.name=r,this.value=Array(i),this._value=new Int32Array(3*i),this._gl=e,this._location=n[0]}function lj(e,t,r,n){let i=n.length;this.name=r,this.value=Array(i),this._value=new Int32Array(4*i),this._gl=e,this._location=n[0]}function lq(e,t,r,n){let i=n.length;this.name=r,this.value=Array(i),this._value=new Float32Array(4*i),this._gl=e,this._location=n[0]}function lG(e,t,r,n){let i=n.length;this.name=r,this.value=Array(i),this._value=new Float32Array(9*i),this._gl=e,this._location=n[0]}function lV(e,t,r,n){let i=n.length;this.name=r,this.value=Array(i),this._value=new Float32Array(16*i),this._gl=e,this._location=n[0]}lM.prototype.set=function(){let e=this.value,t=e.length,r=this._value,n=!1;for(let i=0;i<t;++i){let t=e[i];t!==r[i]&&(r[i]=t,n=!0)}n&&this._gl.uniform1fv(this._location,r)},lP.prototype.set=function(){let e=this.value,t=e.length,r=this._value,n=!1,i=0;for(let o=0;o<t;++o){let t=e[o];em.equalsArray(t,r,i)||(em.pack(t,r,i),n=!0),i+=2}n&&this._gl.uniform2fv(this._location,r)},lL.prototype.set=function(){let e=this.value,t=e.length,r=this._value,n=!1,i=0;for(let o=0;o<t;++o){let t=e[o];if(H(t.red))(t.red!==r[i]||t.green!==r[i+1]||t.blue!==r[i+2])&&(r[i]=t.red,r[i+1]=t.green,r[i+2]=t.blue,n=!0);else if(H(t.x))ee.equalsArray(t,r,i)||(ee.pack(t,r,i),n=!0);else throw new Y("Invalid vec3 value.");i+=3}n&&this._gl.uniform3fv(this._location,r)},lF.prototype.set=function(){let e=this.value,t=e.length,r=this._value,n=!1,i=0;for(let o=0;o<t;++o){let t=e[o];if(H(t.red))sH.equalsArray(t,r,i)||(sH.pack(t,r,i),n=!0);else if(H(t.x))eW.equalsArray(t,r,i)||(eW.pack(t,r,i),n=!0);else throw new Y("Invalid vec4 value.");i+=4}n&&this._gl.uniform4fv(this._location,r)},lD.prototype.set=function(){let e=this._gl,t=e.TEXTURE0+this.textureUnitIndex,r=this.value,n=r.length;for(let i=0;i<n;++i){let n=r[i];e.activeTexture(t+i),e.bindTexture(n._target,n._texture)}},lD.prototype._setSampler=function(e){this.textureUnitIndex=e;let t=this._locations,r=t.length;for(let n=0;n<r;++n){let r=e+n;this._gl.uniform1i(t[n],r)}return e+r},lB.prototype.set=function(){let e=this.value,t=e.length,r=this._value,n=!1;for(let i=0;i<t;++i){let t=e[i];t!==r[i]&&(r[i]=t,n=!0)}n&&this._gl.uniform1iv(this._location,r)},lz.prototype.set=function(){let e=this.value,t=e.length,r=this._value,n=!1,i=0;for(let o=0;o<t;++o){let t=e[o];em.equalsArray(t,r,i)||(em.pack(t,r,i),n=!0),i+=2}n&&this._gl.uniform2iv(this._location,r)},lU.prototype.set=function(){let e=this.value,t=e.length,r=this._value,n=!1,i=0;for(let o=0;o<t;++o){let t=e[o];ee.equalsArray(t,r,i)||(ee.pack(t,r,i),n=!0),i+=3}n&&this._gl.uniform3iv(this._location,r)},lj.prototype.set=function(){let e=this.value,t=e.length,r=this._value,n=!1,i=0;for(let o=0;o<t;++o){let t=e[o];eW.equalsArray(t,r,i)||(eW.pack(t,r,i),n=!0),i+=4}n&&this._gl.uniform4iv(this._location,r)},lq.prototype.set=function(){let e=this.value,t=e.length,r=this._value,n=!1,i=0;for(let o=0;o<t;++o){let t=e[o];ij.equalsArray(t,r,i)||(ij.pack(t,r,i),n=!0),i+=4}n&&this._gl.uniformMatrix2fv(this._location,!1,r)},lG.prototype.set=function(){let e=this.value,t=e.length,r=this._value,n=!1,i=0;for(let o=0;o<t;++o){let t=e[o];eF.equalsArray(t,r,i)||(eF.pack(t,r,i),n=!0),i+=9}n&&this._gl.uniformMatrix3fv(this._location,!1,r)},lV.prototype.set=function(){let e=this.value,t=e.length,r=this._value,n=!1,i=0;for(let o=0;o<t;++o){let t=e[o];e3.equalsArray(t,r,i)||(e3.pack(t,r,i),n=!0),i+=16}n&&this._gl.uniformMatrix4fv(this._location,!1,r)};let lk=function(e,t,r,n){switch(t.type){case e.FLOAT:return new lM(e,t,r,n);case e.FLOAT_VEC2:return new lP(e,t,r,n);case e.FLOAT_VEC3:return new lL(e,t,r,n);case e.FLOAT_VEC4:return new lF(e,t,r,n);case e.SAMPLER_2D:case e.SAMPLER_3D:case e.SAMPLER_CUBE:return new lD(e,t,r,n);case e.INT:case e.BOOL:return new lB(e,t,r,n);case e.INT_VEC2:case e.BOOL_VEC2:return new lz(e,t,r,n);case e.INT_VEC3:case e.BOOL_VEC3:return new lU(e,t,r,n);case e.INT_VEC4:case e.BOOL_VEC4:return new lj(e,t,r,n);case e.FLOAT_MAT2:return new lq(e,t,r,n);case e.FLOAT_MAT3:return new lG(e,t,r,n);case e.FLOAT_MAT4:return new lV(e,t,r,n);default:throw new e1(`Unrecognized uniform type: ${t.type} for uniform "${r}".`)}},lH=0;function lY(e){let t=e.vertexShaderText,r=e.fragmentShaderText;"undefined"!=typeof spector&&(t=t.replace(/^#line/gm,"//#line"),r=r.replace(/^#line/gm,"//#line"));let n=function(e,t){let r={};if(!sm.highpFloatSupported||!sm.highpIntSupported){let n,i,o,a,s=lW(e),l=lW(t),u=s.length,c=l.length;for(n=0;n<u;n++)for(i=0;i<c;i++)if(s[n]===l[i]){o=s[n],a=`czm_mediump_${o}`;let e=RegExp(`${o}\\b`,"g");t=t.replace(e,a),r[a]=o}}return{fragmentShaderText:t,duplicateUniformNames:r}}(t,r);this._gl=e.gl,this._logShaderCompilation=e.logShaderCompilation,this._debugShaders=e.debugShaders,this._attributeLocations=e.attributeLocations,this._program=void 0,this._numberOfVertexAttributes=void 0,this._vertexAttributes=void 0,this._uniformsByName=void 0,this._uniforms=void 0,this._automaticUniforms=void 0,this._manualUniforms=void 0,this._duplicateUniformNames=n.duplicateUniformNames,this._cachedShader=void 0,this.maximumTextureUnitIndex=void 0,this._vertexShaderSource=e.vertexShaderSource,this._vertexShaderText=e.vertexShaderText,this._fragmentShaderSource=e.fragmentShaderSource,this._fragmentShaderText=n.fragmentShaderText,this.id=lH++}function lW(e){let t=[],r=e.match(/uniform.*?(?![^{]*})(?=[=[;])/g);if(H(r)){let e=r.length;for(let n=0;n<e;n++){let e=r[n].trim(),i=e.slice(e.lastIndexOf(" ")+1);t.push(i)}}return t}lY.fromCache=e=>(e=e??e0.EMPTY_OBJECT,W.defined("options.context",e.context),e.context.shaderCache.getShaderProgram(e)),lY.replaceCache=e=>(e=e??e0.EMPTY_OBJECT,W.defined("options.context",e.context),e.context.shaderCache.replaceShaderProgram(e)),Object.defineProperties(lY.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},vertexAttributes:{get:function(){return l$(this),this._vertexAttributes}},numberOfVertexAttributes:{get:function(){return l$(this),this._numberOfVertexAttributes}},allUniforms:{get:function(){return l$(this),this._uniformsByName}}});let lX="[Cesium WebGL] ";function l$(e){H(e._program)||function e(t){let r=t._program,n=t._gl,i=function(e,t){let r,n,i=t._vertexShaderText,o=t._fragmentShaderText,a=e.createShader(e.VERTEX_SHADER);e.shaderSource(a,i),e.compileShader(a);let s=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(s,o),e.compileShader(s);let l=e.createProgram();e.attachShader(l,a),e.attachShader(l,s);let u=t._attributeLocations;if(H(u))for(let t in u)Object.hasOwn(u,t)&&e.bindAttribLocation(l,u[t],t);if(e.linkProgram(l),e.getProgramParameter(l,e.LINK_STATUS))return t._logShaderCompilation&&(H(r=e.getShaderInfoLog(a))&&r.length>0&&console.log(`${lX}Vertex shader compile log: ${r}`),H(r=e.getShaderInfoLog(s))&&r.length>0&&console.log(`${lX}Fragment shader compile log: ${r}`),H(r=e.getProgramInfoLog(l))&&r.length>0&&console.log(`${lX}Shader program link log: ${r}`)),e.deleteShader(a),e.deleteShader(s),l;let c=t._debugShaders;throw e.getShaderParameter(s,e.COMPILE_STATUS)?e.getShaderParameter(a,e.COMPILE_STATUS)?(r=e.getProgramInfoLog(l),console.error(`${lX}Shader program link log: ${r}`),f(a,"vertex"),f(s,"fragment"),n=`Program failed to link.  Link log: ${r}`):(r=e.getShaderInfoLog(a),console.error(`${lX}Vertex shader compile log: ${r}`),console.error(`${lX} Vertex shader source:
${i}`),n=`Vertex shader failed to compile.  Compile log: ${r}`):(r=e.getShaderInfoLog(s),console.error(`${lX}Fragment shader compile log: ${r}`),console.error(`${lX} Fragment shader source:
${o}`),n=`Fragment shader failed to compile.  Compile log: ${r}`),e.deleteShader(a),e.deleteShader(s),e.deleteProgram(l),new e1(n);function f(e,t){if(!H(c))return;let r=c.getTranslatedShaderSource(e);""===r?console.error(`${lX}${t} shader translation failed.`):console.error(`${lX}Translated ${t} shaderSource:
${r}`)}}(n,t,t._debugShaders),o=n.getProgramParameter(i,n.ACTIVE_ATTRIBUTES),a=function(e,t){let r={},n=[],i=[],o=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let a=0;a<o;++a){let o=e.getActiveUniform(t,a),s=-1!==o.name.indexOf("[0]",o.name.length-3)?o.name.slice(0,o.name.length-3):o.name;if(0!==s.indexOf("gl_"))if(0>o.name.indexOf("[")){let a=e.getUniformLocation(t,s);if(null!==a){let t=lv(e,o,s,a);r[s]=t,n.push(t),t._setSampler&&i.push(t)}}else{let a,l,u,c,f=s.indexOf("[");if(f>=0){if(!H(a=r[s.slice(0,f)]))continue;(l=a._locations).length<=1&&(u=a.value,null!==(c=e.getUniformLocation(t,s))&&(l.push(c),u.push(e.getUniform(t,c))))}else{l=[];for(let r=0;r<o.size;++r)null!==(c=e.getUniformLocation(t,`${s}[${r}]`))&&l.push(c);a=lk(e,o,s,l),r[s]=a,n.push(a),a._setSampler&&i.push(a)}}}return{uniformsByName:r,uniforms:n,samplerUniforms:i}}(n,i),s=function(e,t){let r=[],n=[];for(let i in t)if(Object.hasOwn(t,i)){let o=t[i],a=i,s=e._duplicateUniformNames[a];H(s)&&(o.name=s,a=s);let l=lm[a];H(l)?r.push({uniform:o,automaticUniform:l}):n.push(o)}return{automaticUniforms:r,manualUniforms:n}}(t,a.uniformsByName);t._program=i,t._numberOfVertexAttributes=o,t._vertexAttributes=function(e,t,r){let n={};for(let i=0;i<r;++i){let r=e.getActiveAttrib(t,i),o=e.getAttribLocation(t,r.name);n[r.name]={name:r.name,type:r.type,index:o}}return n}(n,i,o),t._uniformsByName=a.uniformsByName,t._uniforms=a.uniforms,t._automaticUniforms=s.automaticUniforms,t._manualUniforms=s.manualUniforms,t.maximumTextureUnitIndex=function(e,t,r){e.useProgram(t);let n=0,i=r.length;for(let e=0;e<i;++e)n=r[e]._setSampler(n);return e.useProgram(null),n}(n,i,a.samplerUniforms),r&&t._gl.deleteProgram(r),"undefined"!=typeof spector&&(t._program.__SPECTOR_rebuildProgram=(r,n,i,o)=>{let a=t._vertexShaderText,s=t._fragmentShaderText,l=/ ! = /g;t._vertexShaderText=r.replace(l," != "),t._fragmentShaderText=n.replace(l," != ");try{e(t),i(t._program)}catch(r){t._vertexShaderText=a,t._fragmentShaderText=s;let e=/(?:Compile|Link) error: ([^]*)/.exec(r.message);o(e?e[1]:r.message)}})}(e)}lY.prototype._bind=function(){l$(this),this._gl.useProgram(this._program)},lY.prototype._setUniforms=function(e,t,r){let n,i;if(H(e)){let t=this._manualUniforms;for(i=0,n=t.length;i<n;++i){let r=t[i];if(!H(e[r.name]))throw new Y(`Unknown uniform: ${r.name}`);r.value=e[r.name]()}}let o=this._automaticUniforms;for(i=0,n=o.length;i<n;++i){let e=o[i];e.uniform.value=e.automaticUniform.getValue(t)}let a=this._uniforms;for(i=0,n=a.length;i<n;++i)a[i].set();if(r){let e=this._gl,t=this._program;if(e.validateProgram(t),!e.getProgramParameter(t,e.VALIDATE_STATUS))throw new Y(`Program validation failed.  Program info log: ${e.getProgramInfoLog(t)}`)}},lY.prototype.isDestroyed=()=>!1,lY.prototype.destroy=function(){this._cachedShader.cache.releaseShaderProgram(this)},lY.prototype.finalDestroy=function(){return this._gl.deleteProgram(this._program),os(this)};var lZ=r(6482),lK=r.n(lZ);let lJ=function(e,t){let r=e;return r=(r=r.replaceAll("version 300 es","")).replaceAll(/(texture\()/g,"texture2D("),t?(r=r.replaceAll(/\n\s*(in)\s+(vec\d|mat\d|float)/g,`
varying $2`),/out_FragData_(\d+)/.test(r)&&(r=(r=(r=`#extension GL_EXT_draw_buffers : enable
${r}`).replaceAll(/layout\s+\(location\s*=\s*\d+\)\s*out\s+vec4\s+out_FragData_\d+;/g,"")).replaceAll(/out_FragData_(\d+)/g,"gl_FragData[$1]")),r=(r=(r=r.replaceAll(/layout\s+\(location\s*=\s*0\)\s*out\s+vec4\s+out_FragColor;/g,"")).replaceAll(/out_FragColor/g,"gl_FragColor")).replaceAll(/out_FragColor\[(\d+)\]/g,"gl_FragColor[$1]"),/gl_FragDepth/.test(r)&&(r=(r=`#extension GL_EXT_frag_depth : enable
${r}`).replaceAll(/gl_FragDepth/g,"gl_FragDepthEXT")),r=`#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable
#endif
${r}`,r=`#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
#endif
${r}`):r=(r=r.replaceAll(/(in)\s+(vec\d|mat\d|float)/g,"attribute $2")).replaceAll(/(out)\s+(vec\d|mat\d|float)\s+([\w]+);/g,"varying $2 $3;"),r=`#version 100
${r}`};function lQ(e){return(e=e.replace(/\/\/.*/g,"")).replace(/\/\*\*[\s\S]*?\*\//gm,e=>{let t=e.match(/\n/gm).length,r="";for(let e=0;e<t;++e)r+="\n";return r})}function l0(e,t,r){let n;for(let t=0;t<r.length;++t)r[t].name===e&&(n=r[t]);return H(n)||(n={name:e,glslSource:t=lQ(t),dependsOn:[],requiredBy:[],evaluated:!1},r.push(n)),n}function l1(e,t,r){let n,i,o,a="",s=e.sources;if(H(s))for(n=0,i=s.length;n<i;++n)a+=`
#line 0
${s[n]}`;a=(a=lQ(a)).replace(/#version\s+(.*?)\n/gm,(e,t)=>{if(H(o)&&o!==t)throw new Y(`inconsistent versions found: ${o} and ${t}`);return o=t,"\n"});let l=[];a=(a=a.replace(/#extension.*\n/gm,e=>(l.push(e),"\n"))).replace(/precision\s(lowp|mediump|highp)\s(float|int);/,"");let u=e.pickColorQualifier;H(u)&&(a=l3.createPickFragmentShaderSource(a,u));let c="",f=l.length;for(n=0;n<f;n++)c+=l[n];t&&(c+="#ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    precision highp int;\n#else\n    precision mediump float;\n    precision mediump int;\n    #define highp mediump\n#endif\n\n");let h=e.defines;if(H(h))for(n=0,i=h.length;n<i;++n){let e=h[n];0!==e.length&&(c+=`#define ${e}
`)}r.textureFloatLinear&&(c+="#define OES_texture_float_linear\n\n"),r.floatingPointTexture&&(c+="#define OES_texture_float\n\n");let p="";e.includeBuiltIns&&(p=function(e){let t=[],r=l0("main",e,t);!function e(t,r){if(t.evaluated)return;t.evaluated=!0;let n=t.glslSource.match(/\bczm_[a-zA-Z0-9_]*/g);H(n)&&null!==n&&(n=n.filter((e,t)=>n.indexOf(e)===t)).forEach(n=>{if(n!==t.name&&Object.hasOwn(l3._czmBuiltinsAndUniforms,n)){let i=l0(n,l3._czmBuiltinsAndUniforms[n],r);t.dependsOn.push(i),i.requiredBy.push(t),e(i,r)}})}(r,t),function(e){let t=[],r=[];for(;e.length>0;){let n=e.pop();r.push(n),0===n.requiredBy.length&&t.push(n)}for(;t.length>0;){let r=t.shift();e.push(r);for(let e=0;e<r.dependsOn.length;++e){let n=r.dependsOn[e],i=n.requiredBy.indexOf(r);n.requiredBy.splice(i,1),0===n.requiredBy.length&&t.push(n)}}let n=[];for(let e=0;e<r.length;++e)0!==r[e].requiredBy.length&&n.push(r[e]);if(0!==n.length){let e="A circular dependency was found in the following built-in functions/structs/constants: \n";for(let t=0;t<n.length;++t)e=`${e+n[t].name}
`;throw new Y(e)}}(t);let n="";for(let e=t.length-1;e>=0;--e)n=`${n+t[e].glslSource}
`;return n.replace(r.glslSource,"")}(a)),c+="\n#line 0\n";let d=p+a;return r.webgl2&&t&&!/layout\s*\(location\s*=\s*0\)\s*out\s+vec4\s+out_FragColor;/g.test(d)&&!/czm_out_FragColor/g.test(d)&&/out_FragColor/g.test(d)&&(c+="layout(location = 0) out vec4 out_FragColor;\n\n"),c+=p,c+=a,c=r.webgl2?`#version 300 es
${c}`:lJ(c,t)}function l3(e){let t=(e=e??e0.EMPTY_OBJECT).pickColorQualifier;if(H(t)&&"uniform"!==t&&"in"!==t)throw new Y("options.pickColorQualifier must be 'uniform' or 'in'.");this.defines=H(e.defines)?e.defines.slice(0):[],this.sources=H(e.sources)?e.sources.slice(0):[],this.pickColorQualifier=t,this.includeBuiltIns=e.includeBuiltIns??!0}for(let e in l3.prototype.clone=function(){return new l3({sources:this.sources,defines:this.defines,pickColorQualifier:this.pickColorQualifier,includeBuiltIns:this.includeBuiltIns})},l3.replaceMain=(e,t)=>(t=`void ${t}()`,e.replace(/void\s+main\s*\(\s*(?:void)?\s*\)/g,t)),l3.prototype.getCacheKey=function(){let e=this.defines.slice().sort().join(","),t=this.pickColorQualifier,r=this.includeBuiltIns,n=this.sources.join("\n");return`${e}:${t}:${r}:${n}`},l3.prototype.createCombinedVertexShader=function(e){return l1(this,!1,e)},l3.prototype.createCombinedFragmentShader=function(e){return l1(this,!0,e)},l3._czmBuiltinsAndUniforms={},lK())Object.hasOwn(lK(),e)&&(l3._czmBuiltinsAndUniforms[e]=lK()[e]);for(let e in lm)if(Object.hasOwn(lm,e)){let t=lm[e];"function"==typeof t.getDeclaration&&(l3._czmBuiltinsAndUniforms[e]=t.getDeclaration(e))}function l2(e,t){let r=e.sources,n=r.length;for(let e=0;e<n;++e)if(-1!==r[e].indexOf(t))return!0;return!1}function l4(e,t){let r=t.length;for(let n=0;n<r;++n){let r=t[n];if(l2(e,r))return r}}l3.createPickVertexShaderSource=e=>{let t=l3.replaceMain(e,"czm_old_main");return`${t}
in vec4 pickColor; 
out vec4 czm_pickColor; 
void main() 
{ 
    czm_old_main(); 
    czm_pickColor = pickColor; 
}`},l3.createPickFragmentShaderSource=(e,t)=>{let r=l3.replaceMain(e,"czm_old_main"),n=`${t} vec4 czm_pickColor; 
void main() 
{ 
    czm_old_main(); 
    if (out_FragColor.a == 0.0) { 
       discard; 
    } 
    out_FragColor = czm_pickColor; 
}`;return`${r}
${n}`};let l5=["v_normalEC","v_normal"];l3.findNormalVarying=e=>l2(e,"#ifdef HAS_NORMALS")?!function(e,t){let r=e.defines,n=r.length;for(let e=0;e<n;++e)if(r[e]===t)return!0;return!1}(e,"HAS_NORMALS")?void 0:"v_normalEC":l4(e,l5);let l6=["v_positionEC"];l3.findPositionVarying=e=>l4(e,l6);let l8=Object.freeze({ADD:iD.FUNC_ADD,SUBTRACT:iD.FUNC_SUBTRACT,REVERSE_SUBTRACT:iD.FUNC_REVERSE_SUBTRACT,MIN:iD.MIN,MAX:iD.MAX}),l7=Object.freeze({ZERO:iD.ZERO,ONE:iD.ONE,SOURCE_COLOR:iD.SRC_COLOR,ONE_MINUS_SOURCE_COLOR:iD.ONE_MINUS_SRC_COLOR,DESTINATION_COLOR:iD.DST_COLOR,ONE_MINUS_DESTINATION_COLOR:iD.ONE_MINUS_DST_COLOR,SOURCE_ALPHA:iD.SRC_ALPHA,ONE_MINUS_SOURCE_ALPHA:iD.ONE_MINUS_SRC_ALPHA,DESTINATION_ALPHA:iD.DST_ALPHA,ONE_MINUS_DESTINATION_ALPHA:iD.ONE_MINUS_DST_ALPHA,CONSTANT_COLOR:iD.CONSTANT_COLOR,ONE_MINUS_CONSTANT_COLOR:iD.ONE_MINUS_CONSTANT_COLOR,CONSTANT_ALPHA:iD.CONSTANT_ALPHA,ONE_MINUS_CONSTANT_ALPHA:iD.ONE_MINUS_CONSTANT_ALPHA,SOURCE_ALPHA_SATURATE:iD.SRC_ALPHA_SATURATE}),l9=Object.freeze({DISABLED:Object.freeze({enabled:!1}),ALPHA_BLEND:Object.freeze({enabled:!0,equationRgb:l8.ADD,equationAlpha:l8.ADD,functionSourceRgb:l7.SOURCE_ALPHA,functionSourceAlpha:l7.ONE,functionDestinationRgb:l7.ONE_MINUS_SOURCE_ALPHA,functionDestinationAlpha:l7.ONE_MINUS_SOURCE_ALPHA}),PRE_MULTIPLIED_ALPHA_BLEND:Object.freeze({enabled:!0,equationRgb:l8.ADD,equationAlpha:l8.ADD,functionSourceRgb:l7.ONE,functionSourceAlpha:l7.ONE,functionDestinationRgb:l7.ONE_MINUS_SOURCE_ALPHA,functionDestinationAlpha:l7.ONE_MINUS_SOURCE_ALPHA}),ADDITIVE_BLEND:Object.freeze({enabled:!0,equationRgb:l8.ADD,equationAlpha:l8.ADD,functionSourceRgb:l7.SOURCE_ALPHA,functionSourceAlpha:l7.ONE,functionDestinationRgb:l7.ONE,functionDestinationAlpha:l7.ONE})}),ue={MORPHING:0,COLUMBUS_VIEW:1,SCENE2D:2,SCENE3D:3};ue.getMorphTime=e=>e===ue.SCENE3D?1:e!==ue.MORPHING?0:void 0;let ut=Object.freeze(ue),ur=new eF;function un(e){this.sources=e.sources,this._sources=void 0,this.nearGround=e.nearGround,this.show=e.show??!0,this._command=new sD({modelMatrix:e3.clone(e3.IDENTITY),owner:this}),this._cubeMap=void 0,this._attributeLocations=void 0,this._useHdr=void 0,this._hasError=!1,this._error=void 0}function ui(e){return rM(`Assets/Textures/SkyBox/tycho2t3_80_${e}.jpg`)}un.prototype.update=function(e,t){let{mode:r,passes:n,context:i}=e;if(!this.show||r!==ut.SCENE3D&&r!==ut.MORPHING||!n.render)return;if(this._hasError){let e=this._error;throw this._hasError=!1,this._error=void 0,e}if(this._sources!==this.sources){this._sources=this.sources;let e=this.sources;if(W.defined("this.sources",e),Object.values(sP.FaceName).some(t=>!H(e[t])))throw new Y("this.sources must have positiveX, negativeX, positiveY, negativeY, positiveZ, and negativeZ properties.");let t=typeof e.positiveX;if(Object.values(sP.FaceName).some(r=>typeof e[r]!==t))throw new Y("this.sources properties must all be the same type.");"string"==typeof e.positiveX?sU(i,this._sources).then(e=>{this._cubeMap=this._cubeMap&&this._cubeMap.destroy(),this._cubeMap=e}).catch(e=>{this._hasError=!0,this._error=e}):(this._cubeMap=this._cubeMap&&this._cubeMap.destroy(),this._cubeMap=new sP({context:i,source:e}))}let o=this._command;if(o.modelMatrix=np.eastNorthUpToFixedFrame(e.camera._positionWC),!H(o.vertexArray)){o.uniformMap={u_cubeMap:()=>this._cubeMap,u_rotateMatrix:()=>H(e3.getRotation)?e3.getRotation(o.modelMatrix,ur):e3.getMatrix3(o.modelMatrix,ur)};let e=ot.createGeometry(ot.fromDimensions({dimensions:new ee(2,2,2),vertexFormat:i9.POSITION_ONLY})),t=this._attributeLocations=al.createAttributeLocations(e);o.vertexArray=sv.fromGeometry({context:i,geometry:e,attributeLocations:t,bufferUsage:sc.STATIC_DRAW}),o.renderState=s2.fromCache({blending:l9.ALPHA_BLEND})}if(!H(o.shaderProgram)||this._useHdr!==t){let e=new l3({defines:[t?"HDR":""],sources:[uo]});o.shaderProgram=lY.fromCache({context:i,vertexShaderSource:ua,fragmentShaderSource:e,attributeLocations:this._attributeLocations}),this._useHdr=t}if(H(this._cubeMap))return o},un.prototype.isDestroyed=()=>!1,un.prototype.destroy=function(){let e=this._command;return e.vertexArray=e.vertexArray&&e.vertexArray.destroy(),e.shaderProgram=e.shaderProgram&&e.shaderProgram.destroy(),this._cubeMap=this._cubeMap&&this._cubeMap.destroy(),os(this)},un.createEarthSkyBox=()=>new un({sources:{positiveX:ui("px"),negativeX:ui("mx"),positiveY:ui("py"),negativeY:ui("my"),positiveZ:ui("pz"),negativeZ:ui("mz")}});let uo=`uniform samplerCube u_cubeMap;
in vec3 v_texCoord;
void main()
{
  vec4 color = texture(u_cubeMap, normalize(v_texCoord));
  out_FragColor = vec4(color.rgb, czm_morphTime);
}
`,ua=`
  uniform mat3 u_rotateMatrix;
  in vec3 position;
  out vec3 v_texCoord;
  void main()
  {
    vec3 p = czm_viewRotation * u_rotateMatrix * (czm_temeToPseudoFixed * (czm_entireFrustum.y * position));
    gl_Position = czm_projection * vec4(p, 1.0);
    v_texCoord = position.xyz;
  }
 `;class us{scene;option;groundSkyBox=null;defaultSkyBox=null;removePostRenderListener=null;isDestroyed=!1;constructor(e,t){this.scene=e,this.option={show:t.show??!0,maxHeight:t.maxHeight??1e4,sources:t.sources},this.defaultSkyBox=this.scene.skyBox,this.groundSkyBox=new un({sources:this.option.sources,show:this.option.show??!0}),this.updateSkyBox(),this.setupCameraHeightListener()}setupCameraHeightListener(){let e=this.scene.postRender,t=()=>{this.isDestroyed||this.updateSkyBox()};e.addEventListener(t),this.removePostRenderListener=()=>{e.removeEventListener(t)}}updateSkyBox(){this.scene.camera.positionCartographic.height<=(this.option.maxHeight??1e4)?(this.scene.skyBox!==this.groundSkyBox&&(this.scene.skyBox=this.groundSkyBox),this.scene.skyAtmosphere.show=!1):(this.scene.skyBox!==this.defaultSkyBox&&(this.scene.skyBox=this.defaultSkyBox),this.scene.skyAtmosphere.show=!0)}setShow(e){this.option.show=e,this.groundSkyBox&&(this.groundSkyBox.show=e)}setMaxHeight(e){this.option.maxHeight=e,this.updateSkyBox()}destroy(){this.isDestroyed||(this.removePostRenderListener&&(this.removePostRenderListener(),this.removePostRenderListener=null),this.groundSkyBox?.destroy&&(this.groundSkyBox.destroy(),this.groundSkyBox=null),this.defaultSkyBox&&(this.scene.skyBox=this.defaultSkyBox,this.scene.skyAtmosphere.show=!0),this.isDestroyed=!0)}}class ul{viewer;defaultSkyBox=null;skyBoxOnGroundInstance=null;constructor(e){this.viewer=e,this.defaultSkyBox=this.viewer.scene.skyBox}customSkyBox(e){this.viewer.scene.skyBox=new k.A({sources:e})}removeCustomSkyBox(){this.skyBoxOnGroundInstance&&(this.skyBoxOnGroundInstance.destroy(),this.skyBoxOnGroundInstance=null),this.viewer.scene.skyBox=this.defaultSkyBox,this.viewer.scene.skyAtmosphere.show=!0}skyBoxOnGround(e){this.skyBoxOnGroundInstance&&this.skyBoxOnGroundInstance.destroy(),this.skyBoxOnGroundInstance=new us(this.viewer.scene,e)}}class uu{viewer;option;constructor(e,t){let r;this.viewer=e,this.option=t;let n=this.getStage();if(null===n)switch(t.type){case"snow":r=this.fsSnow();break;case"rain":r=this.fsRain();break;case"fog":r=this.fsFog()}n=new G.A({name:t.name,fragmentShader:r,uniforms:{color:D.A.fromAlpha(D.A.BLACK,1)}}),e.scene.postProcessStages.add(n)}removePostProcessStage(){let e=this.getStage();e&&this.viewer.scene.postProcessStages.remove(e)}getStage(){let e=null,t=this.viewer.scene.postProcessStages;for(let r=0;r<t.length;r++){let n=t.get(r);if(void 0!==n&&n.name===this.option.name){e=n;break}}return e}fsSnow(){return`
        #version 300 es
        precision highp float;

        uniform sampler2D colorTexture;
        in vec2 v_textureCoordinates;
        out vec4 fragColor;

        float snow(vec2 uv, float scale) {
        float time = float(czm_frameNumber) / 60.0;
        float w = smoothstep(1.0, 0.0, -uv.y * (scale / 10.0));
        if (w < 0.1) return 0.0;
        uv += time / scale;
        uv.y += time * 2.0 / scale;
        uv.x += sin(uv.y + time * 0.5) / scale;
        uv *= scale;
        vec2 s = floor(uv), f = fract(uv), p;
        float k = 3.0, d;
        p = 0.5 + 0.35 * sin(11.0 * fract(sin((s + p + scale) * mat2(7, 3, 6, 5)) * 5.0)) - f;
        d = length(p);
        k = min(d, k);
        k = smoothstep(0.0, k, sin(f.x + f.y) * 0.01);
        return k * w;
        }

        void main() {
        vec2 resolution = czm_viewport.zw;
        vec2 uv = (gl_FragCoord.xy * 2.0 - resolution.xy) / min(resolution.x, resolution.y);
        vec3 finalColor = vec3(0.0);
        float c = 0.0;
        c += snow(uv, 30.0) * 0.0;
        c += snow(uv, 20.0) * 0.0;
        c += snow(uv, 15.0) * 0.0;
        c += snow(uv, 10.0);
        c += snow(uv, 8.0);
        c += snow(uv, 6.0);
        c += snow(uv, 5.0);
        finalColor = vec3(c);

        // \u{8C03}\u{6574}\u{4EAE}\u{5EA6}
        finalColor = finalColor * 1.2; // \u{63D0}\u{5347}\u{4EAE}\u{5EA6}\u{FF0C}\u{53EF}\u{4EE5}\u{6839}\u{636E}\u{9700}\u{8981}\u{8C03}\u{6574}\u{8FD9}\u{4E2A}\u{503C}

        fragColor = mix(texture(colorTexture, v_textureCoordinates), vec4(finalColor, 1.0), 0.2);
        }
    `}fsRain(){return`
        #version 300 es
    
        precision highp float;
    
        uniform sampler2D colorTexture;
        in vec2 v_textureCoordinates;
        out vec4 fragColor;
    
        float hash(float x){
            return fract(sin(x * 133.3) * 13.13);
        }
    
        void main() {
            float time = czm_frameNumber / 60.0;
            vec2 resolution = czm_viewport.zw;
            vec2 uv = (gl_FragCoord.xy * 2.0 - resolution) / min(resolution.x, resolution.y);
            vec3 c = vec3(0.6, 0.7, 0.8);
            float a = -0.4;
            float si = sin(a), co = cos(a);
            uv *= mat2(co, -si, si, co);
            uv *= length(uv + vec2(0.0, 4.9)) * 0.3 + 1.0;
            float v = 1.0 - sin(hash(floor(uv.x * 100.0)) * 2.0);
            float b = clamp(abs(sin(20.0 * time * v + uv.y * (5.0 / (2.0 + v)))) - 0.95, 0.0, 1.0) * 20.0;
            c *= v * b;
    
            fragColor = mix(texture(colorTexture, v_textureCoordinates), vec4(c, 1.0), 0.5);
        }
    `}fsFog(){return`
        uniform sampler2D colorTexture;
        uniform sampler2D depthTexture;
        in vec2 v_textureCoordinates;
        out vec4 fragColor;
        void main() { 
            vec4 origcolor=texture(colorTexture, v_textureCoordinates);
            vec4 fogcolor=vec4(0.8,0.8,0.8,0.5);
            float depth = czm_readDepth(depthTexture, v_textureCoordinates);
            vec4 depthcolor=texture(depthTexture, v_textureCoordinates);
            float f=(depthcolor.r-0.22)/0.2;
            if(f<0.0) f=0.0;
            else if(f>1.0) f=1.0;
            fragColor = mix(origcolor,fogcolor,0.8);
        }
        `}}function uc(e){let t=new v.A(e,{baseLayerPicker:!1,animation:!1,timeline:!1,fullscreenButton:!1,geocoder:!1,homeButton:!1,infoBox:!1,sceneModePicker:!1,selectionIndicator:!1,navigationHelpButton:!1,contextOptions:{webgl:{alpha:!0}}});t.scene.globe.depthTestAgainstTerrain=!0,t.scene.debugShowFramesPerSecond=!0,t.imageryLayers.remove(t.imageryLayers.get(0)),t.scene.terrainProvider=new M.A({});let r=new P.A({url:"//data.mars3d.cn/tile/img/{z}/{x}/{y}.jpg"});t.imageryLayers.addImageryProvider(r),new B.A(t,{enableCompass:!0,enableZoomControls:!0});let n=new z.GUI;n.domElement.style.position="fixed",n.domElement.style.top="50%",n.domElement.style.transform="translateY(-50%)",n.domElement.style.left="0";let i=null,o=null,a=null,s=null,l={x\u8F74:25,y\u8F74:12,\u4EAE\u5EA6:1},u=null,c={\u96E8:()=>{f({name:"\u96E8",type:"rain"})},\u96EA:()=>{f({name:"\u96EA",type:"snow"})},\u95EA\u7535:()=>{var e;let r;p(i,o),t.camera.setView({destination:L.A.fromDegrees(-95.166493,39.9060534,2e6)}),o=null,a=null;let{weather:n,lightning:l}=((r=new V(e=t)).add({mix_factor:.35,fall_interval:.8}),{weather:new uu(e,{name:"\u96E8",type:"rain"}),lightning:r});i=n,s=l},\u4E91:()=>{p(i,o),t.camera.flyTo({destination:L.A.fromDegrees(114.401867,30.520423,243.7),duration:2,orientation:{heading:F.A.toRadians(281.8),pitch:F.A.toRadians(-6.6),roll:0}}),a=new q(t),i=null,o=null,s=null,u&&n.removeFolder(u),(u=n.addFolder("\u4E91\u53C2\u6570")).add(l,"x\u8F74",1,100).name("X\u8F74").onChange(e=>{a&&a.update(e,l.y\u8F74,l.\u4EAE\u5EA6)}),u.add(l,"y\u8F74",1,100).name("Y\u8F74").onChange(e=>{a&&a.update(l.x\u8F74,e,l.\u4EAE\u5EA6)}),u.add(l,"\u4EAE\u5EA6",0,2).name("\u4EAE\u5EA6").onChange(e=>{a&&a.update(l.x\u8F74,l.y\u8F74,e)}),u.open()},\u5929\u7A7A\u76D2:()=>{p(i,o),t.camera.flyHome(1),i=null,a=null,s=null,o=uf(t)},"\u8FD1\u5730\u5929\u7A7A\u76D2-\u84DD\u5929":()=>{h("lantian")},"\u8FD1\u5730\u5929\u7A7A\u76D2-\u6674\u5929":()=>{h("qingtian")},"\u8FD1\u5730\u5929\u7A7A\u76D2-\u665A\u971E":()=>{h("wanxia")},\u80CC\u666F\u56FE:()=>{var e;p(i,o),t.camera.flyHome(1),(e=t).scene.canvas.style.backgroundImage="url('/cesium/basic/12/backGroundImg.jpg')",e.scene.skyBox.show=!1,e.scene.backgroundColor=new D.A(0,0,0,0),i=null,o=null,a=null,s=null}};function f(e){p(i,o),t.camera.setView({destination:L.A.fromDegrees(-95.166493,39.9060534,2e6)}),i=new uu(t,e),o=null,a=null,s=null}function h(e){p(i,o),t.camera.flyTo({destination:L.A.fromDegrees(-95.166493,39.9060534,2e4)}),t.camera.flyTo({destination:L.A.fromDegrees(-95.166493,39.9060534,3336.6),orientation:{heading:F.A.toRadians(351.2),pitch:F.A.toRadians(-6.7),roll:0}}),o=uf(t,e,!0),i=null,a=null,s=null}function p(e,r){e&&e.removePostProcessStage(),r&&r.removeCustomSkyBox(),a&&a.destroy(),s&&s.destroy(),u&&(n.removeFolder(u),u=null),t.scene.canvas.style.backgroundImage="",t.scene.skyBox.show=!0,t.scene.backgroundColor=D.A.BLACK}return n.add({\u573A\u666F\u7C7B\u578B:"\u96E8"},"\u573A\u666F\u7C7B\u578B",Object.keys(c)).name("\u573A\u666F\u7C7B\u578B").onChange(e=>{c[e]()}),f({name:"\u96E8",type:"rain"}),t}function uf(e,t,r=!1){let n=new ul(e);if(r)switch(t){case"lantian":n.skyBoxOnGround({sources:{positiveX:"/cesium/basic/12/ground/lantian/Right.jpg",negativeX:"/cesium/basic/12/ground/lantian/Left.jpg",positiveY:"/cesium/basic/12/ground/lantian/Front.jpg",negativeY:"/cesium/basic/12/ground/lantian/Back.jpg",positiveZ:"/cesium/basic/12/ground/lantian/Up.jpg",negativeZ:"/cesium/basic/12/ground/lantian/Down.jpg"},maxHeight:5e4});break;case"qingtian":n.skyBoxOnGround({sources:{positiveX:"/cesium/basic/12/ground/qingtian/rightav9.jpg",negativeX:"/cesium/basic/12/ground/qingtian/leftav9.jpg",positiveY:"/cesium/basic/12/ground/qingtian/frontav9.jpg",negativeY:"/cesium/basic/12/ground/qingtian/backav9.jpg",positiveZ:"/cesium/basic/12/ground/qingtian/topav9.jpg",negativeZ:"/cesium/basic/12/ground/qingtian/bottomav9.jpg"},maxHeight:5e4});break;case"wanxia":n.skyBoxOnGround({sources:{positiveX:"/cesium/basic/12/ground/wanxia/SunSetRight.png",negativeX:"/cesium/basic/12/ground/wanxia/SunSetLeft.png",positiveY:"/cesium/basic/12/ground/wanxia/SunSetFront.png",negativeY:"/cesium/basic/12/ground/wanxia/SunSetBack.png",positiveZ:"/cesium/basic/12/ground/wanxia/SunSetUp.png",negativeZ:"/cesium/basic/12/ground/wanxia/SunSetDown.png"},maxHeight:5e4})}else n.customSkyBox({positiveX:"/cesium/basic/12/SkyBox/tycho2t3_80_px.jpg",negativeX:"/cesium/basic/12/SkyBox/tycho2t3_80_mx.jpg",positiveY:"/cesium/basic/12/SkyBox/tycho2t3_80_py.jpg",negativeY:"/cesium/basic/12/SkyBox/tycho2t3_80_my.jpg",positiveZ:"/cesium/basic/12/SkyBox/tycho2t3_80_pz.jpg",negativeZ:"/cesium/basic/12/SkyBox/tycho2t3_80_mz.jpg"});return n}}}]);