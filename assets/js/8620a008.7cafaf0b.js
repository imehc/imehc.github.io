(self.webpackChunkanch=self.webpackChunkanch||[]).push([["6201"],{56179(e,t,n){"use strict";n.r(t),n.d(t,{metadata:()=>r,default:()=>w,frontMatter:()=>h,contentTitle:()=>m,toc:()=>v,assets:()=>x});var r=JSON.parse('{"id":"web/three/advanced/infinite-scroll","title":"\u65E0\u9650\u6EDA\u52A8","description":"\u6838\u5FC3\u6982\u5FF5","source":"@site/docs/web/three/advanced/08-infinite-scroll.mdx","sourceDirName":"web/three/advanced","slug":"/web/three/advanced/infinite-scroll","permalink":"/chiyu/web/three/advanced/infinite-scroll","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"Javascript","permalink":"/chiyu/tags/javascript"}],"version":"current","lastUpdatedBy":"imehc","lastUpdatedAt":1768181947000,"sidebarPosition":8,"frontMatter":{"sidebar_position":8,"title":"\u65E0\u9650\u6EDA\u52A8","tags":["Javascript"]},"sidebar":"webSidebar","previous":{"title":"FPS \u516B\u53C9\u6811","permalink":"/chiyu/web/three/advanced/fps-octree"},"next":{"title":"\u9F20\u6807\u6ED1\u52A8","permalink":"/chiyu/web/three/advanced/mouse-slide"}}'),i=n(35656),l=n(75395),s=n(6124),a=n(60140),o=n(57140),c=n(82044),d=n(45225),u=n(67199);let f=({floor:e})=>{let t,n=(0,o.useRef)(null),r=(t=(0,o.useRef)({}),(0,o.useEffect)(()=>{let e=e=>{t.current[e.code]="keydown"===e.type};return document.addEventListener("keydown",e),document.addEventListener("keyup",e),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",e)}}),t.current),l=(0,o.useMemo)(()=>new u.Pq0,[]),s=(0,o.useMemo)(()=>new u.PTz,[]),a=(0,o.useMemo)(()=>new u.Pq0,[]);return(0,d.D)((t,i)=>{r.KeyW&&(a.x-=5*i),r.KeyS&&(a.x+=5*i),r.KeyA&&(a.z+=5*i),r.KeyD&&(a.z-=5*i),s.setFromAxisAngle(a,i).normalize(),!n.current||(n.current.applyQuaternion(s),a.lerp(l,.01),e.current&&(e.current.position.x+=a.z*i,e.current.position.z-=a.x*i,e.current.position.x=e.current.position.x%10,e.current.position.z=e.current.position.z%10))}),(0,i.jsxs)("mesh",{ref:n,"position-y":1,children:[(0,i.jsx)("sphereGeometry",{}),(0,i.jsx)("meshNormalMaterial",{wireframe:!0})]})},p=()=>{let e=(0,o.useRef)(null);return(0,i.jsx)(c.A,{children:(0,i.jsxs)(a.Hl,{camera:{position:[0,2.5,2.5]},onCreated:({camera:e})=>e.lookAt(0,1,0),children:[(0,i.jsx)("gridHelper",{ref:e,args:[100,100]}),(0,i.jsx)(f,{floor:e}),(0,i.jsx)(s.U,{})]})})},h={sidebar_position:8,title:"\u65E0\u9650\u6EDA\u52A8",tags:["Javascript"]},m="\u65E0\u9650\u6EDA\u52A8",x={},v=[{value:"\u6838\u5FC3\u6982\u5FF5",id:"\u6838\u5FC3\u6982\u5FF5",level:2}];function y(e){let t={h1:"h1",h2:"h2",header:"header",li:"li",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"\u65E0\u9650\u6EDA\u52A8",children:"\u65E0\u9650\u6EDA\u52A8"})}),"\n",(0,i.jsx)(p,{}),"\n",(0,i.jsx)(t.h2,{id:"\u6838\u5FC3\u6982\u5FF5",children:"\u6838\u5FC3\u6982\u5FF5"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"\u65E0\u9650\u5FAA\u73AF"}),": \u4F7F\u7528\u6A21\u8FD0\u7B97\u521B\u9020\u65E0\u9650\u5E73\u9762\u9519\u89C9"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"\u56DB\u5143\u6570\u65CB\u8F6C"}),": \u771F\u5B9E\u7684 3D \u65CB\u8F6C\u8868\u793A"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"\u89D2\u901F\u5EA6"}),": \u63A7\u5236\u65CB\u8F6C\u7684\u7269\u7406\u91CF"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"\u952E\u76D8\u8F93\u5165"}),": \u81EA\u5B9A\u4E49 Hook \u76D1\u542C\u952E\u76D8\u4E8B\u4EF6"]}),"\n"]})]})}function w(e={}){let{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(y,{...e})}):y(e)}},6124(e,t,n){"use strict";n.d(t,{U:()=>o});var r=n(57140),i=n(45225),l=n(15697),s=n.n(l);function a(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}function o({showPanel:e=0,className:t,parent:n}){let l=function(e,t=[],n){let[i,l]=r.useState();return r.useLayoutEffect(()=>{let t=e();return l(t),a(void 0,t),()=>a(void 0,null)},t),i}(()=>new(s()),[]);return r.useEffect(()=>{if(l){let r=n&&n.current||document.body;l.showPanel(e),null==r||r.appendChild(l.dom);let s=(null!=t?t:"").split(" ").filter(e=>e);s.length&&l.dom.classList.add(...s);let a=(0,i.j)(()=>l.begin()),o=(0,i.k)(()=>l.end());return()=>{s.length&&l.dom.classList.remove(...s),null==r||r.removeChild(l.dom),a(),o()}}},[n,l,t,e]),null}},15697(e){var t;(t=function(){function e(e){return i.appendChild(e.dom),e}function n(e){for(var t=0;t<i.children.length;t++)i.children[t].style.display=t===e?"block":"none";r=e}var r=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",function(e){e.preventDefault(),n(++r%i.children.length)},!1);var l=(performance||Date).now(),s=l,a=0,o=e(new t.Panel("FPS","#0ff","#002")),c=e(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var d=e(new t.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:i,addPanel:e,showPanel:n,begin:function(){l=(performance||Date).now()},end:function(){a++;var e=(performance||Date).now();if(c.update(e-l,200),e>s+1e3&&(o.update(1e3*a/(e-s),100),s=e,a=0,d)){var t=performance.memory;d.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){l=this.end()},domElement:i,setMode:n}}).Panel=function(e,t,n){var r=1/0,i=0,l=Math.round,s=l(window.devicePixelRatio||1),a=80*s,o=48*s,c=3*s,d=2*s,u=3*s,f=15*s,p=74*s,h=30*s,m=document.createElement("canvas");m.width=a,m.height=o,m.style.cssText="width:80px;height:48px";var x=m.getContext("2d");return x.font="bold "+9*s+"px Helvetica,Arial,sans-serif",x.textBaseline="top",x.fillStyle=n,x.fillRect(0,0,a,o),x.fillStyle=t,x.fillText(e,c,d),x.fillRect(u,f,p,h),x.fillStyle=n,x.globalAlpha=.9,x.fillRect(u,f,p,h),{dom:m,update:function(o,v){r=Math.min(r,o),i=Math.max(i,o),x.fillStyle=n,x.globalAlpha=1,x.fillRect(0,0,a,f),x.fillStyle=t,x.fillText(l(o)+" "+e+" ("+l(r)+"-"+l(i)+")",c,d),x.drawImage(m,u+s,f,p-s,h,u,f,p-s,h),x.fillRect(u+p-s,f,s,h),x.fillStyle=n,x.globalAlpha=.9,x.fillRect(u+p-s,f,s,l((1-o/v)*h))}}},e.exports=t}}]);