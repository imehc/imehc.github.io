(self.webpackChunkanch=self.webpackChunkanch||[]).push([["9718"],{84707(e,t,r){var n,i,o,s,a,u,l,c=Object.defineProperty,h=Object.defineProperties,f=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,b={Atom:()=>e9,PointerProxy:()=>ts,Ticker:()=>ti,getPointerParts:()=>eE,isPointer:()=>ez,isPrism:()=>eN,iterateAndCountTicks:()=>tn,iterateOver:()=>to,pointer:()=>eF,pointerToPrism:()=>tt,prism:()=>e3,val:()=>tr};for(var v in c(t,"__esModule",{value:!0}),b)c(t,v,{get:b[v],enumerable:!0});var _=Array.isArray,m="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,j="object"==typeof self&&self&&self.Object===Object&&self,w=m||j||Function("return this")(),P=w.Symbol,O=Object.prototype,S=O.hasOwnProperty,T=O.toString,k=P?P.toStringTag:void 0,A=function(e){var t=S.call(e,k),r=e[k];try{e[k]=void 0;var n=!0}catch(e){}var i=T.call(e);return n&&(t?e[k]=r:delete e[k]),i},x=Object.prototype.toString,C=P?P.toStringTag:void 0,D=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":C&&C in Object(e)?A(e):x.call(e)},I=function(e){return null!=e&&"object"==typeof e},E=function(e){return"symbol"==typeof e||I(e)&&"[object Symbol]"==D(e)},M=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,F=/^\w*$/,z=function(e,t){if(_(e))return!1;var r=typeof e;return!!("number"==r||"symbol"==r||"boolean"==r||null==e||E(e))||F.test(e)||!M.test(e)||null!=t&&e in Object(t)},B=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},V=function(e){if(!B(e))return!1;var t=D(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},N=w["__core-js_shared__"],R=(n=/[^.]+$/.exec(N&&N.keys&&N.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",L=Function.prototype.toString,U=function(e){if(null!=e){try{return L.call(e)}catch(e){}try{return e+""}catch(e){}}return""},$=/^\[object .+?Constructor\]$/,q=Object.prototype,H=Function.prototype.toString,K=q.hasOwnProperty,W=RegExp("^"+H.call(K).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),G=function(e){return!!B(e)&&(!R||!(R in e))&&(V(e)?W:$).test(U(e))},J=function(e,t){var r=null==e?void 0:e[t];return G(r)?r:void 0},X=J(Object,"create"),Y=Object.prototype.hasOwnProperty,Q=Object.prototype.hasOwnProperty;function Z(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Z.prototype.clear=function(){this.__data__=X?X(null):{},this.size=0},Z.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=!!t,t},Z.prototype.get=function(e){var t=this.__data__;if(X){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Y.call(t,e)?t[e]:void 0},Z.prototype.has=function(e){var t=this.__data__;return X?void 0!==t[e]:Q.call(t,e)},Z.prototype.set=function(e,t){var r=this.__data__;return this.size+=+!this.has(e),r[e]=X&&void 0===t?"__lodash_hash_undefined__":t,this};var ee=function(e,t){for(var r,n=e.length;n--;)if((r=e[n][0])===t||r!=r&&t!=t)return n;return -1},et=Array.prototype.splice;function er(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}er.prototype.clear=function(){this.__data__=[],this.size=0},er.prototype.delete=function(e){var t=this.__data__,r=ee(t,e);return!(r<0)&&(r==t.length-1?t.pop():et.call(t,r,1),--this.size,!0)},er.prototype.get=function(e){var t=this.__data__,r=ee(t,e);return r<0?void 0:t[r][1]},er.prototype.has=function(e){return ee(this.__data__,e)>-1},er.prototype.set=function(e,t){var r=this.__data__,n=ee(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var en=J(w,"Map"),ei=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},eo=function(e,t){var r=e.__data__;return ei(t)?r["string"==typeof t?"string":"hash"]:r.map};function es(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ea(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError("Expected a function");var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=e.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(ea.Cache||es),r}es.prototype.clear=function(){this.size=0,this.__data__={hash:new Z,map:new(en||er),string:new Z}},es.prototype.delete=function(e){var t=eo(this,e).delete(e);return this.size-=!!t,t},es.prototype.get=function(e){return eo(this,e).get(e)},es.prototype.has=function(e){return eo(this,e).has(e)},es.prototype.set=function(e,t){var r=eo(this,e),n=r.size;return r.set(e,t),this.size+=+(r.size!=n),this},ea.Cache=es;var eu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,el=/\\(\\)?/g,ec=(o=(i=ea(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(eu,function(e,r,n,i){t.push(n?i.replace(el,"$1"):r||e)}),t},function(e){return 500===o.size&&o.clear(),e})).cache,i),eh=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i},ef=1/0,ep=P?P.prototype:void 0,ed=ep?ep.toString:void 0,ey=function e(t){if("string"==typeof t)return t;if(_(t))return eh(t,e)+"";if(E(t))return ed?ed.call(t):"";var r=t+"";return"0"==r&&1/t==-ef?"-0":r},eg=function(e,t){return _(e)?e:z(e,t)?[e]:ec(null==e?"":ey(e))},eb=1/0,ev=function(e){if("string"==typeof e||E(e))return e;var t=e+"";return"0"==t&&1/e==-eb?"-0":t},e_=function(e,t){t=eg(t,e);for(var r=0,n=t.length;null!=e&&r<n;)e=e[ev(t[r++])];return r&&r==n?e:void 0},em=function(e,t,r){var n=null==e?void 0:e_(e,t);return void 0===n?r:n},ej=(s=Object.getPrototypeOf,a=Object,function(e){return s(a(e))}),ew=Object.prototype,eP=Function.prototype.toString,eO=ew.hasOwnProperty,eS=eP.call(Object),eT=function(e){if(!I(e)||"[object Object]"!=D(e))return!1;var t=ej(e);if(null===t)return!0;var r=eO.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&eP.call(r)==eS},ek=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},eA=new WeakMap,ex=new WeakMap,eC=Symbol("pointerMeta"),eD={get(e,t){if(t===eC)return eA.get(e);let r=ex.get(e);r||(r=new Map,ex.set(e,r));let n=r.get(t);if(void 0!==n)return n;let i=eA.get(e),o=eM({root:i.root,path:[...i.path,t]});return r.set(t,o),o}},eI=e=>e[eC],eE=e=>{let{root:t,path:r}=eI(e);return{root:t,path:r}};function eM(e){var t;let r={root:e.root,path:null!=(t=e.path)?t:[]},n={};return eA.set(n,r),new Proxy(n,eD)}var eF=eM,ez=e=>e&&!!eI(e),eB=(e,t,r)=>{if(0===t.length)return r(e);if(Array.isArray(e)){let[n,...i]=t;isNaN(n=parseInt(String(n),10))&&(n=0);let o=e[n],s=eB(o,i,r);if(o===s)return e;let a=[...e];return a.splice(n,1,s),a}if("object"==typeof e&&null!==e){let[n,...i]=t,o=e[n],s=eB(o,i,r);return o===s?e:h(((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&g(e,r,t[r]);if(p)for(var r of p(t))y.call(t,r)&&g(e,r,t[r]);return e})({},e),f({[n]:s}))}{let[e,...n]=t;return{[e]:eB(void 0,n,r)}}},eV=class{constructor(){this._head=void 0}peek(){return this._head&&this._head.data}pop(){let e=this._head;if(e)return this._head=e.next,e.data}push(e){let t={next:this._head,data:e};this._head=t}};function eN(e){return!!(e&&e.isPrism&&!0===e.isPrism)}function eR(){let e=new eV,t=()=>{};return{type:"Dataverse_discoveryMechanism",startIgnoringDependencies:()=>{e.push(t)},stopIgnoringDependencies:()=>{e.peek()!==t||e.pop()},reportResolutionStart:r=>{let n=e.peek();n&&n(r),e.push(t)},reportResolutionEnd:t=>{e.pop()},pushCollector:t=>{e.push(t)},popCollector:t=>{if(e.peek()!==t)throw Error("Popped collector is not on top of the stack");e.pop()}}}var{startIgnoringDependencies:eL,stopIgnoringDependencies:eU,reportResolutionEnd:e$,reportResolutionStart:eq,pushCollector:eH,popCollector:eK}=function(){let e="__dataverse_discoveryMechanism_sharedStack",t="undefined"!=typeof window?window:void 0!==r.g?r.g:{};if(!t)return eR();{let r=t[e];if(r&&"object"==typeof r&&"Dataverse_discoveryMechanism"===r.type)return r;{let r=eR();return t[e]=r,r}}}(),eW=()=>{},eG=class{constructor(e,t){for(let r of(this._fn=e,this._prismInstance=t,this._didMarkDependentsAsStale=!1,this._isFresh=!1,this._cacheOfDendencyValues=new Map,this._dependents=new Set,this._dependencies=new Set,this._possiblyStaleDeps=new Set,this._scope=new eY(this),this._lastValue=void 0,this._forciblySetToStale=!1,this._reactToDependencyGoingStale=e=>{this._possiblyStaleDeps.add(e),this._markAsStale()},this._dependencies))r._addDependent(this._reactToDependencyGoingStale);eL(),this.getValue(),eU()}get hasDependents(){return this._dependents.size>0}removeDependent(e){this._dependents.delete(e)}addDependent(e){this._dependents.add(e)}destroy(){for(let e of this._dependencies)e._removeDependent(this._reactToDependencyGoingStale);!function e(t){for(let r of Object.values(t.subs))e(r);t.cleanupEffects()}(this._scope)}getValue(){if(!this._isFresh){let e=this._recalculate();this._lastValue=e,this._isFresh=!0,this._didMarkDependentsAsStale=!1,this._forciblySetToStale=!1}return this._lastValue}_recalculate(){let e;if(!this._forciblySetToStale&&this._possiblyStaleDeps.size>0){let e=!1;for(let t of(eL(),this._possiblyStaleDeps))if(this._cacheOfDendencyValues.get(t)!==t.getValue()){e=!0;break}if(eU(),this._possiblyStaleDeps.clear(),!e)return this._lastValue}let t=new Set;this._cacheOfDendencyValues.clear();let r=e=>{t.add(e),this._addDependency(e)};eH(r),eZ.push(this._scope);try{e=this._fn()}catch(e){console.error(e)}finally{eZ.pop()!==this._scope&&console.warn("The Prism hook stack has slipped. This is a bug.")}for(let e of(eK(r),this._dependencies))t.has(e)||this._removeDependency(e);for(let e of(this._dependencies=t,eL(),t))this._cacheOfDendencyValues.set(e,e.getValue());return eU(),e}forceStale(){this._forciblySetToStale=!0,this._markAsStale()}_markAsStale(){if(!this._didMarkDependentsAsStale)for(let e of(this._didMarkDependentsAsStale=!0,this._isFresh=!1,this._dependents))e(this._prismInstance)}_addDependency(e){this._dependencies.has(e)||(this._dependencies.add(e),e._addDependent(this._reactToDependencyGoingStale))}_removeDependency(e){this._dependencies.has(e)&&(this._dependencies.delete(e),e._removeDependent(this._reactToDependencyGoingStale))}},eJ={},eX=class{constructor(e){this._fn=e,this.isPrism=!0,this._state={hot:!1,handle:void 0}}get isHot(){return this._state.hot}onChange(e,t,r=!1){let n=()=>{e.onThisOrNextTick(o)},i=eJ,o=()=>{let e=this.getValue();e!==i&&(i=e,t(e))};return this._addDependent(n),r&&t(i=this.getValue()),()=>{this._removeDependent(n),e.offThisOrNextTick(o),e.offNextTick(o)}}onStale(e){let t=()=>{this._removeDependent(r)},r=()=>e();return this._addDependent(r),t}keepHot(){return this.onStale(()=>{})}_addDependent(e){this._state.hot||this._goHot(),this._state.handle.addDependent(e)}_goHot(){let e=new eG(this._fn,this);this._state={hot:!0,handle:e}}_removeDependent(e){let t=this._state;if(!t.hot)return;let r=t.handle;r.removeDependent(e),r.hasDependents||(this._state={hot:!1,handle:void 0},r.destroy())}getValue(){let e;eq(this);let t=this._state;return e=t.hot?t.handle.getValue():function(e){let t,r=new e5;eZ.push(r);try{t=e()}catch(e){console.error(e)}finally{eZ.pop()!==r&&console.warn("The Prism hook stack has slipped. This is a bug.")}return t}(this._fn),e$(this),e}},eY=class{constructor(e){this._hotHandle=e,this._refs=new Map,this.isPrismScope=!0,this.subs={},this.effects=new Map,this.memos=new Map}ref(e,t){let r=this._refs.get(e);if(void 0!==r)return r;{let r={current:t};return this._refs.set(e,r),r}}effect(e,t,r){let n=this.effects.get(e);void 0===n&&(n={cleanup:eW,deps:void 0},this.effects.set(e,n)),e0(n.deps,r)&&(n.cleanup(),eL(),n.cleanup=eQ(t,eW).value,eU(),n.deps=r)}memo(e,t,r){let n=this.memos.get(e);return void 0===n&&(n={cachedValue:null,deps:void 0},this.memos.set(e,n)),e0(n.deps,r)&&(eL(),n.cachedValue=eQ(t,void 0).value,eU(),n.deps=r),n.cachedValue}state(e,t){let{value:r,setValue:n}=this.memo("state/"+e,()=>{let e={current:t},r=t=>{e.current=t,this._hotHandle.forceStale()};return{value:e,setValue:r}},[]);return[r.current,n]}sub(e){return this.subs[e]||(this.subs[e]=new eY(this._hotHandle)),this.subs[e]}cleanupEffects(){for(let e of this.effects.values())eQ(e.cleanup,void 0);this.effects.clear()}source(e,t){return this.effect("$$source/blah",()=>e(()=>{this._hotHandle.forceStale()}),[e]),t()}};function eQ(e,t){try{return{value:e(),ok:!0}}catch(e){return setTimeout(function(){throw e}),{value:t,ok:!1}}}var eZ=new eV;function e0(e,t){if(void 0===e||void 0===t)return!0;let r=e.length;if(r!==t.length)return!0;for(let n=0;n<r;n++)if(e[n]!==t[n])return!0;return!1}function e1(e,t,r){let n=eZ.peek();if(!n)throw Error("prism.memo() is called outside of a prism() call.");return n.memo(e,t,r)}var e2=e=>new eX(e),e5=class{effect(e,t,r){console.warn("prism.effect() does not run in cold prisms")}memo(e,t,r){return t()}state(e,t){return[t,()=>{}]}ref(e,t){return{current:t}}sub(e){return new e5}source(e,t){return t()}};e2.ref=function(e,t){let r=eZ.peek();if(!r)throw Error("prism.ref() is called outside of a prism() call.");return r.ref(e,t)},e2.effect=function(e,t,r){let n=eZ.peek();if(!n)throw Error("prism.effect() is called outside of a prism() call.");return n.effect(e,t,r)},e2.memo=e1,e2.ensurePrism=function(){if(!eZ.peek())throw Error("The parent function is called outside of a prism() call.")},e2.state=function(e,t){let r=eZ.peek();if(!r)throw Error("prism.state() is called outside of a prism() call.");return r.state(e,t)},e2.scope=function(e,t){let r=eZ.peek();if(!r)throw Error("prism.scope() is called outside of a prism() call.");let n=r.sub(e);eZ.push(n);let i=eQ(t,void 0).value;return eZ.pop(),i},e2.sub=function(e,t,r){return e1(e,()=>e2(t),r).getValue()},e2.inPrism=function(){return!!eZ.peek()},e2.source=function(e,t){let r=eZ.peek();if(!r)throw Error("prism.source() is called outside of a prism() call.");return r.source(e,t)};var e3=e2;(u=l||(l={}))[u.Dict=0]="Dict",u[u.Array=1]="Array",u[u.Other=2]="Other";var e7=e=>Array.isArray(e)?1:2*!eT(e),e8=(e,t,r=e7(e))=>0===r&&"string"==typeof t||1===r&&e4(t)?e[t]:void 0,e4=e=>{let t="number"==typeof e?e:parseInt(e,10);return!isNaN(t)&&t>=0&&t<1/0&&(0|t)===t},e6=class{constructor(e,t){this._parent=e,this._path=t,this.children=new Map,this.identityChangeListeners=new Set}addIdentityChangeListener(e){this.identityChangeListeners.add(e)}removeIdentityChangeListener(e){this.identityChangeListeners.delete(e),this._checkForGC()}removeChild(e){this.children.delete(e),this._checkForGC()}getChild(e){return this.children.get(e)}getOrCreateChild(e){let t=this.children.get(e);return t||(t=t=new e6(this,this._path.concat([e])),this.children.set(e,t)),t}_checkForGC(){this.identityChangeListeners.size>0||!(this.children.size>0)&&this._parent&&this._parent.removeChild(ek(this._path))}},e9=class{constructor(e){this.$$isPointerToPrismProvider=!0,this.pointer=eF({root:this,path:[]}),this.prism=this.pointerToPrism(this.pointer),this._onPointerValueChange=(e,t)=>{let{path:r}=eE(e),n=this._getOrCreateScopeForPath(r);return n.identityChangeListeners.add(t),()=>{n.identityChangeListeners.delete(t)}},this._currentState=e,this._rootScope=new e6(void 0,[])}set(e){let t=this._currentState;this._currentState=e,this._checkUpdates(this._rootScope,t,e)}get(){return this._currentState}getByPointer(e){let t=eE(ez(e)?e:e(this.pointer)).path;return this._getIn(t)}_getIn(e){return 0===e.length?this.get():em(this.get(),e)}reduce(e){this.set(e(this.get()))}reduceByPointer(e,t){var r;let n=eE(ez(e)?e:e(this.pointer)).path,i=(r=this.get(),0===n.length?t(r):eB(r,n,t));this.set(i)}setByPointer(e,t){this.reduceByPointer(e,()=>t)}_checkUpdates(e,t,r){if(t===r)return;for(let t of e.identityChangeListeners)t(r);if(0===e.children.size)return;let n=e7(t),i=e7(r);if(2!==n||n!==i)for(let[o,s]of e.children){let e=e8(t,o,n),a=e8(r,o,i);this._checkUpdates(s,e,a)}}_getOrCreateScopeForPath(e){let t=this._rootScope;for(let r of e)t=t.getOrCreateChild(r);return t}pointerToPrism(e){let{path:t}=eE(e),r=t=>this._onPointerValueChange(e,t),n=()=>this._getIn(t);return e3(()=>e3.source(r,n))}},te=new WeakMap,tt=e=>{let t=eI(e),r=te.get(t);if(!r){let n=t.root;if("object"!=typeof n||null===n||!0!==n.$$isPointerToPrismProvider)throw Error("Cannot run pointerToPrism() on a pointer whose root is not an PointerToPrismProvider");r=n.pointerToPrism(e),te.set(t,r)}return r},tr=e=>ez(e)?tt(e).getValue():eN(e)?e.getValue():e;function*tn(e){let t;if(ez(e))t=tt(e);else if(eN(e))t=e;else throw Error("Only pointers and prisms are supported");let r=0,n=t.onStale(()=>{r++});try{for(;;){let e=r;r=0,yield{value:t.getValue(),ticks:e}}}finally{n()}}var ti=class{constructor(e){this._conf=e,this._ticking=!1,this._dormant=!0,this._numberOfDormantTicks=0,this.__ticks=0,this._scheduledForThisOrNextTick=new Set,this._scheduledForNextTick=new Set,this._timeAtCurrentTick=0}get dormant(){return this._dormant}onThisOrNextTick(e){this._scheduledForThisOrNextTick.add(e),this._dormant&&this._goActive()}onNextTick(e){this._scheduledForNextTick.add(e),this._dormant&&this._goActive()}offThisOrNextTick(e){this._scheduledForThisOrNextTick.delete(e)}offNextTick(e){this._scheduledForNextTick.delete(e)}get time(){return this._ticking?this._timeAtCurrentTick:performance.now()}_goActive(){var e,t;this._dormant&&(this._dormant=!1,null==(t=null==(e=this._conf)?void 0:e.onActive)||t.call(e))}_goDormant(){var e,t;this._dormant||(this._dormant=!0,this._numberOfDormantTicks=0,null==(t=null==(e=this._conf)?void 0:e.onDormant)||t.call(e))}tick(e=performance.now()){if(this.__ticks++,!this._dormant&&0===this._scheduledForNextTick.size&&0===this._scheduledForThisOrNextTick.size&&(this._numberOfDormantTicks++,this._numberOfDormantTicks>=180))return void this._goDormant();for(let t of(this._ticking=!0,this._timeAtCurrentTick=e,this._scheduledForNextTick))this._scheduledForThisOrNextTick.add(t);this._scheduledForNextTick.clear(),this._tick(0),this._ticking=!1}_tick(e){let t=this.time;if(e>10&&console.warn("_tick() recursing for 10 times"),e>100)throw Error("Maximum recursion limit for _tick()");let r=this._scheduledForThisOrNextTick;for(let e of(this._scheduledForThisOrNextTick=new Set,r))e(t);if(this._scheduledForThisOrNextTick.size>0)return this._tick(e+1)}};function*to(e){let t;if(ez(e))t=tt(e);else if(eN(e))t=e;else throw Error("Only pointers and prisms are supported");let r=new ti,n=t.onChange(r,e=>{});try{for(;;)r.tick(),yield t.getValue()}finally{n()}}var ts=class{constructor(e){this.$$isPointerToPrismProvider=!0,this._currentPointerBox=new e9(e),this.pointer=eF({root:this,path:[]})}setPointer(e){this._currentPointerBox.set(e)}pointerToPrism(e){let{path:t}=eI(e);return e3(()=>{let e=this._currentPointerBox.prism.getValue();return tr(t.reduce((e,t)=>e[t],e))})}}},5733(e,t,r){"use strict";let n,i,o,s,a,u,l;r.d(t,{DB:()=>I,LL:()=>H,ub:()=>K});var c=r(57140),h=r(67199),f=r(45225),p=r(75826),d=Object.create,y=Object.defineProperty,g=Object.defineProperties,b=Object.getOwnPropertyDescriptor,v=Object.getOwnPropertyDescriptors,_=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,j=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,O=(e,t,r)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,S=(e,t)=>{for(var r in t||(t={}))w.call(t,r)&&O(e,r,t[r]);if(m)for(var r of m(t))P.call(t,r)&&O(e,r,t[r]);return e},T=(e,t)=>{var r={};for(var n in e)w.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&m)for(var n of m(e))0>t.indexOf(n)&&P.call(e,n)&&(r[n]=e[n]);return r},k=(a=null!=(o=(n={"../../node_modules/zustand/vanilla.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var t,r=new Set,n=function(e,n){var i="function"==typeof e?e(t):e;if(i!==t){var o=t;t=n?i:Object.assign({},t,i),r.forEach(function(e){return e(t,o)})}},i=function(){return t},o=function(e,n,o){void 0===n&&(n=i),void 0===o&&(o=Object.is);var s=n(t);function a(){var r=n(t);if(!o(s,r)){var i=s;e(s=r,i)}}return r.add(a),function(){return r.delete(a)}},s={setState:n,getState:i,subscribe:function(e,t,n){return t||n?o(e,t,n):(r.add(e),function(){return r.delete(e)})},destroy:function(){return r.clear()}};return t=e(n,i,s),s}}},function(){return i||(0,n[_(n)[0]])((i={exports:{}}).exports,i),i.exports})())?d(j(o)):{},((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of _(t))w.call(e,i)||i===r||y(e,i,{get:()=>t[i],enumerable:!(n=b(t,i))||n.enumerable});return e})(!s&&o&&o.__esModule?a:y(a,"default",{value:o,enumerable:!0}),o)),A=new WeakSet,x=(0,k.default)((e,t)=>({sheet:null,editorObject:null,scene:null,gl:null,helpersRoot:new h.YJl,editables:{},canvasName:"default",sceneSnapshot:null,editablesSnapshot:null,initialEditorCamera:{},init:(r,n)=>{e({scene:r,gl:n}),t().createSnapshot()},addEditable:(t,r)=>{e(e=>({editables:g(S({},e.editables),v({[t]:r}))}))},removeEditable:t=>{e(e=>{let r=S({},e.editables);return delete r[t],{editables:r}})},createSnapshot:()=>{e(e=>{var t,r;return{sceneSnapshot:null!=(r=null==(t=e.scene)?void 0:t.clone())?r:null,editablesSnapshot:e.editables}})},setSnapshotProxyObject:(t,r)=>{e(e=>{let n,i;return{editablesSnapshot:(n=S({},e.editablesSnapshot),i={[r]:g(S({},e.editablesSnapshot[r]),v({proxyObject:t}))},g(n,v(i)))}})}}));function C(e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}var D=(0,c.createContext)(void 0),I=({sheet:e,children:t})=>{let{scene:r,gl:n}=(0,f.C)(e=>({scene:e.scene,gl:e.gl}));return(0,c.useEffect)(()=>{if(!e||"Theatre_Sheet_PublicAPI"!==e.type)throw Error("sheet in <Wrapper sheet={sheet}> has an invalid value")},[e]),(0,c.useLayoutEffect)(()=>{(({gl:e,scene:t})=>{(0,x.getState().init)(t,e)})({gl:n,scene:r})},[r,n]),c.createElement(D.Provider,{value:{sheet:e}},t)};function E(e){return"number"==typeof e&&isFinite(e)}var M=e=>e?{x:e[0],y:e[1],z:e[2]}:{x:0,y:0,z:0},F=(e,t=M(),{nudgeMultiplier:r=.01}={})=>({parse:r=>{let n=r[e],i=n?Array.isArray(n)?M(n):E(n)?{x:n,y:n,z:n}:["x","y","z"].every(e=>E(n[e]))?{x:n.x,y:n.y,z:n.z}:(p.notify.warning(`Invalid value for vector prop "${e}"`,`Couldn't make sense of \`${e}={${JSON.stringify(n)}}\`, falling back to \`${e}={${JSON.stringify([t.x,t.y,t.z])}}\`.

To fix this, make sure the prop is set to either a number, an array of numbers, or a three.js Vector3 object.`),t):t;return["x","y","z"].forEach(t=>{r[`${e}-${t}`]&&(i[t]=r[`${e}-${t}`])}),i},apply:(t,r)=>{r[e].set(t.x,t.y,t.z)},type:{[e]:{x:p.types.number(t.x,{nudgeMultiplier:r}),y:p.types.number(t.y,{nudgeMultiplier:r}),z:p.types.number(t.z,{nudgeMultiplier:r})}}}),z=(e,t=0,{nudgeMultiplier:r=.01}={})=>({parse:r=>{var n;return null!=(n=r[e])?n:t},apply:(t,r)=>{r[e]=t},type:{[e]:p.types.number(t,{nudgeMultiplier:r})}}),B=(e,t=new h.Q1f(0,0,0))=>({parse:r=>{var n;return g(S({},null!=(n=r[e])?n:t),v({a:1}))},apply:(t,r)=>{r[e].setRGB(t.r,t.g,t.b)},type:{[e]:p.types.rgba(g(S({},t),v({a:1})))}}),V=(e,t)=>g(S({},e),v({props:S(S({},e.props),t)})),N={props:{position:F("position"),rotation:F("rotation"),scale:F("scale",M([1,1,1]))},useTransformControls:!0,icon:"cube",createHelper:e=>new h.IWo(e,U)},R=g(S({},V(N,{intensity:z("intensity",1),distance:z("distance"),decay:z("decay"),color:B("color",new h.Q1f("white"))})),v({dimensionless:!0})),L=g(S({},V(N,{near:z("near",.1,{nudgeMultiplier:.1}),far:z("far",2e3,{nudgeMultiplier:.1})})),v({updateObject:e=>{e.updateProjectionMatrix()},icon:"camera",dimensionless:!0,createHelper:e=>new h.WTh(e)})),U="#40AAA4",$={group:g(S({},N),v({icon:"collection",createHelper:e=>new h.IWo(e,U)})),mesh:g(S({},N),v({icon:"cube",createHelper:e=>new h.IWo(e,U)})),spotLight:g(S({},V(R,{angle:z("angle",0,{nudgeMultiplier:.001}),penumbra:z("penumbra",0,{nudgeMultiplier:.001})})),v({icon:"spotLight",createHelper:e=>new h.Fpm(e,U)})),directionalLight:g(S({},V(N,{intensity:z("intensity",1),color:B("color",new h.Q1f("white"))})),v({icon:"sun",dimensionless:!0,createHelper:e=>new h.PFK(e,1,U)})),pointLight:g(S({},R),v({icon:"lightBulb",createHelper:e=>new h.F1l(e,1,U)})),ambientLight:{props:{intensity:z("intensity",1),color:B("color",new h.Q1f("white"))},useTransformControls:!1,icon:"lightBulb"},hemisphereLight:{props:{intensity:z("intensity",1),color:B("color",new h.Q1f("white")),groundColor:B("groundColor",new h.Q1f("white"))},useTransformControls:!1,icon:"lightBulb"},perspectiveCamera:V(L,{fov:z("fov",50,{nudgeMultiplier:.1}),zoom:z("zoom",1)}),orthographicCamera:L,points:N,line:N,lineLoop:N,lineSegments:N,fog:{props:{color:B("color"),near:z("near",1,{nudgeMultiplier:.1}),far:z("far",1e3,{nudgeMultiplier:.1})},useTransformControls:!1,icon:"cloud"}};x.getState().createSnapshot;var q=(0,c.createContext)(void 0),H=(u=(e,t)=>{if("primitive"!==e&&!t)throw Error("You must provide the type of the component you're creating an editable for. For example: editable(MyComponent, 'mesh').");return(0,c.forwardRef)((r,n)=>{var i,{theatreKey:o,visible:s,editableType:a,additionalProps:u,objRef:l}=r,h=T(r,["theatreKey","visible","editableType","additionalProps","objRef"]);if("string"!=typeof o)throw Error(`No valid theatreKey was provided to the editable component. theatreKey must be a string. Received: ${o}`);if("primitive"===e&&!a)throw Error(`When using the primitive component, you must provide the editableType prop. Received: ${a}`);let d=null!=t?t:a,y=(0,c.useRef)(),b=(()=>{let e=(0,c.useContext)(D);if(!e)throw Error("No sheet found. You need to add a <SheetProvider> higher up in the tree. https://docs.theatrejs.com/r3f.html#sheetprovider");return e})().sheet,_=null==(i=(0,c.useContext)(q))?void 0:i.rafDriver,[m,j]=(0,c.useState)(void 0),w=(0,c.useMemo)(()=>{let e;return e=g(S({},b.address),v({objectKey:o})),`${e.sheetId}:${e.sheetInstanceId}:${e.objectKey}`},[b,o]),P=(0,f.C)(({invalidate:e})=>e);return(0,c.useEffect)(()=>{if("perspectiveCamera"===e||"orthographicCamera"===e){let t=e.charAt(0).toUpperCase()+e.slice(1);p.notify.warning(`Possibly incorrect use of <e.${e} />`,`You seem to have declared the camera "${o}" simply as \`<e.${e} ... />\`. This alone won't make r3f use it for rendering.

The easiest way to create a custom animatable \`${t}\` is to import it from \`@react-three/drei\`, and make it editable.
\`\`\`
import {${t}} from '@react-three/drei'

const EditableCamera =
  editable(${t}, '${e}')
\`\`\`
Then you can use it in your JSX like any other editable component. Note the makeDefault prop exposed by drei, which makes r3f use it for rendering.
\`\`\`
<EditableCamera
  theatreKey="${o}"
  makeDefault
>
\`\`\`
`)}},[e,o]),(0,c.useLayoutEffect)(()=>{if(b)if(m)return void b.object(o,Object.assign(S({},u),...Object.values($[d].props).map(e=>e.type)),{reconfigure:!0});else{let e=b.object(o,Object.assign(S({},u),...Object.values($[d].props).map(e=>e.type)));A.add(e),j(e),l&&("function"==typeof l?l(e):l.current=e),x.getState().addEditable(w,{type:d,sheetObject:e,visibleOnlyInEditor:"editor"===s,objectConfig:$[d]})}},[b,w,u]),(0,c.useLayoutEffect)(()=>{m&&(m.initialValue=Object.fromEntries(Object.entries($[d].props).map(([e,t])=>[e,t.parse(h)])))},[m,...Object.keys($[d].props).map(e=>h[e])]),(0,c.useLayoutEffect)(()=>{if(!m)return;let e=y.current,t=t=>{var r,n;Object.entries($[d].props).forEach(([r,n])=>n.apply(t[r],e)),null==(n=(r=$[d]).updateObject)||n.call(r,e),P()};t(m.value);let r=m.onValuesChange(t,_);return()=>{r(),m.sheet.detachObject(o),A.delete(m),x.getState().removeEditable(w)}},[m,_]),c.createElement(e,g(S({ref:C([y,n])},h),v({visible:"editor"!==s&&s,userData:{__editable:!0,__storeKey:w}})))})},l=g(S({},Object.fromEntries(Object.keys($).map(e=>[e,u(e,e)]))),v({primitive:u("primitive",null)})),Object.assign(u,l)),K=H(c.forwardRef((e,t)=>{var{makeDefault:r,lookAt:n}=e,i=T(e,["makeDefault","lookAt"]);let o=(0,f.C)(({set:e})=>e),s=(0,f.C)(({camera:e})=>e),a=(0,f.C)(({size:e})=>e),u=c.useRef(null);return c.useLayoutEffect(()=>{i.manual||(u.current.aspect=a.width/a.height)},[a,i]),c.useLayoutEffect(()=>{u.current.updateProjectionMatrix()}),c.useLayoutEffect(()=>{if(r)return o(()=>({camera:u.current})),()=>o(()=>({camera:s}))},[u,r,o]),(0,f.D)(()=>{var e;if(n&&u.current){u.current.lookAt(Array.isArray(n)?new h.Pq0(...n):n.current?n.current.position:n);let t=x.getState().editablesSnapshot;t&&(null==(e=t[u.current.userData.__storeKey].proxyObject)||e.rotation.copy(u.current.rotation))}}),c.createElement("perspectiveCamera",S({ref:C([u,t])},i))}),"perspectiveCamera");H(c.forwardRef((e,t)=>{var{makeDefault:r,lookAt:n}=e,i=T(e,["makeDefault","lookAt"]);let o=(0,f.C)(({set:e})=>e),s=(0,f.C)(({camera:e})=>e),a=(0,f.C)(({size:e})=>e),u=c.useRef(null);return c.useLayoutEffect(()=>{i.manual||u.current.updateProjectionMatrix()},[a,i]),c.useLayoutEffect(()=>{u.current.updateProjectionMatrix()}),c.useLayoutEffect(()=>{if(r)return o(()=>({camera:u.current})),()=>o(()=>({camera:s}))},[u,r,o]),(0,f.D)(()=>{var e;if(n&&u.current){u.current.lookAt(Array.isArray(n)?new h.Pq0(...n):n.current?n.current.position:n);let t=x.getState().editablesSnapshot;t&&(null==(e=t[u.current.userData.__storeKey].proxyObject)||e.rotation.copy(u.current.rotation))}}),c.createElement("orthographicCamera",S({left:-(a.width/2),right:a.width/2,top:a.height/2,bottom:-(a.height/2),ref:C([u,t])},i))}),"orthographicCamera")},75826(e,t,r){"use strict";e=r.nmd(e);var n,i,o,s,a,u,l=Object.create,c=Object.defineProperty,h=Object.defineProperties,f=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertyNames,y=Object.getOwnPropertySymbols,g=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,_=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))b.call(t,r)&&_(e,r,t[r]);if(y)for(var r of y(t))v.call(t,r)&&_(e,r,t[r]);return e},j=(e,t)=>function(){return t||(0,e[d(e)[0]])((t={exports:{}}).exports,t),t.exports},w=(e,t)=>{for(var r in t)c(e,r,{get:t[r],enumerable:!0})},P=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of d(t))b.call(e,i)||i===r||c(e,i,{get:()=>t[i],enumerable:!(n=f(t,i))||n.enumerable});return e},O=(e,t,r)=>(r=null!=e?l(g(e)):{},P(!t&&e&&e.__esModule?r:c(r,"default",{value:e,enumerable:!0}),e)),S=(e,t,r)=>(_(e,"symbol"!=typeof t?t+"":t,r),r),T=j({"../node_modules/timing-function/lib/UnitBezier.js"(e,t){t.exports=function(){function e(e,t,r,n){this.set(e,t,r,n)}return e.prototype.set=function(e,t,r,n){this._cx=3*e,this._bx=3*(r-e)-this._cx,this._ax=1-this._cx-this._bx,this._cy=3*t,this._by=3*(n-t)-this._cy,this._ay=1-this._cy-this._by},e.epsilon=1e-6,e.prototype._sampleCurveX=function(e){return((this._ax*e+this._bx)*e+this._cx)*e},e.prototype._sampleCurveY=function(e){return((this._ay*e+this._by)*e+this._cy)*e},e.prototype._sampleCurveDerivativeX=function(e){return(3*this._ax*e+2*this._bx)*e+this._cx},e.prototype._solveCurveX=function(e,t){var r,n,i,o,s,a;for(i=void 0,o=void 0,s=void 0,a=void 0,r=void 0,n=void 0,s=e,n=0;n<8;){if(Math.abs(a=this._sampleCurveX(s)-e)<t)return s;if(Math.abs(r=this._sampleCurveDerivativeX(s))<t)break;s-=a/r,n++}if(i=0,o=1,(s=e)<i)return i;if(s>o)return o;for(;i<o&&!(Math.abs((a=this._sampleCurveX(s))-e)<t);)e>a?i=s:o=s,s=(o-i)*.5+i;return s},e.prototype.solve=function(e,t){return this._sampleCurveY(this._solveCurveX(e,t))},e.prototype.solveSimple=function(e){return this._sampleCurveY(this._solveCurveX(e,1e-6))},e}()}}),k=j({"../node_modules/levenshtein-edit-distance/index.js"(e,t){var r,n;r=[],n=[],t.exports=function(e,t,i){var o,s,a,u,l,c,h,f;if(e===t)return 0;if(o=e.length,s=t.length,0===o)return s;if(0===s)return o;for(i&&(e=e.toLowerCase(),t=t.toLowerCase()),h=0;h<o;)n[h]=e.charCodeAt(h),r[h]=++h;for(f=0;f<s;)for(a=t.charCodeAt(f),u=l=f++,h=-1;++h<o;)c=a===n[h]?l:l+1,l=r[h],r[h]=u=l>u?c>u?u+1:c:c>l?l+1:c;return u}}}),A=j({"../node_modules/propose/propose.js"(e,t){var r=k();t.exports=function(){var e,t,n,i,o,s=0,a=arguments[0],u=arguments[1],l=u.length,c=arguments[2];c&&(i=c.threshold,o=c.ignoreCase),void 0===i&&(i=0);for(var h=0;h<l;++h)(e=(t=o?r(a,u[h],!0):r(a,u[h]))>a.length?1-t/u[h].length:1-t/a.length)>s&&(s=e,n=u[h]);return s>=i?n:null}}}),x=j({"../node_modules/fast-deep-equal/index.js"(e,t){t.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!=i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;0!=i--;){var n,i,o,s=o[i];if(!e(t[s],r[s]))return!1}return!0}return t!=t&&r!=r}}}),C={};w(C,{createRafDriver:()=>ik,getProject:()=>o9,notify:()=>iP,onChange:()=>st,types:()=>iN,val:()=>sr}),e.exports=P(c({},"__esModule",{value:!0}),C);var D={};w(D,{createRafDriver:()=>ik,getProject:()=>o9,notify:()=>iP,onChange:()=>st,types:()=>iN,val:()=>sr});var I=r(84707),E=new class{constructor(){S(this,"atom",new I.Atom({projects:{}}))}add(e,t){this.atom.setByPointer(t=>t.projects[e],t)}get(e){return this.atom.get().projects[e]}has(e){return!!this.get(e)}},M=new WeakMap;function F(e){return M.get(e)}function z(e,t){M.set(e,t)}var B=[],V=Array.isArray,N="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,R="object"==typeof self&&self&&self.Object===Object&&self,L=N||R||Function("return this")(),U=L.Symbol,$=Object.prototype,q=$.hasOwnProperty,H=$.toString,K=U?U.toStringTag:void 0,W=function(e){var t=q.call(e,K),r=e[K];try{e[K]=void 0;var n=!0}catch(e){}var i=H.call(e);return n&&(t?e[K]=r:delete e[K]),i},G=Object.prototype.toString,J=U?U.toStringTag:void 0,X=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":J&&J in Object(e)?W(e):G.call(e)},Y=function(e){return null!=e&&"object"==typeof e},Q=function(e){return"symbol"==typeof e||Y(e)&&"[object Symbol]"==X(e)},Z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ee=/^\w*$/,et=function(e,t){if(V(e))return!1;var r=typeof e;return!!("number"==r||"symbol"==r||"boolean"==r||null==e||Q(e))||ee.test(e)||!Z.test(e)||null!=t&&e in Object(t)},er=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},en=function(e){if(!er(e))return!1;var t=X(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},ei=L["__core-js_shared__"],eo=(n=/[^.]+$/.exec(ei&&ei.keys&&ei.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",es=Function.prototype.toString,ea=function(e){if(null!=e){try{return es.call(e)}catch(e){}try{return e+""}catch(e){}}return""},eu=/^\[object .+?Constructor\]$/,el=Object.prototype,ec=Function.prototype.toString,eh=el.hasOwnProperty,ef=RegExp("^"+ec.call(eh).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ep=function(e){return!!er(e)&&(!eo||!(eo in e))&&(en(e)?ef:eu).test(ea(e))},ed=function(e,t){var r=null==e?void 0:e[t];return ep(r)?r:void 0},ey=ed(Object,"create"),eg=Object.prototype.hasOwnProperty,eb=Object.prototype.hasOwnProperty;function ev(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ev.prototype.clear=function(){this.__data__=ey?ey(null):{},this.size=0},ev.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=!!t,t},ev.prototype.get=function(e){var t=this.__data__;if(ey){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return eg.call(t,e)?t[e]:void 0},ev.prototype.has=function(e){var t=this.__data__;return ey?void 0!==t[e]:eb.call(t,e)},ev.prototype.set=function(e,t){var r=this.__data__;return this.size+=+!this.has(e),r[e]=ey&&void 0===t?"__lodash_hash_undefined__":t,this};var e_=function(e,t){return e===t||e!=e&&t!=t},em=function(e,t){for(var r=e.length;r--;)if(e_(e[r][0],t))return r;return -1},ej=Array.prototype.splice;function ew(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ew.prototype.clear=function(){this.__data__=[],this.size=0},ew.prototype.delete=function(e){var t=this.__data__,r=em(t,e);return!(r<0)&&(r==t.length-1?t.pop():ej.call(t,r,1),--this.size,!0)},ew.prototype.get=function(e){var t=this.__data__,r=em(t,e);return r<0?void 0:t[r][1]},ew.prototype.has=function(e){return em(this.__data__,e)>-1},ew.prototype.set=function(e,t){var r=this.__data__,n=em(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var eP=ed(L,"Map"),eO=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},eS=function(e,t){var r=e.__data__;return eO(t)?r["string"==typeof t?"string":"hash"]:r.map};function eT(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ek(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError("Expected a function");var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=e.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(ek.Cache||eT),r}eT.prototype.clear=function(){this.size=0,this.__data__={hash:new ev,map:new(eP||ew),string:new ev}},eT.prototype.delete=function(e){var t=eS(this,e).delete(e);return this.size-=!!t,t},eT.prototype.get=function(e){return eS(this,e).get(e)},eT.prototype.has=function(e){return eS(this,e).has(e)},eT.prototype.set=function(e,t){var r=eS(this,e),n=r.size;return r.set(e,t),this.size+=+(r.size!=n),this},ek.Cache=eT;var eA=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ex=/\\(\\)?/g,eC=(o=(i=ek(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(eA,function(e,r,n,i){t.push(n?i.replace(ex,"$1"):r||e)}),t},function(e){return 500===o.size&&o.clear(),e})).cache,i),eD=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i},eI=1/0,eE=U?U.prototype:void 0,eM=eE?eE.toString:void 0,eF=function e(t){if("string"==typeof t)return t;if(V(t))return eD(t,e)+"";if(Q(t))return eM?eM.call(t):"";var r=t+"";return"0"==r&&1/t==-eI?"-0":r},ez=function(e){return null==e?"":eF(e)},eB=function(e,t){return V(e)?e:et(e,t)?[e]:eC(ez(e))},eV=1/0,eN=function(e){if("string"==typeof e||Q(e))return e;var t=e+"";return"0"==t&&1/e==-eV?"-0":t},eR=function(e,t){t=eB(t,e);for(var r=0,n=t.length;null!=e&&r<n;)e=e[eN(t[r++])];return r&&r==n?e:void 0},eL=function(e,t,r){var n=null==e?void 0:eR(e,t);return void 0===n?r:n};function eU(e,t){return 0===t.length?e:eL(e,t)}var e$=class{constructor(){S(this,"_values",{})}get(e,t){if(this.has(e))return this._values[e];{let r=t();return this._values[e]=r,r}}has(e){return this._values.hasOwnProperty(e)}},eq=r(84707),eH=function(){try{var e=ed(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),eK=function(e,t,r){"__proto__"==t&&eH?eH(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},eW=Object.prototype.hasOwnProperty,eG=function(e,t,r){var n=e[t];eW.call(e,t)&&e_(n,r)&&(void 0!==r||t in e)||eK(e,t,r)},eJ=/^(?:0|[1-9]\d*)$/,eX=function(e,t){var r=typeof e;return!!(t=null==t?0x1fffffffffffff:t)&&("number"==r||"symbol"!=r&&eJ.test(e))&&e>-1&&e%1==0&&e<t},eY=function(e,t,r,n){if(!er(e))return e;t=eB(t,e);for(var i=-1,o=t.length,s=o-1,a=e;null!=a&&++i<o;){var u=eN(t[i]),l=r;if("__proto__"===u||"constructor"===u||"prototype"===u)break;if(i!=s){var c=a[u];void 0===(l=n?n(c,u,a):void 0)&&(l=er(c)?c:eX(t[i+1])?[]:{})}eG(a,u,l),a=a[u]}return e},eQ=new WeakMap,eZ=r(84707),e0=O(T()),e1=(0,eZ.prism)(()=>void 0),e2={beforeFirstKeyframe:e=>({started:!0,validFrom:-1/0,validTo:e.position,der:(0,eZ.prism)(()=>({left:e.value,progression:0}))}),lastKeyframe:e=>({started:!0,validFrom:e.position,validTo:1/0,der:(0,eZ.prism)(()=>({left:e.value,progression:0}))}),between(e,t,r){if(!e.connectedRight)return{started:!0,validFrom:e.position,validTo:t.position,der:(0,eZ.prism)(()=>({left:e.value,progression:0}))};let n=r=>(r-e.position)/(t.position-e.position);if(!e.type||"bezier"===e.type){let i=new e0.default(e.handles[2],e.handles[3],t.handles[0],t.handles[1]),o=(0,eZ.prism)(()=>{let o=n(r.getValue()),s=i.solveSimple(o);return{left:e.value,right:t.value,progression:s}});return{started:!0,validFrom:e.position,validTo:t.position,der:o}}let i=(0,eZ.prism)(()=>{let i=Math.floor(n(r.getValue()));return{left:e.value,right:t.value,progression:i}});return{started:!0,validFrom:e.position,validTo:t.position,der:i}},error:{started:!0,validFrom:-1/0,validTo:1/0,der:e1}};function e5(e,t,r){let n=r.get(e);if(n&&n.override===t)return n.merged;let i=m({},e);for(let n of Object.keys(t)){let o=t[n],s=e[n];i[n]="object"==typeof o&&"object"==typeof s?e5(s,o,r):void 0===o?s:o}return r.set(e,{override:t,merged:i}),i}function e3(e,t){let r=e;for(let e of t)r=r[e];return r}var e7=r(84707),e8=r(84707),e4=r(84707),e6=/\s/,e9=function(e){for(var t=e.length;t--&&e6.test(e.charAt(t)););return t},te=/^\s+/,tt=0/0,tr=/^[-+]0x[0-9a-f]+$/i,tn=/^0b[01]+$/i,ti=/^0o[0-7]+$/i,to=parseInt,ts=function(e){if("number"==typeof e)return e;if(Q(e))return tt;if(er(e)){var t,r="function"==typeof e.valueOf?e.valueOf():e;e=er(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=(t=e)?t.slice(0,e9(t)+1).replace(te,""):t;var n=tn.test(e);return n||ti.test(e)?to(e.slice(2),n?2:8):tr.test(e)?tt:+e},ta=1/0,tu=function(e){var t,r=(t=e)?(t=ts(t))===ta||t===-ta?(t<0?-1:1)*17976931348623157e292:t==t?t:0:0===t?t:0,n=r%1;return r==r?n?r-n:r:0},tl=function(e){return e},tc=ed(L,"WeakMap"),th=Object.create,tf=function(){function e(){}return function(t){if(!er(t))return{};if(th)return th(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),tp=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t},td=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e},ty=function(e,t,r,n){var i=!r;r||(r={});for(var o=-1,s=t.length;++o<s;){var a=t[o],u=n?n(r[a],e[a],a,r,e):void 0;void 0===u&&(u=e[a]),i?eK(r,a,u):eG(r,a,u)}return r},tg=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff},tb=function(e){return null!=e&&tg(e.length)&&!en(e)},tv=Object.prototype,t_=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||tv)},tm=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n},tj=function(e){return Y(e)&&"[object Arguments]"==X(e)},tw=Object.prototype,tP=tw.hasOwnProperty,tO=tw.propertyIsEnumerable,tS=tj(function(){return arguments}())?tj:function(e){return Y(e)&&tP.call(e,"callee")&&!tO.call(e,"callee")},tT=t&&!t.nodeType&&t,tk=tT&&e&&!e.nodeType&&e,tA=tk&&tk.exports===tT?L.Buffer:void 0,tx=(tA?tA.isBuffer:void 0)||function(){return!1},tC={};tC["[object Float32Array]"]=tC["[object Float64Array]"]=tC["[object Int8Array]"]=tC["[object Int16Array]"]=tC["[object Int32Array]"]=tC["[object Uint8Array]"]=tC["[object Uint8ClampedArray]"]=tC["[object Uint16Array]"]=tC["[object Uint32Array]"]=!0,tC["[object Arguments]"]=tC["[object Array]"]=tC["[object ArrayBuffer]"]=tC["[object Boolean]"]=tC["[object DataView]"]=tC["[object Date]"]=tC["[object Error]"]=tC["[object Function]"]=tC["[object Map]"]=tC["[object Number]"]=tC["[object Object]"]=tC["[object RegExp]"]=tC["[object Set]"]=tC["[object String]"]=tC["[object WeakMap]"]=!1;var tD=function(e){return function(t){return e(t)}},tI=t&&!t.nodeType&&t,tE=tI&&e&&!e.nodeType&&e,tM=tE&&tE.exports===tI&&N.process,tF=function(){try{var e=tE&&tE.require&&tE.require("util").types;if(e)return e;return tM&&tM.binding&&tM.binding("util")}catch(e){}}(),tz=tF&&tF.isTypedArray,tB=tz?tD(tz):function(e){return Y(e)&&tg(e.length)&&!!tC[X(e)]},tV=Object.prototype.hasOwnProperty,tN=function(e,t){var r=V(e),n=!r&&tS(e),i=!r&&!n&&tx(e),o=!r&&!n&&!i&&tB(e),s=r||n||i||o,a=s?tm(e.length,String):[],u=a.length;for(var l in e)(t||tV.call(e,l))&&!(s&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||eX(l,u)))&&a.push(l);return a},tR=function(e,t){return function(r){return e(t(r))}},tL=tR(Object.keys,Object),tU=Object.prototype.hasOwnProperty,t$=function(e){if(!t_(e))return tL(e);var t=[];for(var r in Object(e))tU.call(e,r)&&"constructor"!=r&&t.push(r);return t},tq=function(e){return tb(e)?tN(e):t$(e)},tH=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t},tK=Object.prototype.hasOwnProperty,tW=function(e){if(!er(e))return tH(e);var t=t_(e),r=[];for(var n in e)"constructor"==n&&(t||!tK.call(e,n))||r.push(n);return r},tG=function(e){return tb(e)?tN(e,!0):tW(e)},tJ=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e},tX=tR(Object.getPrototypeOf,Object),tY=Object.prototype,tQ=Function.prototype.toString,tZ=tY.hasOwnProperty,t0=tQ.call(Object),t1=function(e){if(!Y(e)||"[object Object]"!=X(e))return!1;var t=tX(e);if(null===t)return!0;var r=tZ.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&tQ.call(r)==t0},t2=function(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o},t5=function(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:t2(e,t,r)},t3=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),t7=function(e){return t3.test(e)},t8="\\ud800-\\udfff",t4="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",t6="\\ud83c[\\udffb-\\udfff]",t9="[^"+t8+"]",re="(?:\\ud83c[\\udde6-\\uddff]){2}",rt="[\\ud800-\\udbff][\\udc00-\\udfff]",rr="(?:"+t4+"|"+t6+")?",rn="[\\ufe0e\\ufe0f]?",ri="(?:\\u200d(?:"+[t9,re,rt].join("|")+")"+rn+rr+")*",ro=RegExp(t6+"(?="+t6+")|"+("(?:"+[t9+t4+"?",t4,re,rt,"["+t8+"]"].join("|"))+")"+(rn+rr+ri),"g"),rs=function(e,t,r){var n,i,o;return void 0===r&&(r=t,t=void 0),void 0!==r&&(r=(r=ts(r))==r?r:0),void 0!==t&&(t=(t=ts(t))==t?t:0),n=ts(e),i=t,o=r,n==n&&(void 0!==o&&(n=n<=o?n:o),void 0!==i&&(n=n>=i?n:i)),n};function ra(e){var t=this.__data__=new ew(e);this.size=t.size}ra.prototype.clear=function(){this.__data__=new ew,this.size=0},ra.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},ra.prototype.get=function(e){return this.__data__.get(e)},ra.prototype.has=function(e){return this.__data__.has(e)},ra.prototype.set=function(e,t){var r=this.__data__;if(r instanceof ew){var n=r.__data__;if(!eP||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new eT(n)}return r.set(e,t),this.size=r.size,this};var ru=t&&!t.nodeType&&t,rl=ru&&e&&!e.nodeType&&e,rc=rl&&rl.exports===ru?L.Buffer:void 0,rh=rc?rc.allocUnsafe:void 0,rf=function(e,t){if(t)return e.slice();var r=e.length,n=rh?rh(r):new e.constructor(r);return e.copy(n),n},rp=function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var s=e[r];t(s,r,e)&&(o[i++]=s)}return o},rd=function(){return[]},ry=Object.prototype.propertyIsEnumerable,rg=Object.getOwnPropertySymbols,rb=rg?function(e){return null==e?[]:rp(rg(e=Object(e)),function(t){return ry.call(e,t)})}:rd,rv=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)tJ(t,rb(e)),e=tX(e);return t}:rd,r_=function(e,t,r){var n=t(e);return V(e)?n:tJ(n,r(e))},rm=function(e){return r_(e,tq,rb)},rj=function(e){return r_(e,tG,rv)},rw=ed(L,"DataView"),rP=ed(L,"Promise"),rO=ed(L,"Set"),rS="[object Map]",rT="[object Promise]",rk="[object Set]",rA="[object WeakMap]",rx="[object DataView]",rC=ea(rw),rD=ea(eP),rI=ea(rP),rE=ea(rO),rM=ea(tc),rF=X;(rw&&rF(new rw(new ArrayBuffer(1)))!=rx||eP&&rF(new eP)!=rS||rP&&rF(rP.resolve())!=rT||rO&&rF(new rO)!=rk||tc&&rF(new tc)!=rA)&&(rF=function(e){var t=X(e),r="[object Object]"==t?e.constructor:void 0,n=r?ea(r):"";if(n)switch(n){case rC:return rx;case rD:return rS;case rI:return rT;case rE:return rk;case rM:return rA}return t});var rz=rF,rB=Object.prototype.hasOwnProperty,rV=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&rB.call(e,"index")&&(r.index=e.index,r.input=e.input),r},rN=L.Uint8Array,rR=function(e){var t=new e.constructor(e.byteLength);return new rN(t).set(new rN(e)),t},rL=function(e,t){var r=t?rR(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)},rU=/\w*$/,r$=function(e){var t=new e.constructor(e.source,rU.exec(e));return t.lastIndex=e.lastIndex,t},rq=U?U.prototype:void 0,rH=rq?rq.valueOf:void 0,rK=function(e,t){var r=t?rR(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)},rW=function(e,t,r){var n=e.constructor;switch(t){case"[object ArrayBuffer]":return rR(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return rL(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return rK(e,r);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return r$(e);case"[object Symbol]":return rH?Object(rH.call(e)):{}}},rG=tF&&tF.isMap,rJ=rG?tD(rG):function(e){return Y(e)&&"[object Map]"==rz(e)},rX=tF&&tF.isSet,rY=rX?tD(rX):function(e){return Y(e)&&"[object Set]"==rz(e)},rQ="[object Arguments]",rZ="[object Function]",r0="[object Object]",r1={};r1[rQ]=r1["[object Array]"]=r1["[object ArrayBuffer]"]=r1["[object DataView]"]=r1["[object Boolean]"]=r1["[object Date]"]=r1["[object Float32Array]"]=r1["[object Float64Array]"]=r1["[object Int8Array]"]=r1["[object Int16Array]"]=r1["[object Int32Array]"]=r1["[object Map]"]=r1["[object Number]"]=r1[r0]=r1["[object RegExp]"]=r1["[object Set]"]=r1["[object String]"]=r1["[object Symbol]"]=r1["[object Uint8Array]"]=r1["[object Uint8ClampedArray]"]=r1["[object Uint16Array]"]=r1["[object Uint32Array]"]=!0,r1["[object Error]"]=r1[rZ]=r1["[object WeakMap]"]=!1;var r2=function e(t,r,n,i,o,s){var a,u=1&r,l=2&r,c=4&r;if(n&&(a=o?n(t,i,o,s):n(t)),void 0!==a)return a;if(!er(t))return t;var h=V(t);if(h){if(a=rV(t),!u)return tp(t,a)}else{var f,p,d,y,g,b=rz(t),v=b==rZ||"[object GeneratorFunction]"==b;if(tx(t))return rf(t,u);if(b==r0||b==rQ||v&&!o){if(a=l||v||"function"!=typeof(f=t).constructor||t_(f)?{}:tf(tX(f)),!u)return l?(d=(p=a)&&ty(t,tG(t),p),ty(t,rv(t),d)):(g=(y=a)&&ty(t,tq(t),y),ty(t,rb(t),g))}else{if(!r1[b])return o?t:{};a=rW(t,b,u)}}s||(s=new ra);var _=s.get(t);if(_)return _;s.set(t,a),rY(t)?t.forEach(function(i){a.add(e(i,r,n,i,t,s))}):rJ(t)&&t.forEach(function(i,o){a.set(o,e(i,r,n,o,t,s))});var m=c?l?rj:rm:l?tG:tq,j=h?void 0:m(t);return td(j||t,function(i,o){j&&(i=t[o=i]),eG(a,o,e(i,r,n,o,t,s))}),a};function r5(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new eT;++t<r;)this.add(e[t])}r5.prototype.add=r5.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},r5.prototype.has=function(e){return this.__data__.has(e)};var r3=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1},r7=function(e,t,r,n,i,o){var s=1&r,a=e.length,u=t.length;if(a!=u&&!(s&&u>a))return!1;var l=o.get(e),c=o.get(t);if(l&&c)return l==t&&c==e;var h=-1,f=!0,p=2&r?new r5:void 0;for(o.set(e,t),o.set(t,e);++h<a;){var d=e[h],y=t[h];if(n)var g=s?n(y,d,h,t,e,o):n(d,y,h,e,t,o);if(void 0!==g){if(g)continue;f=!1;break}if(p){if(!r3(t,function(e,t){if(!p.has(t)&&(d===e||i(d,e,r,n,o)))return p.push(t)})){f=!1;break}}else if(!(d===y||i(d,y,r,n,o))){f=!1;break}}return o.delete(e),o.delete(t),f},r8=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r},r4=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r},r6=U?U.prototype:void 0,r9=r6?r6.valueOf:void 0,ne=function(e,t,r,n,i,o,s){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!o(new rN(e),new rN(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return e_(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=r8;case"[object Set]":var u=1&n;if(a||(a=r4),e.size!=t.size&&!u)break;var l=s.get(e);if(l)return l==t;n|=2,s.set(e,t);var c=r7(a(e),a(t),n,i,o,s);return s.delete(e),c;case"[object Symbol]":if(r9)return r9.call(e)==r9.call(t)}return!1},nt=Object.prototype.hasOwnProperty,nr=function(e,t,r,n,i,o){var s=1&r,a=rm(e),u=a.length;if(u!=rm(t).length&&!s)return!1;for(var l=u;l--;){var c=a[l];if(!(s?c in t:nt.call(t,c)))return!1}var h=o.get(e),f=o.get(t);if(h&&f)return h==t&&f==e;var p=!0;o.set(e,t),o.set(t,e);for(var d=s;++l<u;){var y=e[c=a[l]],g=t[c];if(n)var b=s?n(g,y,c,t,e,o):n(y,g,c,e,t,o);if(!(void 0===b?y===g||i(y,g,r,n,o):b)){p=!1;break}d||(d="constructor"==c)}if(p&&!d){var v=e.constructor,_=t.constructor;v!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _)&&(p=!1)}return o.delete(e),o.delete(t),p},nn="[object Arguments]",ni="[object Array]",no="[object Object]",ns=Object.prototype.hasOwnProperty,na=function(e,t,r,n,i,o){var s=V(e),a=V(t),u=s?ni:rz(e),l=a?ni:rz(t);u=u==nn?no:u,l=l==nn?no:l;var c=u==no,h=l==no,f=u==l;if(f&&tx(e)){if(!tx(t))return!1;s=!0,c=!1}if(f&&!c)return o||(o=new ra),s||tB(e)?r7(e,t,r,n,i,o):ne(e,t,u,r,n,i,o);if(!(1&r)){var p=c&&ns.call(e,"__wrapped__"),d=h&&ns.call(t,"__wrapped__");if(p||d){var y=p?e.value():e,g=d?t.value():t;return o||(o=new ra),i(y,g,r,n,o)}}return!!f&&(o||(o=new ra),nr(e,t,r,n,i,o))},nu=function e(t,r,n,i,o){return t===r||(null!=t&&null!=r&&(Y(t)||Y(r))?na(t,r,n,i,e,o):t!=t&&r!=r)},nl=function(e,t,r,n){var i=r.length,o=i,s=!n;if(null==e)return!o;for(e=Object(e);i--;){var a=r[i];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){var u=(a=r[i])[0],l=e[u],c=a[1];if(s&&a[2]){if(void 0===l&&!(u in e))return!1}else{var h=new ra;if(n)var f=n(l,c,u,e,t,h);if(!(void 0===f?nu(c,l,3,n,h):f))return!1}}return!0},nc=function(e){return e==e&&!er(e)},nh=function(e){for(var t=tq(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,nc(i)]}return t},nf=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}},np=function(e){var t=nh(e);return 1==t.length&&t[0][2]?nf(t[0][0],t[0][1]):function(r){return r===e||nl(r,e,t)}},nd=function(e,t){return null!=e&&t in Object(e)},ny=function(e,t,r){t=eB(t,e);for(var n=-1,i=t.length,o=!1;++n<i;){var s=eN(t[n]);if(!(o=null!=e&&r(e,s)))break;e=e[s]}return o||++n!=i?o:!!(i=null==e?0:e.length)&&tg(i)&&eX(s,i)&&(V(e)||tS(e))},ng=function(e){return function(t){return null==t?void 0:t[e]}},nb=function(e){return et(e)?ng(eN(e)):function(t){return eR(t,e)}},nv=function(e){if("function"==typeof e)return e;if(null==e)return tl;if("object"==typeof e){var t,r;return V(e)?(t=e[0],r=e[1],et(t)&&nc(r)?nf(eN(t),r):function(e){var n=eL(e,t);return void 0===n&&n===r?null!=e&&ny(e,t,nd):nu(r,n,3)}):np(e)}return nb(e)},n_=function(e,t,r){for(var n=-1,i=Object(e),o=r(e),s=o.length;s--;){var a=o[++n];if(!1===t(i[a],a,i))break}return e},nm=function(){return L.Date.now()},nj=Math.max,nw=Math.min,nP=function(e,t,r){var n,i,o,s,a,u,l=0,c=!1,h=!1,f=!0;if("function"!=typeof e)throw TypeError("Expected a function");function p(t){var r=n,o=i;return n=i=void 0,l=t,s=e.apply(o,r)}function d(e){var r=e-u,n=e-l;return void 0===u||r>=t||r<0||h&&n>=o}function y(){var e,r,n,i=nm();if(d(i))return g(i);a=setTimeout(y,(e=i-u,r=i-l,n=t-e,h?nw(n,o-r):n))}function g(e){return(a=void 0,f&&n)?p(e):(n=i=void 0,s)}function b(){var e,r=nm(),o=d(r);if(n=arguments,i=this,u=r,o){if(void 0===a)return l=e=u,a=setTimeout(y,t),c?p(e):s;if(h)return clearTimeout(a),a=setTimeout(y,t),p(u)}return void 0===a&&(a=setTimeout(y,t)),s}return t=ts(t)||0,er(r)&&(c=!!r.leading,o=(h="maxWait"in r)?nj(ts(r.maxWait)||0,t):o,f="trailing"in r?!!r.trailing:f),b.cancel=function(){void 0!==a&&clearTimeout(a),l=0,n=u=i=a=void 0},b.flush=function(){return void 0===a?s:g(nm())},b},nO=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},nS=function(e,t){var r,n={};return t=nv(t,3),r=function(e,r,i){eK(n,r,t(e,r,i))},e&&n_(e,r,tq),n},nT=function(e,t){var r,n;return t=eB(t,e),r=e,null==(e=(n=t).length<2?r:eR(r,t2(n,0,-1)))||delete e[eN(nO(t))]},nk=Math.floor,nA=function(e,t){var r="";if(!e||t<1||t>0x1fffffffffffff)return r;do t%2&&(r+=e),(t=nk(t/2))&&(e+=e);while(t)return r},nx=ng("length"),nC="\\ud800-\\udfff",nD="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",nI="\\ud83c[\\udffb-\\udfff]",nE="[^"+nC+"]",nM="(?:\\ud83c[\\udde6-\\uddff]){2}",nF="[\\ud800-\\udbff][\\udc00-\\udfff]",nz="(?:"+nD+"|"+nI+")?",nB="[\\ufe0e\\ufe0f]?",nV="(?:\\u200d(?:"+[nE,nM,nF].join("|")+")"+nB+nz+")*",nN=RegExp(nI+"(?="+nI+")|"+("(?:"+[nE+nD+"?",nD,nM,nF,"["+nC+"]"].join("|"))+")"+(nB+nz+nV),"g"),nR=function(e){for(var t=nN.lastIndex=0;nN.test(e);)++t;return t},nL=function(e){return t7(e)?nR(e):nx(e)},nU=Math.ceil,n$=function(e,t){var r,n=(t=void 0===t?" ":eF(t)).length;if(n<2)return n?nA(t,e):t;var i=nA(t,nU(e/nL(t)));return t7(t)?t5(t7(r=i)?r.match(ro)||[]:r.split(""),0,e).join(""):i.slice(0,e)},nq=function(e,t,r){e=ez(e);var n=(t=tu(t))?nL(e):0;return t&&n<t?n$(t-n,r)+e:e},nH=function(e,t){return null==e||nT(e,t)},nK=class{constructor(e){S(this,"_cache",new e$),S(this,"_keepHotUntapDebounce"),z(this,e)}get type(){return"Theatre_SheetObject_PublicAPI"}get props(){return F(this).propsP}get sheet(){return F(this).sheet.publicApi}get project(){return F(this).sheet.project.publicApi}get address(){return m({},F(this).address)}_valuesPrism(){return this._cache.get("_valuesPrism",()=>{let e=F(this);return(0,e4.prism)(()=>(0,e4.val)(e.getValues().getValue()))})}onValuesChange(e,t){return st(this._valuesPrism(),e,t)}get value(){let e=this._valuesPrism();if(!e.isHot){null!=this._keepHotUntapDebounce&&this._keepHotUntapDebounce.flush();let t=e.keepHot();this._keepHotUntapDebounce=nP(()=>{t(),this._keepHotUntapDebounce=void 0},5e3)}return this._keepHotUntapDebounce&&this._keepHotUntapDebounce(),e.getValue()}set initialValue(e){F(this).setInitialValue(e)}};function nW(e){let t=new WeakMap;return r=>(t.has(r)||t.set(r,e(r)),t.get(r))}function nG(e){return"compound"===e.type||"enum"===e.type}function nJ(e,t){if(!e)return;let[r,...n]=t;return void 0===r?e:nG(e)?nJ("enum"===e.type?e.cases[r]:e.props[r],n):void 0}var nX=nW(e=>{if("enum"===e.type)throw Error("Not implemented yet for enums");for(let t in e.props){let r=e.props[t];if(!nG(r)||nX(r))return!0}return!1}),nY=class{constructor(e,t,r){this.sheet=e,this.template=t,this.nativeObject=r,S(this,"$$isPointerToPrismProvider",!0),S(this,"address"),S(this,"publicApi"),S(this,"_initialValue",new e8.Atom({})),S(this,"_cache",new e$),S(this,"_logger"),S(this,"_internalUtilCtx"),this._logger=e._logger.named("SheetObject",t.address.objectKey),this._logger._trace("creating object"),this._internalUtilCtx={logger:this._logger.utilFor.internal()},this.address=h(m({},t.address),p({sheetInstanceId:e.address.sheetInstanceId})),this.publicApi=new nK(this)}get type(){return"Theatre_SheetObject"}getValues(){return this._cache.get("getValues()",()=>(0,e8.prism)(()=>{var e;let t,r=e5((0,e8.val)(this.template.getDefaultValues()),(0,e8.val)(this._initialValue.pointer),e8.prism.memo("withInitialCache",()=>new WeakMap,[])),n=e5(r,(0,e8.val)(this.template.getStaticValues()),e8.prism.memo("withStatics",()=>new WeakMap,[]));{let e=e8.prism.memo("seq",()=>this.getSequencedValues(),[]),t=e8.prism.memo("withSeqsCache",()=>new WeakMap,[]);n=e5(n,(0,e8.val)((0,e8.val)(e)),t)}return(e=n,(t=e7.prism.memo("finalAtom",()=>new e7.Atom(e),[])).set(e),t).pointer}))}getValueByPointer(e){let t=(0,e8.val)(this.getValues()),{path:r}=(0,e8.getPointerParts)(e);return(0,e8.val)(e3(t,r))}pointerToPrism(e){let{path:t}=(0,e8.getPointerParts)(e);return(0,e8.prism)(()=>{let e=(0,e8.val)(this.getValues());return(0,e8.val)(e3(e,t))})}getSequencedValues(){return(0,e8.prism)(()=>{let e=e8.prism.memo("tracksToProcess",()=>this.template.getArrayOfValidSequenceTracks(),[]),t=(0,e8.val)(e),r=new e8.Atom({}),n=(0,e8.val)(this.template.configPointer);return e8.prism.effect("processTracks",()=>{let e=[];for(let{trackId:i,pathToProp:o}of t){let t=this._trackIdToPrism(i),s=nJ(n,o),a=s.deserializeAndSanitize,u=s.interpolate,l=()=>{let e=t.getValue();if(!e)return r.setByPointer(e=>e3(e,o),void 0);let n=a(e.left),i=void 0===n?s.default:n;if(void 0===e.right)return r.setByPointer(e=>e3(e,o),i);let l=a(e.right),c=void 0===l?s.default:l;return r.setByPointer(e=>e3(e,o),u(i,c,e.progression))},c=t.onStale(l);l(),e.push(c)}return()=>{for(let t of e)t()}},[n,...t]),r.pointer})}_trackIdToPrism(e){var t;let r=this.template.project.pointers.historic.sheetsById[this.address.sheetId].sequence.tracksByObject[this.address.objectKey].trackData[e],n=this.sheet.getSequence().positionPrism;return t=this._internalUtilCtx,(0,eZ.prism)(()=>{let e=(0,eZ.val)(r);return eZ.prism.memo("driver",()=>{var r,i;return e?"BasicKeyframedTrack"===e.type?(r=e,i=n,(0,eZ.prism)(()=>{let e=eZ.prism.ref("state",{started:!1}),t=e.current,n=i.getValue();return(!t.started||n<t.validFrom||t.validTo<=n)&&(e.current=t=function(e,t,r){let n=t.getValue();if(0===r.keyframes.length)return{started:!0,validFrom:-1/0,validTo:1/0,der:e1};let i=0;for(;;){let e=r.keyframes[i];if(!e)return e2.error;let o=i===r.keyframes.length-1;if(n<e.position)if(0===i)return e2.beforeFirstKeyframe(e);else return e2.error;if(e.position===n)if(o)return e2.lastKeyframe(e);else return e2.between(e,r.keyframes[i+1],t);{if(i===r.keyframes.length-1)return e2.lastKeyframe(e);let o=i+1;if(!(r.keyframes[o].position<=n))return e2.between(e,r.keyframes[i+1],t);i=o;continue}}}(0,i,r)),t.der.getValue()})):(t.logger.error("Track type not yet supported."),(0,eZ.prism)(()=>void 0)):(0,eZ.prism)(()=>void 0)},[e]).getValue()})}get propsP(){return this._cache.get("propsP",()=>(0,e8.pointer)({root:this,path:[]}))}validateValue(e,t){}setInitialValue(e){this.validateValue(this.propsP,e),this._initialValue.set(e)}};function nQ(e){return function(t,r){return e(t,r())}}var nZ={_hmm:n0(524),_todo:n0(522),_error:n0(521),errorDev:n0(529),errorPublic:n0(545),_kapow:n0(268),_warn:n0(265),warnDev:n0(273),warnPublic:n0(289),_debug:n0(137),debugDev:n0(145),_trace:n0(73),traceDev:n0(81)};function n0(e){return Object.freeze({audience:(8&e)==8?"internal":(16&e)==16?"dev":"public",category:(4&e)==4?"troubleshooting":(2&e)==2?"todo":"general",level:(512&e)==512?512:(256&e)==256?256:(128&e)==128?128:64})}function n1(e,t){return((32&t)==32||((16&t)==16?e.dev:(8&t)==8&&e.internal))&&e.min<=t}var n2={loggingConsoleStyle:!0,loggerConsoleStyle:!0,includes:Object.freeze({internal:!1,dev:!1,min:256}),filtered:function(){},include:function(){return{}},create:null,creatExt:null,named(e,t,r){return this.create({names:[...e.names,{name:t,key:r}]})},style:{bold:void 0,italic:void 0,cssMemo:new Map([["",""]]),collapseOnRE:/[a-z- ]+/g,color:void 0,collapsed(e){if(e.length<5)return e;let t=e.replace(this.collapseOnRE,"");return this.cssMemo.has(t)||this.cssMemo.set(t,this.css(e)),t},css(e){var t,r,n,i;let o=this.cssMemo.get(e);if(o)return o;let s="color:".concat(null!=(r=null==(t=this.color)?void 0:t.call(this,e))?r:"hsl(".concat((e.charCodeAt(0)+e.charCodeAt(e.length-1))%360,", 100%, 60%)"));return(null==(n=this.bold)?void 0:n.test(e))&&(s+=";font-weight:600"),(null==(i=this.italic)?void 0:i.test(e))&&(s+=";font-style:italic"),this.cssMemo.set(e,s),s}}};function n5(e=console,t={}){let r=h(m({},n2),p({includes:m({},n2.includes)})),n={styled:n8.bind(r,e),noStyle:n4.bind(r,e)},i=n7.bind(r);function o(){return r.loggingConsoleStyle&&r.loggerConsoleStyle?n.styled:n.noStyle}return r.create=o(),{configureLogger(e){var t;"console"===e?(r.loggerConsoleStyle=n2.loggerConsoleStyle,r.create=o()):"console"===e.type?(r.loggerConsoleStyle=null!=(t=e.style)?t:n2.loggerConsoleStyle,r.create=o()):"keyed"===e.type?(r.creatExt=t=>e.keyed(t.names),r.create=i):"named"===e.type&&(r.creatExt=n3.bind(null,e.named),r.create=i)},configureLogging(e){var t,n,i,s,a;r.includes.dev=null!=(t=e.dev)?t:n2.includes.dev,r.includes.internal=null!=(n=e.internal)?n:n2.includes.internal,r.includes.min=null!=(i=e.min)?i:n2.includes.min,r.include=null!=(s=e.include)?s:n2.include,r.loggingConsoleStyle=null!=(a=e.consoleStyle)?a:n2.loggingConsoleStyle,r.create=o()},getLogger:()=>r.create({names:[]})}}function n3(e,t){let r=[];for(let{name:e,key:n}of t.names)r.push(null==n?e:"".concat(e," (").concat(n,")"));return e(r)}function n7(e){let t=m(m({},this.includes),this.include(e)),r=this.filtered,n=this.named.bind(this,e),i=this.creatExt(e),o=n1(t,524),s=n1(t,522),a=n1(t,521),u=n1(t,529),l=n1(t,545),c=n1(t,265),h=n1(t,268),f=n1(t,273),p=n1(t,289),d=n1(t,137),y=n1(t,145),g=n1(t,73),b=n1(t,81),v=o?i.error.bind(i,nZ._hmm):r.bind(e,524),_=s?i.error.bind(i,nZ._todo):r.bind(e,522),j=a?i.error.bind(i,nZ._error):r.bind(e,521),w=u?i.error.bind(i,nZ.errorDev):r.bind(e,529),P=l?i.error.bind(i,nZ.errorPublic):r.bind(e,545),O=h?i.warn.bind(i,nZ._kapow):r.bind(e,268),S=c?i.warn.bind(i,nZ._warn):r.bind(e,265),T=f?i.warn.bind(i,nZ.warnDev):r.bind(e,273),k=p?i.warn.bind(i,nZ.warnPublic):r.bind(e,273),A=d?i.debug.bind(i,nZ._debug):r.bind(e,137),x=y?i.debug.bind(i,nZ.debugDev):r.bind(e,145),C=g?i.trace.bind(i,nZ._trace):r.bind(e,73),D=b?i.trace.bind(i,nZ.traceDev):r.bind(e,81),I={_hmm:v,_todo:_,_error:j,errorDev:w,errorPublic:P,_kapow:O,_warn:S,warnDev:T,warnPublic:k,_debug:A,debugDev:x,_trace:C,traceDev:D,lazy:{_hmm:o?nQ(v):v,_todo:s?nQ(_):_,_error:a?nQ(j):j,errorDev:u?nQ(w):w,errorPublic:l?nQ(P):P,_kapow:h?nQ(O):O,_warn:c?nQ(S):S,warnDev:f?nQ(T):T,warnPublic:p?nQ(k):k,_debug:d?nQ(A):A,debugDev:y?nQ(x):x,_trace:g?nQ(C):C,traceDev:b?nQ(D):D},named:n,utilFor:{internal:()=>({debug:I._debug,error:I._error,warn:I._warn,trace:I._trace,named:(e,t)=>I.named(e,t).utilFor.internal()}),dev:()=>({debug:I.debugDev,error:I.errorDev,warn:I.warnDev,trace:I.traceDev,named:(e,t)=>I.named(e,t).utilFor.dev()}),public:()=>({error:I.errorPublic,warn:I.warnPublic,debug(e,t){I._warn('(public "debug" filtered out) '.concat(e),t)},trace(e,t){I._warn('(public "trace" filtered out) '.concat(e),t)},named:(e,t)=>I.named(e,t).utilFor.public()})}};return I}function n8(e,t){let r=m(m({},this.includes),this.include(t)),n=[],i="";for(let e=0;e<t.names.length;e++){let{name:r,key:o}=t.names[e];if(i+=" %c".concat(r),n.push(this.style.css(r)),null!=o){let e="%c#".concat(o);i+=e,n.push(this.style.css(e))}}let o=this.filtered,s=this.named.bind(this,t),a=[i,...n];return n6(o,t,r,e,a,function(e){let t=e.slice(0);for(let e=1;e<t.length;e++)t[e]+=";background-color:#e0005a;padding:2px;color:white";return t}(a),s)}function n4(e,t){let r=m(m({},this.includes),this.include(t)),n="";for(let e=0;e<t.names.length;e++){let{name:r,key:i}=t.names[e];n+=" ".concat(r),null!=i&&(n+="#".concat(i))}let i=this.filtered,o=this.named.bind(this,t),s=[n];return n6(i,t,r,e,s,s,o)}function n6(e,t,r,n,i,o,s){let a=n1(r,524),u=n1(r,522),l=n1(r,521),c=n1(r,529),h=n1(r,545),f=n1(r,265),p=n1(r,268),d=n1(r,273),y=n1(r,289),g=n1(r,137),b=n1(r,145),v=n1(r,73),_=n1(r,81),m=a?n.error.bind(n,...i):e.bind(t,524),j=u?n.error.bind(n,...i):e.bind(t,522),w=l?n.error.bind(n,...i):e.bind(t,521),P=c?n.error.bind(n,...i):e.bind(t,529),O=h?n.error.bind(n,...i):e.bind(t,545),S=p?n.warn.bind(n,...o):e.bind(t,268),T=f?n.warn.bind(n,...i):e.bind(t,265),k=d?n.warn.bind(n,...i):e.bind(t,273),A=y?n.warn.bind(n,...i):e.bind(t,273),x=g?n.info.bind(n,...i):e.bind(t,137),C=b?n.info.bind(n,...i):e.bind(t,145),D=v?n.debug.bind(n,...i):e.bind(t,73),I=_?n.debug.bind(n,...i):e.bind(t,81),E={_hmm:m,_todo:j,_error:w,errorDev:P,errorPublic:O,_kapow:S,_warn:T,warnDev:k,warnPublic:A,_debug:x,debugDev:C,_trace:D,traceDev:I,lazy:{_hmm:a?nQ(m):m,_todo:u?nQ(j):j,_error:l?nQ(w):w,errorDev:c?nQ(P):P,errorPublic:h?nQ(O):O,_kapow:p?nQ(S):S,_warn:f?nQ(T):T,warnDev:d?nQ(k):k,warnPublic:y?nQ(A):A,_debug:g?nQ(x):x,debugDev:b?nQ(C):C,_trace:v?nQ(D):D,traceDev:_?nQ(I):I},named:s,utilFor:{internal:()=>({debug:E._debug,error:E._error,warn:E._warn,trace:E._trace,named:(e,t)=>E.named(e,t).utilFor.internal()}),dev:()=>({debug:E.debugDev,error:E.errorDev,warn:E.warnDev,trace:E.traceDev,named:(e,t)=>E.named(e,t).utilFor.dev()}),public:()=>({error:E.errorPublic,warn:E.warnPublic,debug(e,t){E._warn('(public "debug" filtered out) '.concat(e),t)},trace(e,t){E._warn('(public "trace" filtered out) '.concat(e),t)},named:(e,t)=>E.named(e,t).utilFor.public()})}};return E}var n9=n5(console,{_debug:function(){},_error:function(){}});n9.configureLogging({dev:!0,min:64});var ie=n9.getLogger().named("Theatre.js (default logger)").utilFor.dev(),it=new WeakMap;function ir(e,t,r){for(let[n,i]of Object.entries(t.props))if(!nG(i)){let t=[...e,n];r.set(JSON.stringify(t),r.size),ii(t,i,r)}for(let[n,i]of Object.entries(t.props))if(nG(i)){let t=[...e,n];r.set(JSON.stringify(t),r.size),ii(t,i,r)}}function ii(e,t,r){if("compound"===t.type)ir(e,t,r);else if("enum"===t.type)throw Error("Enums aren't supported yet");else r.set(JSON.stringify(e),r.size)}function io(e){return"object"==typeof e&&null!==e&&0===Object.keys(e).length}var is=class{constructor(e,t,r,n,i){this.sheetTemplate=e,S(this,"address"),S(this,"type","Theatre_SheetObjectTemplate"),S(this,"_config"),S(this,"_temp_actions_atom"),S(this,"_cache",new e$),S(this,"project"),S(this,"pointerToSheetState"),S(this,"pointerToStaticOverrides"),this.address=h(m({},e.address),p({objectKey:t})),this._config=new eq.Atom(n),this._temp_actions_atom=new eq.Atom(i),this.project=e.project,this.pointerToSheetState=this.sheetTemplate.project.pointers.historic.sheetsById[this.address.sheetId],this.pointerToStaticOverrides=this.pointerToSheetState.staticOverrides.byObject[this.address.objectKey]}get staticConfig(){return this._config.get()}get configPointer(){return this._config.pointer}get _temp_actions(){return this._temp_actions_atom.get()}get _temp_actionsPointer(){return this._temp_actions_atom.pointer}createInstance(e,t,r){return this._config.set(r),new nY(e,this,t)}reconfigure(e){this._config.set(e)}_temp_setActions(e){this._temp_actions_atom.set(e)}getDefaultValues(){return this._cache.get("getDefaultValues()",()=>(0,eq.prism)(()=>(function e(t){if(eQ.has(t))return eQ.get(t);let r="compound"===t.type?function(t){let r={};for(let[n,i]of Object.entries(t.props))r[n]=e(i);return r}(t):"enum"===t.type?function(t){let r={$case:t.defaultCase};for(let[n,i]of Object.entries(t.cases))r[n]=e(i);return r}(t):t.default;return eQ.set(t,r),r})((0,eq.val)(this.configPointer))))}getStaticValues(){return this._cache.get("getStaticValues",()=>(0,eq.prism)(()=>{var e;let t=null!=(e=(0,eq.val)(this.pointerToStaticOverrides))?e:{};return(0,eq.val)(this.configPointer).deserializeAndSanitize(t)||{}}))}getArrayOfValidSequenceTracks(){return this._cache.get("getArrayOfValidSequenceTracks",()=>(0,eq.prism)(()=>{let e=this.project.pointers.historic.sheetsById[this.address.sheetId],t=(0,eq.val)(e.sequence.tracksByObject[this.address.objectKey].trackIdByPropPath);if(!t)return B;let r=[];if(!t)return B;let n=(0,eq.val)(this.configPointer);for(let[e,i]of Object.entries(t)){let t=function(e){try{return JSON.parse(e)}catch(t){ie.warn("property ".concat(JSON.stringify(e)," cannot be parsed. Skipping."));return}}(e);if(!t)continue;let o=nJ(n,t);o&&!nG(o)&&r.push({pathToProp:t,trackId:i})}let i=function(e){let t=it.get(e);if(t)return t;let r=new Map;return it.set(e,r),ir([],e,r),r}(n);return(r.sort((e,t)=>{let r=e.pathToProp,n=t.pathToProp;return i.get(JSON.stringify(r))>i.get(JSON.stringify(n))?1:-1}),0===r.length)?B:r}))}getMapOfValidSequenceTracks_forStudio(){return this._cache.get("getMapOfValidSequenceTracks_forStudio",()=>(0,eq.prism)(()=>{let e=(0,eq.val)(this.getArrayOfValidSequenceTracks()),t={};for(let{pathToProp:r,trackId:n}of e)null==t||eY(t,r,n);return t}))}getStaticButNotSequencedOverrides(){return this._cache.get("getStaticButNotSequencedOverrides",()=>(0,eq.prism)(()=>{let e=(0,eq.val)(this.getStaticValues()),t=(0,eq.val)(this.getArrayOfValidSequenceTracks()),r=r2(e,5);for(let{pathToProp:e}of t){nH(r,e);let t=e.slice(0,-1);for(;t.length>0&&io(eU(r,t));)nH(r,t),t=t.slice(0,-1)}if(!io(r))return r}))}getDefaultsAtPointer(e){let{path:t}=(0,eq.getPointerParts)(e);return eU(this.getDefaultValues().getValue(),t)}},ia=r(84707),iu=nW(e=>JSON.stringify(e));O(A());var il=class extends Error{},ic=class extends il{},ih=r(84707),ip=r(84707),id=r(84707),iy=r(84707);function ig(){let e,t,r=new Promise((r,i)=>{e=e=>{r(e),n.status="resolved"},t=e=>{i(e),n.status="rejected"}}),n={resolve:e,reject:t,promise:r,status:"pending"};return n}var ib=()=>{},iv=r(84707),i_=class{constructor(){S(this,"_stopPlayCallback",ib),S(this,"_state",new iv.Atom({position:0,playing:!1})),S(this,"statePointer"),this.statePointer=this._state.pointer}destroy(){}pause(){this._stopPlayCallback(),this.playing=!1,this._stopPlayCallback=ib}gotoPosition(e){this._updatePositionInState(e)}_updatePositionInState(e){this._state.setByPointer(e=>e.position,e)}getCurrentPosition(){return this._state.get().position}get playing(){return this._state.get().playing}set playing(e){this._state.setByPointer(e=>e.playing,e)}play(e,t,r,n,i){this.playing&&this.pause(),this.playing=!0;let o=t[1]-t[0];{let e=this.getCurrentPosition();e<t[0]||e>t[1]?"normal"===n||"alternate"===n?this._updatePositionInState(t[0]):("reverse"===n||"alternateReverse"===n)&&this._updatePositionInState(t[1]):"normal"===n||"alternate"===n?e===t[1]&&this._updatePositionInState(t[0]):e===t[0]&&this._updatePositionInState(t[1])}let s=ig(),a=i.time,u=o*e,l=this.getCurrentPosition()-t[0];("reverse"===n||"alternateReverse"===n)&&(l=t[1]-this.getCurrentPosition());let c=i=>{let c=Math.min(Math.max(i-a,0)/1e3*r+l,u);if(c!==u){let e=Math.floor(c/o),r=c/o%1*o;if("normal"!==n)if("reverse"===n)r=o-r;else{let t=e%2==0;"alternate"===n?t||(r=o-r):t&&(r=o-r)}this._updatePositionInState(r+t[0]),h()}else{if("normal"===n)this._updatePositionInState(t[1]);else if("reverse"===n)this._updatePositionInState(t[0]);else{let r=(e-1)%2==0;"alternate"===n?r?this._updatePositionInState(t[1]):this._updatePositionInState(t[0]):r?this._updatePositionInState(t[0]):this._updatePositionInState(t[1])}this.playing=!1,s.resolve(!0)}};this._stopPlayCallback=()=>{i.offThisOrNextTick(c),i.offNextTick(c),this.playing&&s.resolve(!1)};let h=()=>i.onNextTick(c);return i.onThisOrNextTick(c),s.promise}playDynamicRange(e,t){this.playing&&this.pause(),this.playing=!0;let r=ig(),n=e.keepHot();r.promise.then(n,n);let i=t.time,o=t=>{let r=Math.max(t-i,0);i=t;let n=this.getCurrentPosition(),o=e.getValue();if(n<o[0]||n>o[1])this.gotoPosition(o[0]);else{let e=n+r/1e3;e>o[1]&&(e=o[0]+(e-o[1])),this.gotoPosition(e)}s()};this._stopPlayCallback=()=>{t.offThisOrNextTick(o),t.offNextTick(o),r.resolve(!1)};let s=()=>t.onNextTick(o);return t.onThisOrNextTick(o),r.promise}},im=r(84707),ij="__TheatreJS_CoreBundle",iw=e=>(...t)=>{var r;switch(e){case"success":case"info":ie.debug(t.slice(0,2).join("\n"));break;case"warning":ie.warn(t.slice(0,2).join("\n"))}return"undefined"!=typeof window?null==(r=window.__TheatreJS_Notifications)?void 0:r.notify[e](...t):void 0},iP={warning:iw("warning"),success:iw("success"),info:iw("info"),error:iw("error")};"undefined"!=typeof window&&(window.addEventListener("error",e=>{iP.error("An error occurred","<pre>".concat(e.message,"</pre>\n\nSee **console** for details."))}),window.addEventListener("unhandledrejection",e=>{iP.error("An error occurred","<pre>".concat(e.reason,"</pre>\n\nSee **console** for details."))}));var iO=class{constructor(e,t,r){this._decodedBuffer=e,this._audioContext=t,this._nodeDestination=r,S(this,"_mainGain"),S(this,"_state",new im.Atom({position:0,playing:!1})),S(this,"statePointer"),S(this,"_stopPlayCallback",ib),this.statePointer=this._state.pointer,this._mainGain=this._audioContext.createGain(),this._mainGain.connect(this._nodeDestination)}playDynamicRange(e,t){let r,n=ig();this._playing&&this.pause(),this._playing=!0;let i=()=>{null==r||r(),r=this._loopInRange(e.getValue(),t).stop},o=e.onStale(i);return i(),this._stopPlayCallback=()=>{null==r||r(),o(),n.resolve(!1)},n.promise}_loopInRange(e,t){let r=this.getCurrentPosition(),n=e[1]-e[0];r<e[0]||r>e[1]?this._updatePositionInState(e[0]):r===e[1]&&this._updatePositionInState(e[0]),r=this.getCurrentPosition();let i=this._audioContext.createBufferSource();i.buffer=this._decodedBuffer,i.connect(this._mainGain),i.playbackRate.value=1,i.loop=!0,i.loopStart=e[0],i.loopEnd=e[1];let o=t.time,s=r-e[0];i.start(0,r);let a=t=>{let r=(Math.max(t-o,0)/1e3*1+s)/n%1*n;this._updatePositionInState(r+e[0]),u()},u=()=>t.onNextTick(a);return t.onThisOrNextTick(a),{stop:()=>{i.stop(),i.disconnect(),t.offThisOrNextTick(a),t.offNextTick(a)}}}get _playing(){return this._state.get().playing}set _playing(e){this._state.setByPointer(e=>e.playing,e)}destroy(){}pause(){this._stopPlayCallback(),this._playing=!1,this._stopPlayCallback=ib}gotoPosition(e){this._updatePositionInState(e)}_updatePositionInState(e){this._state.reduce(t=>h(m({},t),p({position:e})))}getCurrentPosition(){return this._state.get().position}play(e,t,r,n,i){this._playing&&this.pause(),this._playing=!0;let o=this.getCurrentPosition(),s=t[1]-t[0];if("normal"!==n)throw new ic('Audio-controlled sequences can only be played in the "normal" direction. '+"'".concat(n,"' given."));o<t[0]||o>t[1]?this._updatePositionInState(t[0]):o===t[1]&&this._updatePositionInState(t[0]),o=this.getCurrentPosition();let a=ig(),u=this._audioContext.createBufferSource();u.buffer=this._decodedBuffer,u.connect(this._mainGain),u.playbackRate.value=r,e>1e3&&(iP.warning("Can't play sequences with audio more than 1000 times","The sequence will still play, but only 1000 times. The `iterationCount: ".concat(e,"` provided to `sequence.play()`\nis too high for a sequence with audio.\n\nTo fix this, either set `iterationCount` to a lower value, or remove the audio from the sequence."),[{url:"https://www.theatrejs.com/docs/latest/manual/audio",title:"Using Audio"},{url:"https://www.theatrejs.com/docs/latest/api/core#sequence.attachaudio",title:"Audio API"}]),e=1e3),e>1&&(u.loop=!0,u.loopStart=t[0],u.loopEnd=t[1]);let l=i.time,c=o-t[0],h=s*e;u.start(0,o,h-c);let f=e=>{let n=Math.min(Math.max(e-l,0)/1e3*r+c,h);n!==h?(this._updatePositionInState(n/s%1*s+t[0]),d()):(this._updatePositionInState(t[1]),this._playing=!1,p(),a.resolve(!0))},p=()=>{u.stop(),u.disconnect()};this._stopPlayCallback=()=>{p(),i.offThisOrNextTick(f),i.offNextTick(f),this._playing&&a.resolve(!1)};let d=()=>i.onNextTick(f);return i.onThisOrNextTick(f),a.promise}},iS=r(84707),iT=0;function ik(e){var t;let r=new iS.Ticker({onActive(){var t;null==(t=null==e?void 0:e.start)||t.call(e)},onDormant(){var t;null==(t=null==e?void 0:e.stop)||t.call(e)}}),n={tick:e=>{r.tick(e)},id:iT++,name:null!=(t=null==e?void 0:e.name)?t:"CustomRafDriver-".concat(iT),type:"Theatre_RafDriver_PublicAPI"},i={type:"Theatre_RafDriver_PrivateAPI",publicApi:n,ticker:r,start:null==e?void 0:e.start,stop:null==e?void 0:e.stop};return z(n,i),n}function iA(){let e,t;return s||function(e){if(s)throw Error("`setCoreRafDriver()` is already called.");s=F(e)}((e=null,t=ik({name:"DefaultCoreRafDriver",start:()=>{if("undefined"!=typeof window){let r=n=>{t.tick(n),e=window.requestAnimationFrame(r)};e=window.requestAnimationFrame(r)}else t.tick(0),setTimeout(()=>t.tick(1),0)},stop:()=>{"undefined"!=typeof window&&null!==e&&window.cancelAnimationFrame(e)}}))),s}function ix(){return iA().ticker}var iC=class{get type(){return"Theatre_Sequence_PublicAPI"}constructor(e){z(this,e)}play(e){let t=F(this);if(t._project.isReady()){let r=(null==e?void 0:e.rafDriver)?F(e.rafDriver).ticker:ix();return t.play(null!=e?e:{},r)}{let e=ig();return e.resolve(!0),e.promise}}pause(){F(this).pause()}get position(){return F(this).position}set position(e){F(this).position=e}__experimental_getKeyframes(e){return F(this).getKeyframesOfSimpleProp(e)}async attachAudio(e){let{audioContext:t,destinationNode:r,decodedBuffer:n,gainNode:i}=await iD(e),o=new iO(n,t,i);return F(this).replacePlaybackController(o),{audioContext:t,destinationNode:r,decodedBuffer:n,gainNode:i}}get pointer(){return F(this).pointer}};async function iD(e){async function t(){let t,n,i;if(e.source instanceof AudioBuffer)return e.source;let o=ig();if("string"!=typeof e.source)throw Error("Error validating arguments to sequence.attachAudio(). args.source must either be a string or an instance of AudioBuffer.");try{t=await fetch(e.source)}catch(t){throw console.error(t),Error("Could not fetch '".concat(e.source,"'. Network error logged above."))}try{n=await t.arrayBuffer()}catch(t){throw console.error(t),Error("Could not read '".concat(e.source,"' as an arrayBuffer."))}(await r).decodeAudioData(n,o.resolve,o.reject);try{i=await o.promise}catch(t){throw console.error(t),Error("Could not decode ".concat(e.source," as an audio file."))}return i}let r=function(){if(e.audioContext)return Promise.resolve(e.audioContext);let t=new AudioContext;return"running"===t.state||"undefined"==typeof window?Promise.resolve(t):new Promise(e=>{let r=()=>{t.resume().catch(e=>{console.error(e)})},n=["mousedown","keydown","touchstart"],i={capture:!0,passive:!1};n.forEach(e=>{window.addEventListener(e,r,i)}),t.addEventListener("statechange",()=>{"running"===t.state&&(n.forEach(e=>{window.removeEventListener(e,r,i)}),e(t))})})}(),n=t(),[i,o]=await Promise.all([r,n]),s=e.destinationNode||i.destination,a=i.createGain();return a.connect(s),{audioContext:i,decodedBuffer:o,gainNode:a,destinationNode:s}}iE("Theatre_Project"),iE("Theatre_Sheet"),iE("Theatre_SheetTemplate");var iI=iE("Theatre_SheetObject");function iE(e){return t=>"object"==typeof t&&!!t&&t.type===e}iE("Theatre_Sequence"),iE("Theatre_SheetObjectTemplate"),iE("Theatre_Project_PublicAPI"),iE("Theatre_Sheet_PublicAPI"),iE("Theatre_SheetObject_PublicAPI");var iM=class{constructor(e,t,r,n,i){this._project=e,this._sheet=t,this._lengthD=r,this._subUnitsPerUnitD=n,S(this,"address"),S(this,"publicApi"),S(this,"_playbackControllerBox"),S(this,"_prismOfStatePointer"),S(this,"_positionD"),S(this,"_positionFormatterD"),S(this,"_playableRangeD"),S(this,"pointer",(0,id.pointer)({root:this,path:[]})),S(this,"$$isPointerToPrismProvider",!0),S(this,"_logger"),S(this,"closestGridPosition",e=>{let t=1/this.subUnitsPerUnit;return parseFloat((Math.round(e/t)*t).toFixed(3))}),this._logger=e._logger.named("Sheet",t.address.sheetId).named("Instance",t.address.sheetInstanceId),this.address=h(m({},this._sheet.address),p({sequenceName:"default"})),this.publicApi=new iC(this),this._playbackControllerBox=new ip.Atom(null!=i?i:new i_),this._prismOfStatePointer=(0,iy.prism)(()=>this._playbackControllerBox.prism.getValue().statePointer),this._positionD=(0,iy.prism)(()=>{let e=this._prismOfStatePointer.getValue();return(0,iy.val)(e.position)}),this._positionFormatterD=(0,iy.prism)(()=>new iF((0,iy.val)(this._subUnitsPerUnitD)))}get type(){return"Theatre_Sequence"}pointerToPrism(e){let{path:t}=(0,ih.getPointerParts)(e);if(0===t.length)return(0,iy.prism)(()=>({length:(0,iy.val)(this.pointer.length),playing:(0,iy.val)(this.pointer.playing),position:(0,iy.val)(this.pointer.position),subUnitsPerUnit:(0,iy.val)(this.pointer.subUnitsPerUnit)}));if(t.length>1)return(0,iy.prism)(()=>void 0);let[r]=t;return"length"===r?this._lengthD:"subUnitsPerUnit"===r?this._subUnitsPerUnitD:"position"===r?this._positionD:"playing"===r?(0,iy.prism)(()=>(0,iy.val)(this._prismOfStatePointer.getValue().playing)):(0,iy.prism)(()=>void 0)}getKeyframesOfSimpleProp(e){let{path:t,root:r}=(0,ih.getPointerParts)(e);if(!iI(r))throw new ic("Argument prop must be a pointer to a SheetObject property");let n=(0,iy.val)(this._project.pointers.historic.sheetsById[this._sheet.address.sheetId].sequence.tracksByObject[r.address.objectKey]);if(!n)return[];let{trackData:i,trackIdByPropPath:o}=n,s=o[iu(t)];if(!s)return[];let a=i[s];return a?a.keyframes:[]}get positionFormatter(){return this._positionFormatterD.getValue()}get prismOfStatePointer(){return this._prismOfStatePointer}get length(){return this._lengthD.getValue()}get positionPrism(){return this._positionD}get position(){return this._playbackControllerBox.get().getCurrentPosition()}get subUnitsPerUnit(){return this._subUnitsPerUnitD.getValue()}get positionSnappedToGrid(){return this.closestGridPosition(this.position)}set position(e){let t=e;this.pause(),t>this.length&&(t=this.length);let r=this.length;this._playbackControllerBox.get().gotoPosition(t>r?r:t)}getDurationCold(){return this._lengthD.getValue()}get playing(){return(0,iy.val)(this._playbackControllerBox.get().statePointer.playing)}_makeRangeFromSequenceTemplate(){return(0,iy.prism)(()=>[0,(0,iy.val)(this._lengthD)])}playDynamicRange(e,t){return this._playbackControllerBox.get().playDynamicRange(e,t)}async play(e,t){let r=this.length,n=e&&e.range?e.range:[0,r],i=e&&"number"==typeof e.iterationCount?e.iterationCount:1,o=e&&void 0!==e.rate?e.rate:1,s=e&&e.direction?e.direction:"normal";return await this._play(i,[n[0],n[1]],o,s,t)}_play(e,t,r,n,i){return this._playbackControllerBox.get().play(e,t,r,n,i)}pause(){this._playbackControllerBox.get().pause()}replacePlaybackController(e){this.pause();let t=this._playbackControllerBox.get();this._playbackControllerBox.set(e);let r=t.getCurrentPosition();t.destroy(),e.gotoPosition(r)}},iF=class{constructor(e){this._fps=e}formatSubUnitForGrid(e){return Math.round(e%1/(1/this._fps))+"f"}formatFullUnitForGrid(e){let t=e,r="";t>=iV&&(r+=Math.floor(t/iV)+"h",t%=iV),t>=iB&&(r+=Math.floor(t/iB)+"m",t%=iB),t>=iz&&(r+=Math.floor(t/iz)+"s",t%=iz);let n=1/this._fps;return t>=n&&(r+=Math.floor(t/n)+"f",t%=n),0===r.length?"0s":r}formatForPlayhead(e){let t=e,r="";t>=iV&&(r+=nq(Math.floor(t/iV).toString(),2,"0")+"h",t%=iV),t>=iB?(r+=nq(Math.floor(t/iB).toString(),2,"0")+"m",t%=iB):r.length>0&&(r+="00m"),t>=iz?(r+=nq(Math.floor(t/iz).toString(),2,"0")+"s",t%=iz):r+="00s";let n=1/this._fps;return t>=n?(r+=nq(Math.round(t/n).toString(),2,"0")+"f",t%=n):t/n>.98?(r+=nq("1",2,"0")+"f",t%=n):r+="00f",0===r.length?"00s00f":r}formatBasic(e){return e.toFixed(2)+"s"}},iz=1,iB=60,iV=3600,iN={};function iR(e,t){return e.length<=t?e:e.substr(0,t-3)+"..."}w(iN,{boolean:()=>i7,compound:()=>iW,file:()=>iG,image:()=>iX,number:()=>iQ,rgba:()=>i2,string:()=>i6,stringLiteral:()=>oe});var iL=e=>{if("string"==typeof e)return'string("'.concat(iR(e,10),'")');if("number"==typeof e)return"number(".concat(iR(String(e),10),")");if(null===e)return"null";if(void 0===e)return"undefined";if("boolean"==typeof e)return String(e);else if(Array.isArray(e))return"array";else if("object"==typeof e)return"object";else return"unknown"};function iU(e){return h(m({},e),p({toString(){return function(e,{removeAlphaIfOpaque:t=!1}={}){let r=(255*e.a|256).toString(16).slice(1),n=(255*e.r|256).toString(16).slice(1)+(255*e.g|256).toString(16).slice(1)+(255*e.b|256).toString(16).slice(1)+(t&&"ff"===r?"":r);return"#".concat(n)}(this,{removeAlphaIfOpaque:!0})}}))}function i$(e){function t(e){return e>=.04045?((e+.055)/1.055)**2.4:e/12.92}return{r:t(e.r),g:t(e.g),b:t(e.b),a:e.a}}function iq(e){let t=.4122214708*e.r+.5363325363*e.g+.0514459929*e.b,r=.2119034982*e.r+.6806995451*e.g+.1073969566*e.b,n=.0883024619*e.r+.2817188376*e.g+.6299787005*e.b,i=Math.cbrt(t),o=Math.cbrt(r),s=Math.cbrt(n);return{L:.2104542553*i+.793617785*o-.0040720468*s,a:1.9779984951*i-2.428592205*o+.4505937099*s,b:.0259040371*i+.7827717662*o-.808675766*s,alpha:e.a}}var iH=Symbol("TheatrePropType_Basic");function iK(e){return"object"==typeof e&&!!e&&"TheatrePropType"===e[iH]}var iW=(e,t={})=>{let r=function(e){let t={};for(let r of Object.keys(e)){let n=e[r];iK(n)?t[r]=n:t[r]=function(e){if("number"==typeof e)return iQ(e);if("boolean"==typeof e)return i7(e);if("string"==typeof e)return i6(e);if("object"==typeof e&&e){if(iK(e))return e;if(t1(e))return iW(e);}throw new ic("This value is not a valid prop type: ".concat(iL(e)))}(n)}return t}(e),n=new WeakMap;return{type:"compound",props:r,valueType:null,[iH]:"TheatrePropType",label:t.label,default:nS(r,e=>e.default),deserializeAndSanitize:e=>{if("object"!=typeof e||!e)return;if(n.has(e))return n.get(e);let t={},i=!1;for(let[n,o]of Object.entries(r))if(Object.prototype.hasOwnProperty.call(e,n)){let r=o.deserializeAndSanitize(e[n]);null!=r&&(i=!0,t[n]=r)}if(n.set(e,t),i)return t}}},iG=(e,t={})=>({type:"file",default:{type:"file",id:e},valueType:null,[iH]:"TheatrePropType",label:t.label,interpolate:(e,r,n)=>{var i;return{type:"file",id:(null!=(i=t.interpolate)?i:i4)(e.id,r.id,n)}},deserializeAndSanitize:iJ}),iJ=e=>{if(!e)return;let t=!0;if("string"==typeof e.id||[null,void 0].includes(e.id)||(t=!1),"file"!==e.type&&(t=!1),t)return e},iX=(e,t={})=>({type:"image",default:{type:"image",id:e},valueType:null,[iH]:"TheatrePropType",label:t.label,interpolate:(e,r,n)=>{var i;return{type:"image",id:(null!=(i=t.interpolate)?i:i4)(e.id,r.id,n)}},deserializeAndSanitize:iY}),iY=e=>{if(!e)return;let t=!0;if("string"==typeof e.id||[null,void 0].includes(e.id)||(t=!1),"image"!==e.type&&(t=!1),t)return e},iQ=(e,t={})=>{var r;return h(m({type:"number",valueType:0,default:e,[iH]:"TheatrePropType"},t||{}),p({label:t.label,nudgeFn:null!=(r=t.nudgeFn)?r:ot,nudgeMultiplier:"number"==typeof t.nudgeMultiplier?t.nudgeMultiplier:void 0,interpolate:i1,deserializeAndSanitize:iZ(t.range)}))},iZ=e=>e?t=>{if("number"==typeof t&&isFinite(t))return rs(t,e[0],e[1])}:i0,i0=e=>"number"==typeof e&&isFinite(e)?e:void 0,i1=(e,t,r)=>e+r*(t-e),i2=(e={r:0,g:0,b:0,a:1},t={})=>{let r={};for(let t of["r","g","b","a"])r[t]=Math.min(Math.max(e[t],0),1);return{type:"rgba",valueType:null,default:iU(r),[iH]:"TheatrePropType",label:t.label,interpolate:i3,deserializeAndSanitize:i5}},i5=e=>{if(!e)return;let t=!0;for(let r of["r","g","b","a"])Object.prototype.hasOwnProperty.call(e,r)&&"number"==typeof e[r]||(t=!1);if(!t)return;let r={};for(let t of["r","g","b","a"])r[t]=Math.min(Math.max(e[t],0),1);return iU(r)},i3=(e,t,r)=>{var n;let i,o,s,a,u,l,c=iq(i$(e)),h=iq(i$(t));return iU(function(e){function t(e){return e>=.0031308?1.055*e**(1/2.4)-.055:12.92*e}return Object.fromEntries(Object.entries({r:t(e.r),g:t(e.g),b:t(e.b),a:e.a}).map(([e,t])=>[e,rs(t,0,1)]))}((i=(n={L:(1-r)*c.L+r*h.L,a:(1-r)*c.a+r*h.a,b:(1-r)*c.b+r*h.b,alpha:(1-r)*c.alpha+r*h.alpha}).L+.3963377774*n.a+.2158037573*n.b,o=n.L-.1055613458*n.a-.0638541728*n.b,s=n.L-.0894841775*n.a-1.291485548*n.b,{r:4.0767416621*(a=i*i*i)-3.3077115913*(u=o*o*o)+.2309699292*(l=s*s*s),g:-1.2684380046*a+2.6097574011*u-.3413193965*l,b:-.0041960863*a-.7034186147*u+1.707614701*l,a:n.alpha})))},i7=(e,t={})=>{var r;return{type:"boolean",default:e,valueType:null,[iH]:"TheatrePropType",label:t.label,interpolate:null!=(r=t.interpolate)?r:i4,deserializeAndSanitize:i8}},i8=e=>"boolean"==typeof e?e:void 0;function i4(e){return e}var i6=(e,t={})=>{var r;return{type:"string",default:e,valueType:null,[iH]:"TheatrePropType",label:t.label,interpolate:null!=(r=t.interpolate)?r:i4,deserializeAndSanitize:i9}};function i9(e){return"string"==typeof e?e:void 0}function oe(e,t,r={}){var n,i;return{type:"stringLiteral",default:e,valuesAndLabels:m({},t),[iH]:"TheatrePropType",valueType:null,as:null!=(n=r.as)?n:"menu",label:r.label,interpolate:null!=(i=r.interpolate)?i:i4,deserializeAndSanitize(e){if("string"==typeof e)if(Object.prototype.hasOwnProperty.call(t,e))return e;else return}}}var ot=({config:e,deltaX:t,deltaFraction:r,magnitude:n})=>{var i;let{range:o}=e;return e.nudgeMultiplier||!o||o.includes(1/0)||o.includes(-1/0)?t*n*(null!=(i=e.nudgeMultiplier)?i:1):r*(o[1]-o[0])*n};function or(e,t){return e.replace(/^[\s\/]*/,"").replace(/[\s\/]*$/,"").replace(/\s*\/\s*/g," / ")}O(x());var on=class{get type(){return"Theatre_Sheet_PublicAPI"}constructor(e){z(this,e)}object(e,t,r){let n=F(this),i=or(e,"sheet.object"),o=n.getObject(i),s=null==r?void 0:r.__actions__THIS_API_IS_UNSTABLE_AND_WILL_CHANGE_IN_THE_NEXT_VERSION;if(o)return s&&o.template._temp_setActions(s),o.publicApi;{let e=iW(t);return n.createObject(i,null,e,s).publicApi}}__experimental_getExistingObject(e){let t=F(this),r=or(e,"sheet.object"),n=t.getObject(r);return null==n?void 0:n.publicApi}get sequence(){return F(this).getSequence().publicApi}get project(){return F(this).project.publicApi}get address(){return m({},F(this).address)}detachObject(e){let t=F(this),r=or(e,'sheet.deleteObject("'.concat(e,'")'));if(!t.getObject(r)){iP.warning("Couldn't delete object \"".concat(r,'"'),'There is no object with key "'.concat(r,'".\n\nTo fix this, make sure you are calling `sheet.deleteObject("').concat(r,'")` with the correct key.')),console.warn('Object key "'.concat(r,'" does not exist.'));return}t.deleteObject(r)}},oi=r(84707),oo=class{constructor(e,t){this.template=e,this.instanceId=t,S(this,"_objects",new oi.Atom({})),S(this,"_sequence"),S(this,"address"),S(this,"publicApi"),S(this,"project"),S(this,"objectsP",this._objects.pointer),S(this,"type","Theatre_Sheet"),S(this,"_logger"),this._logger=e.project._logger.named("Sheet",t),this._logger._trace("creating sheet"),this.project=e.project,this.address=h(m({},e.address),p({sheetInstanceId:this.instanceId})),this.publicApi=new on(this)}createObject(e,t,r,n={}){let i=this.template.getObjectTemplate(e,t,r,n).createInstance(this,t,r);return this._objects.setByPointer(t=>t[e],i),i}getObject(e){return this._objects.get()[e]}deleteObject(e){this._objects.reduce(t=>{let r=m({},t);return delete r[e],r})}getSequence(){if(!this._sequence){let e=(0,oi.prism)(()=>os((0,oi.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.length))),t=(0,oi.prism)(()=>oa((0,oi.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.subUnitsPerUnit)));this._sequence=new iM(this.template.project,this,e,t)}return this._sequence}},os=e=>"number"==typeof e&&isFinite(e)&&e>0?e:10,oa=e=>{var t;return"number"==typeof e&&"number"==typeof(t=e)&&t==tu(t)&&e>=1&&e<=1e3?e:30},ou=class{constructor(e,t){this.project=e,S(this,"type","Theatre_SheetTemplate"),S(this,"address"),S(this,"_instances",new ia.Atom({})),S(this,"instancesP",this._instances.pointer),S(this,"_objectTemplates",new ia.Atom({})),S(this,"objectTemplatesP",this._objectTemplates.pointer),this.address=h(m({},e.address),p({sheetId:t}))}getInstance(e){let t=this._instances.get()[e];return t||(t=new oo(this,e),this._instances.setByPointer(t=>t[e],t)),t}getObjectTemplate(e,t,r,n){let i=this._objectTemplates.get()[e];return i||(i=new is(this,e,t,r,n),this._objectTemplates.setByPointer(t=>t[e],i)),i}},ol=r(84707),oc=r(84707);function oh(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(e){return"'"+e+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function of(e){return!!e&&!!e[oW]}function op(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===oG}(e)||Array.isArray(e)||!!e[oK]||!!e.constructor[oK]||ov(e)||o_(e))}function od(e,t,r){void 0===r&&(r=!1),0===oy(e)?(r?Object.keys:oJ)(e).forEach(function(n){r&&"symbol"==typeof n||t(n,e[n],e)}):e.forEach(function(r,n){return t(n,r,e)})}function oy(e){var t=e[oW];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:ov(e)?2:3*!!o_(e)}function og(e,t){return 2===oy(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ob(e,t,r){var n=oy(e);2===n?e.set(t,r):3===n?(e.delete(t),e.add(r)):e[t]=r}function ov(e){return oU&&e instanceof Map}function o_(e){return o$&&e instanceof Set}function om(e){return e.o||e.t}function oj(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=oX(e);delete t[oW];for(var r=oJ(t),n=0;n<r.length;n++){var i=r[n],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function ow(e,t){return void 0===t&&(t=!1),oO(e)||of(e)||!op(e)||(oy(e)>1&&(e.set=e.add=e.clear=e.delete=oP),Object.freeze(e),t&&od(e,function(e,t){return ow(t,!0)},!0)),e}function oP(){oh(2)}function oO(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function oS(e){var t=oY[e];return t||oh(18,e),t}function oT(e,t){t&&(oS("Patches"),e.u=[],e.s=[],e.v=t)}function ok(e){oA(e),e.p.forEach(oC),e.p=null}function oA(e){e===u&&(u=e.l)}function ox(e){return u={p:[],l:u,h:e,m:!0,_:0}}function oC(e){var t=e[oW];0===t.i||1===t.i?t.j():t.O=!0}function oD(e,t){t._=t.p.length;var r=t.p[0],n=void 0!==e&&e!==r;return t.h.g||oS("ES5").S(t,e,n),n?(r[oW].P&&(ok(t),oh(4)),op(e)&&(e=oI(t,e),t.l||oM(t,e)),t.u&&oS("Patches").M(r[oW],e,t.u,t.s)):e=oI(t,r,[]),ok(t),t.u&&t.v(t.u,t.s),e!==oH?e:void 0}function oI(e,t,r){if(oO(t))return t;var n=t[oW];if(!n)return od(t,function(i,o){return oE(e,n,t,i,o,r)},!0),t;if(n.A!==e)return t;if(!n.P)return oM(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=4===n.i||5===n.i?n.o=oj(n.k):n.o;od(3===n.i?new Set(i):i,function(t,o){return oE(e,n,i,t,o,r)}),oM(e,i,!1),r&&e.u&&oS("Patches").R(n,r,e.u,e.s)}return n.o}function oE(e,t,r,n,i,o){if(of(i)){var s=oI(e,i,o&&t&&3!==t.i&&!og(t.D,n)?o.concat(n):void 0);if(ob(r,n,s),!of(s))return;e.m=!1}if(op(i)&&!oO(i)){if(!e.h.F&&e._<1)return;oI(e,i),t&&t.A.l||oM(e,i)}}function oM(e,t,r){void 0===r&&(r=!1),e.h.F&&e.m&&ow(t,r)}function oF(e,t){var r=e[oW];return(r?om(r):e)[t]}function oz(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function oB(e){e.P||(e.P=!0,e.l&&oB(e.l))}function oV(e){e.o||(e.o=oj(e.t))}function oN(e,t,r){var n,i,o,s,a,l,c,h=ov(t)?oS("MapSet").N(t,r):o_(t)?oS("MapSet").T(t,r):e.g?(o=i={i:+!!(n=Array.isArray(t)),A:r?r.A:u,P:!1,I:!1,D:{},l:r,t:t,k:null,o:null,j:null,C:!1},s=oQ,n&&(o=[i],s=oZ),l=(a=Proxy.revocable(o,s)).revoke,i.k=c=a.proxy,i.j=l,c):oS("ES5").J(t,r);return(r?r.A:u).p.push(h),h}function oR(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return oj(e)}var oL="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),oU="undefined"!=typeof Map,o$="undefined"!=typeof Set,oq="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,oH=oL?Symbol.for("immer-nothing"):((a={})["immer-nothing"]=!0,a),oK=oL?Symbol.for("immer-draftable"):"__$immer_draftable",oW=oL?Symbol.for("immer-state"):"__$immer_state",oG=""+Object.prototype.constructor,oJ="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,oX=Object.getOwnPropertyDescriptors||function(e){var t={};return oJ(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},oY={},oQ={get:function(e,t){if(t===oW)return e;var r,n,i=om(e);if(!og(i,t))return(n=oz(i,t))?"value"in n?n.value:null==(r=n.get)?void 0:r.call(e.k):void 0;var o=i[t];return e.I||!op(o)?o:o===oF(e.t,t)?(oV(e),e.o[t]=oN(e.A.h,o,e)):o},has:function(e,t){return t in om(e)},ownKeys:function(e){return Reflect.ownKeys(om(e))},set:function(e,t,r){var n=oz(om(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var i=oF(om(e),t),o=null==i?void 0:i[oW];if(o&&o.t===r)return e.o[t]=r,e.D[t]=!1,!0;if((r===i?0!==r||1/r==1/i:r!=r&&i!=i)&&(void 0!==r||og(e.t,t)))return!0;oV(e),oB(e)}return e.o[t]===r&&"number"!=typeof r&&(void 0!==r||t in e.o)||(e.o[t]=r,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==oF(e.t,t)||t in e.t?(e.D[t]=!1,oV(e),oB(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=om(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty:function(){oh(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){oh(12)}},oZ={};od(oQ,function(e,t){oZ[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),oZ.deleteProperty=function(e,t){return oQ.deleteProperty.call(this,e[0],t)},oZ.set=function(e,t,r){return oQ.set.call(this,e[0],t,r,e[0])};var o0=new(function(){function e(e){var t=this;this.g=oq,this.F=!0,this.produce=function(e,r,n){if("function"==typeof e&&"function"!=typeof r){var i,o=r;return r=e,function(e){var n=this;void 0===e&&(e=o);for(var i=arguments.length,s=Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];return t.produce(e,function(e){var t;return(t=r).call.apply(t,[n,e].concat(s))})}}if("function"!=typeof r&&oh(6),void 0!==n&&"function"!=typeof n&&oh(7),op(e)){var s=ox(t),a=oN(t,e,void 0),u=!0;try{i=r(a),u=!1}finally{u?ok(s):oA(s)}return"undefined"!=typeof Promise&&i instanceof Promise?i.then(function(e){return oT(s,n),oD(e,s)},function(e){throw ok(s),e}):(oT(s,n),oD(i,s))}if(!e||"object"!=typeof e){if((i=r(e))===oH)return;return void 0===i&&(i=e),t.F&&ow(i,!0),i}oh(21,e)},this.produceWithPatches=function(e,r){var n,i;return"function"==typeof e?function(r){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return t.produceWithPatches(r,function(t){return e.apply(void 0,[t].concat(i))})}:[t.produce(e,r,function(e,t){n=e,i=t}),n,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){op(e)||oh(8),of(e)&&(of(t=e)||oh(22,t),e=function e(t){if(!op(t))return t;var r,n=t[oW],i=oy(t);if(n){if(!n.P&&(n.i<4||!oS("ES5").K(n)))return n.t;n.I=!0,r=oR(t,i),n.I=!1}else r=oR(t,i);return od(r,function(t,i){var o;n&&(o=n.t,(2===oy(o)?o.get(t):o[t])===i)||ob(r,t,e(i))}),3===i?new Set(r):r}(t));var t,r=ox(this),n=oN(this,e,void 0);return n[oW].C=!0,oA(r),n},t.finishDraft=function(e,t){var r=(e&&e[oW]).A;return oT(r,t),oD(void 0,r)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!oq&&oh(20),this.g=e},t.applyPatches=function(e,t){for(r=t.length-1;r>=0;r--){var r,n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}var i=oS("Patches").$;return of(e)?i(e,t):this.produce(e,function(e){return i(e,t.slice(r+1))})},e}());o0.produce,o0.produceWithPatches.bind(o0),o0.setAutoFreeze.bind(o0),o0.setUseProxies.bind(o0),o0.applyPatches.bind(o0),o0.createDraft.bind(o0),o0.finishDraft.bind(o0);var o1="0.4.0";async function o2(e,t,r){await new Promise(e=>setTimeout(e,0)),e.transaction(({drafts:e})=>{var n,i;let o=t.address.projectId;function s(){e.ephemeral.coreByProject[o].loadingState={type:"loaded"}}e.ephemeral.coreByProject[o]={lastExportedObject:null,loadingState:{type:"loading"}},e.ahistoric.coreByProject[o]={ahistoricStuff:""};let a=null==(of(i=e.historic)||oh(23,i),n=i[oW].t)?void 0:n.coreByProject[t.address.projectId];a?r&&-1==a.revisionHistory.indexOf(r.revisionHistory[0])?e.ephemeral.coreByProject[o].loadingState={type:"browserStateIsNotBasedOnDiskState",onDiskState:r}:s():r?(e.ephemeral.coreByProject[o].loadingState={type:"loaded"},e.historic.coreByProject[o]=r):(e.ephemeral.coreByProject[o].loadingState={type:"loaded"},e.historic.coreByProject[o]={sheetsById:{},definitionVersion:o1,revisionHistory:[]})})}function o5(){}function o3(e){var t,r;let n=(null==(t=null==e?void 0:e.logging)?void 0:t.internal)?null!=(r=e.logging.min)?r:256:1/0,i=n5(void 0,{_debug:n<=128?console.debug.bind(console,"_coreLogger(TheatreInternalLogger) debug"):o5,_error:n<=512?console.error.bind(console,"_coreLogger(TheatreInternalLogger) error"):o5});if(e){let{logger:t,logging:r}=e;t&&i.configureLogger(t),r?i.configureLogging(r):i.configureLogging({dev:!1})}return i.getLogger().named("Theatre")}var o7=class{constructor(e,t={},r){var n;this.config=t,this.publicApi=r,S(this,"pointers"),S(this,"_pointerProxies"),S(this,"address"),S(this,"_studioReadyDeferred"),S(this,"_assetStorageReadyDeferred"),S(this,"_readyPromise"),S(this,"_sheetTemplates",new oc.Atom({})),S(this,"sheetTemplatesP",this._sheetTemplates.pointer),S(this,"_studio"),S(this,"assetStorage"),S(this,"type","Theatre_Project"),S(this,"_logger"),this._logger=o3({logging:{dev:!0}}).named("Project",e),this._logger.traceDev("creating project"),this.address={projectId:e};let i=new oc.Atom({ahistoric:{ahistoricStuff:""},historic:null!=(n=t.state)?n:{sheetsById:{},definitionVersion:o1,revisionHistory:[]},ephemeral:{loadingState:{type:"loaded"},lastExportedObject:null}});this._assetStorageReadyDeferred=ig(),this.assetStorage={getAssetUrl:e=>{var r;return"".concat(null==(r=t.assets)?void 0:r.baseUrl,"/").concat(e)},createAsset:()=>{throw Error("Please wait for Project.ready to use assets.")}},this._pointerProxies={historic:new ol.PointerProxy(i.pointer.historic),ahistoric:new ol.PointerProxy(i.pointer.ahistoric),ephemeral:new ol.PointerProxy(i.pointer.ephemeral)},this.pointers={historic:this._pointerProxies.historic.pointer,ahistoric:this._pointerProxies.ahistoric.pointer,ephemeral:this._pointerProxies.ephemeral.pointer},E.add(e,this),this._studioReadyDeferred=ig(),this._readyPromise=Promise.all([this._studioReadyDeferred.promise,this._assetStorageReadyDeferred.promise]).then(()=>{}),t.state?setTimeout(()=>{this._studio||(this._studioReadyDeferred.resolve(void 0),this._assetStorageReadyDeferred.resolve(void 0),this._logger._trace("ready deferred resolved with no state"))},0):"undefined"==typeof window?console.error('Argument config.state in Theatre.getProject("'.concat(e,'", config) is empty. ')+"You can safely ignore this message if you're developing a Next.js/Remix project in development mode. But if you are shipping to your end-users, then you need to set config.state, otherwise your project's state will be empty and nothing will animate. Learn more at https://www.theatrejs.com/docs/latest/manual/projects#state"):setTimeout(()=>{if(!this._studio)throw Error('Argument config.state in Theatre.getProject("'.concat(e,'", config) is empty. This is fine ')+"while you are using @theatre/core along with @theatre/studio. But since @theatre/studio "+'is not loaded, the state of project "'.concat(e,'" will be empty.\n\n')+"To fix this, you need to add @theatre/studio into the bundle and export the project's state. Learn how to do that at https://www.theatrejs.com/docs/latest/manual/projects#state\n")},1e3)}attachToStudio(e){if(this._studio)if(this._studio===e)return void console.warn("Project ".concat(this.address.projectId," is already attached to studio ").concat(this._studio.address.studioId));else throw Error("Project ".concat(this.address.projectId," is already attached to studio ").concat(this._studio.address.studioId));this._studio=e,e.initialized.then(async()=>{var t;await o2(e,this,this.config.state),this._pointerProxies.historic.setPointer(e.atomP.historic.coreByProject[this.address.projectId]),this._pointerProxies.ahistoric.setPointer(e.atomP.ahistoric.coreByProject[this.address.projectId]),this._pointerProxies.ephemeral.setPointer(e.atomP.ephemeral.coreByProject[this.address.projectId]),await e.createAssetStorage(this,null==(t=this.config.assets)?void 0:t.baseUrl).then(e=>{this.assetStorage=e,this._assetStorageReadyDeferred.resolve(void 0)}),this._studioReadyDeferred.resolve(void 0)}).catch(e=>{throw console.error(e),e})}get isAttachedToStudio(){return!!this._studio}get ready(){return this._readyPromise}isReady(){return"resolved"===this._studioReadyDeferred.status&&"resolved"===this._assetStorageReadyDeferred.status}getOrCreateSheet(e,t="default"){let r=this._sheetTemplates.get()[e];return r||(r=new ou(this,e),this._sheetTemplates.reduce(t=>h(m({},t),p({[e]:r})))),r.getInstance(t)}},o8=class{get type(){return"Theatre_Project_PublicAPI"}constructor(e,t={}){z(this,new o7(e,t,this))}get ready(){return F(this).ready}get isReady(){return F(this).isReady()}get address(){return m({},F(this).address)}getAssetUrl(e){return this.isReady?e.id?F(this).assetStorage.getAssetUrl(e.id):void 0:void console.error("Calling `project.getAssetUrl()` before `project.ready` is resolved, will always return `undefined`. Either use `project.ready.then(() => project.getAssetUrl())` or `await project.ready` before calling `project.getAssetUrl()`.")}sheet(e,t="default"){let r=or(e,"project.sheet");return F(this).getOrCreateSheet(r,t).publicApi}};O(x());var o4=r(84707),o6=r(84707);function o9(e,t={}){let r=E.get(e);if(r)return r.publicApi;let n=o3().named("Project",e);return t.state?(se(e,t.state),n._debug("deep validated config.state on disk")):n._debug("no config.state"),new o8(e,t)}var se=(e,t)=>{if(Array.isArray(t)||null==t||t.definitionVersion!==o1)throw new ic("Error validating conf.state in Theatre.getProject(".concat(JSON.stringify(e),", conf). The state seems to be formatted in a way that is unreadable to Theatre.js. Read more at https://www.theatrejs.com/docs/latest/manual/projects#state"))};function st(e,t,r){let n=r?F(r).ticker:ix();if((0,o4.isPointer)(e))return(0,o6.pointerToPrism)(e).onChange(n,t,!0);if((0,o6.isPrism)(e))return e.onChange(n,t,!0);throw Error("Called onChange(p) where p is neither a pointer nor a prism.")}function sr(e){if((0,o4.isPointer)(e))return(0,o6.pointerToPrism)(e).getValue();throw Error("Called val(p) where p is not a pointer.")}var sn=class{constructor(){S(this,"_studio")}get type(){return"Theatre_CoreBundle"}get version(){return"0.7.2"}getBitsForStudio(e,t){if(this._studio)throw Error("@theatre/core is already attached to @theatre/studio");this._studio=e,t({projectsP:E.atom.pointer.projects,privateAPI:F,coreExports:D,getCoreRafDriver:iA})}};!function(){if("undefined"==typeof window)return;let e=window[ij];if(void 0!==e)if("object"==typeof e&&e&&"string"==typeof e.version)throw Error("It seems that the module '@theatre/core' is loaded more than once. This could have two possible causes:\n1. You might have two separate versions of Theatre.js in node_modules.\n2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.\n\nNote that it **is okay** to import '@theatre/core' multiple times. But those imports should point to the same module.");else throw Error("The variable window.".concat(ij," seems to be already set by a module other than @theatre/core."));let t=new sn;window[ij]=t;let r=window.__TheatreJS_StudioBundle;r&&null!==r&&"Theatre_StudioBundle"===r.type&&r.registerCoreBundle(t)}()}}]);