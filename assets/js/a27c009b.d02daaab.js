"use strict";(self.webpackChunkanch=self.webpackChunkanch||[]).push([["4166"],{82682(e,t,r){r.r(t),r.d(t,{metadata:()=>n,default:()=>N,frontMatter:()=>b,contentTitle:()=>g,toc:()=>v,assets:()=>w});var n=JSON.parse('{"id":"web/three/advanced/preview-model","title":"\u52A0\u8F7D\u672C\u5730\u6A21\u578B","description":"\u6838\u5FC3\u6982\u5FF5","source":"@site/docs/web/three/advanced/16-preview-model.mdx","sourceDirName":"web/three/advanced","slug":"/web/three/advanced/preview-model","permalink":"/web/three/advanced/preview-model","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"Javascript","permalink":"/tags/javascript"}],"version":"current","lastUpdatedBy":"dependabot[bot]","lastUpdatedAt":1769387863000,"sidebarPosition":16,"frontMatter":{"sidebar_position":16,"title":"\u52A0\u8F7D\u672C\u5730\u6A21\u578B","tags":["Javascript"]},"sidebar":"webSidebar","previous":{"title":"\u6444\u5F71\u6D4B\u91CF","permalink":"/web/three/advanced/photogrammetry"},"next":{"title":"D3Map","permalink":"/web/three/advanced/d3-map"}}'),s=r(35656),l=r(86145),a=r(38550),i=r(30119),c=r(74915),d=r(46571),o=r(54600),h=r(57140),u=r(67199),p=r(13115),x=r(82044);let j=()=>{let[e,t]=(0,h.useState)(),r=(0,h.useRef)(null);return(0,s.jsxs)(x.A,{children:[(0,s.jsxs)("div",{className:"absolute left-2 top-2 z-10",children:[(0,s.jsx)("input",{ref:r,type:"file",accept:"model/gltf-binary,.glb,.gltf",onChange:e=>{let r=e.target.files?.[0];if(!r)throw Error("\u672A\u9009\u62E9\u6587\u4EF6");t(window.URL.createObjectURL(r))},className:"hidden"}),(0,s.jsx)("button",{type:"button",className:"btn",onClick:()=>r.current?.click(),children:"Upload Model"})]}),(0,s.jsx)(m,{url:e})]})},m=e=>(0,s.jsxs)(d.Hl,{className:"h-full w-full",children:[(0,s.jsx)(a.m,{}),(0,s.jsx)(h.Suspense,{fallback:(0,s.jsx)(i.E,{className:"flex flex-col h-full items-center justify-center w-full",children:(0,s.jsx)("p",{className:"text-lg whitespace-nowrap",children:"\u52A0\u8F7D\u4E2D..."})}),children:e.url&&(0,s.jsx)(f,{url:e.url})})]}),f=({url:e})=>{let{scene:t}=(0,o.G)(p.B,e,e=>{}),{camera:r}=(0,o.C)(),n=(0,h.useRef)(null),l=(0,h.useMemo)(()=>new u.NRn().setFromObject(t),[t]),a=(0,h.useMemo)(()=>new u.Pq0().copy(l.getCenter(new u.Pq0)),[l]);return(0,h.useEffect)(()=>{if(!n.current)return;let e=l.getSize(new u.Pq0).length()/Math.tan(Math.PI/180*r.fov*.5);n.current.target.copy(a),n.current.object.position.set(a.x,a.y,a.z+e),n.current.update()},[l,r,a]),(0,s.jsx)("primitive",{object:t,children:(0,s.jsx)(c.N,{ref:n,target:a,enableDamping:!0,dampingFactor:.1})})},b={sidebar_position:16,title:"\u52A0\u8F7D\u672C\u5730\u6A21\u578B",tags:["Javascript"]},g="\u52A0\u8F7D\u672C\u5730\u6A21\u578B",w={},v=[{value:"\u6838\u5FC3\u6982\u5FF5",id:"\u6838\u5FC3\u6982\u5FF5",level:2}];function k(e){let t={h1:"h1",h2:"h2",header:"header",li:"li",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"\u52A0\u8F7D\u672C\u5730\u6A21\u578B",children:"\u52A0\u8F7D\u672C\u5730\u6A21\u578B"})}),"\n",(0,s.jsx)(j,{}),"\n",(0,s.jsx)(t.h2,{id:"\u6838\u5FC3\u6982\u5FF5",children:"\u6838\u5FC3\u6982\u5FF5"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"GLTFLoader"}),": \u7528\u4E8E\u52A0\u8F7D GLTF \u548C GLB \u683C\u5F0F\u7684 3D \u6A21\u578B\u6587\u4EF6"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Box3"}),": \u8BA1\u7B97 3D \u5BF9\u8C61\u7684\u5305\u56F4\u76D2\uFF0C\u7528\u4E8E\u81EA\u52A8\u8C03\u6574\u76F8\u673A\u89C6\u89D2"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"OrbitControls"}),": \u8F68\u9053\u63A7\u5236\uFF0C\u5141\u8BB8\u7528\u6237\u901A\u8FC7\u9F20\u6807\u65CB\u8F6C\u3001\u7F29\u653E\u548C\u79FB\u52A8\u573A\u666F"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"useMemo"}),": \u4F18\u5316\u6027\u80FD\uFF0C\u907F\u514D\u91CD\u590D\u8BA1\u7B97\u5305\u56F4\u76D2\u548C\u4E2D\u5FC3\u70B9"]}),"\n"]})]})}function N(e={}){let{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(k,{...e})}):k(e)}}}]);