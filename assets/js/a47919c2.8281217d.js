"use strict";(self.webpackChunkanch=self.webpackChunkanch||[]).push([["9290"],{49252(e,n,i){i.r(n),i.d(n,{metadata:()=>s,default:()=>y,frontMatter:()=>v,contentTitle:()=>f,toc:()=>b,assets:()=>w});var s=JSON.parse('{"id":"web/cesium/basic/02","title":"3D Tiles","description":"\u672C\u793A\u4F8B\u5C55\u793A\u5982\u4F55\u52A0\u8F7D\u503E\u659C\u6444\u5F71 3D Tiles \u6570\u636E\uFF0C\u5E76\u5B9E\u73B0\u9F20\u6807\u4EA4\u4E92\u9009\u62E9\u5355\u4F53\u5EFA\u7B51\u7269\uFF0C\u901A\u8FC7\u540E\u5904\u7406\u6548\u679C\u9AD8\u4EAE\u663E\u793A\u9009\u4E2D\u7684\u5BF9\u8C61\u3002","source":"@site/docs/web/cesium/basic/02.mdx","sourceDirName":"web/cesium/basic","slug":"/web/cesium/basic/02","permalink":"/web/cesium/basic/02","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"Javascript","permalink":"/tags/javascript"}],"version":"current","lastUpdatedBy":"dependabot[bot]","lastUpdatedAt":1769387863000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"3D Tiles","tags":["Javascript"]},"sidebar":"webSidebar","previous":{"title":"\u5E95\u56FE","permalink":"/web/cesium/basic/01"},"next":{"title":"\u5750\u6807\u7CFB\u8F6C\u6362","permalink":"/web/cesium/basic/03"}}'),r=i(35656),t=i(86145),l=i(57140),c=i(82044),a=i(38279),o=i(30571),d=i(7487),u=i(40459),h=i(53526),m=i(10554),p=i(77329),x=i(24599);async function g(e){try{let n=await u.A.fromUrl("/cesium/02/data/tileset.json");n.debugShowBoundingVolume=!0,e.scene.primitives.add(n),e.zoomTo(n),e.cesiumWidget.screenSpaceEventHandler.removeInputAction(h.A.LEFT_CLICK),e.cesiumWidget.screenSpaceEventHandler.removeInputAction(h.A.LEFT_DOUBLE_CLICK);let i=m.A.createEdgeDetectionStage();i.uniforms.color=p.A.BLUE,i.uniforms.length=.01,i.selected=[];let s=m.A.createEdgeDetectionStage();s.uniforms.color=p.A.LIME,s.uniforms.length=.01,s.selected=[],e.scene.postProcessStages.add(m.A.createSilhouetteStage([i,s])),e.screenSpaceEventHandler.setInputAction(function(n){var r=e.scene.pick(n.endPosition);(0,x.A)(r)&&(r===s.selected[0]?i.selected=[]:i.selected=[r])},h.A.MOUSE_MOVE);let r={feature:void 0,originalColor:new p.A};e.screenSpaceEventHandler.setInputAction(function(n){var i=e.scene.pick(n.position);(0,x.A)(i)&&(s.selected=[i]),(0,x.A)(r.feature)&&(r.feature.color=r.originalColor,r.feature=void 0),(0,x.A)(i)&&(r.feature=i,(0,x.A)(i.color)&&(p.A.clone(i.color,r.originalColor),i.color=p.A.YELLOW))},h.A.LEFT_CLICK)}catch(e){console.error(e)}}function j(){let e=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let n,i,s=e.current;if(!s)return;let r=((n=new a.A(s,{baseLayerPicker:!1,animation:!1,timeline:!1,fullscreenButton:!1,geocoder:!1,homeButton:!1,infoBox:!1,sceneModePicker:!1,selectionIndicator:!1,navigationHelpButton:!1})).scene.debugShowFramesPerSecond=!0,n.imageryLayers.remove(n.imageryLayers.get(0)),n.scene.terrainProvider=new o.A({}),i=new d.A({url:"//data.mars3d.cn/tile/img/{z}/{x}/{y}.jpg"}),n.imageryLayers.addImageryProvider(i),n);return g(r),()=>{r.isDestroyed()||r.destroy()}},[]),(0,r.jsx)(c.A,{children:(0,r.jsx)("div",{className:"tw:size-full",ref:e})})}let v={sidebar_position:2,title:"3D Tiles",tags:["Javascript"]},f="3D Tiles",w={},b=[{value:"\u6838\u5FC3\u529F\u80FD",id:"\u6838\u5FC3\u529F\u80FD",level:2},{value:"3D Tiles \u52A0\u8F7D",id:"3d-tiles-\u52A0\u8F7D",level:3},{value:"\u9F20\u6807\u4EA4\u4E92\u9009\u62E9",id:"\u9F20\u6807\u4EA4\u4E92\u9009\u62E9",level:3},{value:"\u540E\u5904\u7406\u8F6E\u5ED3\u6548\u679C",id:"\u540E\u5904\u7406\u8F6E\u5ED3\u6548\u679C",level:3},{value:"\u5173\u952E\u4EE3\u7801",id:"\u5173\u952E\u4EE3\u7801",level:2},{value:"\u521D\u59CB\u5316 Viewer",id:"\u521D\u59CB\u5316-viewer",level:3},{value:"\u9F20\u6807\u4E8B\u4EF6\u5904\u7406",id:"\u9F20\u6807\u4E8B\u4EF6\u5904\u7406",level:3},{value:"\u5E94\u7528\u573A\u666F",id:"\u5E94\u7528\u573A\u666F",level:2},{value:"\u6CE8\u610F\u4E8B\u9879",id:"\u6CE8\u610F\u4E8B\u9879",level:2},{value:"\u53C2\u8003\u8D44\u6599",id:"\u53C2\u8003\u8D44\u6599",level:2}];function S(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"3d-tiles",children:"3D Tiles"})}),"\n",(0,r.jsx)(n.p,{children:"\u672C\u793A\u4F8B\u5C55\u793A\u5982\u4F55\u52A0\u8F7D\u503E\u659C\u6444\u5F71 3D Tiles \u6570\u636E\uFF0C\u5E76\u5B9E\u73B0\u9F20\u6807\u4EA4\u4E92\u9009\u62E9\u5355\u4F53\u5EFA\u7B51\u7269\uFF0C\u901A\u8FC7\u540E\u5904\u7406\u6548\u679C\u9AD8\u4EAE\u663E\u793A\u9009\u4E2D\u7684\u5BF9\u8C61\u3002"}),"\n",(0,r.jsx)(j,{}),"\n",(0,r.jsx)(n.h2,{id:"\u6838\u5FC3\u529F\u80FD",children:"\u6838\u5FC3\u529F\u80FD"}),"\n",(0,r.jsx)(n.h3,{id:"3d-tiles-\u52A0\u8F7D",children:"3D Tiles \u52A0\u8F7D"}),"\n",(0,r.jsxs)(n.p,{children:["\u4F7F\u7528 ",(0,r.jsx)(n.code,{children:"Cesium3DTileset"})," \u52A0\u8F7D\u503E\u659C\u6444\u5F71\u6570\u636E\uFF083D Tiles \u683C\u5F0F\uFF09\uFF0C\u8FD9\u662F Cesium \u4E2D\u7528\u4E8E\u9AD8\u6548\u6E32\u67D3\u5927\u89C4\u6A21 3D \u573A\u666F\u7684\u6807\u51C6\u683C\u5F0F\uFF1A"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'const tileset = await Cesium3DTileset.fromUrl("/cesium/02/data/tileset.json");\nviewer.scene.primitives.add(tileset);\nviewer.zoomTo(tileset);\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u9F20\u6807\u4EA4\u4E92\u9009\u62E9",children:"\u9F20\u6807\u4EA4\u4E92\u9009\u62E9"}),"\n",(0,r.jsx)(n.p,{children:"\u793A\u4F8B\u5B9E\u73B0\u4E86\u4E24\u79CD\u4EA4\u4E92\u6548\u679C\uFF1A"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u9F20\u6807\u60AC\u505C\u9AD8\u4EAE"}),"\uFF1A\u9F20\u6807\u79FB\u52A8\u65F6\u4F7F\u7528\u84DD\u8272\u8FB9\u7F18\u9AD8\u4EAE\u5F53\u524D\u60AC\u505C\u7684\u5BF9\u8C61"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u70B9\u51FB\u9009\u4E2D"}),"\uFF1A\u9F20\u6807\u70B9\u51FB\u65F6\u4F7F\u7528\u7EFF\u8272\u8FB9\u7F18\u9AD8\u4EAE\u9009\u4E2D\u7684\u5BF9\u8C61"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u540E\u5904\u7406\u8F6E\u5ED3\u6548\u679C",children:"\u540E\u5904\u7406\u8F6E\u5ED3\u6548\u679C"}),"\n",(0,r.jsxs)(n.p,{children:["\u4F7F\u7528 Cesium \u7684 ",(0,r.jsx)(n.code,{children:"PostProcessStageLibrary.createEdgeDetectionStage()"})," \u521B\u5EFA\u8FB9\u7F18\u68C0\u6D4B\u6548\u679C\uFF1A"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const silhouetteBlue = PostProcessStageLibrary.createEdgeDetectionStage();\nsilhouetteBlue.uniforms.color = Color.BLUE;\nsilhouetteBlue.uniforms.length = 0.01;\n\nconst silhouetteGreen = PostProcessStageLibrary.createEdgeDetectionStage();\nsilhouetteGreen.uniforms.color = Color.LIME;\nsilhouetteGreen.uniforms.length = 0.01;\n\nviewer.scene.postProcessStages.add(\n  PostProcessStageLibrary.createSilhouetteStage([\n    silhouetteBlue,\n    silhouetteGreen,\n  ])\n);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u5173\u952E\u4EE3\u7801",children:"\u5173\u952E\u4EE3\u7801"}),"\n",(0,r.jsx)(n.h3,{id:"\u521D\u59CB\u5316-viewer",children:"\u521D\u59CB\u5316 Viewer"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'const viewer = new Viewer(el, {\n  baseLayerPicker: false,\n  animation: false,\n  timeline: false,\n  // ... \u7981\u7528\u5176\u4ED6 UI \u63A7\u4EF6\n});\n// \u4F7F\u7528\u81EA\u5B9A\u4E49\u5E95\u56FE\nconst xyz = new UrlTemplateImageryProvider({\n  url: "//data.mars3d.cn/tile/img/{z}/{x}/{y}.jpg",\n});\nviewer.imageryLayers.addImageryProvider(xyz);\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u9F20\u6807\u4E8B\u4EF6\u5904\u7406",children:"\u9F20\u6807\u4E8B\u4EF6\u5904\u7406"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// \u9F20\u6807\u79FB\u52A8\u9AD8\u4EAE\nviewer.screenSpaceEventHandler.setInputAction(\n  function onMouseMove(movement) {\n    var pickedFeature = viewer.scene.pick(movement.endPosition);\n    if (defined(pickedFeature)) {\n      if (pickedFeature !== silhouetteGreen.selected[0]) {\n        silhouetteBlue.selected = [pickedFeature];\n      }\n    }\n  },\n  ScreenSpaceEventType.MOUSE_MOVE\n);\n\n// \u9F20\u6807\u70B9\u51FB\u9009\u4E2D\nviewer.screenSpaceEventHandler.setInputAction(\n  function leftClick(movement) {\n    var pickedFeature = viewer.scene.pick(movement.position);\n    if (defined(pickedFeature)) {\n      silhouetteGreen.selected = [pickedFeature];\n    }\n  },\n  ScreenSpaceEventType.LEFT_CLICK\n);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u5E94\u7528\u573A\u666F",children:"\u5E94\u7528\u573A\u666F"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u57CE\u5E02\u89C4\u5212"}),"\uFF1A\u4EA4\u4E92\u5F0F\u67E5\u770B\u548C\u9009\u62E9\u5EFA\u7B51\u7269"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u623F\u5730\u4EA7\u5C55\u793A"}),"\uFF1A\u9AD8\u4EAE\u663E\u793A\u7279\u5B9A\u697C\u76D8\u6216\u5EFA\u7B51"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u8BBE\u65BD\u7BA1\u7406"}),"\uFF1A\u9009\u62E9\u548C\u67E5\u8BE2\u57FA\u7840\u8BBE\u65BD\u4FE1\u606F"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u6570\u5B57\u5B6A\u751F"}),"\uFF1A\u5B9E\u73B0\u5EFA\u7B51\u7269\u7684\u5355\u4F53\u5316\u67E5\u8BE2\u548C\u5206\u6790"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u6CE8\u610F\u4E8B\u9879",children:"\u6CE8\u610F\u4E8B\u9879"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"3D Tiles \u683C\u5F0F"}),"\uFF1A\u786E\u4FDD\u503E\u659C\u6444\u5F71\u6570\u636E\u5DF2\u8F6C\u6362\u4E3A 3D Tiles \u683C\u5F0F\uFF08tileset.json\uFF09"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u6027\u80FD\u4F18\u5316"}),"\uFF1A\u5927\u89C4\u6A21\u573A\u666F\u5EFA\u8BAE\u4F7F\u7528 LOD\uFF08Level of Detail\uFF09\u4F18\u5316"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u4E8B\u4EF6\u6E05\u7406"}),"\uFF1A\u9700\u8981\u79FB\u9664\u9ED8\u8BA4\u7684\u70B9\u51FB\u4E8B\u4EF6\u4EE5\u907F\u514D\u51B2\u7A81"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u540E\u5904\u7406\u6027\u80FD"}),"\uFF1A\u8FB9\u7F18\u68C0\u6D4B\u4F1A\u589E\u52A0\u6E32\u67D3\u8D1F\u62C5\uFF0C\u6CE8\u610F\u6027\u80FD\u5F71\u54CD"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u8D44\u6E90\u6E05\u7406"}),"\uFF1A\u7EC4\u4EF6\u5378\u8F7D\u65F6\u6B63\u786E\u9500\u6BC1 Viewer \u5B9E\u4F8B"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u53C2\u8003\u8D44\u6599",children:"\u53C2\u8003\u8D44\u6599"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://cesium.com/learn/cesiumjs/ref-doc/Cesium3DTileset.html",children:"Cesium 3D Tiles \u5B98\u65B9\u6587\u6863"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/jiawanlong/Cesium-Examples",children:"Cesium Examples - \u503E\u659C\u6444\u5F71\u793A\u4F8B"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://cesium.com/learn/cesiumjs/ref-doc/PostProcessStageLibrary.html",children:"PostProcessStageLibrary API"})}),"\n"]})]})}function y(e={}){let{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(S,{...e})}):S(e)}}}]);