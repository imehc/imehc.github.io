"use strict";(self.webpackChunkanch=self.webpackChunkanch||[]).push([["3617"],{37876(e,t,r){r.r(t),r.d(t,{metadata:()=>s,default:()=>y,frontMatter:()=>x,contentTitle:()=>b,toc:()=>g,assets:()=>j});var s=JSON.parse('{"id":"web/three/showcases/car-customization","title":"\u6C7D\u8F66\u6362\u80A4","description":"}>","source":"@site/docs/web/three/showcases/01-car-customization.mdx","sourceDirName":"web/three/showcases","slug":"/web/three/showcases/car-customization","permalink":"/web/three/showcases/car-customization","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"Javascript","permalink":"/tags/javascript"}],"version":"current","lastUpdatedBy":"dependabot[bot]","lastUpdatedAt":1768440515000,"sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"\u6C7D\u8F66\u6362\u80A4","tags":["Javascript"]},"sidebar":"webSidebar","previous":{"title":"Globe.gl","permalink":"/web/three/advanced/globe.gl"},"next":{"title":"3D\u5361\u7247","permalink":"/web/three/showcases/card-3d"}}'),n=r(35656),a=r(56610),i=r(57140),l=r(67199),o=r(72180),d=r(77513),c=r(16187),w=r(13115),f=r(62152),u=r(82044);let m=()=>{let e=(0,i.useRef)(null),t=(0,i.useMemo)(()=>{let e=new l.Z58;return e.background=new l.Q1f(3355443),e.fog=new l.jUj(3355443,10,15),e.environment=new f.Y().load("/models/car/venice_sunset_1k.hdr"),e.environment.mapping=l.wfO,e.fog=new l.jUj(3355443,10,15),e},[]),r=(0,i.useMemo)(()=>{let e=new l.fTw(40,40,0xffffff,0xffffff);return e.material.opacity=1,e.material.depthWrite=!1,e.material.transparent=!0,e.material.opacity=.3,e},[]),s=(0,i.useMemo)(()=>{let e="undefined"!=typeof window?window.innerWidth/window.innerHeight:1,t=new l.ubm(40,e,.3,100);return t.position.set(-5,1.4,-4.5),t},[]),a=(0,i.useMemo)(()=>{if("undefined"==typeof window)return null;let e=new o.WebGLRenderer({antialias:!0});return e.setPixelRatio(window.devicePixelRatio),e.setSize(window.innerWidth,window.innerHeight),e},[]),m=(0,i.useCallback)((e,t)=>{let r=new c.N(e,t);return r.maxDistance=9,r.maxPolarAngle=l.cj9.degToRad(90),r.target.set(0,.5,0),r.update(),r},[]),h=(0,i.useMemo)(()=>new l.uSd({color:0xff0000,metalness:1,roughness:.5,clearcoat:1,clearcoatRoughness:.03}),[]),p=(0,i.useMemo)(()=>new l._4j({color:0xffffff,metalness:1,roughness:.5}),[]),x=(0,i.useMemo)(()=>new l.uSd({color:0xffffff,metalness:.25,roughness:0,transmission:1}),[]);return(0,i.useEffect)(()=>{let n=[],{current:i}=e;if(!i||!a)return;let o=i.clientWidth,c=i.clientHeight;a.setSize(o,c),s.aspect=o/c,s.updateProjectionMatrix(),t.add(r);let f=m(s,i);i.appendChild(a.domElement);let u=new d.Z;u.setDecoderPath("https://www.gstatic.com/draco/v1/decoders/");let b=new w.B;b.setDRACOLoader(u),b.load("/models/car/ferrari.glb",e=>{let r=e.scene.children[0];for(let e in n.push(r.getObjectByName("rim_fl")),n.push(r.getObjectByName("rim_fr")),n.push(r.getObjectByName("rim_rr")),n.push(r.getObjectByName("rim_rl")),r.getObjectByName("body").material=h,n)Object.hasOwn(n,e)&&(n[e].material=p);r.getObjectByName("trim").material=p,r.getObjectByName("glass").material=x;let s=new l.Tap().load("/car/models/ferrari_ao.png"),a=new l.eaF(new l.bdM(2.62,5.2),new l.V9B({map:s,blending:l.EdD,toneMapped:!1,transparent:!0}));a.rotation.x=-Math.PI/2,a.renderOrder=2,r.add(a),t.add(r)});let j=()=>{f.update();let e=-performance.now()/1e3;for(let t=0;t<n.length;t++)n[t].rotation.x=e*Math.PI*2;r.position.z=-e%1,a.render(t,s),requestAnimationFrame(j)};j();let g=()=>{if(!i)return;let e=i.clientWidth,t=i.clientHeight;s.aspect=e/t,s.updateProjectionMatrix(),a.setSize(e,t)};return window.addEventListener("resize",g),()=>{window.removeEventListener("resize",g),a.dispose(),i.removeChild(a.domElement),t.remove(r)}},[h,s,m,x,r,p,a,t]),(0,n.jsx)(u.A,{children:(0,n.jsxs)("div",{className:"tw:relative tw:overflow-hidden tw:overscroll-none tw:w-full tw:h-full tw:bg-[#333] tw:text-[#bbb] tw:text-sm",children:[(0,n.jsxs)("div",{className:"tw:absolute tw:top-0 tw:left-0 tw:w-full tw:p-4 tw:text-center tw:z-10",children:[(0,n.jsxs)("div",{className:"tw:inline-block tw:mx-2.5",children:[(0,n.jsx)("input",{type:"color",defaultValue:"#ff0000",onChange:e=>h.color.set(e.target.value)}),(0,n.jsx)("br",{}),(0,n.jsx)("span",{children:"Body"})]}),(0,n.jsxs)("div",{className:"tw:inline-block tw:mx-2.5",children:[(0,n.jsx)("input",{type:"color",defaultValue:"#ffffff",onChange:e=>p.color.set(e.target.value)}),(0,n.jsx)("br",{}),(0,n.jsx)("span",{children:"Hub"})]}),(0,n.jsxs)("div",{className:"tw:inline-block tw:mx-2.5",children:[(0,n.jsx)("input",{type:"color",defaultValue:"#ffffff",onChange:e=>x.color.set(e.target.value)}),(0,n.jsx)("br",{}),(0,n.jsx)("span",{children:"Glass"})]})]}),(0,n.jsx)("div",{ref:e,className:"tw:w-full tw:h-full"})]})})};var h=r(38890),p=r(79457);let x={sidebar_position:1,title:"\u6C7D\u8F66\u6362\u80A4",tags:["Javascript"]},b="\u6C7D\u8F66\u6362\u80A4",j={},g=[{value:"\u6838\u5FC3\u6982\u5FF5",id:"\u6838\u5FC3\u6982\u5FF5",level:2}];function v(e){let t={h1:"h1",h2:"h2",header:"header",li:"li",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"\u6C7D\u8F66\u6362\u80A4",children:"\u6C7D\u8F66\u6362\u80A4"})}),"\n",(0,n.jsx)(h.A,{fallback:(0,n.jsx)(p.A,{}),children:()=>(0,n.jsx)(m,{})}),"\n",(0,n.jsx)(t.h2,{id:"\u6838\u5FC3\u6982\u5FF5",children:"\u6838\u5FC3\u6982\u5FF5"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"HDRLoader"}),": \u52A0\u8F7D\u9AD8\u52A8\u6001\u8303\u56F4\u56FE\u50CF\uFF0C\u7528\u4E8E\u903C\u771F\u7684\u73AF\u5883\u5149\u7167"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"PBR\u6750\u8D28"}),": \u57FA\u4E8E\u7269\u7406\u7684\u6E32\u67D3\uFF0C\u4F7F\u7528\u91D1\u5C5E\u5EA6\u548C\u7C97\u7CD9\u5EA6\u53C2\u6570"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"DRACO\u538B\u7F29"}),": \u538B\u7F293D\u6A21\u578B\u6570\u636E\uFF0C\u51CF\u5C11\u6587\u4EF6\u5927\u5C0F"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"\u6750\u8D28\u66FF\u6362"}),": \u52A0\u8F7DGLTF\u6A21\u578B\u540E\uFF0C\u66FF\u6362\u5176\u4E2D\u5404\u90E8\u4EF6\u7684\u6750\u8D28"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"\u989C\u8272\u52A8\u6001\u4FEE\u6539"}),": \u5B9E\u65F6\u4FEE\u6539\u6750\u8D28\u989C\u8272\u4EA7\u751F\u6362\u80A4\u6548\u679C"]}),"\n"]})]})}function y(e={}){let{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(v,{...e})}):v(e)}},79457(e,t,r){r.d(t,{A:()=>n});var s=r(35656);function n({loadText:e="Loading..."}){return(0,s.jsxs)("div",{className:"tw:absolute tw:left-1/2 tw:top-1/2 tw:-translate-1/2",children:[(0,s.jsxs)("div",{className:"tw:flex tw:flex-col tw:items-center tw:justify-center",children:[(0,s.jsxs)("div",{className:"tw:relative tw:w-20 tw:h-20 tw:mb-6",children:[(0,s.jsx)("div",{className:"tw:absolute tw:inset-0 tw:border-4 tw:border-primary tw:border-t-transparent tw:rounded-full tw:animate-spin"}),(0,s.jsx)("div",{className:"tw:absolute tw:inset-2 tw:border-4 tw:border-secondary tw:border-b-transparent tw:rounded-full animate-spin-reverse"})]}),(0,s.jsx)("div",{className:"tw:text-base-content tw:text-opacity-80 tw:text-sm tw:mb-1",children:e})]}),(0,s.jsx)("style",{children:`
					@keyframes spin-reverse {
						from {
							transform: rotate(360deg);
						}
						to {
							transform: rotate(0deg);
						}
					}
					.animate-spin-reverse {
						animation: spin-reverse 1.5s linear infinite;
					}
				`})]})}}}]);