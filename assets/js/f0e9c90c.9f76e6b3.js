"use strict";(self.webpackChunkanch=self.webpackChunkanch||[]).push([["4125"],{53153(e,n,t){t.r(n),t.d(n,{metadata:()=>r,default:()=>w,frontMatter:()=>p,contentTitle:()=>b,toc:()=>v,assets:()=>f});var r=JSON.parse('{"id":"web/three/advanced/globe.gl","title":"Globe.gl","description":"\u672C\u793A\u4F8B\u5C55\u793A\u5982\u4F55\u4F7F\u7528 Globe.gl \u5728 Three.js \u4E2D\u5B9E\u73B0\u4E09\u7EF4\u5730\u7403\u53EF\u89C6\u5316\u529F\u80FD\u3002Globe.gl \u662F\u4E00\u4E2A\u57FA\u4E8E WebGL \u7684 3D \u5730\u7403\u53EF\u89C6\u5316\u5E93,\u652F\u6301\u591A\u79CD\u6570\u636E\u53EF\u89C6\u5316\u65B9\u5F0F,\u5305\u62EC\u70B9\u6807\u8BB0\u3001\u5F27\u7EBF\u8FDE\u63A5\u3001\u516D\u8FB9\u5F62\u7F51\u683C\u3001\u70ED\u529B\u56FE\u3001\u8DEF\u5F84\u7ED8\u5236\u7B49\u3002\u8BE5\u5E93\u63D0\u4F9B\u4E86 three-globe\u3001globe.gl \u548C react-globe.gl \u4E09\u4E2A\u7248\u672C,\u5206\u522B\u9002\u7528\u4E8E Three.js \u539F\u751F\u3001\u7EAF JavaScript \u548C React \u6846\u67B6\u3002\u5E7F\u6CDB\u5E94\u7528\u4E8E\u5730\u7406\u6570\u636E\u53EF\u89C6\u5316\u3001\u7F51\u7EDC\u62D3\u6251\u5C55\u793A\u3001\u5386\u53F2\u4E8B\u4EF6\u8FFD\u6EAF\u3001\u5B9E\u65F6\u76D1\u63A7\u7CFB\u7EDF\u7B49\u9886\u57DF\u3002","source":"@site/docs/web/three/advanced/20-globe.gl.mdx","sourceDirName":"web/three/advanced","slug":"/web/three/advanced/globe.gl","permalink":"/chiyu/web/three/advanced/globe.gl","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"Javascript","permalink":"/chiyu/tags/javascript"},{"inline":true,"label":"Three","permalink":"/chiyu/tags/three"}],"version":"current","lastUpdatedBy":"imehc","lastUpdatedAt":1768181947000,"sidebarPosition":20,"frontMatter":{"sidebar_position":20,"title":"Globe.gl","tags":["Javascript","Three"]},"sidebar":"webSidebar","previous":{"title":"\u573A\u666F\u80CC\u666F\u5207\u6362","permalink":"/chiyu/web/three/advanced/scene-background"},"next":{"title":"\u6C7D\u8F66\u6362\u80A4","permalink":"/chiyu/web/three/showcases/car-customization"}}'),l=t(35656),s=t(75395),i=t(99005),o=t(60140),a=t(57140),c=t(82044),d=t(79457);let h={"01":{component:(0,a.lazy)(()=>Promise.all([t.e("4803"),t.e("8897"),t.e("8520"),t.e("2861"),t.e("2398"),t.e("1020")]).then(t.bind(t,2071))),name:"\u5730\u7403\u70B9\u6570\u636E",detachment:!1},"02":{component:(0,a.lazy)(()=>Promise.all([t.e("4803"),t.e("8897"),t.e("8520"),t.e("2861"),t.e("2398"),t.e("3613")]).then(t.bind(t,2412))),name:"\u5F27\u578B\u94FE\u63A5",detachment:!1},"03":{component:(0,a.lazy)(()=>Promise.all([t.e("4803"),t.e("8897"),t.e("8520"),t.e("2861"),t.e("2398"),t.e("2872"),t.e("4891"),t.e("5381"),t.e("8777"),t.e("6316"),t.e("4810")]).then(t.bind(t,18561))),name:"\u516D\u8FB9\u5F62",detachment:!0},"04":{component:(0,a.lazy)(()=>Promise.all([t.e("4803"),t.e("8897"),t.e("8520"),t.e("2861"),t.e("2398"),t.e("2872"),t.e("4891"),t.e("5381"),t.e("1125"),t.e("8777"),t.e("371")]).then(t.bind(t,36206))),name:"\u7B49\u503C\u7EBF\u56FE",detachment:!0},"05":{component:(0,a.lazy)(()=>Promise.all([t.e("4803"),t.e("8897"),t.e("8520"),t.e("2861"),t.e("2398"),t.e("2872"),t.e("4891"),t.e("5381"),t.e("3962")]).then(t.bind(t,43041))),name:"\u663C\u591C\u8F6E\u56DE",detachment:!0},"06":{component:(0,a.lazy)(()=>Promise.all([t.e("4803"),t.e("8897"),t.e("8520"),t.e("2861"),t.e("2398"),t.e("2872"),t.e("4891"),t.e("5381"),t.e("849")]).then(t.bind(t,24104))),name:"\u70ED\u529B\u56FE",detachment:!0},"07":{component:(0,a.lazy)(()=>Promise.all([t.e("4803"),t.e("8897"),t.e("8520"),t.e("2861"),t.e("2398"),t.e("2872"),t.e("4891"),t.e("5381"),t.e("9214")]).then(t.bind(t,49981))),name:"\u4E91",detachment:!0},"08":{component:(0,a.lazy)(()=>Promise.all([t.e("4803"),t.e("8897"),t.e("8520"),t.e("2861"),t.e("2398"),t.e("2872"),t.e("4891"),t.e("5381"),t.e("9527")]).then(t.bind(t,86298))),name:"\u74E6\u7247\u5730\u56FE",detachment:!0},"09":{component:(0,a.lazy)(()=>Promise.all([t.e("4803"),t.e("8897"),t.e("8520"),t.e("2861"),t.e("2398"),t.e("2872"),t.e("4891"),t.e("5381"),t.e("1125"),t.e("8628")]).then(t.bind(t,47439))),name:"\u4E16\u754C\u4EBA\u53E3",detachment:!0},"010":{component:(0,a.lazy)(()=>Promise.all([t.e("4803"),t.e("8897"),t.e("8520"),t.e("2861"),t.e("2398"),t.e("2872"),t.e("4891"),t.e("5381"),t.e("1125"),t.e("4042")]).then(t.bind(t,69521))),name:"\u8FD1\u671F\u5730\u9707",detachment:!0},"011":{component:(0,a.lazy)(()=>Promise.all([t.e("4803"),t.e("8897"),t.e("8520"),t.e("2861"),t.e("2398"),t.e("2872"),t.e("4891"),t.e("5381"),t.e("1125"),t.e("8124")]).then(t.bind(t,29719))),name:"\u7F8E\u56FD\u51FA\u5883\u56FD\u9645\u822A\u7EBF ",detachment:!0},"012":{component:(0,a.lazy)(()=>Promise.all([t.e("4803"),t.e("8897"),t.e("8520"),t.e("2861"),t.e("2398"),t.e("2872"),t.e("4891"),t.e("5381"),t.e("5452")]).then(t.bind(t,6727))),name:"\u5730\u7403\u4E4B\u76FE",detachment:!0},"013":{component:(0,a.lazy)(()=>Promise.all([t.e("4803"),t.e("8897"),t.e("8520"),t.e("2861"),t.e("2398"),t.e("2872"),t.e("4891"),t.e("5381"),t.e("991")]).then(t.bind(t,88274))),name:"\u6D77\u5E95\u5149\u7F06",detachment:!0},"014":{component:(0,a.lazy)(()=>Promise.all([t.e("4803"),t.e("8897"),t.e("8520"),t.e("2861"),t.e("2398"),t.e("2872"),t.e("4891"),t.e("5381"),t.e("1125"),t.e("3470")]).then(t.bind(t,60717))),name:"\u767B\u6708\u5730\u70B9",detachment:!0}};function g(e){let n={};if("basic"===e)for(let[e,t]of Object.entries(h))t.detachment||(n[e]=t);else if("detachment"===e)for(let[e,t]of Object.entries(h))t.detachment&&(n[e]=t);else n={...h};let t={};for(let[e,r]of Object.entries(n))t[r.name]=e;return t}var x=t(54325);function u(){return(0,l.jsx)(x.E,{children:(0,l.jsx)(d.A,{})})}function j(){let[e,n]=(0,a.useState)("03"),r=(0,a.useRef)(null);(0,a.useEffect)(()=>(t.e("2905").then(t.bind(t,97168)).then(({GUI:t})=>{let l=new t;r.current=l,l.domElement.style.position="fixed",l.domElement.style.top="50%",l.domElement.style.transform="translateY(-50%)",l.domElement.style.left="0",l.add({example:e},"example",g()).name("\u5207\u6362\u793A\u4F8B").onChange(n)}),()=>{r.current&&(r.current.destroy(),r.current=null)}),[e]);let s=(0,a.useMemo)(()=>h?.[e]?.component||null,[e]);return Object.values(g("detachment")).includes(e)?(0,l.jsx)(c.A,{children:(0,l.jsx)(a.Suspense,{fallback:(0,l.jsx)(d.A,{}),children:(0,l.jsx)(s,{})})}):(0,l.jsx)(c.A,{children:(0,l.jsxs)(o.Hl,{camera:{position:[0,0,300],fov:75},children:[(0,l.jsx)("ambientLight",{intensity:5}),(0,l.jsx)(i.N,{makeDefault:!0}),(0,l.jsx)(a.Suspense,{fallback:(0,l.jsx)(u,{}),children:(0,l.jsx)(s,{})})]})})}var m=t(8528);let p={sidebar_position:20,title:"Globe.gl",tags:["Javascript","Three"]},b="Globe.gl",f={},v=[{value:"\u6838\u5FC3\u529F\u80FD",id:"\u6838\u5FC3\u529F\u80FD",level:2},{value:"\u70B9\u6570\u636E\u53EF\u89C6\u5316",id:"\u70B9\u6570\u636E\u53EF\u89C6\u5316",level:3},{value:"\u5F27\u7EBF\u8FDE\u63A5",id:"\u5F27\u7EBF\u8FDE\u63A5",level:3},{value:"\u516D\u8FB9\u5F62\u591A\u8FB9\u5F62",id:"\u516D\u8FB9\u5F62\u591A\u8FB9\u5F62",level:3},{value:"\u70ED\u529B\u56FE\u4E0E\u7B49\u503C\u7EBF",id:"\u70ED\u529B\u56FE\u4E0E\u7B49\u503C\u7EBF",level:3},{value:"\u8DEF\u5F84\u7ED8\u5236",id:"\u8DEF\u5F84\u7ED8\u5236",level:3},{value:"\u81EA\u5B9A\u4E49\u6750\u8D28\u4E0E\u663C\u591C\u8F6E\u56DE",id:"\u81EA\u5B9A\u4E49\u6750\u8D28\u4E0E\u663C\u591C\u8F6E\u56DE",level:3},{value:"\u6807\u7B7E\u4E0E HTML \u5143\u7D20",id:"\u6807\u7B7E\u4E0E-html-\u5143\u7D20",level:3},{value:"\u5173\u952E\u4EE3\u7801",id:"\u5173\u952E\u4EE3\u7801",level:2},{value:"\u5B89\u88C5\u4F9D\u8D56",id:"\u5B89\u88C5\u4F9D\u8D56",level:3},{value:"\u57FA\u7840\u70B9\u6570\u636E\u6E32\u67D3 (three-globe)",id:"\u57FA\u7840\u70B9\u6570\u636E\u6E32\u67D3-three-globe",level:3},{value:"\u5F27\u7EBF\u8FDE\u63A5\u52A8\u753B",id:"\u5F27\u7EBF\u8FDE\u63A5\u52A8\u753B",level:3},{value:"\u516D\u8FB9\u5F62\u591A\u8FB9\u5F62 (react-globe.gl)",id:"\u516D\u8FB9\u5F62\u591A\u8FB9\u5F62-react-globegl",level:3},{value:"\u663C\u591C\u8F6E\u56DE\u6548\u679C (globe.gl)",id:"\u663C\u591C\u8F6E\u56DE\u6548\u679C-globegl",level:3},{value:"\u8DEF\u5F84\u6570\u636E\u7ED8\u5236",id:"\u8DEF\u5F84\u6570\u636E\u7ED8\u5236",level:3},{value:"\u822A\u7EBF\u6570\u636E\u53EF\u89C6\u5316",id:"\u822A\u7EBF\u6570\u636E\u53EF\u89C6\u5316",level:3},{value:"\u54CD\u5E94\u5F0F\u5BB9\u5668",id:"\u54CD\u5E94\u5F0F\u5BB9\u5668",level:3},{value:"\u5E94\u7528\u573A\u666F",id:"\u5E94\u7528\u573A\u666F",level:2},{value:"\u5730\u7406\u6570\u636E\u53EF\u89C6\u5316",id:"\u5730\u7406\u6570\u636E\u53EF\u89C6\u5316",level:3},{value:"\u7F51\u7EDC\u62D3\u6251\u5C55\u793A",id:"\u7F51\u7EDC\u62D3\u6251\u5C55\u793A",level:3},{value:"\u5386\u53F2\u4E8B\u4EF6\u8FFD\u6EAF",id:"\u5386\u53F2\u4E8B\u4EF6\u8FFD\u6EAF",level:3},{value:"\u5B9E\u65F6\u76D1\u63A7\u7CFB\u7EDF",id:"\u5B9E\u65F6\u76D1\u63A7\u7CFB\u7EDF",level:3},{value:"\u79D1\u5B66\u7814\u7A76",id:"\u79D1\u5B66\u7814\u7A76",level:3},{value:"\u6027\u80FD\u4F18\u5316\u6280\u5DE7",id:"\u6027\u80FD\u4F18\u5316\u6280\u5DE7",level:2},{value:"\u6570\u636E\u4F18\u5316",id:"\u6570\u636E\u4F18\u5316",level:3},{value:"\u6E32\u67D3\u4F18\u5316",id:"\u6E32\u67D3\u4F18\u5316",level:3},{value:"\u5185\u5B58\u7BA1\u7406",id:"\u5185\u5B58\u7BA1\u7406",level:3},{value:"\u4EA4\u4E92\u4F18\u5316",id:"\u4EA4\u4E92\u4F18\u5316",level:3},{value:"\u5E38\u89C1\u95EE\u9898",id:"\u5E38\u89C1\u95EE\u9898",level:2},{value:"Globe \u4E0D\u663E\u793A",id:"globe-\u4E0D\u663E\u793A",level:3},{value:"\u6570\u636E\u4E0D\u66F4\u65B0",id:"\u6570\u636E\u4E0D\u66F4\u65B0",level:3},{value:"\u6027\u80FD\u5361\u987F",id:"\u6027\u80FD\u5361\u987F",level:3},{value:"React \u4E2D\u91CD\u590D\u6E32\u67D3",id:"react-\u4E2D\u91CD\u590D\u6E32\u67D3",level:3},{value:"\u4EA4\u4E92\u4E8B\u4EF6\u4E0D\u54CD\u5E94",id:"\u4EA4\u4E92\u4E8B\u4EF6\u4E0D\u54CD\u5E94",level:3},{value:"\u81EA\u5B9A\u4E49 Shader \u4E0D\u5DE5\u4F5C",id:"\u81EA\u5B9A\u4E49-shader-\u4E0D\u5DE5\u4F5C",level:3},{value:"\u5185\u5B58\u6CC4\u6F0F",id:"\u5185\u5B58\u6CC4\u6F0F",level:3},{value:"TypeScript \u7C7B\u578B\u9519\u8BEF",id:"typescript-\u7C7B\u578B\u9519\u8BEF",level:3},{value:"\u6CE8\u610F\u4E8B\u9879",id:"\u6CE8\u610F\u4E8B\u9879",level:2},{value:"\u53C2\u8003\u8D44\u6599",id:"\u53C2\u8003\u8D44\u6599",level:2}];function y(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"globegl",children:"Globe.gl"})}),"\n",(0,l.jsxs)(n.p,{children:["\u672C\u793A\u4F8B\u5C55\u793A\u5982\u4F55\u4F7F\u7528 Globe.gl \u5728 Three.js \u4E2D\u5B9E\u73B0\u4E09\u7EF4\u5730\u7403\u53EF\u89C6\u5316\u529F\u80FD\u3002Globe.gl \u662F\u4E00\u4E2A\u57FA\u4E8E WebGL \u7684 3D \u5730\u7403\u53EF\u89C6\u5316\u5E93,\u652F\u6301\u591A\u79CD\u6570\u636E\u53EF\u89C6\u5316\u65B9\u5F0F,\u5305\u62EC\u70B9\u6807\u8BB0\u3001\u5F27\u7EBF\u8FDE\u63A5\u3001\u516D\u8FB9\u5F62\u7F51\u683C\u3001\u70ED\u529B\u56FE\u3001\u8DEF\u5F84\u7ED8\u5236\u7B49\u3002\u8BE5\u5E93\u63D0\u4F9B\u4E86 ",(0,l.jsx)(n.code,{children:"three-globe"}),"\u3001",(0,l.jsx)(n.code,{children:"globe.gl"})," \u548C ",(0,l.jsx)(n.code,{children:"react-globe.gl"})," \u4E09\u4E2A\u7248\u672C,\u5206\u522B\u9002\u7528\u4E8E Three.js \u539F\u751F\u3001\u7EAF JavaScript \u548C React \u6846\u67B6\u3002\u5E7F\u6CDB\u5E94\u7528\u4E8E\u5730\u7406\u6570\u636E\u53EF\u89C6\u5316\u3001\u7F51\u7EDC\u62D3\u6251\u5C55\u793A\u3001\u5386\u53F2\u4E8B\u4EF6\u8FFD\u6EAF\u3001\u5B9E\u65F6\u76D1\u63A7\u7CFB\u7EDF\u7B49\u9886\u57DF\u3002"]}),"\n",(0,l.jsx)(m.A,{fallback:(0,l.jsx)(d.A,{}),children:()=>(0,l.jsx)(j,{})}),"\n",(0,l.jsx)(n.h2,{id:"\u6838\u5FC3\u529F\u80FD",children:"\u6838\u5FC3\u529F\u80FD"}),"\n",(0,l.jsx)(n.h3,{id:"\u70B9\u6570\u636E\u53EF\u89C6\u5316",children:"\u70B9\u6570\u636E\u53EF\u89C6\u5316"}),"\n",(0,l.jsxs)(n.p,{children:["\u4F7F\u7528 ",(0,l.jsx)(n.code,{children:"pointsData()"})," \u5728\u5730\u7403\u8868\u9762\u6E32\u67D3\u70B9\u6807\u8BB0:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u6570\u636E\u914D\u7F6E"}),": \u652F\u6301\u7ECF\u7EAC\u5EA6\u5750\u6807\u3001\u989C\u8272\u3001\u5927\u5C0F\u3001\u9AD8\u5EA6\u7B49\u5C5E\u6027\u914D\u7F6E"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u52A8\u6001\u5C5E\u6027"}),": \u901A\u8FC7 ",(0,l.jsx)(n.code,{children:"pointColor()"}),"\u3001",(0,l.jsx)(n.code,{children:"pointAltitude()"}),"\u3001",(0,l.jsx)(n.code,{children:"pointRadius()"})," \u8BBE\u7F6E\u70B9\u7684\u89C6\u89C9\u5C5E\u6027"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u4EA4\u4E92\u652F\u6301"}),": \u652F\u6301\u70B9\u51FB\u3001\u60AC\u505C\u4E8B\u4EF6\u548C\u81EA\u5B9A\u4E49\u6807\u7B7E"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u6027\u80FD\u4F18\u5316"}),": \u4F7F\u7528 ",(0,l.jsx)(n.code,{children:"pointsMerge(true)"})," \u5408\u5E76\u70B9\u51E0\u4F55\u4F53\u4EE5\u63D0\u5347\u6027\u80FD"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u52A8\u753B\u6548\u679C"}),": \u652F\u6301\u70B9\u7684\u52A8\u6001\u6DFB\u52A0\u3001\u79FB\u9664\u548C\u5C5E\u6027\u8FC7\u6E21\u52A8\u753B"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u5F27\u7EBF\u8FDE\u63A5",children:"\u5F27\u7EBF\u8FDE\u63A5"}),"\n",(0,l.jsxs)(n.p,{children:["\u4F7F\u7528 ",(0,l.jsx)(n.code,{children:"arcsData()"})," \u7ED8\u5236\u5730\u7406\u4F4D\u7F6E\u95F4\u7684\u8FDE\u63A5\u5F27\u7EBF:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u8D77\u6B62\u70B9\u914D\u7F6E"}),": \u901A\u8FC7 ",(0,l.jsx)(n.code,{children:"arcStartLat/Lng()"})," \u548C ",(0,l.jsx)(n.code,{children:"arcEndLat/Lng()"})," \u8BBE\u7F6E\u5F27\u7EBF\u8D77\u6B62\u70B9"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u989C\u8272\u6E10\u53D8"}),": \u652F\u6301\u5355\u8272\u6216\u53CC\u8272\u6E10\u53D8,\u53EF\u8BBE\u7F6E\u900F\u660E\u5EA6"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u865A\u7EBF\u52A8\u753B"}),": \u901A\u8FC7 ",(0,l.jsx)(n.code,{children:"arcDashLength()"}),"\u3001",(0,l.jsx)(n.code,{children:"arcDashGap()"})," \u548C ",(0,l.jsx)(n.code,{children:"arcDashAnimateTime()"})," \u521B\u5EFA\u52A8\u753B\u6548\u679C"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u66F2\u7EBF\u9AD8\u5EA6"}),": \u4F7F\u7528 ",(0,l.jsx)(n.code,{children:"arcAltitude()"})," \u548C ",(0,l.jsx)(n.code,{children:"arcAltitudeAutoScale()"})," \u63A7\u5236\u5F27\u7EBF\u9AD8\u5EA6"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u6807\u7B7E\u663E\u793A"}),": \u901A\u8FC7 ",(0,l.jsx)(n.code,{children:"arcLabel()"})," \u6DFB\u52A0\u9F20\u6807\u60AC\u505C\u6807\u7B7E"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u516D\u8FB9\u5F62\u591A\u8FB9\u5F62",children:"\u516D\u8FB9\u5F62\u591A\u8FB9\u5F62"}),"\n",(0,l.jsxs)(n.p,{children:["\u4F7F\u7528 ",(0,l.jsx)(n.code,{children:"hexPolygonsData()"})," \u5C06 GeoJSON \u6570\u636E\u6E32\u67D3\u4E3A\u516D\u8FB9\u5F62\u7F51\u683C:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"GeoJSON \u652F\u6301"}),": \u63A5\u53D7\u6807\u51C6 GeoJSON Feature \u6570\u636E\u683C\u5F0F"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u5206\u8FA8\u7387\u63A7\u5236"}),": \u901A\u8FC7 ",(0,l.jsx)(n.code,{children:"hexPolygonResolution()"})," \u8BBE\u7F6E\u516D\u8FB9\u5F62\u7EC6\u5206\u7EA7\u522B"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u6837\u5F0F\u914D\u7F6E"}),": \u652F\u6301\u989C\u8272\u3001\u8FB9\u8DDD\u3001\u9AD8\u5EA6\u7B49\u5C5E\u6027\u914D\u7F6E"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u70B9\u72B6\u6A21\u5F0F"}),": \u4F7F\u7528 ",(0,l.jsx)(n.code,{children:"hexPolygonUseDots(true)"})," \u6E32\u67D3\u4E3A\u70B9\u72B6\u516D\u8FB9\u5F62"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u4EA4\u4E92\u6807\u7B7E"}),": \u901A\u8FC7 ",(0,l.jsx)(n.code,{children:"hexPolygonLabel()"})," \u663E\u793A\u56FD\u5BB6\u3001\u4EBA\u53E3\u7B49\u4FE1\u606F"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u70ED\u529B\u56FE\u4E0E\u7B49\u503C\u7EBF",children:"\u70ED\u529B\u56FE\u4E0E\u7B49\u503C\u7EBF"}),"\n",(0,l.jsxs)(n.p,{children:["\u4F7F\u7528 ",(0,l.jsx)(n.code,{children:"heatmapsData()"})," \u548C ",(0,l.jsx)(n.code,{children:"hexBinPointsData()"})," \u521B\u5EFA\u70ED\u529B\u5206\u5E03:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u6743\u91CD\u8BA1\u7B97"}),": \u6839\u636E\u70B9\u5BC6\u5EA6\u6216\u81EA\u5B9A\u4E49\u6743\u91CD\u751F\u6210\u70ED\u529B\u5206\u5E03"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u989C\u8272\u6620\u5C04"}),": \u652F\u6301\u81EA\u5B9A\u4E49\u989C\u8272\u6E10\u53D8\u65B9\u6848"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u5E73\u6ED1\u63D2\u503C"}),": \u81EA\u52A8\u63D2\u503C\u751F\u6210\u5E73\u6ED1\u7684\u70ED\u529B\u6548\u679C"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u7B49\u503C\u7EBF\u7ED8\u5236"}),": \u57FA\u4E8E\u6570\u636E\u503C\u751F\u6210\u7B49\u503C\u7EBF\u56FE"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u52A8\u6001\u66F4\u65B0"}),": \u652F\u6301\u5B9E\u65F6\u66F4\u65B0\u70ED\u529B\u56FE\u6570\u636E"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u8DEF\u5F84\u7ED8\u5236",children:"\u8DEF\u5F84\u7ED8\u5236"}),"\n",(0,l.jsxs)(n.p,{children:["\u4F7F\u7528 ",(0,l.jsx)(n.code,{children:"pathsData()"})," \u7ED8\u5236\u5730\u7406\u8DEF\u5F84:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u591A\u70B9\u8DEF\u5F84"}),": \u652F\u6301\u7531\u591A\u4E2A\u7ECF\u7EAC\u5EA6\u5750\u6807\u7EC4\u6210\u7684\u8DEF\u5F84"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u8DEF\u5F84\u6837\u5F0F"}),": \u914D\u7F6E\u989C\u8272\u3001\u5BBD\u5EA6\u3001\u9AD8\u5EA6\u7B49\u5C5E\u6027"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u865A\u7EBF\u52A8\u753B"}),": \u7C7B\u4F3C\u5F27\u7EBF,\u652F\u6301\u865A\u7EBF\u52A8\u753B\u6548\u679C"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u5E94\u7528\u573A\u666F"}),": \u6D77\u5E95\u5149\u7F06\u3001\u4EA4\u901A\u8DEF\u7EBF\u3001\u8FC1\u5F99\u8DEF\u5F84\u7B49"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u81EA\u5B9A\u4E49\u6807\u7B7E"}),": \u901A\u8FC7 ",(0,l.jsx)(n.code,{children:"pathLabel()"})," \u663E\u793A\u8DEF\u5F84\u4FE1\u606F"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u81EA\u5B9A\u4E49\u6750\u8D28\u4E0E\u663C\u591C\u8F6E\u56DE",children:"\u81EA\u5B9A\u4E49\u6750\u8D28\u4E0E\u663C\u591C\u8F6E\u56DE"}),"\n",(0,l.jsxs)(n.p,{children:["\u4F7F\u7528 ",(0,l.jsx)(n.code,{children:"globeMaterial()"})," \u5B9E\u73B0\u9AD8\u7EA7\u89C6\u89C9\u6548\u679C:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u81EA\u5B9A\u4E49 Shader"}),": \u4F7F\u7528 Three.js ",(0,l.jsx)(n.code,{children:"ShaderMaterial"})," \u521B\u5EFA\u81EA\u5B9A\u4E49\u6750\u8D28"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u591A\u7EB9\u7406\u6DF7\u5408"}),": \u6DF7\u5408\u767D\u5929\u3001\u591C\u665A\u7EB9\u7406\u5B9E\u73B0\u663C\u591C\u6548\u679C"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u592A\u9633\u4F4D\u7F6E\u8BA1\u7B97"}),": \u57FA\u4E8E\u65F6\u95F4\u8BA1\u7B97\u592A\u9633\u4F4D\u7F6E,\u52A8\u6001\u66F4\u65B0\u660E\u6697\u5206\u754C\u7EBF"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u4E91\u5C42\u53E0\u52A0"}),": \u4F7F\u7528 ",(0,l.jsx)(n.code,{children:"cloudsImageUrl()"})," \u6DFB\u52A0\u4E91\u5C42\u7EB9\u7406"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u51F9\u51F8\u8D34\u56FE"}),": \u901A\u8FC7 ",(0,l.jsx)(n.code,{children:"bumpImageUrl()"})," \u6DFB\u52A0\u5730\u5F62\u51F9\u51F8\u6548\u679C"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u6807\u7B7E\u4E0E-html-\u5143\u7D20",children:"\u6807\u7B7E\u4E0E HTML \u5143\u7D20"}),"\n",(0,l.jsxs)(n.p,{children:["\u4F7F\u7528 ",(0,l.jsx)(n.code,{children:"labelsData()"})," \u548C ",(0,l.jsx)(n.code,{children:"htmlElementsData()"})," \u6DFB\u52A0\u6807\u6CE8:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u6587\u672C\u6807\u7B7E"}),": \u5728\u6307\u5B9A\u4F4D\u7F6E\u663E\u793A\u6587\u672C\u6807\u7B7E"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"HTML \u5143\u7D20"}),": \u5D4C\u5165\u81EA\u5B9A\u4E49 HTML \u5185\u5BB9"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u52A8\u6001\u5B9A\u4F4D"}),": \u6807\u7B7E\u968F\u5730\u7403\u65CB\u8F6C\u81EA\u52A8\u5B9A\u4F4D"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u6837\u5F0F\u81EA\u5B9A\u4E49"}),": \u5B8C\u5168\u81EA\u5B9A\u4E49\u6807\u7B7E\u6837\u5F0F"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u4E8B\u4EF6\u4EA4\u4E92"}),": \u652F\u6301\u70B9\u51FB\u3001\u60AC\u505C\u7B49\u4EA4\u4E92\u4E8B\u4EF6"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u5173\u952E\u4EE3\u7801",children:"\u5173\u952E\u4EE3\u7801"}),"\n",(0,l.jsx)(n.h3,{id:"\u5B89\u88C5\u4F9D\u8D56",children:"\u5B89\u88C5\u4F9D\u8D56"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u4F7F\u7528 pnpm \u5B89\u88C5\npnpm add three-globe globe.gl react-globe.gl\n\n# \u6216\u4F7F\u7528 npm\nnpm install three-globe globe.gl react-globe.gl\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u57FA\u7840\u70B9\u6570\u636E\u6E32\u67D3-three-globe",children:"\u57FA\u7840\u70B9\u6570\u636E\u6E32\u67D3 (three-globe)"}),"\n",(0,l.jsxs)(n.p,{children:["\u5728 React Three Fiber \u4E2D\u4F7F\u7528 ",(0,l.jsx)(n.code,{children:"three-globe"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:'import { useFrame } from "@react-three/fiber";\nimport { useEffect, useMemo } from "react";\nimport Globe from "three-globe";\n\n// \u521B\u5EFA\u968F\u673A\u70B9\u6570\u636E\nfunction createGlobeData() {\n  const N = 300;\n  return [...Array(N).keys()].map(() => ({\n    lat: (Math.random() - 0.5) * 180,\n    lng: (Math.random() - 0.5) * 360,\n    size: Math.random() / 3,\n    color: ["red", "white", "blue", "green"][Math.round(Math.random() * 3)],\n  }));\n}\n\nexport default function GlobeComponent() {\n  const globe = useMemo(() => {\n    const g = new Globe()\n      .globeImageUrl("/three-globe/example/img/earth-night.png")\n      .pointsData(createGlobeData())\n      .pointAltitude("size")\n      .pointColor("color");\n    return g;\n  }, []);\n\n  // \u6BCF\u5E27\u65CB\u8F6C\u5730\u7403\n  useFrame(() => {\n    globe.rotation.y += 0.002;\n  });\n\n  // \u6E05\u7406\u8D44\u6E90\n  useEffect(() => {\n    return () => {\n      globe?._destructor();\n    };\n  }, [globe]);\n\n  return <primitive object={globe} />;\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u5F27\u7EBF\u8FDE\u63A5\u52A8\u753B",children:"\u5F27\u7EBF\u8FDE\u63A5\u52A8\u753B"}),"\n",(0,l.jsx)(n.p,{children:"\u521B\u5EFA\u5E26\u52A8\u753B\u6548\u679C\u7684\u5F27\u7EBF\u8FDE\u63A5:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:'import Globe from "three-globe";\n\nfunction createArcData() {\n  const N = 20;\n  return [...Array(N).keys()].map(() => ({\n    startLat: (Math.random() - 0.5) * 180,\n    startLng: (Math.random() - 0.5) * 360,\n    endLat: (Math.random() - 0.5) * 180,\n    endLng: (Math.random() - 0.5) * 360,\n    color: [\n      ["red", "white", "blue", "green"][Math.round(Math.random() * 3)],\n      ["red", "white", "blue", "green"][Math.round(Math.random() * 3)],\n    ],\n  }));\n}\n\nexport default function ArcLinkComponent() {\n  const globe = useMemo(() => {\n    return new Globe()\n      .globeImageUrl("/three-globe/example/img/earth-night.png")\n      .arcsData(createArcData())\n      .arcColor("color")\n      .arcDashLength(() => Math.random())\n      .arcDashGap(() => Math.random())\n      .arcDashAnimateTime(() => Math.random() * 4000 + 500);\n  }, []);\n\n  useFrame(() => {\n    globe.rotation.y += 0.002;\n  });\n\n  return <primitive object={globe} />;\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u516D\u8FB9\u5F62\u591A\u8FB9\u5F62-react-globegl",children:"\u516D\u8FB9\u5F62\u591A\u8FB9\u5F62 (react-globe.gl)"}),"\n",(0,l.jsx)(n.p,{children:"\u4F7F\u7528 React \u5C01\u88C5\u7248\u672C\u6E32\u67D3\u516D\u8FB9\u5F62\u7F51\u683C:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:'import Globe, { GlobeMethods } from "react-globe.gl";\nimport { useRef, useEffect } from "react";\n\nexport default function HexPolygonComponent() {\n  const globeEl = useRef<GlobeMethods>(null);\n  const [countries, setCountries] = useState([]);\n\n  useEffect(() => {\n    // \u52A0\u8F7D GeoJSON \u6570\u636E\n    fetch("/countries.geojson")\n      .then((res) => res.json())\n      .then((data) => setCountries(data.features));\n  }, []);\n\n  return (\n    <Globe\n      ref={globeEl}\n      width={800}\n      height={600}\n      globeImageUrl="/three-globe/example/img/earth-dark.png"\n      hexPolygonsData={countries}\n      hexPolygonResolution={3}\n      hexPolygonMargin={0.3}\n      hexPolygonUseDots={true}\n      hexPolygonColor={() =>\n        `#${Math.round(Math.random() * 2 ** 24)\n          .toString(16)\n          .padStart(6, "0")}`\n      }\n      hexPolygonLabel={({ properties }) => `\n        <b>${properties.ADMIN} (${properties.ISO_A2})</b> <br />\n        Population: <i>${properties.POP_EST}</i>\n      `}\n    />\n  );\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u663C\u591C\u8F6E\u56DE\u6548\u679C-globegl",children:"\u663C\u591C\u8F6E\u56DE\u6548\u679C (globe.gl)"}),"\n",(0,l.jsx)(n.p,{children:"\u4F7F\u7528\u81EA\u5B9A\u4E49 Shader \u5B9E\u73B0\u663C\u591C\u8F6E\u56DE:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:'import Globe, { GlobeInstance } from "globe.gl";\nimport { ShaderMaterial, TextureLoader, Vector2 } from "three";\n\nconst dayNightShader = {\n  vertexShader: `\n    varying vec3 vNormal;\n    varying vec2 vUv;\n\n    void main() {\n      vNormal = normalize(normalMatrix * normal);\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    }\n  `,\n  fragmentShader: `\n    uniform sampler2D dayTexture;\n    uniform sampler2D nightTexture;\n    uniform vec2 sunPosition;\n\n    varying vec3 vNormal;\n    varying vec2 vUv;\n\n    void main() {\n      vec4 dayColor = texture2D(dayTexture, vUv);\n      vec4 nightColor = texture2D(nightTexture, vUv);\n\n      // \u8BA1\u7B97\u5149\u7167\u5F3A\u5EA6\n      float lng = vUv.x * 360.0 - 180.0;\n      float lat = 90.0 - vUv.y * 180.0;\n\n      float dLng = lng - sunPosition.x;\n      float dLat = lat - sunPosition.y;\n      float distance = sqrt(dLng * dLng + dLat * dLat);\n\n      float intensity = smoothstep(90.0, 80.0, distance);\n\n      gl_FragColor = mix(nightColor, dayColor, intensity);\n    }\n  `,\n};\n\nexport default function DayNightCycleComponent() {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [currentTime, setCurrentTime] = useState(new Date());\n\n  useEffect(() => {\n    const world = new Globe(containerRef.current)\n      .width(800)\n      .height(600);\n\n    // \u52A0\u8F7D\u7EB9\u7406\n    Promise.all([\n      new TextureLoader().loadAsync("/img/earth-day.png"),\n      new TextureLoader().loadAsync("/img/earth-night.png"),\n    ]).then(([dayTexture, nightTexture]) => {\n      const material = new ShaderMaterial({\n        uniforms: {\n          dayTexture: { value: dayTexture },\n          nightTexture: { value: nightTexture },\n          sunPosition: { value: new Vector2() },\n        },\n        vertexShader: dayNightShader.vertexShader,\n        fragmentShader: dayNightShader.fragmentShader,\n      });\n\n      world\n        .globeMaterial(material)\n        .backgroundImageUrl("/img/night-sky.png");\n\n      // \u52A8\u753B\u5FAA\u73AF\u66F4\u65B0\u592A\u9633\u4F4D\u7F6E\n      function animate() {\n        const dt = Date.now();\n        setCurrentTime(new Date(dt));\n        const sunPos = calculateSunPosition(dt);\n        material.uniforms.sunPosition.value.set(sunPos[0], sunPos[1]);\n        requestAnimationFrame(animate);\n      }\n      animate();\n    });\n\n    return () => {\n      world._destructor();\n    };\n  }, []);\n\n  return <div ref={containerRef} />;\n}\n\n// \u8BA1\u7B97\u592A\u9633\u4F4D\u7F6E\nfunction calculateSunPosition(timestamp: number) {\n  const day = new Date(timestamp).setUTCHours(0, 0, 0, 0);\n  const longitude = ((day - timestamp) / 864e5) * 360 - 180;\n  const latitude = 0; // \u7B80\u5316\u8BA1\u7B97\n  return [longitude, latitude];\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u8DEF\u5F84\u6570\u636E\u7ED8\u5236",children:"\u8DEF\u5F84\u6570\u636E\u7ED8\u5236"}),"\n",(0,l.jsx)(n.p,{children:"\u7ED8\u5236\u6D77\u5E95\u5149\u7F06\u8DEF\u5F84:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:'import Globe, { GlobeInstance } from "globe.gl";\n\nexport default function SubmarineCablesComponent() {\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const world = new Globe(containerRef.current)\n      .width(800)\n      .height(600)\n      .globeImageUrl("/three-globe/example/img/earth-night.png")\n      .bumpImageUrl("/three-globe/example/img/earth-topology.png")\n      .backgroundImageUrl("/three-globe/example/img/night-sky.png");\n\n    // \u52A0\u8F7D\u6D77\u5E95\u5149\u7F06\u6570\u636E\n    fetch("/datasets/cable-geo.json")\n      .then((r) => r.json())\n      .then((cablesGeo) => {\n        const cablePaths = [];\n        cablesGeo.features.forEach(({ geometry, properties }) => {\n          geometry.coordinates.forEach((coords) => {\n            cablePaths.push({ coords, properties });\n          });\n        });\n\n        world\n          .pathsData(cablePaths)\n          .pathPoints("coords")\n          .pathPointLat((p) => p[1])\n          .pathPointLng((p) => p[0])\n          .pathColor((path) => path.properties.color)\n          .pathLabel((path) => path.properties.name)\n          .pathDashLength(0.1)\n          .pathDashGap(0.008)\n          .pathDashAnimateTime(12000);\n      });\n\n    return () => {\n      world._destructor();\n    };\n  }, []);\n\n  return <div ref={containerRef} />;\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u822A\u7EBF\u6570\u636E\u53EF\u89C6\u5316",children:"\u822A\u7EBF\u6570\u636E\u53EF\u89C6\u5316"}),"\n",(0,l.jsx)(n.p,{children:"\u5C55\u793A\u56FD\u9645\u822A\u7EBF\u7F51\u7EDC:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:'import Globe, { GlobeInstance } from "globe.gl";\nimport { csvParseRows } from "d3";\n\nconst COUNTRY = "United States";\nconst OPACITY = 0.22;\n\nexport default function AirlineRoutesComponent() {\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const world = new Globe(containerRef.current)\n      .width(800)\n      .height(600)\n      .globeImageUrl("/three-globe/example/img/earth-night.png")\n      .pointOfView({ lat: 39.6, lng: -98.5, altitude: 2 });\n\n    // \u52A0\u8F7D\u673A\u573A\u548C\u822A\u7EBF\u6570\u636E\n    Promise.all([\n      fetch("https://raw.githubusercontent.com/jpatokal/openflights/master/data/airports.dat")\n        .then((res) => res.text())\n        .then((d) => csvParseRows(d, parseAirport)),\n      fetch("https://raw.githubusercontent.com/jpatokal/openflights/master/data/routes.dat")\n        .then((res) => res.text())\n        .then((d) => csvParseRows(d, parseRoute)),\n    ]).then(([airports, routes]) => {\n      const byIata = indexBy(airports, "iata");\n\n      const filteredRoutes = routes\n        .filter((d) => byIata[d.srcIata] && byIata[d.dstIata])\n        .filter((d) => d.stops === "0")\n        .map((d) => ({\n          ...d,\n          srcAirport: byIata[d.srcIata],\n          dstAirport: byIata[d.dstIata],\n        }))\n        .filter(\n          (d) =>\n            d.srcAirport.country === COUNTRY &&\n            d.dstAirport.country !== COUNTRY\n        );\n\n      world\n        .pointsData(airports)\n        .arcsData(filteredRoutes)\n        .arcLabel((d) => `${d.airline}: ${d.srcIata} \u2192 ${d.dstIata}`)\n        .arcStartLat((d) => +d.srcAirport.lat)\n        .arcStartLng((d) => +d.srcAirport.lng)\n        .arcEndLat((d) => +d.dstAirport.lat)\n        .arcEndLng((d) => +d.dstAirport.lng)\n        .arcDashLength(0.25)\n        .arcDashGap(1)\n        .arcDashInitialGap(() => Math.random())\n        .arcDashAnimateTime(4000)\n        .arcColor(() => [\n          `rgba(0, 255, 0, ${OPACITY})`,\n          `rgba(255, 0, 0, ${OPACITY})`,\n        ])\n        .pointColor(() => "orange")\n        .pointAltitude(0)\n        .pointRadius(0.02)\n        .pointsMerge(true);\n    });\n\n    return () => {\n      world._destructor();\n    };\n  }, []);\n\n  return <div ref={containerRef} />;\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u54CD\u5E94\u5F0F\u5BB9\u5668",children:"\u54CD\u5E94\u5F0F\u5BB9\u5668"}),"\n",(0,l.jsx)(n.p,{children:"\u521B\u5EFA\u81EA\u9002\u5E94\u5BB9\u5668\u7EC4\u4EF6:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:'import { useRef, useState, useEffect } from "react";\n\nexport function useContainerSize(containerRef: React.RefObject<HTMLDivElement>) {\n  const [size, setSize] = useState([0, 0]);\n\n  useEffect(() => {\n    if (!containerRef.current) return;\n\n    const observer = new ResizeObserver((entries) => {\n      const { width, height } = entries[0].contentRect;\n      setSize([width, height]);\n    });\n\n    observer.observe(containerRef.current);\n\n    return () => observer.disconnect();\n  }, [containerRef]);\n\n  return size;\n}\n\n// \u4F7F\u7528\u793A\u4F8B\nexport default function ResponsiveGlobe() {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [width, height] = useContainerSize(containerRef);\n\n  useEffect(() => {\n    if (!containerRef.current || !width || !height) return;\n\n    const world = new Globe(containerRef.current)\n      .width(width)\n      .height(height);\n\n    return () => {\n      world._destructor();\n    };\n  }, [width, height]);\n\n  return <div ref={containerRef} style={{ width: "100%", height: "600px" }} />;\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u5E94\u7528\u573A\u666F",children:"\u5E94\u7528\u573A\u666F"}),"\n",(0,l.jsx)(n.h3,{id:"\u5730\u7406\u6570\u636E\u53EF\u89C6\u5316",children:"\u5730\u7406\u6570\u636E\u53EF\u89C6\u5316"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u4EBA\u53E3\u5206\u5E03"}),": \u4F7F\u7528\u70ED\u529B\u56FE\u5C55\u793A\u4E16\u754C\u4EBA\u53E3\u5BC6\u5EA6\u5206\u5E03"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u5730\u9707\u6570\u636E"}),": \u7528\u70B9\u6807\u8BB0\u663E\u793A\u8FD1\u671F\u5730\u9707\u4F4D\u7F6E\u548C\u9707\u7EA7"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u6C14\u8C61\u6570\u636E"}),": \u5C55\u793A\u6C14\u6E29\u3001\u964D\u96E8\u91CF\u7B49\u6C14\u8C61\u6570\u636E\u7684\u5730\u7406\u5206\u5E03"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u8D44\u6E90\u5206\u5E03"}),": \u53EF\u89C6\u5316\u77FF\u4EA7\u3001\u80FD\u6E90\u7B49\u81EA\u7136\u8D44\u6E90\u7684\u5206\u5E03\u60C5\u51B5"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u7EDF\u8BA1\u6570\u636E"}),": \u5C55\u793A GDP\u3001\u6559\u80B2\u6C34\u5E73\u7B49\u56FD\u5BB6\u7EA7\u7EDF\u8BA1\u6570\u636E"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u7F51\u7EDC\u62D3\u6251\u5C55\u793A",children:"\u7F51\u7EDC\u62D3\u6251\u5C55\u793A"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u822A\u7EBF\u7F51\u7EDC"}),": \u53EF\u89C6\u5316\u56FD\u9645\u548C\u56FD\u5185\u822A\u7EBF\u7F51\u7EDC"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u4E92\u8054\u7F51\u8282\u70B9"}),": \u5C55\u793A\u5168\u7403\u4E92\u8054\u7F51\u8282\u70B9\u548C\u8FDE\u63A5\u5173\u7CFB"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u6570\u636E\u4E2D\u5FC3"}),": \u663E\u793A\u5168\u7403\u6570\u636E\u4E2D\u5FC3\u5206\u5E03\u548C\u7F51\u7EDC\u8FDE\u63A5"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u6D77\u5E95\u5149\u7F06"}),": \u7ED8\u5236\u5168\u7403\u6D77\u5E95\u5149\u7F06\u7F51\u7EDC"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u7269\u6D41\u7F51\u7EDC"}),": \u5C55\u793A\u7269\u6D41\u8282\u70B9\u548C\u8FD0\u8F93\u8DEF\u7EBF"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u5386\u53F2\u4E8B\u4EF6\u8FFD\u6EAF",children:"\u5386\u53F2\u4E8B\u4EF6\u8FFD\u6EAF"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u767B\u6708\u5730\u70B9"}),": \u6807\u8BB0\u5386\u53F2\u4E0A\u7684\u767B\u6708\u7740\u9646\u70B9"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u63A2\u9669\u8DEF\u7EBF"}),": \u5C55\u793A\u5386\u53F2\u63A2\u9669\u5BB6\u7684\u822A\u884C\u8DEF\u7EBF"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u6218\u4E89\u4E8B\u4EF6"}),": \u53EF\u89C6\u5316\u5386\u53F2\u6218\u4E89\u4E8B\u4EF6\u7684\u5730\u7406\u5206\u5E03"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u6587\u660E\u6F14\u8FDB"}),": \u5C55\u793A\u4EBA\u7C7B\u6587\u660E\u7684\u5730\u7406\u6269\u6563\u8FC7\u7A0B"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u8FC1\u5F99\u8DEF\u5F84"}),": \u53EF\u89C6\u5316\u52A8\u7269\u6216\u4EBA\u7C7B\u7684\u8FC1\u5F99\u8DEF\u5F84"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u5B9E\u65F6\u76D1\u63A7\u7CFB\u7EDF",children:"\u5B9E\u65F6\u76D1\u63A7\u7CFB\u7EDF"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u670D\u52A1\u5668\u72B6\u6001"}),": \u76D1\u63A7\u5168\u7403\u670D\u52A1\u5668\u7684\u8FD0\u884C\u72B6\u6001"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u7269\u6D41\u8FFD\u8E2A"}),": \u5B9E\u65F6\u8FFD\u8E2A\u8D27\u7269\u7684\u7269\u6D41\u4F4D\u7F6E"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u536B\u661F\u8F68\u9053"}),": \u5C55\u793A\u536B\u661F\u7684\u5B9E\u65F6\u8F68\u9053\u548C\u4F4D\u7F6E"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u98DE\u884C\u8FFD\u8E2A"}),": \u5B9E\u65F6\u663E\u793A\u98DE\u673A\u7684\u98DE\u884C\u4F4D\u7F6E\u548C\u822A\u7EBF"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u8230\u8239\u8FFD\u8E2A"}),": \u76D1\u63A7\u8239\u8236\u7684\u5B9E\u65F6\u4F4D\u7F6E\u548C\u822A\u7EBF"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u79D1\u5B66\u7814\u7A76",children:"\u79D1\u5B66\u7814\u7A76"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u5929\u6587\u73B0\u8C61"}),": \u6A21\u62DF\u663C\u591C\u8F6E\u56DE\u3001\u65E5\u98DF\u6708\u98DF\u7B49\u5929\u6587\u73B0\u8C61"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u6C14\u5019\u53D8\u5316"}),": \u53EF\u89C6\u5316\u5168\u7403\u6C14\u5019\u53D8\u5316\u8D8B\u52BF"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u5730\u8D28\u7814\u7A76"}),": \u5C55\u793A\u677F\u5757\u6784\u9020\u3001\u5730\u8D28\u6D3B\u52A8\u7B49\u6570\u636E"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u6D77\u6D0B\u7814\u7A76"}),": \u53EF\u89C6\u5316\u6D0B\u6D41\u3001\u6D77\u6E29\u7B49\u6D77\u6D0B\u6570\u636E"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u751F\u6001\u7814\u7A76"}),": \u5C55\u793A\u7269\u79CD\u5206\u5E03\u3001\u751F\u6001\u7CFB\u7EDF\u53D8\u5316\u7B49"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u6027\u80FD\u4F18\u5316\u6280\u5DE7",children:"\u6027\u80FD\u4F18\u5316\u6280\u5DE7"}),"\n",(0,l.jsx)(n.h3,{id:"\u6570\u636E\u4F18\u5316",children:"\u6570\u636E\u4F18\u5316"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"\u70B9\u6570\u636E\u5408\u5E76"})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:"// \u2705 \u63A8\u8350:\u5408\u5E76\u70B9\u51E0\u4F55\u4F53\u4EE5\u63D0\u5347\u6027\u80FD\nglobe.pointsMerge(true);\n\n// \u274C \u907F\u514D:\u8FC7\u591A\u72EC\u7ACB\u70B9\u5BF9\u8C61\nglobe.pointsMerge(false); // \u9ED8\u8BA4\u503C,\u6BCF\u4E2A\u70B9\u662F\u72EC\u7ACB\u5BF9\u8C61\n"})}),"\n",(0,l.jsxs)(n.ol,{start:"2",children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"\u6570\u636E\u7CBE\u7B80"})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:"// \u2705 \u63A8\u8350:\u53EA\u4FDD\u7559\u5FC5\u8981\u7684\u6570\u636E\u5B57\u6BB5\nconst optimizedData = rawData.map(({ lat, lng, value }) => ({\n  lat,\n  lng,\n  value,\n}));\n\n// \u274C \u907F\u514D:\u643A\u5E26\u5927\u91CF\u5197\u4F59\u6570\u636E\nconst unoptimizedData = rawData; // \u5305\u542B\u5927\u91CF\u65E0\u7528\u5B57\u6BB5\n"})}),"\n",(0,l.jsxs)(n.ol,{start:"3",children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"\u6309\u9700\u52A0\u8F7D"})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:"// \u2705 \u63A8\u8350:\u6839\u636E\u89C6\u56FE\u8303\u56F4\u52A8\u6001\u52A0\u8F7D\u6570\u636E\nconst visibleData = allData.filter((d) => isInViewport(d.lat, d.lng));\nglobe.pointsData(visibleData);\n\n// \u89C6\u56FE\u53D8\u5316\u65F6\u66F4\u65B0\u6570\u636E\nglobe.onZoom(() => {\n  const newVisibleData = allData.filter((d) => isInViewport(d.lat, d.lng));\n  globe.pointsData(newVisibleData);\n});\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u6E32\u67D3\u4F18\u5316",children:"\u6E32\u67D3\u4F18\u5316"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"LOD (Level of Detail)"})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:"// \u6839\u636E\u76F8\u673A\u8DDD\u79BB\u8C03\u6574\u7EC6\u8282\u7EA7\u522B\nglobe.onZoom(({ altitude }) => {\n  if (altitude > 2) {\n    // \u8FDC\u8DDD\u79BB:\u964D\u4F4E\u5206\u8FA8\u7387\n    globe.hexPolygonResolution(2);\n    globe.pointRadius(0.1);\n  } else {\n    // \u8FD1\u8DDD\u79BB:\u63D0\u9AD8\u5206\u8FA8\u7387\n    globe.hexPolygonResolution(4);\n    globe.pointRadius(0.3);\n  }\n});\n"})}),"\n",(0,l.jsxs)(n.ol,{start:"2",children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"\u63A7\u5236\u52A8\u753B\u6570\u91CF"})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:"// \u2705 \u63A8\u8350:\u9650\u5236\u540C\u65F6\u52A8\u753B\u7684\u5143\u7D20\u6570\u91CF\nconst MAX_ANIMATED_ARCS = 50;\nconst visibleArcs = allArcs.slice(0, MAX_ANIMATED_ARCS);\nglobe.arcsData(visibleArcs);\n\n// \u274C \u907F\u514D:\u8FC7\u591A\u52A8\u753B\u5143\u7D20\nglobe.arcsData(allArcs); // \u5982\u679C allArcs \u6709\u6570\u5343\u6761\n"})}),"\n",(0,l.jsxs)(n.ol,{start:"3",children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"\u7EB9\u7406\u4F18\u5316"})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:'// \u2705 \u63A8\u8350:\u4F7F\u7528\u538B\u7F29\u7EB9\u7406\u548C\u9002\u5F53\u7684\u5206\u8FA8\u7387\nglobe\n  .globeImageUrl("/img/earth-2k.jpg") // 2K \u7EB9\u7406\n  .bumpImageUrl("/img/earth-topology-1k.jpg"); // 1K \u51F9\u51F8\u8D34\u56FE\n\n// \u274C \u907F\u514D:\u8FC7\u9AD8\u5206\u8FA8\u7387\u7EB9\u7406\nglobe\n  .globeImageUrl("/img/earth-8k.jpg") // 8K \u7EB9\u7406,\u6027\u80FD\u5F00\u9500\u5927\n  .bumpImageUrl("/img/earth-topology-4k.jpg");\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u5185\u5B58\u7BA1\u7406",children:"\u5185\u5B58\u7BA1\u7406"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"\u53CA\u65F6\u6E05\u7406\u8D44\u6E90"})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:"// React \u7EC4\u4EF6\u5378\u8F7D\u65F6\u6E05\u7406\nuseEffect(() => {\n  const globe = new Globe(containerRef.current);\n\n  return () => {\n    // \u6E05\u7406 Globe \u5B9E\u4F8B\n    globe._destructor();\n  };\n}, []);\n"})}),"\n",(0,l.jsxs)(n.ol,{start:"2",children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"\u907F\u514D\u5185\u5B58\u6CC4\u6F0F"})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:"// \u2705 \u63A8\u8350:\u79FB\u9664\u4E8B\u4EF6\u76D1\u542C\u5668\nconst handleClick = (point) => {\n  console.log(point);\n};\n\nglobe.onPointClick(handleClick);\n\n// \u6E05\u7406\u65F6\nglobe.onPointClick(null);\n\n// \u2705 \u63A8\u8350:\u6E05\u7A7A\u6570\u636E\u5F15\u7528\nglobe.pointsData([]);\nglobe.arcsData([]);\nglobe.pathsData([]);\n"})}),"\n",(0,l.jsxs)(n.ol,{start:"3",children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"\u6570\u636E\u7F13\u5B58"})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:"// \u2705 \u63A8\u8350:\u7F13\u5B58\u9759\u6001\u6570\u636E\nconst cachedCountries = useMemo(() => {\n  return loadCountryData();\n}, []);\n\nglobe.hexPolygonsData(cachedCountries);\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u4EA4\u4E92\u4F18\u5316",children:"\u4EA4\u4E92\u4F18\u5316"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"\u8282\u6D41\u9632\u6296"})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:'import { throttle } from "lodash";\n\n// \u2705 \u63A8\u8350:\u8282\u6D41\u5904\u7406\u9891\u7E41\u89E6\u53D1\u7684\u4E8B\u4EF6\nconst handleZoom = throttle(({ altitude, lat, lng }) => {\n  updateVisibleData(altitude, lat, lng);\n}, 100);\n\nglobe.onZoom(handleZoom);\n'})}),"\n",(0,l.jsxs)(n.ol,{start:"2",children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"\u5EF6\u8FDF\u52A0\u8F7D"})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:'// \u2705 \u63A8\u8350:\u5EF6\u8FDF\u52A0\u8F7D\u975E\u5173\u952E\u6570\u636E\nuseEffect(() => {\n  // \u5148\u52A0\u8F7D\u57FA\u7840\u5730\u7403\n  const globe = new Globe(containerRef.current)\n    .globeImageUrl("/img/earth.jpg");\n\n  // \u5EF6\u8FDF\u52A0\u8F7D\u6570\u636E\n  setTimeout(() => {\n    loadPointsData().then((data) => {\n      globe.pointsData(data);\n    });\n  }, 1000);\n}, []);\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u5E38\u89C1\u95EE\u9898",children:"\u5E38\u89C1\u95EE\u9898"}),"\n",(0,l.jsx)(n.h3,{id:"globe-\u4E0D\u663E\u793A",children:"Globe \u4E0D\u663E\u793A"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u539F\u56E0"}),":\u5BB9\u5668\u5C3A\u5BF8\u672A\u8BBE\u7F6E\u3001\u7EB9\u7406\u8DEF\u5F84\u9519\u8BEF\u3001\u6216\u521D\u59CB\u5316\u65F6\u673A\u4E0D\u5BF9\u3002"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u89E3\u51B3\u65B9\u6848"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:'// 1. \u786E\u4FDD\u5BB9\u5668\u6709\u660E\u786E\u7684\u5C3A\u5BF8\n<div ref={containerRef} style={{ width: "800px", height: "600px" }} />\n\n// 2. \u68C0\u67E5\u7EB9\u7406\u8DEF\u5F84\u662F\u5426\u6B63\u786E\nglobe.globeImageUrl("/three-globe/example/img/earth-night.png");\n\n// 3. \u786E\u4FDD\u5728\u5BB9\u5668\u6302\u8F7D\u540E\u521D\u59CB\u5316\nuseEffect(() => {\n  if (!containerRef.current) return;\n  const globe = new Globe(containerRef.current);\n  // ...\n}, []); // \u4F9D\u8D56\u6570\u7EC4\u4E3A\u7A7A,\u786E\u4FDD\u53EA\u521D\u59CB\u5316\u4E00\u6B21\n\n// 4. \u68C0\u67E5 Three.js \u7248\u672C\u517C\u5BB9\u6027\n// three-globe \u9700\u8981 Three.js r128+\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u6570\u636E\u4E0D\u66F4\u65B0",children:"\u6570\u636E\u4E0D\u66F4\u65B0"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u539F\u56E0"}),":\u6570\u636E\u5F15\u7528\u672A\u6539\u53D8\u3001\u6216\u672A\u8C03\u7528\u8FC7\u6E21\u52A8\u753B\u3002"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u89E3\u51B3\u65B9\u6848"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:"// \u2705 \u63A8\u8350:\u521B\u5EFA\u65B0\u6570\u7EC4\u89E6\u53D1\u66F4\u65B0\nconst newData = [...oldData, newPoint];\nglobe.pointsData(newData);\n\n// \u274C \u907F\u514D:\u76F4\u63A5\u4FEE\u6539\u6570\u7EC4\noldData.push(newPoint);\nglobe.pointsData(oldData); // \u53EF\u80FD\u4E0D\u4F1A\u89E6\u53D1\u66F4\u65B0\n\n// \u2705 \u63A8\u8350:\u8BBE\u7F6E\u8FC7\u6E21\u65F6\u95F4\nglobe\n  .pointsData(newData)\n  .pointsTransitionDuration(1000); // 1\u79D2\u8FC7\u6E21\u52A8\u753B\n\n// \u5F3A\u5236\u91CD\u65B0\u6E32\u67D3\nglobe.pointsData([]); // \u5148\u6E05\u7A7A\nsetTimeout(() => {\n  globe.pointsData(newData); // \u518D\u8BBE\u7F6E\u65B0\u6570\u636E\n}, 0);\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u6027\u80FD\u5361\u987F",children:"\u6027\u80FD\u5361\u987F"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u539F\u56E0"}),":\u6570\u636E\u91CF\u8FC7\u5927\u3001\u52A8\u753B\u8FC7\u591A\u3001\u6216\u7EB9\u7406\u5206\u8FA8\u7387\u8FC7\u9AD8\u3002"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u89E3\u51B3\u65B9\u6848"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:'// 1. \u9650\u5236\u6570\u636E\u91CF\nconst MAX_POINTS = 1000;\nconst limitedData = allData.slice(0, MAX_POINTS);\nglobe.pointsData(limitedData);\n\n// 2. \u5408\u5E76\u51E0\u4F55\u4F53\nglobe.pointsMerge(true);\nglobe.arcsMerge(true);\n\n// 3. \u964D\u4F4E\u7EB9\u7406\u5206\u8FA8\u7387\nglobe.globeImageUrl("/img/earth-2k.jpg"); // \u4F7F\u7528 2K \u800C\u4E0D\u662F 8K\n\n// 4. \u51CF\u5C11\u52A8\u753B\nglobe.arcsTransitionDuration(0); // \u7981\u7528\u8FC7\u6E21\u52A8\u753B\n\n// 5. \u4F7F\u7528 Web Worker \u5904\u7406\u6570\u636E\nconst worker = new Worker("data-processor.js");\nworker.postMessage(rawData);\nworker.onmessage = (e) => {\n  globe.pointsData(e.data);\n};\n\n// 6. \u76D1\u63A7\u6027\u80FD\nconst stats = new Stats();\ndocument.body.appendChild(stats.dom);\nfunction animate() {\n  stats.begin();\n  // globe render\n  stats.end();\n  requestAnimationFrame(animate);\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"react-\u4E2D\u91CD\u590D\u6E32\u67D3",children:"React \u4E2D\u91CD\u590D\u6E32\u67D3"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u539F\u56E0"}),":\u4F9D\u8D56\u9879\u8BBE\u7F6E\u4E0D\u5F53\u5BFC\u81F4\u91CD\u590D\u521D\u59CB\u5316\u3002"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u89E3\u51B3\u65B9\u6848"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:"// \u2705 \u63A8\u8350:\u4F7F\u7528 ref \u5B58\u50A8 Globe \u5B9E\u4F8B\nconst globeRef = useRef<GlobeInstance | null>(null);\n\nuseEffect(() => {\n  if (!containerRef.current) return;\n\n  // \u907F\u514D\u91CD\u590D\u521B\u5EFA\n  if (!globeRef.current) {\n    globeRef.current = new Globe(containerRef.current)\n      .width(800)\n      .height(600);\n  }\n\n  return () => {\n    if (globeRef.current) {\n      globeRef.current._destructor();\n      globeRef.current = null;\n    }\n  };\n}, []); // \u7A7A\u4F9D\u8D56\u6570\u7EC4,\u53EA\u8FD0\u884C\u4E00\u6B21\n\n// \u6570\u636E\u66F4\u65B0\u65F6\u53EA\u66F4\u65B0\u6570\u636E,\u4E0D\u91CD\u65B0\u521B\u5EFA Globe\nuseEffect(() => {\n  if (globeRef.current) {\n    globeRef.current.pointsData(data);\n  }\n}, [data]);\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u4EA4\u4E92\u4E8B\u4EF6\u4E0D\u54CD\u5E94",children:"\u4EA4\u4E92\u4E8B\u4EF6\u4E0D\u54CD\u5E94"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u539F\u56E0"}),":\u4E8B\u4EF6\u672A\u6B63\u786E\u7ED1\u5B9A\u3001\u6216\u88AB\u5176\u4ED6\u5143\u7D20\u906E\u6321\u3002"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u89E3\u51B3\u65B9\u6848"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:'// 1. \u786E\u4FDD\u6B63\u786E\u7ED1\u5B9A\u4E8B\u4EF6\nglobe\n  .onPointClick((point, event) => {\n    console.log("Clicked point:", point);\n  })\n  .onPointHover((point, prevPoint) => {\n    console.log("Hovering:", point);\n  });\n\n// 2. \u68C0\u67E5 CSS pointer-events\n<div style={{ pointerEvents: "all" }}>\n  <div ref={containerRef} />\n</div>\n\n// 3. \u786E\u4FDD Globe \u5728\u6700\u4E0A\u5C42\nglobe.scene().traverseVisible((object) => {\n  if (object.isMesh) {\n    object.raycast = THREE.Mesh.prototype.raycast;\n  }\n});\n\n// 4. \u4F7F\u7528 enablePointerInteraction\nglobe.enablePointerInteraction(true); // react-globe.gl\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u81EA\u5B9A\u4E49-shader-\u4E0D\u5DE5\u4F5C",children:"\u81EA\u5B9A\u4E49 Shader \u4E0D\u5DE5\u4F5C"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u539F\u56E0"}),":Shader"," \u8BED\u6CD5\u9519\u8BEF\u3001uniform \u672A\u6B63\u786E\u4F20\u9012\u3001\u6216 Three.js \u7248\u672C\u4E0D\u517C\u5BB9\u3002"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u89E3\u51B3\u65B9\u6848"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:'// 1. \u68C0\u67E5 Shader \u8BED\u6CD5\nconst material = new ShaderMaterial({\n  vertexShader: `\n    varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    }\n  `,\n  fragmentShader: `\n    uniform sampler2D texture;\n    varying vec2 vUv;\n    void main() {\n      gl_FragColor = texture2D(texture, vUv);\n    }\n  `,\n  uniforms: {\n    texture: { value: textureLoader.load("/img/earth.jpg") },\n  },\n});\n\n// 2. \u786E\u4FDD uniform \u6B63\u786E\u66F4\u65B0\nmaterial.uniforms.texture.value = newTexture;\nmaterial.uniformsNeedUpdate = true;\n\n// 3. \u68C0\u67E5 Three.js \u7248\u672C\nconsole.log(THREE.REVISION); // \u5E94\u8BE5\u662F r128+\n\n// 4. \u8C03\u8BD5 Shader \u7F16\u8BD1\u9519\u8BEF\nconst gl = globe.renderer().getContext();\nconsole.log(gl.getShaderInfoLog(shaderObject));\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u5185\u5B58\u6CC4\u6F0F",children:"\u5185\u5B58\u6CC4\u6F0F"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u539F\u56E0"}),":Globe"," \u5B9E\u4F8B\u672A\u9500\u6BC1\u3001\u7EB9\u7406\u672A\u91CA\u653E\u3001\u6216\u4E8B\u4EF6\u76D1\u542C\u5668\u672A\u79FB\u9664\u3002"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u89E3\u51B3\u65B9\u6848"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:'// \u5B8C\u6574\u7684\u6E05\u7406\u6D41\u7A0B\nuseEffect(() => {\n  const globe = new Globe(containerRef.current);\n\n  return () => {\n    // 1. \u79FB\u9664\u4E8B\u4EF6\u76D1\u542C\u5668\n    globe.onPointClick(null);\n    globe.onPointHover(null);\n    globe.onZoom(null);\n\n    // 2. \u6E05\u7A7A\u6570\u636E\n    globe.pointsData([]);\n    globe.arcsData([]);\n    globe.pathsData([]);\n    globe.hexPolygonsData([]);\n\n    // 3. \u9500\u6BC1 Globe \u5B9E\u4F8B\n    if (globe && globe._destructor) {\n      globe._destructor();\n    }\n\n    // 4. \u6E05\u7A7A\u5BB9\u5668\n    if (containerRef.current) {\n      containerRef.current.innerHTML = "";\n    }\n  };\n}, []);\n\n// \u76D1\u63A7\u5185\u5B58\u4F7F\u7528\nif (performance.memory) {\n  console.log("Memory:", performance.memory.usedJSHeapSize / 1048576, "MB");\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"typescript-\u7C7B\u578B\u9519\u8BEF",children:"TypeScript \u7C7B\u578B\u9519\u8BEF"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u539F\u56E0"}),":\u7F3A\u5C11\u7C7B\u578B\u5B9A\u4E49\u6216\u7C7B\u578B\u5B9A\u4E49\u4E0D\u5B8C\u6574\u3002"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u89E3\u51B3\u65B9\u6848"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:'// 1. \u5B89\u88C5\u7C7B\u578B\u5B9A\u4E49\npnpm add @types/three\n\n// 2. \u4E3A Globe \u6570\u636E\u5B9A\u4E49\u7C7B\u578B\ninterface PointData {\n  lat: number;\n  lng: number;\n  size: number;\n  color: string;\n}\n\ninterface ArcData {\n  startLat: number;\n  startLng: number;\n  endLat: number;\n  endLng: number;\n  color: string | string[];\n}\n\n// 3. \u4F7F\u7528\u7C7B\u578B\u65AD\u8A00\nglobe.pointsData(data as PointData[]);\n\n// 4. \u6269\u5C55\u7C7B\u578B\u5B9A\u4E49\ndeclare module "three-globe" {\n  export default class Globe extends Object3D {\n    pointsData(data: any[]): this;\n    arcsData(data: any[]): this;\n    // ... \u5176\u4ED6\u65B9\u6CD5\n  }\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u6CE8\u610F\u4E8B\u9879",children:"\u6CE8\u610F\u4E8B\u9879"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u7248\u672C\u517C\u5BB9\u6027"}),":",(0,l.jsx)(n.code,{children:"three-globe"})," \u9700\u8981 Three.js r128 \u6216\u66F4\u9AD8\u7248\u672C,\u786E\u4FDD\u7248\u672C\u5339\u914D"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u7EB9\u7406\u8DEF\u5F84"}),":\u786E\u4FDD\u7EB9\u7406\u56FE\u7247\u8DEF\u5F84\u6B63\u786E,\u5EFA\u8BAE\u4F7F\u7528\u7EDD\u5BF9\u8DEF\u5F84\u6216\u4ECE public \u76EE\u5F55\u5F15\u7528"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u8D44\u6E90\u6E05\u7406"}),":\u7EC4\u4EF6\u5378\u8F7D\u65F6\u52A1\u5FC5\u8C03\u7528 ",(0,l.jsx)(n.code,{children:"_destructor()"})," \u65B9\u6CD5\u6E05\u7406\u8D44\u6E90,\u907F\u514D\u5185\u5B58\u6CC4\u6F0F"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u6570\u636E\u683C\u5F0F"}),":\u70B9\u6570\u636E\u9700\u8981 ",(0,l.jsx)(n.code,{children:"lat"})," \u548C ",(0,l.jsx)(n.code,{children:"lng"})," \u5B57\u6BB5,\u5F27\u7EBF\u9700\u8981\u8D77\u6B62\u70B9\u5750\u6807"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u6027\u80FD\u8003\u8651"}),":\u907F\u514D\u540C\u65F6\u6E32\u67D3\u8FC7\u591A\u5143\u7D20,\u5EFA\u8BAE\u70B9\u6570\u636E\u4E0D\u8D85\u8FC7 5000 \u4E2A,\u5F27\u7EBF\u4E0D\u8D85\u8FC7 1000 \u6761"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u52A8\u753B\u6027\u80FD"}),":\u865A\u7EBF\u52A8\u753B\u4F1A\u6D88\u8017\u8F83\u591A\u6027\u80FD,\u5927\u91CF\u52A8\u753B\u65F6\u8003\u8651\u964D\u4F4E\u52A8\u753B\u901F\u5EA6\u6216\u7981\u7528\u90E8\u5206\u52A8\u753B"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u54CD\u5E94\u5F0F\u5E03\u5C40"}),":\u4F7F\u7528 ",(0,l.jsx)(n.code,{children:"width()"})," \u548C ",(0,l.jsx)(n.code,{children:"height()"})," \u65B9\u6CD5\u8BBE\u7F6E\u5C3A\u5BF8,\u914D\u5408 ResizeObserver \u5B9E\u73B0\u54CD\u5E94\u5F0F"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u5750\u6807\u7CFB\u7EDF"}),":\u7ECF\u5EA6\u8303\u56F4 -180 \u5230 180,\u7EAC\u5EA6\u8303\u56F4 -90 \u5230 90"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"GeoJSON \u683C\u5F0F"}),":\u516D\u8FB9\u5F62\u591A\u8FB9\u5F62\u9700\u8981\u6807\u51C6 GeoJSON Feature Collection \u683C\u5F0F"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u6D4F\u89C8\u5668\u517C\u5BB9\u6027"}),":\u9700\u8981\u652F\u6301 WebGL \u7684\u73B0\u4EE3\u6D4F\u89C8\u5668,IE11 \u9700\u8981 polyfill"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u81EA\u5B9A\u4E49\u6750\u8D28"}),":\u4F7F\u7528\u81EA\u5B9A\u4E49 Shader \u65F6\u6CE8\u610F GLSL \u7248\u672C\u517C\u5BB9\u6027"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u4E8B\u4EF6\u5904\u7406"}),":\u70B9\u51FB\u548C\u60AC\u505C\u4E8B\u4EF6\u53EF\u80FD\u4F1A\u5F71\u54CD\u6027\u80FD,\u5927\u91CF\u6570\u636E\u65F6\u8003\u8651\u8282\u6D41\u5904\u7406"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Three.js \u5B9E\u4F8B"}),":\u53EF\u901A\u8FC7 ",(0,l.jsx)(n.code,{children:"globe.scene()"}),"\u3001",(0,l.jsx)(n.code,{children:"globe.camera()"}),"\u3001",(0,l.jsx)(n.code,{children:"globe.renderer()"})," \u8BBF\u95EE\u5E95\u5C42 Three.js \u5BF9\u8C61"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"React \u96C6\u6210"}),":\u5728 React Three Fiber \u4E2D\u4F7F\u7528 ",(0,l.jsx)(n.code,{children:"three-globe"})," \u9700\u8981\u7528 ",(0,l.jsx)(n.code,{children:"<primitive object={globe} />"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u6570\u636E\u66F4\u65B0"}),":\u66F4\u65B0\u6570\u636E\u65F6\u521B\u5EFA\u65B0\u6570\u7EC4,\u907F\u514D\u76F4\u63A5\u4FEE\u6539\u539F\u6570\u7EC4\u5BFC\u81F4\u4E0D\u66F4\u65B0"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u53C2\u8003\u8D44\u6599",children:"\u53C2\u8003\u8D44\u6599"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://github.com/vasturiano/globe.gl",children:"Globe.gl \u5B98\u65B9\u6587\u6863"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://github.com/vasturiano/three-globe",children:"three-globe \u4ED3\u5E93"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://github.com/vasturiano/react-globe.gl",children:"react-globe.gl \u4ED3\u5E93"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://threejs.org/docs/",children:"Three.js \u5B98\u65B9\u6587\u6863"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://docs.pmnd.rs/react-three-fiber/",children:"React Three Fiber \u6587\u6863"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://webglfundamentals.org/",children:"WebGL \u57FA\u7840\u6559\u7A0B"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://geojson.org/",children:"GeoJSON \u89C4\u8303"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://github.com/d3/d3-geo",children:"D3.js \u5730\u7406\u6295\u5F71"})}),"\n"]})]})}function w(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(y,{...e})}):y(e)}},54325(e,n,t){let r,l;t.d(n,{E:()=>f});var s=t(44320),i=t(57140),o=t(84668),a=t(67199),c=t(45225);let d=new a.Pq0,h=new a.Pq0,g=new a.Pq0,x=new a.I9Y;function u(e,n,t){let r=d.setFromMatrixPosition(e.matrixWorld);r.project(n);let l=t.width/2,s=t.height/2;return[r.x*l+l,-(r.y*s)+s]}let j=e=>1e-10>Math.abs(e)?0:e;function m(e,n,t=""){let r="matrix3d(";for(let t=0;16!==t;t++)r+=j(n[t]*e.elements[t])+(15!==t?",":")");return t+r}let p=(r=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],e=>m(e,r)),b=(l=e=>[1/e,1/e,1/e,1,-1/e,-1/e,-1/e,-1,1/e,1/e,1/e,1,1,1,1,1],(e,n)=>m(e,l(n),"translate(-50%,-50%)")),f=i.forwardRef(({children:e,eps:n=.001,style:t,className:r,prepend:l,center:m,fullscreen:f,portal:v,distanceFactor:y,sprite:w=!1,transform:D=!1,occlude:P,onOcclude:M,castShadow:R,receiveShadow:S,material:T,geometry:G,zIndexRange:N=[0x1000037,0],calculatePosition:A=u,as:E="div",wrapperClass:L,pointerEvents:C="auto",...I},k)=>{let{gl:z,camera:U,scene:O,size:W,raycaster:$,events:_,viewport:F}=(0,c.C)(),[H]=i.useState(()=>document.createElement(E)),J=i.useRef(null),V=i.useRef(null),q=i.useRef(0),Y=i.useRef([0,0]),Z=i.useRef(null),B=i.useRef(null),K=(null==v?void 0:v.current)||_.connected||z.domElement.parentNode,X=i.useRef(null),Q=i.useRef(!1),ee=i.useMemo(()=>{var e;return P&&"blending"!==P||Array.isArray(P)&&P.length&&(e=P[0])&&"object"==typeof e&&"current"in e},[P]);i.useLayoutEffect(()=>{let e=z.domElement;P&&"blending"===P?(e.style.zIndex=`${Math.floor(N[0]/2)}`,e.style.position="absolute",e.style.pointerEvents="none"):(e.style.zIndex=null,e.style.position=null,e.style.pointerEvents=null)},[P]),i.useLayoutEffect(()=>{if(V.current){let e=J.current=o.createRoot(H);if(O.updateMatrixWorld(),D)H.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{let e=A(V.current,U,W);H.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${e[0]}px,${e[1]}px,0);transform-origin:0 0;`}return K&&(l?K.prepend(H):K.appendChild(H)),()=>{K&&K.removeChild(H),e.unmount()}}},[K,D]),i.useLayoutEffect(()=>{L&&(H.className=L)},[L]);let en=i.useMemo(()=>D?{position:"absolute",top:0,left:0,width:W.width,height:W.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:m?"translate3d(-50%,-50%,0)":"none",...f&&{top:-W.height/2,left:-W.width/2,width:W.width,height:W.height},...t},[t,m,f,W,D]),et=i.useMemo(()=>({position:"absolute",pointerEvents:C}),[C]);i.useLayoutEffect(()=>{var n,l;Q.current=!1,D?null==(n=J.current)||n.render(i.createElement("div",{ref:Z,style:en},i.createElement("div",{ref:B,style:et},i.createElement("div",{ref:k,className:r,style:t,children:e})))):null==(l=J.current)||l.render(i.createElement("div",{ref:k,style:en,className:r,children:e}))});let er=i.useRef(!0);(0,c.D)(e=>{if(V.current){U.updateMatrixWorld(),V.current.updateWorldMatrix(!0,!1);let e=D?Y.current:A(V.current,U,W);if(D||Math.abs(q.current-U.zoom)>n||Math.abs(Y.current[0]-e[0])>n||Math.abs(Y.current[1]-e[1])>n){var t;let n,r,l,s,i=(t=V.current,n=d.setFromMatrixPosition(t.matrixWorld),r=h.setFromMatrixPosition(U.matrixWorld),l=n.sub(r),s=U.getWorldDirection(g),l.angleTo(s)>Math.PI/2),o=!1;ee&&(Array.isArray(P)?o=P.map(e=>e.current):"blending"!==P&&(o=[O]));let c=er.current;o?er.current=function(e,n,t,r){let l=d.setFromMatrixPosition(e.matrixWorld),s=l.clone();s.project(n),x.set(s.x,s.y),t.setFromCamera(x,n);let i=t.intersectObjects(r,!0);if(i.length){let e=i[0].distance;return l.distanceTo(t.ray.origin)<e}return!0}(V.current,U,$,o)&&!i:er.current=!i,c!==er.current&&(M?M(!er.current):H.style.display=er.current?"block":"none");let u=Math.floor(N[0]/2),m=P?ee?[N[0],u]:[u-1,0]:N;if(H.style.zIndex=`${function(e,n,t){if(n instanceof a.ubm||n instanceof a.qUd){let r=d.setFromMatrixPosition(e.matrixWorld),l=h.setFromMatrixPosition(n.matrixWorld),s=r.distanceTo(l),i=(t[1]-t[0])/(n.far-n.near),o=t[1]-i*n.far;return Math.round(i*s+o)}}(V.current,U,m)}`,D){let[e,n]=[W.width/2,W.height/2],t=U.projectionMatrix.elements[5]*n,{isOrthographicCamera:r,top:l,left:s,bottom:i,right:o}=U,a=p(U.matrixWorldInverse),c=r?`scale(${t})translate(${j(-(o+s)/2)}px,${j((l+i)/2)}px)`:`translateZ(${t}px)`,d=V.current.matrixWorld;w&&((d=U.matrixWorldInverse.clone().transpose().copyPosition(d).scale(V.current.scale)).elements[3]=d.elements[7]=d.elements[11]=0,d.elements[15]=1),H.style.width=W.width+"px",H.style.height=W.height+"px",H.style.perspective=r?"":`${t}px`,Z.current&&B.current&&(Z.current.style.transform=`${c}${a}translate(${e}px,${n}px)`,B.current.style.transform=b(d,1/((y||10)/400)))}else{let n=void 0===y?1:function(e,n){if(n instanceof a.qUd)return n.zoom;if(!(n instanceof a.ubm))return 1;{let t=d.setFromMatrixPosition(e.matrixWorld),r=h.setFromMatrixPosition(n.matrixWorld);return 1/(2*Math.tan(n.fov*Math.PI/180/2)*t.distanceTo(r))}}(V.current,U)*y;H.style.transform=`translate3d(${e[0]}px,${e[1]}px,0) scale(${n})`}Y.current=e,q.current=U.zoom}}if(!ee&&X.current&&!Q.current)if(D){if(Z.current){let e=Z.current.children[0];if(null!=e&&e.clientWidth&&null!=e&&e.clientHeight){let{isOrthographicCamera:n}=U;if(n||G)I.scale&&(Array.isArray(I.scale)?I.scale instanceof a.Pq0?X.current.scale.copy(I.scale.clone().divideScalar(1)):X.current.scale.set(1/I.scale[0],1/I.scale[1],1/I.scale[2]):X.current.scale.setScalar(1/I.scale));else{let n=(y||10)/400,t=e.clientWidth*n,r=e.clientHeight*n;X.current.scale.set(t,r,1)}Q.current=!0}}}else{let n=H.children[0];if(null!=n&&n.clientWidth&&null!=n&&n.clientHeight){let e=1/F.factor,t=n.clientWidth*e,r=n.clientHeight*e;X.current.scale.set(t,r,1),Q.current=!0}X.current.lookAt(e.camera.position)}});let el=i.useMemo(()=>({vertexShader:D?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[D]);return i.createElement("group",(0,s.A)({},I,{ref:V}),P&&!ee&&i.createElement("mesh",{castShadow:R,receiveShadow:S,ref:X},G||i.createElement("planeGeometry",null),T||i.createElement("shaderMaterial",{side:a.$EB,vertexShader:el.vertexShader,fragmentShader:el.fragmentShader})))})},8528(e,n,t){t.d(n,{A:()=>s});var r=t(35656);t(57140);var l=t(80517);function s({children:e,fallback:n}){return(0,l.A)()?(0,r.jsx)(r.Fragment,{children:e?.()}):n??null}},79457(e,n,t){t.d(n,{A:()=>l});var r=t(35656);function l({loadText:e="Loading..."}){return(0,r.jsxs)("div",{className:"tw:absolute tw:left-1/2 tw:top-1/2 tw:-translate-1/2",children:[(0,r.jsxs)("div",{className:"tw:flex tw:flex-col tw:items-center tw:justify-center",children:[(0,r.jsxs)("div",{className:"tw:relative tw:w-20 tw:h-20 tw:mb-6",children:[(0,r.jsx)("div",{className:"tw:absolute tw:inset-0 tw:border-4 tw:border-primary tw:border-t-transparent tw:rounded-full tw:animate-spin"}),(0,r.jsx)("div",{className:"tw:absolute tw:inset-2 tw:border-4 tw:border-secondary tw:border-b-transparent tw:rounded-full animate-spin-reverse"})]}),(0,r.jsx)("div",{className:"tw:text-base-content tw:text-opacity-80 tw:text-sm tw:mb-1",children:e})]}),(0,r.jsx)("style",{children:`
					@keyframes spin-reverse {
						from {
							transform: rotate(360deg);
						}
						to {
							transform: rotate(0deg);
						}
					}
					.animate-spin-reverse {
						animation: spin-reverse 1.5s linear infinite;
					}
				`})]})}}}]);