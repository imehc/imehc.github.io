import{a as t}from"./chunk-XO2FNJZK.js";import{j as n,k as a}from"./chunk-IB27QQGF.js";import{a as r,c as o}from"./chunk-KCR7AORG.js";import{a as s}from"./chunk-QDJTHWTA.js";import{a as e}from"./chunk-2YWR3G22.js";import{a as i}from"./chunk-HTSQLHXI.js";import{e as l}from"./chunk-JDAHMWM5.js";var h=Math.cos,u=Math.sin,g=Math.sqrt,c={};c.computePosition=function(t,n,a,r,o,s,e){let i=n.radiiSquared,c=t.nwCorner,C=t.boundingRectangle,S=c.latitude-t.granYCos*r+o*t.granXSin,d=h(S),m=u(S),w=i.z*m,p=c.longitude+r*t.granYSin+o*t.granXCos,X=d*h(p),f=d*u(p),O=i.x*X,Y=i.y*f,_=g(O*X+Y*f+w*m);if(s.x=O/_,s.y=Y/_,s.z=w/_,a){let n=t.stNwCorner;l(n)?(S=n.latitude-t.stGranYCos*r+o*t.stGranXSin,e.x=((p=n.longitude+r*t.stGranYSin+o*t.stGranXCos)-t.stWest)*t.lonScalar,e.y=(S-t.stSouth)*t.latScalar):(e.x=(p-C.west)*t.lonScalar,e.y=(S-C.south)*t.latScalar)}};var C=new a,S=new s,d=new r,m=new s,w=new t;function p(t,n,r,e,i,l,h){let u=Math.cos(n),g=e*u,c=r*u,d=Math.sin(n),p=e*d,X=r*d;w._ellipsoid=o.default,S=w.project(t,S),S=s.subtract(S,m,S);let f=a.fromRotation(n,C);S=a.multiplyByVector(f,S,S),S=s.add(S,m,S),t=w.unproject(S,t),l-=1,h-=1;let O=t.latitude,Y=O+l*X,_=O-g*h,M=O-g*h+l*X,R=Math.max(O,Y,_,M),W=Math.min(O,Y,_,M),j=t.longitude,G=j+l*c,I=j+h*p,T=j+h*p+l*c;return{north:R,south:W,east:Math.max(j,G,I,T),west:Math.min(j,G,I,T),granYCos:g,granYSin:p,granXCos:c,granXSin:X,nwCorner:t}}c.computeOptions=function(t,a,r,s,l,h,u){let g=t.east,c=t.west,C=t.north,S=t.south,X=!1,f=!1;C===e.PI_OVER_TWO&&(X=!0),S===-e.PI_OVER_TWO&&(f=!0);let O,Y=C-S,_=Math.ceil((O=c>g?e.TWO_PI-c+g:g-c)/a)+1,M=Math.ceil(Y/a)+1,R=O/(_-1),W=Y/(M-1),j=n.northwest(t,h),G=n.center(t,d);(0!==r||0!==s)&&(G.longitude<j.longitude&&(G.longitude+=e.TWO_PI),w._ellipsoid=o.default,m=w.project(G,m));let I=n.clone(t,l),T={granYCos:W,granYSin:0,granXCos:R,granXSin:0,nwCorner:j,boundingRectangle:I,width:_,height:M,northCap:X,southCap:f};if(0!==r){let t=p(j,r,R,W,G,_,M);if(C=t.north,S=t.south,g=t.east,c=t.west,C<-e.PI_OVER_TWO||C>e.PI_OVER_TWO||S<-e.PI_OVER_TWO||S>e.PI_OVER_TWO)throw new i("Rotated rectangle is invalid.  It crosses over either the north or south pole.");T.granYCos=t.granYCos,T.granYSin=t.granYSin,T.granXCos=t.granXCos,T.granXSin=t.granXSin,I.north=C,I.south=S,I.east=g,I.west=c}if(0!==s){r-=s;let t=n.northwest(I,u),a=p(t,r,R,W,G,_,M);T.stGranYCos=a.granYCos,T.stGranXCos=a.granXCos,T.stGranYSin=a.granYSin,T.stGranXSin=a.granXSin,T.stNwCorner=t,T.stWest=a.west,T.stSouth=a.south}return T};var X=c;export{X as a};