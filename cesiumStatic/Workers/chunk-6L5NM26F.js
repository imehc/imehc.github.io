import{a as t,c as i}from"./chunk-ICY67TC6.js";import{a as e}from"./chunk-G2EMNOST.js";import{a as n}from"./chunk-4VFKVGYI.js";import{a as a,b as s}from"./chunk-3WJNS2B6.js";import{e as h}from"./chunk-XCN226AA.js";function l(t,i,e){if(0===t)return i*e;let n=t*t,a=n*n,s=a*n,h=s*n,l=h*n,d=l*n,o=Math.sin(2*e),u=Math.sin(4*e),r=Math.sin(6*e),c=Math.sin(8*e),_=Math.sin(10*e),g=Math.sin(12*e);return i*((1-n/4-3*a/64-5*s/256-175*h/16384-441*l/65536-4851*d/1048576)*e-(3*n/8+3*a/32+45*s/1024+105*h/4096+2205*l/131072+6237*d/524288)*o+(15*a/256+45*s/1024+525*h/16384+1575*l/65536+155925*d/8388608)*u-(35*s/3072+175*h/12288+3675*l/262144+13475*d/1048576)*r+(315*h/131072+2205*l/524288+43659*d/8388608)*c-(693*l/1310720+6237*d/5242880)*_+1001*d/8388608*g)}function d(t,i){if(0===t)return Math.log(Math.tan(.5*(n.PI_OVER_TWO+i)));let e=t*Math.sin(i);return Math.log(Math.tan(.5*(n.PI_OVER_TWO+i)))-t/2*Math.log((1+e)/(1-e))}var o=new e,u=new e;function r(i,a,h,r){var c,_,g,M;let f,p,m=e.normalize(r.cartographicToCartesian(a,u),o),P=e.normalize(r.cartographicToCartesian(h,u),u);s.typeOf.number.greaterThanOrEquals("value",Math.abs(Math.abs(e.angleBetween(m,P))-Math.PI),.0125);let O=r.maximumRadius,E=r.minimumRadius,I=O*O;i._ellipticitySquared=(I-E*E)/I,i._ellipticity=Math.sqrt(i._ellipticitySquared),i._start=t.clone(a,i._start),i._start.height=0,i._end=t.clone(h,i._end),i._end.height=0,c=a.longitude,_=a.latitude,g=h.longitude,M=h.latitude,f=d(i._ellipticity,_),p=d(i._ellipticity,M),i._heading=Math.atan2(n.negativePiToPi(g-c),p-f),i._distance=function(t,i,e,a,s,h,d){let o=t._heading,u=h-a,r=0;if(n.equalsEpsilon(Math.abs(o),n.PI_OVER_TWO,n.EPSILON8))if(i===e)r=i*Math.cos(s)*n.negativePiToPi(u);else{let e=Math.sin(s);r=i*Math.cos(s)*n.negativePiToPi(u)/Math.sqrt(1-t._ellipticitySquared*e*e)}else{let e=l(t._ellipticity,i,s);r=(l(t._ellipticity,i,d)-e)/Math.cos(o)}return Math.abs(r)}(i,r.maximumRadius,r.minimumRadius,a.longitude,a.latitude,h.longitude,h.latitude)}function c(i,e,a,s,o,u){if(0===a)return t.clone(i,u);let r=o*o,c,_,g;if(Math.abs(n.PI_OVER_TWO-Math.abs(e))>n.EPSILON8)if(_=function(t,i,e){let n=t/e;if(0===i)return n;let a=n*n,s=a*n,h=s*n,l=i*i,d=l*l,o=d*l,u=o*l,r=u*l,c=r*l,_=Math.sin(2*n),g=Math.cos(2*n),M=Math.sin(4*n),f=Math.cos(4*n),p=Math.sin(6*n),m=Math.cos(6*n),P=Math.sin(8*n),O=Math.cos(8*n),E=Math.sin(10*n),I=Math.cos(10*n),T=Math.sin(12*n);return n+n*l/4+7*n*d/64+15*n*o/256+579*n*u/16384+1515*n*r/65536+16837*n*c/1048576+(3*n*d/16+45*n*o/256-n*(32*a-561)*u/4096-n*(232*a-1677)*r/16384+n*(399985-90560*a+512*h)*c/5242880)*g+(21*n*o/256+483*n*u/4096-n*(224*a-1969)*r/16384-n*(33152*a-112599)*c/1048576)*f+(151*n*u/4096+4681*n*r/65536+1479*n*c/16384-453*s*c/32768)*m+(1097*n*r/65536+42783*n*c/1048576)*O+8011*n*c/1048576*I+(3*l/8+3*d/16+213*o/2048-3*a*o/64+255*u/4096-33*a*u/512+20861*r/524288-33*a*r/512+h*r/1024+28273*c/1048576-471*a*c/8192+9*h*c/4096)*_+(21*d/256+21*o/256+533*u/8192-21*a*u/512+197*r/4096-315*a*r/4096+584039*c/0x1000000-12517*a*c/131072+7*h*c/2048)*M+(151*o/6144+151*u/4096+5019*r/131072-453*a*r/16384+26965*c/786432-8607*a*c/131072)*p+(1097*u/131072+1097*r/65536+225797*c/0xa00000-1097*a*c/65536)*P+(8011*r/2621440+8011*c/1048576)*E+293393*c/0xf000000*T}(l(o,s,i.latitude)+a*Math.cos(e),o,s),Math.abs(e)<n.EPSILON10)c=n.negativePiToPi(i.longitude);else{let t=d(o,i.latitude);g=Math.tan(e)*(d(o,_)-t),c=n.negativePiToPi(i.longitude+g)}else{let t;if(_=i.latitude,0===o)t=s*Math.cos(i.latitude);else{let e=Math.sin(i.latitude);t=s*Math.cos(i.latitude)/Math.sqrt(1-r*e*e)}g=a/t,c=e>0?n.negativePiToPi(i.longitude+g):n.negativePiToPi(i.longitude-g)}return h(u)?(u.longitude=c,u.latitude=_,u.height=0,u):new t(c,_,0)}function _(e,n,a){let s=a??i.default;this._ellipsoid=s,this._start=new t,this._end=new t,this._heading=void 0,this._distance=void 0,this._ellipticity=void 0,this._ellipticitySquared=void 0,h(e)&&h(n)&&r(this,e,n,s)}Object.defineProperties(_.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return s.defined("distance",this._distance),this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},heading:{get:function(){return s.defined("distance",this._distance),this._heading}}}),_.fromStartHeadingDistance=function(t,e,a,l,d){s.defined("start",t),s.defined("heading",e),s.defined("distance",a),s.typeOf.number.greaterThan("distance",a,0);let o=l??i.default,u=o.maximumRadius,r=o.minimumRadius,g=u*u,M=Math.sqrt((g-r*r)/g),f=c(t,e=n.negativePiToPi(e),a,o.maximumRadius,M);return!h(d)||h(l)&&!l.equals(d.ellipsoid)?new _(t,f,o):(d.setEndPoints(t,f),d)},_.prototype.setEndPoints=function(t,i){s.defined("start",t),s.defined("end",i),r(this,t,i,this._ellipsoid)},_.prototype.interpolateUsingFraction=function(t,i){return this.interpolateUsingSurfaceDistance(t*this._distance,i)},_.prototype.interpolateUsingSurfaceDistance=function(t,i){if(s.typeOf.number("distance",t),!h(this._distance)||0===this._distance)throw new a("EllipsoidRhumbLine must have distinct start and end set.");return c(this._start,this._heading,t,this._ellipsoid.maximumRadius,this._ellipticity,i)},_.prototype.findIntersectionWithLongitude=function(i,e){if(s.typeOf.number("intersectionLongitude",i),!h(this._distance)||0===this._distance)throw new a("EllipsoidRhumbLine must have distinct start and end set.");let l=this._ellipticity,d=this._heading,o=Math.abs(d),u=this._start;if(i=n.negativePiToPi(i),n.equalsEpsilon(Math.abs(i),Math.PI,n.EPSILON14)&&(i=n.sign(u.longitude)*Math.PI),h(e)||(e=new t),Math.abs(n.PI_OVER_TWO-o)<=n.EPSILON8)return e.longitude=i,e.latitude=u.latitude,e.height=0,e;if(n.equalsEpsilon(Math.abs(n.PI_OVER_TWO-o),n.PI_OVER_TWO,n.EPSILON8))return n.equalsEpsilon(i,u.longitude,n.EPSILON12)?void 0:(e.longitude=i,e.latitude=n.PI_OVER_TWO*n.sign(n.PI_OVER_TWO-d),e.height=0,e);let r=u.latitude,c=l*Math.sin(r),_=Math.tan(.5*(n.PI_OVER_TWO+r))*Math.exp((i-u.longitude)/Math.tan(d)),g=(1+c)/(1-c),M=u.latitude,f;do{let t=l*Math.sin(f=M);M=2*Math.atan(_*Math.pow((1+t)/(1-t)/g,l/2))-n.PI_OVER_TWO}while(!n.equalsEpsilon(M,f,n.EPSILON12))return e.longitude=i,e.latitude=M,e.height=0,e},_.prototype.findIntersectionWithLatitude=function(i,e){if(s.typeOf.number("intersectionLatitude",i),!h(this._distance)||0===this._distance)throw new a("EllipsoidRhumbLine must have distinct start and end set.");let l=this._ellipticity,o=this._heading,u=this._start;if(n.equalsEpsilon(Math.abs(o),n.PI_OVER_TWO,n.EPSILON8))return;let r=d(l,u.latitude),c=Math.tan(o)*(d(l,i)-r),_=n.negativePiToPi(u.longitude+c);return h(e)?(e.longitude=_,e.latitude=i,e.height=0,e):new t(_,i,0)};var g=_;export{g as a};