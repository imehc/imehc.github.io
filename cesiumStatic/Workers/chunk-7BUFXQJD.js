import{a as t}from"./chunk-CNXDJ4X4.js";import{a as e}from"./chunk-MABAS5D2.js";import{a as o}from"./chunk-PXD6ATBI.js";import{a as n}from"./chunk-GSMLTRAL.js";import{a as r}from"./chunk-IUX576XK.js";import{b as a,c as i,d as s}from"./chunk-UIGT6VOJ.js";import{c as u}from"./chunk-XO2FNJZK.js";import{a as m}from"./chunk-KXT7EZPS.js";import{b as f}from"./chunk-KCR7AORG.js";import{a as p,c as c}from"./chunk-QDJTHWTA.js";import{a as l}from"./chunk-2YWR3G22.js";import{a as h}from"./chunk-HTSQLHXI.js";import{e as d}from"./chunk-JDAHMWM5.js";var b,A=new f,w=new p,g=new p,y=new p,_=new p;function v(t){let n=(t=t??c.EMPTY_OBJECT).length,r=t.topRadius,a=t.bottomRadius,i=t.vertexFormat??o.DEFAULT,s=t.slices??128;if(!d(n))throw new h("options.length must be defined.");if(!d(r))throw new h("options.topRadius must be defined.");if(!d(a))throw new h("options.bottomRadius must be defined.");if(s<3)throw new h("options.slices must be greater than or equal to 3.");if(d(t.offsetAttribute)&&t.offsetAttribute===e.TOP)throw new h("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");this._length=n,this._topRadius=r,this._bottomRadius=a,this._vertexFormat=o.clone(i),this._slices=s,this._offsetAttribute=t.offsetAttribute,this._workerName="createCylinderGeometry"}v.packedLength=o.packedLength+5,v.pack=function(t,e,n){if(!d(t))throw new h("value is required");if(!d(e))throw new h("array is required");return n=n??0,o.pack(t._vertexFormat,e,n),n+=o.packedLength,e[n++]=t._length,e[n++]=t._topRadius,e[n++]=t._bottomRadius,e[n++]=t._slices,e[n]=t._offsetAttribute??-1,e};var R=new o,T={vertexFormat:R,length:void 0,topRadius:void 0,bottomRadius:void 0,slices:void 0,offsetAttribute:void 0};v.unpack=function(t,e,n){if(!d(t))throw new h("array is required");e=e??0;let r=o.unpack(t,e,R);e+=o.packedLength;let a=t[e++],i=t[e++],s=t[e++],u=t[e++],m=t[e];return d(n)?(n._vertexFormat=o.clone(r,n._vertexFormat),n._length=a,n._topRadius=i,n._bottomRadius=s,n._slices=u,n._offsetAttribute=-1===m?void 0:m,n):(T.length=a,T.topRadius=i,T.bottomRadius=s,T.slices=u,T.offsetAttribute=-1===m?void 0:m,new v(T))},v.createGeometry=function(o){let c=o._length,h=o._topRadius,b=o._bottomRadius,v=o._vertexFormat,R=o._slices;if(c<=0||h<0||b<0||0===h&&0===b)return;let T=R+R,k=R+T,x=T+T,O=t.computePositions(c,h,b,R,!0),F=v.st?new Float32Array(2*x):void 0,L=v.normal?new Float32Array(3*x):void 0,D=v.tangent?new Float32Array(3*x):void 0,P=v.bitangent?new Float32Array(3*x):void 0,j,M=v.normal||v.tangent||v.bitangent;if(M){let t=v.tangent||v.bitangent,e=0,o=0,n=0,r=Math.atan2(b-h,c);w.z=Math.sin(r);let a=Math.cos(r),i=y,s=g;for(j=0;j<R;j++){let r=j/R*l.TWO_PI,u=a*Math.cos(r),m=a*Math.sin(r);M&&(w.x=u,w.y=m,t&&(i=p.normalize(p.cross(p.UNIT_Z,w,i),i)),v.normal&&(L[e++]=w.x,L[e++]=w.y,L[e++]=w.z,L[e++]=w.x,L[e++]=w.y,L[e++]=w.z),v.tangent&&(D[o++]=i.x,D[o++]=i.y,D[o++]=i.z,D[o++]=i.x,D[o++]=i.y,D[o++]=i.z),v.bitangent&&(s=p.normalize(p.cross(w,i,s),s),P[n++]=s.x,P[n++]=s.y,P[n++]=s.z,P[n++]=s.x,P[n++]=s.y,P[n++]=s.z))}for(j=0;j<R;j++)v.normal&&(L[e++]=0,L[e++]=0,L[e++]=-1),v.tangent&&(D[o++]=1,D[o++]=0,D[o++]=0),v.bitangent&&(P[n++]=0,P[n++]=-1,P[n++]=0);for(j=0;j<R;j++)v.normal&&(L[e++]=0,L[e++]=0,L[e++]=1),v.tangent&&(D[o++]=1,D[o++]=0,D[o++]=0),v.bitangent&&(P[n++]=0,P[n++]=1,P[n++]=0)}let N=n.createTypedArray(x,12*R-12),E=0,G=0;for(j=0;j<R-1;j++)N[E++]=G,N[E++]=G+2,N[E++]=G+3,N[E++]=G,N[E++]=G+3,N[E++]=G+1,G+=2;for(N[E++]=T-2,N[E++]=0,N[E++]=1,N[E++]=T-2,N[E++]=1,N[E++]=T-1,j=1;j<R-1;j++)N[E++]=T+j+1,N[E++]=T+j,N[E++]=T;for(j=1;j<R-1;j++)N[E++]=k,N[E++]=k+j,N[E++]=k+j+1;let I=0;if(v.st){let t=Math.max(h,b);for(j=0;j<x;j++){let e=p.fromArray(O,3*j,_);F[I++]=(e.x+t)/(2*t),F[I++]=(e.y+t)/(2*t)}}let z=new r;v.position&&(z.position=new s({componentDatatype:m.DOUBLE,componentsPerAttribute:3,values:O})),v.normal&&(z.normal=new s({componentDatatype:m.FLOAT,componentsPerAttribute:3,values:L})),v.tangent&&(z.tangent=new s({componentDatatype:m.FLOAT,componentsPerAttribute:3,values:D})),v.bitangent&&(z.bitangent=new s({componentDatatype:m.FLOAT,componentsPerAttribute:3,values:P})),v.st&&(z.st=new s({componentDatatype:m.FLOAT,componentsPerAttribute:2,values:F})),A.x=.5*c,A.y=Math.max(b,h);let S=new u(p.ZERO,f.magnitude(A));if(d(o._offsetAttribute)){c=O.length;let t=+(o._offsetAttribute!==e.NONE),n=new Uint8Array(c/3).fill(t);z.applyOffset=new s({componentDatatype:m.UNSIGNED_BYTE,componentsPerAttribute:1,values:n})}return new i({attributes:z,indices:N,primitiveType:a.TRIANGLES,boundingSphere:S,offsetAttribute:o._offsetAttribute})},v.getUnitCylinder=function(){return d(b)||(b=v.createGeometry(new v({topRadius:1,bottomRadius:1,length:1,vertexFormat:o.POSITION_ONLY}))),b};var k=v;export{k as a};