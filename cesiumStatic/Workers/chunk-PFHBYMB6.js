import{a as t}from"./chunk-ONEFQVVP.js";import{a as e}from"./chunk-IBQZCWHF.js";import{a as o}from"./chunk-ZXZD7KWX.js";import{a as n}from"./chunk-KSX6TRAS.js";import{a as r}from"./chunk-GMTHOMGW.js";import{b as a,c as i,d as s}from"./chunk-BELR52CD.js";import{c as u}from"./chunk-BNHFHP3L.js";import{a as m}from"./chunk-N6BI774S.js";import{b as f}from"./chunk-ICY67TC6.js";import{a as p,c as c}from"./chunk-G2EMNOST.js";import{a as l}from"./chunk-4VFKVGYI.js";import{a as h}from"./chunk-3WJNS2B6.js";import{e as d}from"./chunk-XCN226AA.js";var b,w=new f,A=new p,g=new p,y=new p,_=new p;function v(t){let n=(t=t??c.EMPTY_OBJECT).length,r=t.topRadius,a=t.bottomRadius,i=t.vertexFormat??o.DEFAULT,s=t.slices??128;if(!d(n))throw new h("options.length must be defined.");if(!d(r))throw new h("options.topRadius must be defined.");if(!d(a))throw new h("options.bottomRadius must be defined.");if(s<3)throw new h("options.slices must be greater than or equal to 3.");if(d(t.offsetAttribute)&&t.offsetAttribute===e.TOP)throw new h("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");this._length=n,this._topRadius=r,this._bottomRadius=a,this._vertexFormat=o.clone(i),this._slices=s,this._offsetAttribute=t.offsetAttribute,this._workerName="createCylinderGeometry"}v.packedLength=o.packedLength+5,v.pack=function(t,e,n){if(!d(t))throw new h("value is required");if(!d(e))throw new h("array is required");return n=n??0,o.pack(t._vertexFormat,e,n),n+=o.packedLength,e[n++]=t._length,e[n++]=t._topRadius,e[n++]=t._bottomRadius,e[n++]=t._slices,e[n]=t._offsetAttribute??-1,e};var k=new o,R={vertexFormat:k,length:void 0,topRadius:void 0,bottomRadius:void 0,slices:void 0,offsetAttribute:void 0};v.unpack=function(t,e,n){if(!d(t))throw new h("array is required");e=e??0;let r=o.unpack(t,e,k);e+=o.packedLength;let a=t[e++],i=t[e++],s=t[e++],u=t[e++],m=t[e];return d(n)?(n._vertexFormat=o.clone(r,n._vertexFormat),n._length=a,n._topRadius=i,n._bottomRadius=s,n._slices=u,n._offsetAttribute=-1===m?void 0:m,n):(R.length=a,R.topRadius=i,R.bottomRadius=s,R.slices=u,R.offsetAttribute=-1===m?void 0:m,new v(R))},v.createGeometry=function(o){let c=o._length,h=o._topRadius,b=o._bottomRadius,v=o._vertexFormat,k=o._slices;if(c<=0||h<0||b<0||0===h&&0===b)return;let R=k+k,F=k+R,x=R+R,T=t.computePositions(c,h,b,k,!0),O=v.st?new Float32Array(2*x):void 0,N=v.normal?new Float32Array(3*x):void 0,L=v.tangent?new Float32Array(3*x):void 0,P=v.bitangent?new Float32Array(3*x):void 0,j,E=v.normal||v.tangent||v.bitangent;if(E){let t=v.tangent||v.bitangent,e=0,o=0,n=0,r=Math.atan2(b-h,c);A.z=Math.sin(r);let a=Math.cos(r),i=y,s=g;for(j=0;j<k;j++){let r=j/k*l.TWO_PI,u=a*Math.cos(r),m=a*Math.sin(r);E&&(A.x=u,A.y=m,t&&(i=p.normalize(p.cross(p.UNIT_Z,A,i),i)),v.normal&&(N[e++]=A.x,N[e++]=A.y,N[e++]=A.z,N[e++]=A.x,N[e++]=A.y,N[e++]=A.z),v.tangent&&(L[o++]=i.x,L[o++]=i.y,L[o++]=i.z,L[o++]=i.x,L[o++]=i.y,L[o++]=i.z),v.bitangent&&(s=p.normalize(p.cross(A,i,s),s),P[n++]=s.x,P[n++]=s.y,P[n++]=s.z,P[n++]=s.x,P[n++]=s.y,P[n++]=s.z))}for(j=0;j<k;j++)v.normal&&(N[e++]=0,N[e++]=0,N[e++]=-1),v.tangent&&(L[o++]=1,L[o++]=0,L[o++]=0),v.bitangent&&(P[n++]=0,P[n++]=-1,P[n++]=0);for(j=0;j<k;j++)v.normal&&(N[e++]=0,N[e++]=0,N[e++]=1),v.tangent&&(L[o++]=1,L[o++]=0,L[o++]=0),v.bitangent&&(P[n++]=0,P[n++]=1,P[n++]=0)}let D=n.createTypedArray(x,12*k-12),M=0,G=0;for(j=0;j<k-1;j++)D[M++]=G,D[M++]=G+2,D[M++]=G+3,D[M++]=G,D[M++]=G+3,D[M++]=G+1,G+=2;for(D[M++]=R-2,D[M++]=0,D[M++]=1,D[M++]=R-2,D[M++]=1,D[M++]=R-1,j=1;j<k-1;j++)D[M++]=R+j+1,D[M++]=R+j,D[M++]=R;for(j=1;j<k-1;j++)D[M++]=F,D[M++]=F+j,D[M++]=F+j+1;let I=0;if(v.st){let t=Math.max(h,b);for(j=0;j<x;j++){let e=p.fromArray(T,3*j,_);O[I++]=(e.x+t)/(2*t),O[I++]=(e.y+t)/(2*t)}}let z=new r;v.position&&(z.position=new s({componentDatatype:m.DOUBLE,componentsPerAttribute:3,values:T})),v.normal&&(z.normal=new s({componentDatatype:m.FLOAT,componentsPerAttribute:3,values:N})),v.tangent&&(z.tangent=new s({componentDatatype:m.FLOAT,componentsPerAttribute:3,values:L})),v.bitangent&&(z.bitangent=new s({componentDatatype:m.FLOAT,componentsPerAttribute:3,values:P})),v.st&&(z.st=new s({componentDatatype:m.FLOAT,componentsPerAttribute:2,values:O})),w.x=.5*c,w.y=Math.max(b,h);let S=new u(p.ZERO,f.magnitude(w));if(d(o._offsetAttribute)){c=T.length;let t=+(o._offsetAttribute!==e.NONE),n=new Uint8Array(c/3).fill(t);z.applyOffset=new s({componentDatatype:m.UNSIGNED_BYTE,componentsPerAttribute:1,values:n})}return new i({attributes:z,indices:D,primitiveType:a.TRIANGLES,boundingSphere:S,offsetAttribute:o._offsetAttribute})},v.getUnitCylinder=function(){return d(b)||(b=v.createGeometry(new v({topRadius:1,bottomRadius:1,length:1,vertexFormat:o.POSITION_ONLY}))),b};var F=v;export{F as a};