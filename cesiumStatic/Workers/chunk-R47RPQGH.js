import{a as t}from"./chunk-BNHFHP3L.js";import{j as n,k as a}from"./chunk-4NDD6KRQ.js";import{a as r,c as o}from"./chunk-ICY67TC6.js";import{a as s}from"./chunk-G2EMNOST.js";import{a as e}from"./chunk-4VFKVGYI.js";import{a as i}from"./chunk-3WJNS2B6.js";import{e as l}from"./chunk-XCN226AA.js";var h=Math.cos,u=Math.sin,g=Math.sqrt,c={};c.computePosition=function(t,n,a,r,o,s,e){let i=n.radiiSquared,c=t.nwCorner,C=t.boundingRectangle,S=c.latitude-t.granYCos*r+o*t.granXSin,d=h(S),m=u(S),w=i.z*m,p=c.longitude+r*t.granYSin+o*t.granXCos,Y=d*h(p),f=d*u(p),X=i.x*Y,O=i.y*f,_=g(X*Y+O*f+w*m);if(s.x=X/_,s.y=O/_,s.z=w/_,a){let n=t.stNwCorner;l(n)?(S=n.latitude-t.stGranYCos*r+o*t.stGranXSin,e.x=((p=n.longitude+r*t.stGranYSin+o*t.stGranXCos)-t.stWest)*t.lonScalar,e.y=(S-t.stSouth)*t.latScalar):(e.x=(p-C.west)*t.lonScalar,e.y=(S-C.south)*t.latScalar)}};var C=new a,S=new s,d=new r,m=new s,w=new t;function p(t,n,r,e,i,l,h){let u=Math.cos(n),g=e*u,c=r*u,d=Math.sin(n),p=e*d,Y=r*d;w._ellipsoid=o.default,S=w.project(t,S),S=s.subtract(S,m,S);let f=a.fromRotation(n,C);S=a.multiplyByVector(f,S,S),S=s.add(S,m,S),t=w.unproject(S,t),l-=1,h-=1;let X=t.latitude,O=X+l*Y,_=X-g*h,M=X-g*h+l*Y,j=Math.max(X,O,_,M),I=Math.min(X,O,_,M),R=t.longitude,W=R+l*c,G=R+h*p,P=R+h*p+l*c;return{north:j,south:I,east:Math.max(R,W,G,P),west:Math.min(R,W,G,P),granYCos:g,granYSin:p,granXCos:c,granXSin:Y,nwCorner:t}}c.computeOptions=function(t,a,r,s,l,h,u){let g=t.east,c=t.west,C=t.north,S=t.south,Y=!1,f=!1;C===e.PI_OVER_TWO&&(Y=!0),S===-e.PI_OVER_TWO&&(f=!0);let X,O=C-S,_=Math.ceil((X=c>g?e.TWO_PI-c+g:g-c)/a)+1,M=Math.ceil(O/a)+1,j=X/(_-1),I=O/(M-1),R=n.northwest(t,h),W=n.center(t,d);(0!==r||0!==s)&&(W.longitude<R.longitude&&(W.longitude+=e.TWO_PI),w._ellipsoid=o.default,m=w.project(W,m));let G=n.clone(t,l),P={granYCos:I,granYSin:0,granXCos:j,granXSin:0,nwCorner:R,boundingRectangle:G,width:_,height:M,northCap:Y,southCap:f};if(0!==r){let t=p(R,r,j,I,W,_,M);if(C=t.north,S=t.south,g=t.east,c=t.west,C<-e.PI_OVER_TWO||C>e.PI_OVER_TWO||S<-e.PI_OVER_TWO||S>e.PI_OVER_TWO)throw new i("Rotated rectangle is invalid.  It crosses over either the north or south pole.");P.granYCos=t.granYCos,P.granYSin=t.granYSin,P.granXCos=t.granXCos,P.granXSin=t.granXSin,G.north=C,G.south=S,G.east=g,G.west=c}if(0!==s){r-=s;let t=n.northwest(G,u),a=p(t,r,j,I,W,_,M);P.stGranYCos=a.granYCos,P.stGranXCos=a.granXCos,P.stGranYSin=a.granYSin,P.stGranXSin=a.granXSin,P.stNwCorner=t,P.stWest=a.west,P.stSouth=a.south}return P};var Y=c;export{Y as a};