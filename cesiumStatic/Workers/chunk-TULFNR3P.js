import{a as t,c as a}from"./chunk-KCR7AORG.js";import{a as i}from"./chunk-QDJTHWTA.js";import{a as n}from"./chunk-2YWR3G22.js";import{b as e}from"./chunk-HTSQLHXI.js";import{e as s}from"./chunk-JDAHMWM5.js";function h(t,a,i,n,e,s,h){let r=t*i*(4+t*(4-3*i))/16;return(1-r)*t*a*(n+r*e*(h+r*s*(2*h*h-1)))}var r=new i,o=new i;function d(a,s,d,c){let u,l,M,_,g,p,f,m,H,v,O,q,A,S,b,R,U,w,T,j,k,y,D,P,I=i.normalize(c.cartographicToCartesian(s,o),r),W=i.normalize(c.cartographicToCartesian(d,o),o);e.typeOf.number.greaterThanOrEquals("value",Math.abs(Math.abs(i.angleBetween(I,W))-Math.PI),.0125),function(t,a,i,e,s,r,o){let d=(a-i)/a,c=r-e,u=Math.atan((1-d)*Math.tan(s)),l=Math.atan((1-d)*Math.tan(o)),M=Math.cos(u),_=Math.sin(u),g=Math.cos(l),p=Math.sin(l),f=M*g,m=M*p,H=_*p,v=_*g,O=c,q=n.TWO_PI,A=Math.cos(O),S=Math.sin(O),b,R,U,w,T;do{let t;A=Math.cos(O),S=Math.sin(O);let a=m-v*A;b=Math.atan2(U=Math.sqrt(g*g*S*S+a*a),R=H+f*A),0===U?(t=0,w=1):w=1-(t=f*S/U)*t,q=O,isFinite(T=R-2*H/w)||(T=0),O=c+h(d,t,w,b,U,R,T)}while(Math.abs(O-q)>n.EPSILON12)let j=w*(a*a-i*i)/(i*i),k=1+j*(4096+j*(j*(320-175*j)-768))/16384,y=j*(256+j*(j*(74-47*j)-128))/1024,D=T*T,P=Math.atan2(g*S,m-v*A),I=Math.atan2(M*S,m*A-v);t._distance=i*k*(b-y*U*(T+y*(R*(2*D-1)-y*T*(4*U*U-3)*(4*D-3)/6)/4)),t._startHeading=P,t._endHeading=I,t._uSquared=j}(a,c.maximumRadius,c.minimumRadius,s.longitude,s.latitude,d.longitude,d.latitude),a._start=t.clone(s,a._start),a._end=t.clone(d,a._end),a._start.height=0,a._end.height=0,u=a._uSquared,_=((l=a._ellipsoid.maximumRadius)-(M=a._ellipsoid.minimumRadius))/l,g=Math.cos(a._startHeading),p=Math.sin(a._startHeading),H=(m=1/Math.sqrt(1+(f=(1-_)*Math.tan(a._start.latitude))*f))*f,v=Math.atan2(f,g),S=Math.sqrt(A=1-(q=(O=m*p)*O)),U=(R=(b=u/4)*b)*b,w=R*R,T=1+b-3*R/4+5*U/4-175*w/64,j=1-b+15*R/8-35*U/8,k=1-3*b+35*R/4,y=1-5*b,D=T*v-j*Math.sin(2*v)*b/2-k*Math.sin(4*v)*R/16-y*Math.sin(6*v)*U/48-5*Math.sin(8*v)*w/512,(P=a._constants).a=l,P.b=M,P.f=_,P.cosineHeading=g,P.sineHeading=p,P.tanU=f,P.cosineU=m,P.sineU=H,P.sigma=v,P.sineAlpha=O,P.sineSquaredAlpha=q,P.cosineSquaredAlpha=A,P.cosineAlpha=S,P.u2Over4=b,P.u4Over16=R,P.u6Over64=U,P.u8Over256=w,P.a0=T,P.a1=j,P.a2=k,P.a3=y,P.distanceRatio=D}function c(i,n,e){let h=e??a.default;this._ellipsoid=h,this._start=new t,this._end=new t,this._constants={},this._startHeading=void 0,this._endHeading=void 0,this._distance=void 0,this._uSquared=void 0,s(i)&&s(n)&&d(this,i,n,h)}Object.defineProperties(c.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return e.defined("distance",this._distance),this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},startHeading:{get:function(){return e.defined("distance",this._distance),this._startHeading}},endHeading:{get:function(){return e.defined("distance",this._distance),this._endHeading}}}),c.prototype.setEndPoints=function(t,a){e.defined("start",t),e.defined("end",a),d(this,t,a,this._ellipsoid)},c.prototype.interpolateUsingFraction=function(t,a){return this.interpolateUsingSurfaceDistance(this._distance*t,a)},c.prototype.interpolateUsingSurfaceDistance=function(a,i){e.defined("distance",this._distance);let n=this._constants,r=n.distanceRatio+a/n.b,o=Math.cos(2*r),d=Math.cos(4*r),c=Math.cos(6*r),u=Math.sin(2*r),l=Math.sin(4*r),M=Math.sin(6*r),_=Math.sin(8*r),g=r*r,p=n.u8Over256,f=n.u2Over4,m=n.u6Over64,H=n.u4Over16,v=r*g*2*p*o/3+r*(1-f+7*H/4-15*m/4+579*p/64-(H-15*m/4+187*p/16)*o-(5*m/4-115*p/16)*d-29*p*c/16)+(f/2-H+71*m/32-85*p/16)*u+(5*H/16-5*m/4+383*p/96)*l-g*((m-11*p/2)*u+5*p*l/2)+(29*m/96-29*p/16)*M+539*p*_/1536,O=Math.asin(Math.sin(v)*n.cosineAlpha),q=Math.atan(n.a/n.b*Math.tan(O));v-=n.sigma;let A=Math.cos(2*n.sigma+v),S=Math.sin(v),b=Math.cos(v),R=n.cosineU*b,U=n.sineU*S,w=Math.atan2(S*n.sineHeading,R-U*n.cosineHeading)-h(n.f,n.sineAlpha,n.cosineSquaredAlpha,v,S,b,A);return s(i)?(i.longitude=this._start.longitude+w,i.latitude=q,i.height=0,i):new t(this._start.longitude+w,q,0)};var u=c;export{u as a};